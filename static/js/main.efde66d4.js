/*! For license information please see main.efde66d4.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),a=n(43),i=n(950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}var o=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),f=Symbol.for("react.consumer"),g=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),y=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var w=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function S(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var _=Symbol.for("react.client.reference");function C(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===_?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case u:return"Fragment";case d:return"Portal";case m:return"Profiler";case h:return"StrictMode";case v:return"Suspense";case b:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case g:return(e.displayName||"Context")+".Provider";case f:return(e._context.displayName||"Context")+".Consumer";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:C(e.type)||"Memo";case y:t=e._payload,e=e._init;try{return C(e(t))}catch(n){}}return null}var z,T,A=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,E=Object.assign;function D(e){if(void 0===z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||"",T=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+z+e+T}var B=!1;function R(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(a){var r=a}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(l){if(l&&r&&"string"===typeof l.stack)return[l.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),s=i[0],l=i[1];if(s&&l){var o=s.split("\n"),c=l.split("\n");for(a=r=0;r<o.length&&!o[r].includes("DetermineComponentFrameRoot");)r++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(r===o.length||a===c.length)for(r=o.length-1,a=c.length-1;1<=r&&0<=a&&o[r]!==c[a];)a--;for(;1<=r&&0<=a;r--,a--)if(o[r]!==c[a]){if(1!==r||1!==a)do{if(r--,0>--a||o[r]!==c[a]){var d="\n"+o[r].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=r&&0<=a);break}}}finally{B=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?D(n):""}function F(e){switch(e.tag){case 26:case 27:case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 15:return e=R(e.type,!1);case 11:return e=R(e.type.render,!1);case 1:return e=R(e.type,!0);default:return""}}function L(e){try{var t="";do{t+=F(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function P(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function O(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function I(e){if(P(e)!==e)throw Error(s(188))}function $(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=$(e)))return t;e=e.sibling}return null}var W=Array.isArray,M=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},U=[],V=-1;function q(e){return{current:e}}function G(e){0>V||(e.current=U[V],U[V]=null,V--)}function H(e,t){V++,U[V]=e.current,e.current=t}var J=q(null),Z=q(null),Y=q(null),Q=q(null);function X(e,t){switch(H(Y,t),H(Z,e),H(J,null),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?Zd(t):0;break;default:if(t=(e=8===e?t.parentNode:t).tagName,e=e.namespaceURI)t=Yd(e=Zd(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}G(J),H(J,t)}function ee(){G(J),G(Z),G(Y)}function te(e){null!==e.memoizedState&&H(Q,e);var t=J.current,n=Yd(t,e.type);t!==n&&(H(Z,e),H(J,n))}function ne(e){Z.current===e&&(G(J),G(Z)),Q.current===e&&(G(Q),Lu._currentValue=K)}var re=Object.prototype.hasOwnProperty,ae=r.unstable_scheduleCallback,ie=r.unstable_cancelCallback,se=r.unstable_shouldYield,le=r.unstable_requestPaint,oe=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,de=r.unstable_ImmediatePriority,ue=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,me=r.unstable_LowPriority,pe=r.unstable_IdlePriority,fe=r.log,ge=r.unstable_setDisableYieldValue,xe=null,ve=null;function be(e){if("function"===typeof fe&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(xe,e)}catch(t){}}var je=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ye(e)/ke|0)|0},ye=Math.log,ke=Math.LN2;var we=128,Ne=4194304;function Se(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _e(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,s=e.warmLanes;e=0!==e.finishedLanes;var l=134217727&n;return 0!==l?0!==(n=l&~a)?r=Se(n):0!==(i&=l)?r=Se(i):e||0!==(s=l&~s)&&(r=Se(s)):0!==(l=n&~a)?r=Se(l):0!==i?r=Se(i):e||0!==(s=n&~s)&&(r=Se(s)),0===r?0:0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(s=t&-t)||32===a&&0!==(4194176&s))?t:r}function Ce(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function ze(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Te(){var e=we;return 0===(4194176&(we<<=1))&&(we=128),e}function Ae(){var e=Ne;return 0===(62914560&(Ne<<=1))&&(Ne=4194304),e}function Ee(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function De(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Be(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-je(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194218&n}function Re(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-je(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}function Fe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Le(){var e=M.p;return 0!==e?e:void 0===(e=window.event)?32:Yu(e.type)}var Pe=Math.random().toString(36).slice(2),Oe="__reactFiber$"+Pe,Ie="__reactProps$"+Pe,$e="__reactContainer$"+Pe,We="__reactEvents$"+Pe,Me="__reactListeners$"+Pe,Ke="__reactHandles$"+Pe,Ue="__reactResources$"+Pe,Ve="__reactMarker$"+Pe;function qe(e){delete e[Oe],delete e[Ie],delete e[We],delete e[Me],delete e[Ke]}function Ge(e){var t=e[Oe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[$e]||n[Oe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ou(e);null!==e;){if(n=e[Oe])return n;e=ou(e)}return t}n=(e=n).parentNode}return null}function He(e){if(e=e[Oe]||e[$e]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Je(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function Ze(e){var t=e[Ue];return t||(t=e[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ye(e){e[Ve]=!0}var Qe=new Set,Xe={};function et(e,t){tt(e,t),tt(e+"Capture",t)}function tt(e,t){for(Xe[e]=t,e=0;e<t.length;e++)Qe.add(t[e])}var nt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),at={},it={};function st(e,t,n){if(a=t,re.call(it,a)||!re.call(at,a)&&(rt.test(a)?it[a]=!0:(at[a]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var a}function lt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ot(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ut(e){e._valueTracker||(e._valueTracker=function(e){var t=dt(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=dt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function ft(e){return e.replace(pt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function gt(e,t,n,r,a,i,s,l){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?vt(e,s,ct(t)):null!=n?vt(e,s,ct(n)):null!=r&&e.removeAttribute("value"),null==a&&null!=i&&(e.defaultChecked=!!i),null!=a&&(e.checked=a&&"function"!==typeof a&&"symbol"!==typeof a),null!=l&&"function"!==typeof l&&"symbol"!==typeof l&&"boolean"!==typeof l?e.name=""+ct(l):e.removeAttribute("name")}function xt(e,t,n,r,a,i,s,l){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:a)&&"symbol"!==typeof r&&!!r,e.checked=l?e.checked:!!r,e.defaultChecked=!!r,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s)}function vt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function jt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function yt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(s(92));if(W(r)){if(1<r.length)throw Error(s(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var wt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||wt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function St(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&Nt(e,a,r)}else for(var i in t)t.hasOwnProperty(i)&&Nt(e,i,t[i])}function _t(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tt(e){return zt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var At=null;function Et(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Dt=null,Bt=null;function Rt(e){var t=He(e);if(t&&(e=t.stateNode)){var n=e[Ie]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ft(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[Ie]||null;if(!a)throw Error(s(90));gt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":jt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Ft=!1;function Lt(e,t,n){if(Ft)return e(t,n);Ft=!0;try{return e(t)}finally{if(Ft=!1,(null!==Dt||null!==Bt)&&(Oc(),Dt&&(t=Dt,e=Bt,Bt=Dt=null,Rt(t),e)))for(t=0;t<e.length;t++)Rt(e[t])}}function Pt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Ie]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ot=!1;if(nt)try{var It={};Object.defineProperty(It,"passive",{get:function(){Ot=!0}}),window.addEventListener("test",It,It),window.removeEventListener("test",It,It)}catch(yh){Ot=!1}var $t=null,Wt=null,Mt=null;function Kt(){if(Mt)return Mt;var e,t,n=Wt,r=n.length,a="value"in $t?$t.value:$t.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===a[i-t];t++);return Mt=a.slice(e,1<t?1-t:void 0)}function Ut(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Vt(){return!0}function qt(){return!1}function Gt(e){function t(t,n,r,a,i){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Vt:qt,this.isPropagationStopped=qt,this}return E(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Vt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Vt)},persist:function(){},isPersistent:Vt}),t}var Ht,Jt,Zt,Yt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qt=Gt(Yt),Xt=E({},Yt,{view:0,detail:0}),en=Gt(Xt),tn=E({},Xt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zt&&(Zt&&"mousemove"===e.type?(Ht=e.screenX-Zt.screenX,Jt=e.screenY-Zt.screenY):Jt=Ht=0,Zt=e),Ht)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),nn=Gt(tn),rn=Gt(E({},tn,{dataTransfer:0})),an=Gt(E({},Xt,{relatedTarget:0})),sn=Gt(E({},Yt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Gt(E({},Yt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),on=Gt(E({},Yt,{data:0})),cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},un={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=un[e])&&!!t[e]}function mn(){return hn}var pn=Gt(E({},Xt,{key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ut(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mn,charCode:function(e){return"keypress"===e.type?Ut(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ut(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),fn=Gt(E({},tn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gn=Gt(E({},Xt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mn})),xn=Gt(E({},Yt,{propertyName:0,elapsedTime:0,pseudoElement:0})),vn=Gt(E({},tn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bn=Gt(E({},Yt,{newState:0,oldState:0})),jn=[9,13,27,32],yn=nt&&"CompositionEvent"in window,kn=null;nt&&"documentMode"in document&&(kn=document.documentMode);var wn=nt&&"TextEvent"in window&&!kn,Nn=nt&&(!yn||kn&&8<kn&&11>=kn),Sn=String.fromCharCode(32),_n=!1;function Cn(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Tn=!1;var An={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function En(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!An[e.type]:"textarea"===t}function Dn(e,t,n,r){Dt?Bt?Bt.push(r):Bt=[r]:Dt=r,0<(t=Ld(t,"onChange")).length&&(n=new Qt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Bn=null,Rn=null;function Fn(e){zd(e,0)}function Ln(e){if(ht(Je(e)))return e}function Pn(e,t){if("change"===e)return t}var On=!1;if(nt){var In;if(nt){var $n="oninput"in document;if(!$n){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),$n="function"===typeof Wn.oninput}In=$n}else In=!1;On=In&&(!document.documentMode||9<document.documentMode)}function Mn(){Bn&&(Bn.detachEvent("onpropertychange",Kn),Rn=Bn=null)}function Kn(e){if("value"===e.propertyName&&Ln(Rn)){var t=[];Dn(t,Rn,e,Et(e)),Lt(Fn,t)}}function Un(e,t,n){"focusin"===e?(Mn(),Rn=n,(Bn=t).attachEvent("onpropertychange",Kn)):"focusout"===e&&Mn()}function Vn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ln(Rn)}function qn(e,t){if("click"===e)return Ln(t)}function Gn(e,t){if("input"===e||"change"===e)return Ln(t)}var Hn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Jn(e,t){if(Hn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!re.call(t,a)||!Hn(e[a],t[a]))return!1}return!0}function Zn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yn(e,t){var n,r=Zn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zn(r)}}function Qn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Qn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Xn(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function er(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function tr(e,t){var n=Xn(t);t=e.focusedElem;var r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&Qn(t.ownerDocument.documentElement,t)){if(null!==r&&er(t))if(e=r.start,void 0===(n=r.end)&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if((n=(e=t.ownerDocument||document)&&e.defaultView||window).getSelection){n=n.getSelection();var a=t.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!n.extend&&i>r&&(a=r,r=i,i=a),a=Yn(t,i);var s=Yn(t,r);a&&s&&(1!==n.rangeCount||n.anchorNode!==a.node||n.anchorOffset!==a.offset||n.focusNode!==s.node||n.focusOffset!==s.offset)&&((e=e.createRange()).setStart(a.node,a.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),n.addRange(e)))}for(e=[],n=t;n=n.parentNode;)1===n.nodeType&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<e.length;t++)(n=e[t]).element.scrollLeft=n.left,n.element.scrollTop=n.top}}var nr=nt&&"documentMode"in document&&11>=document.documentMode,rr=null,ar=null,ir=null,sr=!1;function lr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;sr||null==rr||rr!==mt(r)||("selectionStart"in(r=rr)&&er(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ir&&Jn(ir,r)||(ir=r,0<(r=Ld(ar,"onSelect")).length&&(t=new Qt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function or(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:or("Animation","AnimationEnd"),animationiteration:or("Animation","AnimationIteration"),animationstart:or("Animation","AnimationStart"),transitionrun:or("Transition","TransitionRun"),transitionstart:or("Transition","TransitionStart"),transitioncancel:or("Transition","TransitionCancel"),transitionend:or("Transition","TransitionEnd")},dr={},ur={};function hr(e){if(dr[e])return dr[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in ur)return dr[e]=n[t];return e}nt&&(ur=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var mr=hr("animationend"),pr=hr("animationiteration"),fr=hr("animationstart"),gr=hr("transitionrun"),xr=hr("transitionstart"),vr=hr("transitioncancel"),br=hr("transitionend"),jr=new Map,yr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function kr(e,t){jr.set(e,t),et(t,[e])}var wr=[],Nr=0,Sr=0;function _r(){for(var e=Nr,t=Sr=Nr=0;t<e;){var n=wr[t];wr[t++]=null;var r=wr[t];wr[t++]=null;var a=wr[t];wr[t++]=null;var i=wr[t];if(wr[t++]=null,null!==r&&null!==a){var s=r.pending;null===s?a.next=a:(a.next=s.next,s.next=a),r.pending=a}0!==i&&Ar(n,a,i)}}function Cr(e,t,n,r){wr[Nr++]=e,wr[Nr++]=t,wr[Nr++]=n,wr[Nr++]=r,Sr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function zr(e,t,n,r){return Cr(e,t,n,r),Er(e)}function Tr(e,t){return Cr(e,null,null,t),Er(e)}function Ar(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var a=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(a=!0)),e=i,i=i.return;a&&null!==t&&3===e.tag&&(i=e.stateNode,a=31-je(n),null===(e=(i=i.hiddenUpdates)[a])?i[a]=[t]:e.push(t),t.lane=536870912|n)}function Er(e){if(50<zc)throw zc=0,Tc=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Dr={},Br=new WeakMap;function Rr(e,t){if("object"===typeof e&&null!==e){var n=Br.get(e);return void 0!==n?n:(t={value:e,source:t,stack:L(t)},Br.set(e,t),t)}return{value:e,source:t,stack:L(t)}}var Fr=[],Lr=0,Pr=null,Or=0,Ir=[],$r=0,Wr=null,Mr=1,Kr="";function Ur(e,t){Fr[Lr++]=Or,Fr[Lr++]=Pr,Pr=e,Or=t}function Vr(e,t,n){Ir[$r++]=Mr,Ir[$r++]=Kr,Ir[$r++]=Wr,Wr=e;var r=Mr;e=Kr;var a=32-je(r)-1;r&=~(1<<a),n+=1;var i=32-je(t)+a;if(30<i){var s=a-a%5;i=(r&(1<<s)-1).toString(32),r>>=s,a-=s,Mr=1<<32-je(t)+a|n<<a|r,Kr=i+e}else Mr=1<<i|n<<a|r,Kr=e}function qr(e){null!==e.return&&(Ur(e,1),Vr(e,1,0))}function Gr(e){for(;e===Pr;)Pr=Fr[--Lr],Fr[Lr]=null,Or=Fr[--Lr],Fr[Lr]=null;for(;e===Wr;)Wr=Ir[--$r],Ir[$r]=null,Kr=Ir[--$r],Ir[$r]=null,Mr=Ir[--$r],Ir[$r]=null}var Hr=null,Jr=null,Zr=!1,Yr=null,Qr=!1,Xr=Error(s(519));function ea(e){throw ia(Rr(Error(s(418,"")),e)),Xr}function ta(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Oe]=e,t[Ie]=r,n){case"dialog":Td("cancel",t),Td("close",t);break;case"iframe":case"object":case"embed":Td("load",t);break;case"video":case"audio":for(n=0;n<_d.length;n++)Td(_d[n],t);break;case"source":Td("error",t);break;case"img":case"image":case"link":Td("error",t),Td("load",t);break;case"details":Td("toggle",t);break;case"input":Td("invalid",t),xt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ut(t);break;case"select":Td("invalid",t);break;case"textarea":Td("invalid",t),yt(t,r.value,r.defaultValue,r.children),ut(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Md(t.textContent,n)?(null!=r.popover&&(Td("beforetoggle",t),Td("toggle",t)),null!=r.onScroll&&Td("scroll",t),null!=r.onScrollEnd&&Td("scrollend",t),null!=r.onClick&&(t.onclick=Kd),t=!0):t=!1,t||ea(e)}function na(e){for(Hr=e.return;Hr;)switch(Hr.tag){case 3:case 27:return void(Qr=!0);case 5:case 13:return void(Qr=!1);default:Hr=Hr.return}}function ra(e){if(e!==Hr)return!1;if(!Zr)return na(e),Zr=!0,!1;var t,n=!1;if((t=3!==e.tag&&27!==e.tag)&&((t=5===e.tag)&&(t=!("form"!==(t=e.type)&&"button"!==t)||Qd(e.type,e.memoizedProps)),t=!t),t&&(n=!0),n&&Jr&&ea(e),na(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){Jr=lu(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}Jr=null}}else Jr=Hr?lu(e.stateNode.nextSibling):null;return!0}function aa(){Jr=Hr=null,Zr=!1}function ia(e){null===Yr?Yr=[e]:Yr.push(e)}var sa=Error(s(460)),la=Error(s(474)),oa={then:function(){}};function ca(e){return"fulfilled"===(e=e.status)||"rejected"===e}function da(){}function ua(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(da,da),t=n),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===sa)throw Error(s(483));throw e;default:if("string"===typeof t.status)t.then(da,da);else{if(null!==(e=tc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===sa)throw Error(s(483));throw e}throw ha=t,sa}}var ha=null;function ma(){if(null===ha)throw Error(s(459));var e=ha;return ha=null,e}var pa=null,fa=0;function ga(e){var t=fa;return fa+=1,null===pa&&(pa=[]),ua(pa,e,t)}function xa(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function va(e,t){if(t.$$typeof===o)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ba(e){return(0,e._init)(e._payload)}function ja(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Po(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=33554434,n):r:(t.flags|=33554434,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function o(e,t,n,r){return null===t||6!==t.tag?((t=Mo(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n,r){var i=n.type;return i===u?p(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===y&&ba(i)===t.type)?(xa(t=a(t,n.props),n),t.return=e,t):(xa(t=Io(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function m(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ko(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function p(e,t,n,r,i){return null===t||7!==t.tag?((t=$o(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Mo(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case c:return xa(n=Io(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case d:return(t=Ko(t,e.mode,n)).return=e,t;case y:return f(e,t=(0,t._init)(t._payload),n)}if(W(t)||S(t))return(t=$o(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return f(e,ga(t),n);if(t.$$typeof===g)return f(e,Sl(e,t),n);va(e,t)}return null}function x(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==a?null:o(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case c:return n.key===a?h(e,t,n,r):null;case d:return n.key===a?m(e,t,n,r):null;case y:return x(e,t,n=(a=n._init)(n._payload),r)}if(W(n)||S(n))return null!==a?null:p(e,t,n,r,null);if("function"===typeof n.then)return x(e,t,ga(n),r);if(n.$$typeof===g)return x(e,t,Sl(e,n),r);va(e,n)}return null}function v(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return o(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case c:return h(t,e=e.get(null===r.key?n:r.key)||null,r,a);case d:return m(t,e=e.get(null===r.key?n:r.key)||null,r,a);case y:return v(e,t,n,r=(0,r._init)(r._payload),a)}if(W(r)||S(r))return p(t,e=e.get(n)||null,r,a,null);if("function"===typeof r.then)return v(e,t,n,ga(r),a);if(r.$$typeof===g)return v(e,t,n,Sl(t,r),a);va(t,r)}return null}function b(o,h,m,p){if("object"===typeof m&&null!==m&&m.type===u&&null===m.key&&(m=m.props.children),"object"===typeof m&&null!==m){switch(m.$$typeof){case c:e:{for(var j=m.key;null!==h;){if(h.key===j){if((j=m.type)===u){if(7===h.tag){n(o,h.sibling),(p=a(h,m.props.children)).return=o,o=p;break e}}else if(h.elementType===j||"object"===typeof j&&null!==j&&j.$$typeof===y&&ba(j)===h.type){n(o,h.sibling),xa(p=a(h,m.props),m),p.return=o,o=p;break e}n(o,h);break}t(o,h),h=h.sibling}m.type===u?((p=$o(m.props.children,o.mode,p,m.key)).return=o,o=p):(xa(p=Io(m.type,m.key,m.props,null,o.mode,p),m),p.return=o,o=p)}return l(o);case d:e:{for(j=m.key;null!==h;){if(h.key===j){if(4===h.tag&&h.stateNode.containerInfo===m.containerInfo&&h.stateNode.implementation===m.implementation){n(o,h.sibling),(p=a(h,m.children||[])).return=o,o=p;break e}n(o,h);break}t(o,h),h=h.sibling}(p=Ko(m,o.mode,p)).return=o,o=p}return l(o);case y:return b(o,h,m=(j=m._init)(m._payload),p)}if(W(m))return function(a,s,l,o){for(var c=null,d=null,u=s,h=s=0,m=null;null!==u&&h<l.length;h++){u.index>h?(m=u,u=null):m=u.sibling;var p=x(a,u,l[h],o);if(null===p){null===u&&(u=m);break}e&&u&&null===p.alternate&&t(a,u),s=i(p,s,h),null===d?c=p:d.sibling=p,d=p,u=m}if(h===l.length)return n(a,u),Zr&&Ur(a,h),c;if(null===u){for(;h<l.length;h++)null!==(u=f(a,l[h],o))&&(s=i(u,s,h),null===d?c=u:d.sibling=u,d=u);return Zr&&Ur(a,h),c}for(u=r(u);h<l.length;h++)null!==(m=v(u,a,h,l[h],o))&&(e&&null!==m.alternate&&u.delete(null===m.key?h:m.key),s=i(m,s,h),null===d?c=m:d.sibling=m,d=m);return e&&u.forEach((function(e){return t(a,e)})),Zr&&Ur(a,h),c}(o,h,m,p);if(S(m)){if("function"!==typeof(j=S(m)))throw Error(s(150));return function(a,l,o,c){if(null==o)throw Error(s(151));for(var d=null,u=null,h=l,m=l=0,p=null,g=o.next();null!==h&&!g.done;m++,g=o.next()){h.index>m?(p=h,h=null):p=h.sibling;var b=x(a,h,g.value,c);if(null===b){null===h&&(h=p);break}e&&h&&null===b.alternate&&t(a,h),l=i(b,l,m),null===u?d=b:u.sibling=b,u=b,h=p}if(g.done)return n(a,h),Zr&&Ur(a,m),d;if(null===h){for(;!g.done;m++,g=o.next())null!==(g=f(a,g.value,c))&&(l=i(g,l,m),null===u?d=g:u.sibling=g,u=g);return Zr&&Ur(a,m),d}for(h=r(h);!g.done;m++,g=o.next())null!==(g=v(h,a,m,g.value,c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),l=i(g,l,m),null===u?d=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(a,e)})),Zr&&Ur(a,m),d}(o,h,m=j.call(m),p)}if("function"===typeof m.then)return b(o,h,ga(m),p);if(m.$$typeof===g)return b(o,h,Sl(o,m),p);va(o,m)}return"string"===typeof m&&""!==m||"number"===typeof m||"bigint"===typeof m?(m=""+m,null!==h&&6===h.tag?(n(o,h.sibling),(p=a(h,m)).return=o,o=p):(n(o,h),(p=Mo(m,o.mode,p)).return=o,o=p),l(o)):n(o,h)}return function(e,t,n,r){try{fa=0;var a=b(e,t,n,r);return pa=null,a}catch(s){if(s===sa)throw s;var i=Fo(29,s,null,e.mode);return i.lanes=r,i.return=e,i}}}var ya=ja(!0),ka=ja(!1),wa=q(null),Na=q(0);function Sa(e,t){H(Na,e=cc),H(wa,t),cc=e|t.baseLanes}function _a(){H(Na,cc),H(wa,wa.current)}function Ca(){cc=Na.current,G(wa),G(Na)}var za=q(null),Ta=null;function Aa(e){var t=e.alternate;H(Ra,1&Ra.current),H(za,e),null===Ta&&(null===t||null!==wa.current||null!==t.memoizedState)&&(Ta=e)}function Ea(e){if(22===e.tag){if(H(Ra,Ra.current),H(za,e),null===Ta){var t=e.alternate;null!==t&&null!==t.memoizedState&&(Ta=e)}}else Da()}function Da(){H(Ra,Ra.current),H(za,za.current)}function Ba(e){G(za),Ta===e&&(Ta=null),G(Ra)}var Ra=q(0);function Fa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var La="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Pa=r.unstable_scheduleCallback,Oa=r.unstable_NormalPriority,Ia={$$typeof:g,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $a(){return{controller:new La,data:new Map,refCount:0}}function Wa(e){e.refCount--,0===e.refCount&&Pa(Oa,(function(){e.controller.abort()}))}var Ma=null,Ka=0,Ua=0,Va=null;function qa(){if(0===--Ka&&null!==Ma){null!==Va&&(Va.status="fulfilled");var e=Ma;Ma=null,Ua=0,Va=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ga=A.S;A.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ma){var n=Ma=[];Ka=0,Ua=yd(),Va={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ka++,t.then(qa,qa)}(0,t),null!==Ga&&Ga(e,t)};var Ha=q(null);function Ja(){var e=Ha.current;return null!==e?e:tc.pooledCache}function Za(e,t){H(Ha,null===t?Ha.current:t.pool)}function Ya(){var e=Ja();return null===e?null:{parent:Ia._currentValue,pool:e}}var Qa=0,Xa=null,ei=null,ti=null,ni=!1,ri=!1,ai=!1,ii=0,si=0,li=null,oi=0;function ci(){throw Error(s(321))}function di(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Hn(e[n],t[n]))return!1;return!0}function ui(e,t,n,r,a,i){return Qa=i,Xa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,A.H=null===e||null===e.memoizedState?Ss:_s,ai=!1,i=n(r,a),ai=!1,ri&&(i=mi(t,n,r,a)),hi(e),i}function hi(e){A.H=Ns;var t=null!==ei&&null!==ei.next;if(Qa=0,ti=ei=Xa=null,ni=!1,si=0,li=null,t)throw Error(s(300));null===e||Ks||null!==(e=e.dependencies)&&kl(e)&&(Ks=!0)}function mi(e,t,n,r){Xa=e;var a=0;do{if(ri&&(li=null),si=0,ri=!1,25<=a)throw Error(s(301));if(a+=1,ti=ei=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}A.H=Cs,i=t(n,r)}while(ri);return i}function pi(){var e=A.H,t=e.useState()[0];return t="function"===typeof t.then?ji(t):t,e=e.useState()[0],(null!==ei?ei.memoizedState:null)!==e&&(Xa.flags|=1024),t}function fi(){var e=0!==ii;return ii=0,e}function gi(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function xi(e){if(ni){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ni=!1}Qa=0,ti=ei=Xa=null,ri=!1,si=ii=0,li=null}function vi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ti?Xa.memoizedState=ti=e:ti=ti.next=e,ti}function bi(){if(null===ei){var e=Xa.alternate;e=null!==e?e.memoizedState:null}else e=ei.next;var t=null===ti?Xa.memoizedState:ti.next;if(null!==t)ti=t,ei=e;else{if(null===e){if(null===Xa.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(ei=e).memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},null===ti?Xa.memoizedState=ti=e:ti=ti.next=e}return ti}function ji(e){var t=si;return si+=1,null===li&&(li=[]),e=ua(li,e,t),t=Xa,null===(null===ti?t.memoizedState:ti.next)&&(t=t.alternate,A.H=null===t||null===t.memoizedState?Ss:_s),e}function yi(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ji(e);if(e.$$typeof===g)return Nl(e)}throw Error(s(438,String(e)))}function ki(e){var t=null,n=Xa.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Xa.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Xa.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=w;return t.index++,n}function wi(e,t){return"function"===typeof t?t(e):t}function Ni(e){return Si(bi(),ei,e)}function Si(e,t,n){var r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=n;var a=e.baseQueue,i=r.pending;if(null!==i){if(null!==a){var l=a.next;a.next=i.next,i.next=l}t.baseQueue=a=i,r.pending=null}if(i=e.baseState,null===a)e.memoizedState=i;else{var o=l=null,c=null,d=t=a.next,u=!1;do{var h=-536870913&d.lane;if(h!==d.lane?(rc&h)===h:(Qa&h)===h){var m=d.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===Ua&&(u=!0);else{if((Qa&m)===m){d=d.next,m===Ua&&(u=!0);continue}h={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(o=c=h,l=i):c=c.next=h,Xa.lanes|=m,uc|=m}h=d.action,ai&&n(i,h),i=d.hasEagerState?d.eagerState:n(i,h)}else m={lane:h,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(o=c=m,l=i):c=c.next=m,Xa.lanes|=h,uc|=h;d=d.next}while(null!==d&&d!==t);if(null===c?l=i:c.next=o,!Hn(i,e.memoizedState)&&(Ks=!0,u&&null!==(n=Va)))throw n;e.memoizedState=i,e.baseState=l,e.baseQueue=c,r.lastRenderedState=i}return null===a&&(r.lanes=0),[e.memoizedState,r.dispatch]}function _i(e){var t=bi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var l=a=a.next;do{i=e(i,l.action),l=l.next}while(l!==a);Hn(i,t.memoizedState)||(Ks=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ci(e,t,n){var r=Xa,a=bi(),i=Zr;if(i){if(void 0===n)throw Error(s(407));n=n()}else n=t();var l=!Hn((ei||a).memoizedState,n);if(l&&(a.memoizedState=n,Ks=!0),a=a.queue,Qi(Ai.bind(null,r,a,e),[e]),a.getSnapshot!==t||l||null!==ti&&1&ti.memoizedState.tag){if(r.flags|=2048,Gi(9,Ti.bind(null,r,a,n,t),{destroy:void 0},null),null===tc)throw Error(s(349));i||0!==(60&Qa)||zi(r,t,n)}return n}function zi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Xa.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Xa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ti(e,t,n,r){t.value=n,t.getSnapshot=r,Ei(t)&&Di(e)}function Ai(e,t,n){return n((function(){Ei(t)&&Di(e)}))}function Ei(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Hn(e,n)}catch(r){return!0}}function Di(e){var t=Tr(e,2);null!==t&&Dc(t,e,2)}function Bi(e){var t=vi();if("function"===typeof e){var n=e;if(e=n(),ai){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:e},t}function Ri(e,t,n,r){return e.baseState=n,Si(e,ei,"function"===typeof r?r:wi)}function Fi(e,t,n,r,a){if(ys(e))throw Error(s(485));if(null!==(e=t.action)){var i={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==A.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,Li(t,i)):(i.next=n.next,t.pending=n.next=i)}}function Li(e,t){var n=t.action,r=t.payload,a=e.state;if(t.isTransition){var i=A.T,s={};A.T=s;try{var l=n(a,r),o=A.S;null!==o&&o(s,l),Pi(e,t,l)}catch(c){Ii(e,t,c)}finally{A.T=i}}else try{Pi(e,t,i=n(a,r))}catch(d){Ii(e,t,d)}}function Pi(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){Oi(e,t,n)}),(function(n){return Ii(e,t,n)})):Oi(e,t,n)}function Oi(e,t,n){t.status="fulfilled",t.value=n,$i(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Li(e,n)))}function Ii(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,$i(t),t=t.next}while(t!==r)}e.action=null}function $i(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Wi(e,t){return t}function Mi(e,t){if(Zr){var n=tc.formState;if(null!==n){e:{var r=Xa;if(Zr){if(Jr){t:{for(var a=Jr,i=Qr;8!==a.nodeType;){if(!i){a=null;break t}if(null===(a=lu(a.nextSibling))){a=null;break t}}a="F!"===(i=a.data)||"F"===i?a:null}if(a){Jr=lu(a.nextSibling),r="F!"===a.data;break e}}ea(r)}r=!1}r&&(t=n[0])}}return(n=vi()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:t},n.queue=r,n=vs.bind(null,Xa,r),r.dispatch=n,r=Bi(!1),i=js.bind(null,Xa,!1,r.queue),a={state:t,dispatch:null,action:e,pending:null},(r=vi()).queue=a,n=Fi.bind(null,Xa,a,i,n),a.dispatch=n,r.memoizedState=e,[t,n,!1]}function Ki(e){return Ui(bi(),ei,e)}function Ui(e,t,n){t=Si(e,t,Wi)[0],e=Ni(wi)[0],t="object"===typeof t&&null!==t&&"function"===typeof t.then?ji(t):t;var r=bi(),a=r.queue,i=a.dispatch;return n!==r.memoizedState&&(Xa.flags|=2048,Gi(9,Vi.bind(null,a,n),{destroy:void 0},null)),[t,i,e]}function Vi(e,t){e.action=t}function qi(e){var t=bi(),n=ei;if(null!==n)return Ui(t,n,e);bi(),t=t.memoizedState;var r=(n=bi()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Gi(e,t,n,r){return e={tag:e,create:t,inst:n,deps:r,next:null},null===(t=Xa.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Xa.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Hi(){return bi().memoizedState}function Ji(e,t,n,r){var a=vi();Xa.flags|=e,a.memoizedState=Gi(1|t,n,{destroy:void 0},void 0===r?null:r)}function Zi(e,t,n,r){var a=bi();r=void 0===r?null:r;var i=a.memoizedState.inst;null!==ei&&null!==r&&di(r,ei.memoizedState.deps)?a.memoizedState=Gi(t,n,i,r):(Xa.flags|=e,a.memoizedState=Gi(1|t,n,i,r))}function Yi(e,t){Ji(8390656,8,e,t)}function Qi(e,t){Zi(2048,8,e,t)}function Xi(e,t){return Zi(4,2,e,t)}function es(e,t){return Zi(4,4,e,t)}function ts(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function ns(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Zi(4,4,ts.bind(null,t,e),n)}function rs(){}function as(e,t){var n=bi();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&di(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function is(e,t){var n=bi();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&di(t,r[1]))return r[0];if(r=e(),ai){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function ss(e,t,n){return void 0===n||0!==(1073741824&Qa)?e.memoizedState=t:(e.memoizedState=n,e=Ec(),Xa.lanes|=e,uc|=e,n)}function ls(e,t,n,r){return Hn(n,t)?n:null!==wa.current?(e=ss(e,n,r),Hn(e,t)||(Ks=!0),e):0===(42&Qa)?(Ks=!0,e.memoizedState=n):(e=Ec(),Xa.lanes|=e,uc|=e,t)}function os(e,t,n,r,a){var i=M.p;M.p=0!==i&&8>i?i:8;var s=A.T,l={};A.T=l,js(e,!1,t,n);try{var o=a(),c=A.S;if(null!==c&&c(l,o),null!==o&&"object"===typeof o&&"function"===typeof o.then)bs(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(o,r),Ac());else bs(e,t,r,Ac())}catch(d){bs(e,t,{then:function(){},status:"rejected",reason:d},Ac())}finally{M.p=i,A.T=s}}function cs(){}function ds(e,t,n,r){if(5!==e.tag)throw Error(s(476));var a=us(e).queue;os(e,a,t,K,null===n?cs:function(){return hs(e),n(r)})}function us(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:K},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function hs(e){bs(e,us(e).next.queue,{},Ac())}function ms(){return Nl(Lu)}function ps(){return bi().memoizedState}function fs(){return bi().memoizedState}function gs(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Ac(),r=El(t,e=Al(n),n);return null!==r&&(Dc(r,t,n),Dl(r,t,n)),t={cache:$a()},void(e.payload=t)}t=t.return}}function xs(e,t,n){var r=Ac();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},ys(e)?ks(t,n):null!==(n=zr(e,t,n,r))&&(Dc(n,e,r),ws(n,t,r))}function vs(e,t,n){bs(e,t,n,Ac())}function bs(e,t,n,r){var a={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(ys(e))ks(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,l=i(s,n);if(a.hasEagerState=!0,a.eagerState=l,Hn(l,s))return Cr(e,t,a,0),null===tc&&_r(),!1}catch(o){}if(null!==(n=zr(e,t,a,r)))return Dc(n,e,r),ws(n,t,r),!0}return!1}function js(e,t,n,r){if(r={lane:2,revertLane:yd(),action:r,hasEagerState:!1,eagerState:null,next:null},ys(e)){if(t)throw Error(s(479))}else null!==(t=zr(e,n,r,2))&&Dc(t,e,2)}function ys(e){var t=e.alternate;return e===Xa||null!==t&&t===Xa}function ks(e,t){ri=ni=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ws(e,t,n){if(0!==(4194176&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Re(e,n)}}var Ns={readContext:Nl,use:yi,useCallback:ci,useContext:ci,useEffect:ci,useImperativeHandle:ci,useLayoutEffect:ci,useInsertionEffect:ci,useMemo:ci,useReducer:ci,useRef:ci,useState:ci,useDebugValue:ci,useDeferredValue:ci,useTransition:ci,useSyncExternalStore:ci,useId:ci};Ns.useCacheRefresh=ci,Ns.useMemoCache=ci,Ns.useHostTransitionStatus=ci,Ns.useFormState=ci,Ns.useActionState=ci,Ns.useOptimistic=ci;var Ss={readContext:Nl,use:yi,useCallback:function(e,t){return vi().memoizedState=[e,void 0===t?null:t],e},useContext:Nl,useEffect:Yi,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ji(4194308,4,ts.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ji(4194308,4,e,t)},useInsertionEffect:function(e,t){Ji(4,2,e,t)},useMemo:function(e,t){var n=vi();t=void 0===t?null:t;var r=e();if(ai){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=vi();if(void 0!==n){var a=n(t);if(ai){be(!0);try{n(t)}finally{be(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=xs.bind(null,Xa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vi().memoizedState=e},useState:function(e){var t=(e=Bi(e)).queue,n=vs.bind(null,Xa,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:rs,useDeferredValue:function(e,t){return ss(vi(),e,t)},useTransition:function(){var e=Bi(!1);return e=os.bind(null,Xa,e.queue,!0,!1),vi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Xa,a=vi();if(Zr){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===tc)throw Error(s(349));0!==(60&rc)||zi(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Yi(Ai.bind(null,r,i,e),[e]),r.flags|=2048,Gi(9,Ti.bind(null,r,i,n,t),{destroy:void 0},null),n},useId:function(){var e=vi(),t=tc.identifierPrefix;if(Zr){var n=Kr;t=":"+t+"R"+(n=(Mr&~(1<<32-je(Mr)-1)).toString(32)+n),0<(n=ii++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=oi++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return vi().memoizedState=gs.bind(null,Xa)}};Ss.useMemoCache=ki,Ss.useHostTransitionStatus=ms,Ss.useFormState=Mi,Ss.useActionState=Mi,Ss.useOptimistic=function(e){var t=vi();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=js.bind(null,Xa,!0,n),n.dispatch=t,[e,t]};var _s={readContext:Nl,use:yi,useCallback:as,useContext:Nl,useEffect:Qi,useImperativeHandle:ns,useInsertionEffect:Xi,useLayoutEffect:es,useMemo:is,useReducer:Ni,useRef:Hi,useState:function(){return Ni(wi)},useDebugValue:rs,useDeferredValue:function(e,t){return ls(bi(),ei.memoizedState,e,t)},useTransition:function(){var e=Ni(wi)[0],t=bi().memoizedState;return["boolean"===typeof e?e:ji(e),t]},useSyncExternalStore:Ci,useId:ps};_s.useCacheRefresh=fs,_s.useMemoCache=ki,_s.useHostTransitionStatus=ms,_s.useFormState=Ki,_s.useActionState=Ki,_s.useOptimistic=function(e,t){return Ri(bi(),0,e,t)};var Cs={readContext:Nl,use:yi,useCallback:as,useContext:Nl,useEffect:Qi,useImperativeHandle:ns,useInsertionEffect:Xi,useLayoutEffect:es,useMemo:is,useReducer:_i,useRef:Hi,useState:function(){return _i(wi)},useDebugValue:rs,useDeferredValue:function(e,t){var n=bi();return null===ei?ss(n,e,t):ls(n,ei.memoizedState,e,t)},useTransition:function(){var e=_i(wi)[0],t=bi().memoizedState;return["boolean"===typeof e?e:ji(e),t]},useSyncExternalStore:Ci,useId:ps};function zs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:E({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}Cs.useCacheRefresh=fs,Cs.useMemoCache=ki,Cs.useHostTransitionStatus=ms,Cs.useFormState=qi,Cs.useActionState=qi,Cs.useOptimistic=function(e,t){var n=bi();return null!==ei?Ri(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])};var Ts={isMounted:function(e){return!!(e=e._reactInternals)&&P(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ac(),a=Al(r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=El(e,a,r))&&(Dc(t,e,r),Dl(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ac(),a=Al(r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=El(e,a,r))&&(Dc(t,e,r),Dl(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ac(),r=Al(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=El(e,r,n))&&(Dc(t,e,n),Dl(t,e,n))}};function As(e,t,n,r,a,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!Jn(n,r)||!Jn(a,i))}function Es(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ts.enqueueReplaceState(t,t.state,null)}function Ds(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var a in n===t&&(n=E({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}var Bs="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function Rs(e){Bs(e)}function Fs(e){console.error(e)}function Ls(e){Bs(e)}function Ps(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function Os(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function Is(e,t,n){return(n=Al(n)).tag=3,n.payload={element:null},n.callback=function(){Ps(e,t)},n}function $s(e){return(e=Al(e)).tag=3,e}function Ws(e,t,n,r){var a=n.type.getDerivedStateFromError;if("function"===typeof a){var i=r.value;e.payload=function(){return a(i)},e.callback=function(){Os(t,n,r)}}var s=n.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){Os(t,n,r),"function"!==typeof a&&(null===kc?kc=new Set([this]):kc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ms=Error(s(461)),Ks=!1;function Us(e,t,n,r){t.child=null===e?ka(t,null,n,r):ya(t,e.child,n,r)}function Vs(e,t,n,r,a){n=n.render;var i=t.ref;if("ref"in r){var s={};for(var l in r)"ref"!==l&&(s[l]=r[l])}else s=r;return wl(t),r=ui(e,t,n,s,i,a),l=fi(),null===e||Ks?(Zr&&l&&qr(t),t.flags|=1,Us(e,t,r,a),t.child):(gi(e,t,a),ul(e,t,a))}function qs(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Lo(i)||void 0!==i.defaultProps||null!==n.compare?((e=Io(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Gs(e,t,i,r,a))}if(i=e.child,!hl(e,a)){var s=i.memoizedProps;if((n=null!==(n=n.compare)?n:Jn)(s,r)&&e.ref===t.ref)return ul(e,t,a)}return t.flags|=1,(e=Po(i,r)).ref=t.ref,e.return=t,t.child=e}function Gs(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(Jn(i,r)&&e.ref===t.ref){if(Ks=!1,t.pendingProps=r=i,!hl(e,a))return t.lanes=e.lanes,ul(e,t,a);0!==(131072&e.flags)&&(Ks=!0)}}return Ys(e,t,n,r,a)}function Hs(e,t,n){var r=t.pendingProps,a=r.children,i=0!==(2&t.stateNode._pendingVisibility),s=null!==e?e.memoizedState:null;if(Zs(e,t),"hidden"===r.mode||i){if(0!==(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(a=t.child=e.child,i=0;null!==a;)i=i|a.lanes|a.childLanes,a=a.sibling;t.childLanes=i&~r}else t.childLanes=0,t.child=null;return Js(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Js(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Za(0,null!==s?s.cachePool:null),null!==s?Sa(t,s):_a(),Ea(t)}else null!==s?(Za(0,s.cachePool),Sa(t,s),Da(),t.memoizedState=null):(null!==e&&Za(0,null),_a(),Da());return Us(e,t,a,n),t.child}function Js(e,t,n,r){var a=Ja();return a=null===a?null:{parent:Ia._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},null!==e&&Za(0,null),_a(),Ea(t),null!==e&&yl(e,t,r,!0),null}function Zs(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=2097664)}}function Ys(e,t,n,r,a){return wl(t),n=ui(e,t,n,r,void 0,a),r=fi(),null===e||Ks?(Zr&&r&&qr(t),t.flags|=1,Us(e,t,n,a),t.child):(gi(e,t,a),ul(e,t,a))}function Qs(e,t,n,r,a,i){return wl(t),t.updateQueue=null,n=mi(t,r,n,a),hi(e),r=fi(),null===e||Ks?(Zr&&r&&qr(t),t.flags|=1,Us(e,t,n,i),t.child):(gi(e,t,i),ul(e,t,i))}function Xs(e,t,n,r,a){if(wl(t),null===t.stateNode){var i=Dr,s=n.contextType;"object"===typeof s&&null!==s&&(i=Nl(s)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=Ts,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},zl(t),s=n.contextType,i.context="object"===typeof s&&null!==s?Nl(s):Dr,i.state=t.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(zs(t,n,s,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(s=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),s!==i.state&&Ts.enqueueReplaceState(i,i.state,null),Ll(t,r,i,a),Fl(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var l=t.memoizedProps,o=Ds(n,l);i.props=o;var c=i.context,d=n.contextType;s=Dr,"object"===typeof d&&null!==d&&(s=Nl(d));var u=n.getDerivedStateFromProps;d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate,l=t.pendingProps!==l,d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l||c!==s)&&Es(t,i,r,s),Cl=!1;var h=t.memoizedState;i.state=h,Ll(t,r,i,a),Fl(),c=t.memoizedState,l||h!==c||Cl?("function"===typeof u&&(zs(t,n,u,r),c=t.memoizedState),(o=Cl||As(t,n,o,r,h,c,s))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=s,r=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Tl(e,t),d=Ds(n,s=t.memoizedProps),i.props=d,u=t.pendingProps,h=i.context,c=n.contextType,o=Dr,"object"===typeof c&&null!==c&&(o=Nl(c)),(c="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==u||h!==o)&&Es(t,i,r,o),Cl=!1,h=t.memoizedState,i.state=h,Ll(t,r,i,a),Fl();var m=t.memoizedState;s!==u||h!==m||Cl||null!==e&&null!==e.dependencies&&kl(e.dependencies)?("function"===typeof l&&(zs(t,n,l,r),m=t.memoizedState),(d=Cl||As(t,n,d,r,h,m,o)||null!==e&&null!==e.dependencies&&kl(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,m,o),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,m,o)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),i.props=r,i.state=m,i.context=o,r=d):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Zs(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=ya(t,e.child,null,a),t.child=ya(t,null,n,a)):Us(e,t,n,a),t.memoizedState=i.state,e=t.child):e=ul(e,t,a),e}function el(e,t,n,r){return aa(),t.flags|=256,Us(e,t,n,r),t.child}var tl={dehydrated:null,treeContext:null,retryLane:0};function nl(e){return{baseLanes:e,cachePool:Ya()}}function rl(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=pc),e}function al(e,t,n){var r,a=t.pendingProps,i=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Ra.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(Zr){if(i?Aa(t):Da(),Zr){var o,c=Jr;if(o=c){e:{for(o=c,c=Qr;8!==o.nodeType;){if(!c){c=null;break e}if(null===(o=lu(o.nextSibling))){c=null;break e}}c=o}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Wr?{id:Mr,overflow:Kr}:null,retryLane:536870912},(o=Fo(18,null,null,0)).stateNode=c,o.return=t,t.child=o,Hr=t,Jr=null,o=!0):o=!1}o||ea(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return"$!"===c.data?t.lanes=16:t.lanes=536870912,null;Ba(t)}return c=a.children,a=a.fallback,i?(Da(),c=sl({mode:"hidden",children:c},i=t.mode),a=$o(a,i,n,null),c.return=t,a.return=t,c.sibling=a,t.child=c,(i=t.child).memoizedState=nl(n),i.childLanes=rl(e,r,n),t.memoizedState=tl,a):(Aa(t),il(t,c))}if(null!==(o=e.memoizedState)&&null!==(c=o.dehydrated)){if(l)256&t.flags?(Aa(t),t.flags&=-257,t=ll(e,t,n)):null!==t.memoizedState?(Da(),t.child=e.child,t.flags|=128,t=null):(Da(),i=a.fallback,c=t.mode,a=sl({mode:"visible",children:a.children},c),(i=$o(i,c,n,null)).flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,ya(t,e.child,null,n),(a=t.child).memoizedState=nl(n),a.childLanes=rl(e,r,n),t.memoizedState=tl,t=i);else if(Aa(t),"$!"===c.data){if(r=c.nextSibling&&c.nextSibling.dataset)var d=r.dgst;r=d,(a=Error(s(419))).stack="",a.digest=r,ia({value:a,source:null,stack:null}),t=ll(e,t,n)}else if(Ks||yl(e,t,n,!1),r=0!==(n&e.childLanes),Ks||r){if(null!==(r=tc)){if(0!==(42&(a=n&-n)))a=1;else switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=64;break;case 268435456:a=134217728;break;default:a=0}if(0!==(a=0!==(a&(r.suspendedLanes|n))?0:a)&&a!==o.retryLane)throw o.retryLane=a,Tr(e,a),Dc(r,e,a),Ms}"$?"===c.data||Uc(),t=ll(e,t,n)}else"$?"===c.data?(t.flags|=128,t.child=e.child,t=ld.bind(null,e),c._reactRetry=t,t=null):(e=o.treeContext,Jr=lu(c.nextSibling),Hr=t,Zr=!0,Yr=null,Qr=!1,null!==e&&(Ir[$r++]=Mr,Ir[$r++]=Kr,Ir[$r++]=Wr,Mr=e.id,Kr=e.overflow,Wr=t),(t=il(t,a.children)).flags|=4096);return t}return i?(Da(),i=a.fallback,c=t.mode,d=(o=e.child).sibling,(a=Po(o,{mode:"hidden",children:a.children})).subtreeFlags=31457280&o.subtreeFlags,null!==d?i=Po(d,i):(i=$o(i,c,n,null)).flags|=2,i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,null===(c=e.child.memoizedState)?c=nl(n):(null!==(o=c.cachePool)?(d=Ia._currentValue,o=o.parent!==d?{parent:d,pool:d}:o):o=Ya(),c={baseLanes:c.baseLanes|n,cachePool:o}),i.memoizedState=c,i.childLanes=rl(e,r,n),t.memoizedState=tl,a):(Aa(t),e=(n=e.child).sibling,(n=Po(n,{mode:"visible",children:a.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function il(e,t){return(t=sl({mode:"visible",children:t},e.mode)).return=e,e.child=t}function sl(e,t){return Wo(e,t,0,null)}function ll(e,t,n){return ya(t,e.child,null,n),(e=il(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ol(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),bl(e.return,t,n)}function cl(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function dl(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(Us(e,t,r.children,n),0!==(2&(r=Ra.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ol(e,n,t);else if(19===e.tag)ol(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(H(Ra,r),a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Fa(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),cl(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Fa(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}cl(t,!0,n,null,i);break;case"together":cl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ul(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),uc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(yl(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Po(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Po(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function hl(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!kl(e))}function ml(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ks=!0;else{if(!hl(e,n)&&0===(128&t.flags))return Ks=!1,function(e,t,n){switch(t.tag){case 3:X(t,t.stateNode.containerInfo),xl(t,Ia,e.memoizedState.cache),aa();break;case 27:case 5:te(t);break;case 4:X(t,t.stateNode.containerInfo);break;case 10:xl(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Aa(t),t.flags|=128,null):0!==(n&t.child.childLanes)?al(e,t,n):(Aa(t),null!==(e=ul(e,t,n))?e.sibling:null);Aa(t);break;case 19:var a=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(yl(e,t,n,!1),r=0!==(n&t.childLanes)),a){if(r)return dl(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),H(Ra,Ra.current),r)break;return null;case 22:case 23:return t.lanes=0,Hs(e,t,n);case 24:xl(t,Ia,e.memoizedState.cache)}return ul(e,t,n)}(e,t,n);Ks=0!==(131072&e.flags)}else Ks=!1,Zr&&0!==(1048576&t.flags)&&Vr(t,Or,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,a=r._init;if(r=a(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((a=r.$$typeof)===x){t.tag=11,t=Vs(null,t,r,e,n);break e}if(a===j){t.tag=14,t=qs(null,t,r,e,n);break e}}throw t=C(r)||r,Error(s(306,t,""))}Lo(r)?(e=Ds(r,e),t.tag=1,t=Xs(null,t,r,e,n)):(t.tag=0,t=Ys(null,t,r,e,n))}return t;case 0:return Ys(e,t,t.type,t.pendingProps,n);case 1:return Xs(e,t,r=t.type,a=Ds(r,t.pendingProps),n);case 3:e:{if(X(t,t.stateNode.containerInfo),null===e)throw Error(s(387));var i=t.pendingProps;r=(a=t.memoizedState).element,Tl(e,t),Ll(t,i,null,n);var l=t.memoizedState;if(i=l.cache,xl(t,Ia,i),i!==a.cache&&jl(t,[Ia],n,!0),Fl(),i=l.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:l.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=el(e,t,i,n);break e}if(i!==r){ia(r=Rr(Error(s(424)),t)),t=el(e,t,i,n);break e}for(Jr=lu(t.stateNode.containerInfo.firstChild),Hr=t,Zr=!0,Yr=null,Qr=!0,n=ka(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(aa(),i===r){t=ul(e,t,n);break e}Us(e,t,i,n)}t=t.child}return t;case 26:return Zs(e,t),null===e?(n=gu(t.type,null,t.pendingProps,null))?t.memoizedState=n:Zr||(n=t.type,e=t.pendingProps,(r=Jd(Y.current).createElement(n))[Oe]=t,r[Ie]=e,qd(r,n,e),Ye(r),t.stateNode=r):t.memoizedState=gu(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return te(t),null===e&&Zr&&(r=t.stateNode=cu(t.type,t.pendingProps,Y.current),Hr=t,Qr=!0,Jr=lu(r.firstChild)),r=t.pendingProps.children,null!==e||Zr?Us(e,t,r,n):t.child=ya(t,null,r,n),Zs(e,t),t.child;case 5:return null===e&&Zr&&((a=r=Jr)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ve])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==a.rel||e.getAttribute("href")!==(null==a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===i)return e}if(null===(e=lu(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,Qr))?(t.stateNode=r,Hr=t,Jr=lu(r.firstChild),Qr=!1,a=!0):a=!1),a||ea(t)),te(t),a=t.type,i=t.pendingProps,l=null!==e?e.memoizedProps:null,r=i.children,Qd(a,i)?r=null:null!==l&&Qd(a,l)&&(t.flags|=32),null!==t.memoizedState&&(a=ui(e,t,pi,null,null,n),Lu._currentValue=a),Zs(e,t),Us(e,t,r,n),t.child;case 6:return null===e&&Zr&&((e=n=Jr)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=lu(e.nextSibling)))return null}return e}(n,t.pendingProps,Qr))?(t.stateNode=n,Hr=t,Jr=null,e=!0):e=!1),e||ea(t)),null;case 13:return al(e,t,n);case 4:return X(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ya(t,null,r,n):Us(e,t,r,n),t.child;case 11:return Vs(e,t,t.type,t.pendingProps,n);case 7:return Us(e,t,t.pendingProps,n),t.child;case 8:case 12:return Us(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,xl(t,t.type,r.value),Us(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,wl(t),r=r(a=Nl(a)),t.flags|=1,Us(e,t,r,n),t.child;case 14:return qs(e,t,t.type,t.pendingProps,n);case 15:return Gs(e,t,t.type,t.pendingProps,n);case 19:return dl(e,t,n);case 22:return Hs(e,t,n);case 24:return wl(t),r=Nl(Ia),null===e?(null===(a=Ja())&&(a=tc,i=$a(),a.pooledCache=i,i.refCount++,null!==i&&(a.pooledCacheLanes|=n),a=i),t.memoizedState={parent:r,cache:a},zl(t),xl(t,Ia,a)):(0!==(e.lanes&n)&&(Tl(e,t),Ll(t,null,null,n),Fl()),a=e.memoizedState,i=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),xl(t,Ia,r)):(r=i.cache,xl(t,Ia,r),r!==a.cache&&jl(t,[Ia],n,!0))),Us(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}var pl=q(null),fl=null,gl=null;function xl(e,t,n){H(pl,t._currentValue),t._currentValue=n}function vl(e){e._currentValue=pl.current,G(pl)}function bl(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function jl(e,t,n,r){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var i=a.dependencies;if(null!==i){var l=a.child;i=i.firstContext;e:for(;null!==i;){var o=i;i=a;for(var c=0;c<t.length;c++)if(o.context===t[c]){i.lanes|=n,null!==(o=i.alternate)&&(o.lanes|=n),bl(i.return,n,e),r||(l=null);break e}i=o.next}}else if(18===a.tag){if(null===(l=a.return))throw Error(s(341));l.lanes|=n,null!==(i=l.alternate)&&(i.lanes|=n),bl(l,n,e),l=null}else l=a.child;if(null!==l)l.return=a;else for(l=a;null!==l;){if(l===e){l=null;break}if(null!==(a=l.sibling)){a.return=l.return,l=a;break}l=l.return}a=l}}function yl(e,t,n,r){e=null;for(var a=t,i=!1;null!==a;){if(!i)if(0!==(524288&a.flags))i=!0;else if(0!==(262144&a.flags))break;if(10===a.tag){var l=a.alternate;if(null===l)throw Error(s(387));if(null!==(l=l.memoizedProps)){var o=a.type;Hn(a.pendingProps.value,l.value)||(null!==e?e.push(o):e=[o])}}else if(a===Q.current){if(null===(l=a.alternate))throw Error(s(387));l.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(Lu):e=[Lu])}a=a.return}null!==e&&jl(t,e,n,r),t.flags|=262144}function kl(e){for(e=e.firstContext;null!==e;){if(!Hn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function wl(e){fl=e,gl=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Nl(e){return _l(fl,e)}function Sl(e,t){return null===fl&&wl(e),_l(e,t)}function _l(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===gl){if(null===e)throw Error(s(308));gl=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else gl=gl.next=t;return n}var Cl=!1;function zl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Al(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function El(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&ec)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=Er(e),Ar(e,null,n),t}return Cr(e,r,t,n),Er(e)}function Dl(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194176&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Re(e,n)}}function Bl(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?a=i=s:i=i.next=s,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Rl=!1;function Fl(){if(Rl){if(null!==Va)throw Va}}function Ll(e,t,n,r){Rl=!1;var a=e.updateQueue;Cl=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,l=a.shared.pending;if(null!==l){a.shared.pending=null;var o=l,c=o.next;o.next=null,null===s?i=c:s.next=c,s=o;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==s&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=o))}if(null!==i){var u=a.baseState;for(s=0,d=c=o=null,l=i;;){var h=-536870913&l.lane,m=h!==l.lane;if(m?(rc&h)===h:(r&h)===h){0!==h&&h===Ua&&(Rl=!0),null!==d&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var p=e,f=l;h=t;var g=n;switch(f.tag){case 1:if("function"===typeof(p=f.payload)){u=p.call(g,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=f.payload)?p.call(g,u,h):p)||void 0===h)break e;u=E({},u,h);break e;case 2:Cl=!0}}null!==(h=l.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=a.callbacks)?a.callbacks=[h]:m.push(h))}else m={lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=m,o=u):d=d.next=m,s|=h;if(null===(l=l.next)){if(null===(l=a.shared.pending))break;l=(m=l).next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}null===d&&(o=u),a.baseState=o,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null===i&&(a.shared.lanes=0),uc|=s,e.lanes=s,e.memoizedState=u}}function Pl(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function Ol(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Pl(n[e],t)}function Il(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var a=r.next;n=a;do{if((n.tag&e)===e){r=void 0;var i=n.create,s=n.inst;r=i(),s.destroy=r}n=n.next}while(n!==a)}}catch(l){rd(t,t.return,l)}}function $l(e,t,n){try{var r=t.updateQueue,a=null!==r?r.lastEffect:null;if(null!==a){var i=a.next;r=i;do{if((r.tag&e)===e){var s=r.inst,l=s.destroy;if(void 0!==l){s.destroy=void 0,a=t;var o=n;try{l()}catch(c){rd(a,o,c)}}}r=r.next}while(r!==i)}}catch(c){rd(t,t.return,c)}}function Wl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ol(t,n)}catch(r){rd(e,e.return,r)}}}function Ml(e,t,n){n.props=Ds(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){rd(e,t,r)}}function Kl(e,t){try{var n=e.ref;if(null!==n){var r=e.stateNode;switch(e.tag){case 26:case 27:case 5:var a=r;break;default:a=r}"function"===typeof n?e.refCleanup=n(a):n.current=a}}catch(i){rd(e,t,i)}}function Ul(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(a){rd(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){rd(e,t,i)}else n.current=null}function Vl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(a){rd(e,e.return,a)}}function ql(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,l=null,o=null,c=null,d=null,u=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||Ud(e,t,p,null,r,h)}}for(var m in r){var p=r[m];if(h=n[m],r.hasOwnProperty(m)&&(null!=p||null!=h))switch(m){case"type":i=p;break;case"name":a=p;break;case"checked":d=p;break;case"defaultChecked":u=p;break;case"value":l=p;break;case"defaultValue":o=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:p!==h&&Ud(e,t,m,p,r,h)}}return void gt(e,l,o,c,d,u,i,a);case"select":for(i in p=l=o=m=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(i)||Ud(e,t,i,null,r,c)}for(a in r)if(i=r[a],c=n[a],r.hasOwnProperty(a)&&(null!=i||null!=c))switch(a){case"value":m=i;break;case"defaultValue":o=i;break;case"multiple":l=i;default:i!==c&&Ud(e,t,a,i,r,c)}return t=o,n=l,r=p,void(null!=m?bt(e,!!n,m,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(o in p=m=null,n)if(a=n[o],n.hasOwnProperty(o)&&null!=a&&!r.hasOwnProperty(o))switch(o){case"value":case"children":break;default:Ud(e,t,o,null,r,a)}for(l in r)if(a=r[l],i=n[l],r.hasOwnProperty(l)&&(null!=a||null!=i))switch(l){case"value":m=a;break;case"defaultValue":p=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(s(91));break;default:a!==i&&Ud(e,t,l,a,r,i)}return void jt(e,m,p);case"option":for(var f in n)if(m=n[f],n.hasOwnProperty(f)&&null!=m&&!r.hasOwnProperty(f))if("selected"===f)e.selected=!1;else Ud(e,t,f,null,r,m);for(c in r)if(m=r[c],p=n[c],r.hasOwnProperty(c)&&m!==p&&(null!=m||null!=p))if("selected"===c)e.selected=m&&"function"!==typeof m&&"symbol"!==typeof m;else Ud(e,t,c,m,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)m=n[g],n.hasOwnProperty(g)&&null!=m&&!r.hasOwnProperty(g)&&Ud(e,t,g,null,r,m);for(d in r)if(m=r[d],p=n[d],r.hasOwnProperty(d)&&m!==p&&(null!=m||null!=p))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(s(137,t));break;default:Ud(e,t,d,m,r,p)}return;default:if(_t(t)){for(var x in n)m=n[x],n.hasOwnProperty(x)&&void 0!==m&&!r.hasOwnProperty(x)&&Vd(e,t,x,void 0,r,m);for(u in r)m=r[u],p=n[u],!r.hasOwnProperty(u)||m===p||void 0===m&&void 0===p||Vd(e,t,u,m,r,p);return}}for(var v in n)m=n[v],n.hasOwnProperty(v)&&null!=m&&!r.hasOwnProperty(v)&&Ud(e,t,v,null,r,m);for(h in r)m=r[h],p=n[h],!r.hasOwnProperty(h)||m===p||null==m&&null==p||Ud(e,t,h,m,r,p)}(r,e.type,n,t),r[Ie]=t}catch(a){rd(e,e.return,a)}}function Gl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag||4===e.tag}function Hl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Gl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&27!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Jl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Kd));else if(4!==r&&27!==r&&null!==(e=e.child))for(Jl(e,t,n),e=e.sibling;null!==e;)Jl(e,t,n),e=e.sibling}function Zl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&27!==r&&null!==(e=e.child))for(Zl(e,t,n),e=e.sibling;null!==e;)Zl(e,t,n),e=e.sibling}var Yl=!1,Ql=!1,Xl=!1,eo="function"===typeof WeakSet?WeakSet:Set,to=null,no=!1;function ro(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:xo(e,n),4&r&&Il(5,n);break;case 1:if(xo(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(l){rd(n,n.return,l)}else{var a=Ds(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){rd(n,n.return,o)}}64&r&&Wl(n),512&r&&Kl(n,n.return);break;case 3:if(xo(e,n),64&r&&null!==(r=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:e=n.child.stateNode}try{Ol(r,e)}catch(l){rd(n,n.return,l)}}break;case 26:xo(e,n),512&r&&Kl(n,n.return);break;case 27:case 5:xo(e,n),null===t&&4&r&&Vl(n),512&r&&Kl(n,n.return);break;case 12:default:xo(e,n);break;case 13:xo(e,n),4&r&&co(e,n);break;case 22:if(!(a=null!==n.memoizedState||Yl)){t=null!==t&&null!==t.memoizedState||Ql;var i=Yl,s=Ql;Yl=a,(Ql=t)&&!s?bo(e,n,0!==(8772&n.subtreeFlags)):xo(e,n),Yl=i,Ql=s}512&r&&("manual"===n.memoizedProps.mode?Kl(n,n.return):Ul(n,n.return))}}function ao(e){var t=e.alternate;null!==t&&(e.alternate=null,ao(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&qe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var io=null,so=!1;function lo(e,t,n){for(n=n.child;null!==n;)oo(e,t,n),n=n.sibling}function oo(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(xe,n)}catch(s){}switch(n.tag){case 26:Ql||Ul(n,t),lo(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Ql||Ul(n,t);var r=io,a=so;for(io=n.stateNode,lo(e,t,n),t=(n=n.stateNode).attributes;t.length;)n.removeAttributeNode(t[0]);qe(n),io=r,so=a;break;case 5:Ql||Ul(n,t);case 6:a=io;var i=so;if(io=null,lo(e,t,n),so=i,null!==(io=a))if(so)try{e=io,r=n.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)}catch(l){rd(n,t,l)}else try{io.removeChild(n.stateNode)}catch(l){rd(n,t,l)}break;case 18:null!==io&&(so?(t=io,n=n.stateNode,8===t.nodeType?iu(t.parentNode,n):1===t.nodeType&&iu(t,n),fh(t)):iu(io,n.stateNode));break;case 4:r=io,a=so,io=n.stateNode.containerInfo,so=!0,lo(e,t,n),io=r,so=a;break;case 0:case 11:case 14:case 15:Ql||$l(2,n,t),Ql||$l(4,n,t),lo(e,t,n);break;case 1:Ql||(Ul(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&Ml(n,t,r)),lo(e,t,n);break;case 21:lo(e,t,n);break;case 22:Ql||Ul(n,t),Ql=(r=Ql)||null!==n.memoizedState,lo(e,t,n),Ql=r;break;default:lo(e,t,n)}}function co(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{fh(e)}catch(n){rd(t,t.return,n)}}function uo(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new eo),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new eo),t;default:throw Error(s(435,e.tag))}}(e);t.forEach((function(t){var r=od.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function ho(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r],i=e,l=t,o=l;e:for(;null!==o;){switch(o.tag){case 27:case 5:io=o.stateNode,so=!1;break e;case 3:case 4:io=o.stateNode.containerInfo,so=!0;break e}o=o.return}if(null===io)throw Error(s(160));oo(i,l,a),io=null,so=!1,null!==(i=a.alternate)&&(i.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)po(t,e),t=t.sibling}var mo=null;function po(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ho(t,e),fo(e),4&r&&($l(3,e,e.return),Il(3,e),$l(5,e,e.return));break;case 1:ho(t,e),fo(e),512&r&&(Ql||null===n||Ul(n,n.return)),64&r&&Yl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var a=mo;if(ho(t,e),fo(e),512&r&&(Ql||null===n||Ul(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(r){case"title":(!(i=a.getElementsByTagName("title")[0])||i[Ve]||i[Oe]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=a.createElement(r),a.head.insertBefore(i,a.querySelector("head > title"))),qd(i,r,n),i[Oe]=e,Ye(i),r=i;break e;case"link":var l=Cu("link","href",a).get(r+(n.href||""));if(l)for(var o=0;o<l.length;o++)if((i=l[o]).getAttribute("href")===(null==n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){l.splice(o,1);break t}qd(i=a.createElement(r),r,n),a.head.appendChild(i);break;case"meta":if(l=Cu("meta","content",a).get(r+(n.content||"")))for(o=0;o<l.length;o++)if((i=l[o]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){l.splice(o,1);break t}qd(i=a.createElement(r),r,n),a.head.appendChild(i);break;default:throw Error(s(468,r))}i[Oe]=e,Ye(i),r=i}e.stateNode=r}else zu(a,e.type,e.stateNode);else e.stateNode=ku(a,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?zu(a,e.type,e.stateNode):ku(a,r,e.memoizedProps)):null===r&&null!==e.stateNode&&ql(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(4&r&&null===e.alternate){a=e.stateNode,i=e.memoizedProps;try{for(var c=a.firstChild;c;){var d=c.nextSibling,u=c.nodeName;c[Ve]||"HEAD"===u||"BODY"===u||"SCRIPT"===u||"STYLE"===u||"LINK"===u&&"stylesheet"===c.rel.toLowerCase()||a.removeChild(c),c=d}for(var h=e.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);qd(a,h,i),a[Oe]=e,a[Ie]=i}catch(f){rd(e,e.return,f)}}case 5:if(ho(t,e),fo(e),512&r&&(Ql||null===n||Ul(n,n.return)),32&e.flags){a=e.stateNode;try{kt(a,"")}catch(f){rd(e,e.return,f)}}4&r&&null!=e.stateNode&&ql(e,a=e.memoizedProps,null!==n?n.memoizedProps:a),1024&r&&(Xl=!0);break;case 6:if(ho(t,e),fo(e),4&r){if(null===e.stateNode)throw Error(s(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(f){rd(e,e.return,f)}}break;case 3:if(_u=null,a=mo,mo=hu(t.containerInfo),ho(t,e),mo=a,fo(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{fh(t.containerInfo)}catch(f){rd(e,e.return,f)}Xl&&(Xl=!1,go(e));break;case 4:r=mo,mo=hu(e.stateNode.containerInfo),ho(t,e),fo(e),mo=r;break;case 12:ho(t,e),fo(e);break;case 13:ho(t,e),fo(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(bc=oe()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,uo(e,r)));break;case 22:if(512&r&&(Ql||null===n||Ul(n,n.return)),c=null!==e.memoizedState,d=null!==n&&null!==n.memoizedState,Yl=(u=Yl)||c,Ql=(h=Ql)||d,ho(t,e),Ql=h,Yl=u,fo(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&r&&(t._visibility=c?-2&t._visibility:1|t._visibility,c&&(t=Yl||Ql,null===n||d||t||vo(e)),null===e.memoizedProps||"manual"!==e.memoizedProps.mode))e:for(n=null,t=e;;){if(5===t.tag||26===t.tag||27===t.tag){if(null===n){d=n=t;try{if(a=d.stateNode,c)"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{l=d.stateNode;var p=void 0!==(o=d.memoizedProps.style)&&null!==o&&o.hasOwnProperty("display")?o.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(f){rd(d,d.return,f)}}}else if(6===t.tag){if(null===n){d=t;try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(f){rd(d,d.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,uo(e,n))));break;case 19:ho(t,e),fo(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,uo(e,r)));break;case 21:break;default:ho(t,e),fo(e)}}function fo(e){var t=e.flags;if(2&t){try{if(27!==e.tag){e:{for(var n=e.return;null!==n;){if(Gl(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 27:var a=r.stateNode;Zl(e,Hl(e),a);break;case 5:var i=r.stateNode;32&r.flags&&(kt(i,""),r.flags&=-33),Zl(e,Hl(e),i);break;case 3:case 4:var l=r.stateNode.containerInfo;Jl(e,Hl(e),l);break;default:throw Error(s(161))}}}catch(o){rd(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function go(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;go(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function xo(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)ro(e,t.alternate,t),t=t.sibling}function vo(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:$l(4,t,t.return),vo(t);break;case 1:Ul(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&Ml(t,t.return,n),vo(t);break;case 26:case 27:case 5:Ul(t,t.return),vo(t);break;case 22:Ul(t,t.return),null===t.memoizedState&&vo(t);break;default:vo(t)}e=e.sibling}}function bo(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,a=e,i=t,s=i.flags;switch(i.tag){case 0:case 11:case 15:bo(a,i,n),Il(4,i);break;case 1:if(bo(a,i,n),"function"===typeof(a=(r=i).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){rd(r,r.return,c)}if(null!==(a=(r=i).updateQueue)){var l=r.stateNode;try{var o=a.shared.hiddenCallbacks;if(null!==o)for(a.shared.hiddenCallbacks=null,a=0;a<o.length;a++)Pl(o[a],l)}catch(c){rd(r,r.return,c)}}n&&64&s&&Wl(i),Kl(i,i.return);break;case 26:case 27:case 5:bo(a,i,n),n&&null===r&&4&s&&Vl(i),Kl(i,i.return);break;case 12:default:bo(a,i,n);break;case 13:bo(a,i,n),n&&4&s&&co(a,i);break;case 22:null===i.memoizedState&&bo(a,i,n),Kl(i,i.return)}t=t.sibling}}function jo(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Wa(n))}function yo(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Wa(e))}function ko(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)wo(e,t,n,r),t=t.sibling}function wo(e,t,n,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:ko(e,t,n,r),2048&a&&Il(9,t);break;case 3:ko(e,t,n,r),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Wa(e)));break;case 12:if(2048&a){ko(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,s=i.id,l=i.onPostCommit;"function"===typeof l&&l(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(o){rd(t,t.return,o)}}else ko(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,null!==t.memoizedState?4&i._visibility?ko(e,t,n,r):So(e,t):4&i._visibility?ko(e,t,n,r):(i._visibility|=4,No(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&a&&jo(t.alternate,t);break;case 24:ko(e,t,n,r),2048&a&&yo(t.alternate,t);break;default:ko(e,t,n,r)}}function No(e,t,n,r,a){for(a=a&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,s=t,l=n,o=r,c=s.flags;switch(s.tag){case 0:case 11:case 15:No(i,s,l,o,a),Il(8,s);break;case 23:break;case 22:var d=s.stateNode;null!==s.memoizedState?4&d._visibility?No(i,s,l,o,a):So(i,s):(d._visibility|=4,No(i,s,l,o,a)),a&&2048&c&&jo(s.alternate,s);break;case 24:No(i,s,l,o,a),a&&2048&c&&yo(s.alternate,s);break;default:No(i,s,l,o,a)}t=t.sibling}}function So(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,a=r.flags;switch(r.tag){case 22:So(n,r),2048&a&&jo(r.alternate,r);break;case 24:So(n,r),2048&a&&yo(r.alternate,r);break;default:So(n,r)}t=t.sibling}}var _o=8192;function Co(e){if(e.subtreeFlags&_o)for(e=e.child;null!==e;)zo(e),e=e.sibling}function zo(e){switch(e.tag){case 26:Co(e),e.flags&_o&&null!==e.memoizedState&&function(e,t,n){if(null===Au)throw Error(s(475));var r=Au;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var a=xu(n.href),i=e.querySelector(vu(a));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Du.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=i,void Ye(i);i=e.ownerDocument||e,n=bu(n),(a=du.get(a))&&Nu(n,a),Ye(i=i.createElement("link"));var l=i;l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),qd(i,"link",n),t.instance=i}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Du.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(mo,e.memoizedState,e.memoizedProps);break;case 5:default:Co(e);break;case 3:case 4:var t=mo;mo=hu(e.stateNode.containerInfo),Co(e),mo=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=_o,_o=16777216,Co(e),_o=t):Co(e))}}function To(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Ao(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];to=r,Bo(r,e)}To(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Eo(e),e=e.sibling}function Eo(e){switch(e.tag){case 0:case 11:case 15:Ao(e),2048&e.flags&&$l(9,e,e.return);break;case 3:case 12:default:Ao(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,Do(e)):Ao(e)}}function Do(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];to=r,Bo(r,e)}To(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:$l(8,t,t.return),Do(t);break;case 22:4&(n=t.stateNode)._visibility&&(n._visibility&=-5,Do(t));break;default:Do(t)}e=e.sibling}}function Bo(e,t){for(;null!==to;){var n=to;switch(n.tag){case 0:case 11:case 15:$l(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Wa(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,to=r;else e:for(n=e;null!==to;){var a=(r=to).sibling,i=r.return;if(ao(r),r===n){to=null;break e}if(null!==a){a.return=i,to=a;break e}to=i}}}function Ro(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fo(e,t,n,r){return new Ro(e,t,n,r)}function Lo(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Po(e,t){var n=e.alternate;return null===n?((n=Fo(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=31457280&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Oo(e,t){e.flags&=31457282;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Io(e,t,n,r,a,i){var l=0;if(r=e,"function"===typeof e)Lo(e)&&(l=1);else if("string"===typeof e)l=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,J.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case u:return $o(n.children,a,i,t);case h:l=8,a|=24;break;case m:return(e=Fo(12,n,t,2|a)).elementType=m,e.lanes=i,e;case v:return(e=Fo(13,n,t,a)).elementType=v,e.lanes=i,e;case b:return(e=Fo(19,n,t,a)).elementType=b,e.lanes=i,e;case k:return Wo(n,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case p:case g:l=10;break e;case f:l=9;break e;case x:l=11;break e;case j:l=14;break e;case y:l=16,r=null;break e}l=29,n=Error(s(130,null===e?"null":typeof e,"")),r=null}return(t=Fo(l,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function $o(e,t,n,r){return(e=Fo(7,e,r,t)).lanes=n,e}function Wo(e,t,n,r){(e=Fo(22,e,r,t)).elementType=k,e.lanes=n;var a={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=a._current;if(null===e)throw Error(s(456));if(0===(2&a._pendingVisibility)){var t=Tr(e,2);null!==t&&(a._pendingVisibility|=2,Dc(t,e,2))}},attach:function(){var e=a._current;if(null===e)throw Error(s(456));if(0!==(2&a._pendingVisibility)){var t=Tr(e,2);null!==t&&(a._pendingVisibility&=-3,Dc(t,e,2))}}};return e.stateNode=a,e}function Mo(e,t,n){return(e=Fo(6,e,null,t)).lanes=n,e}function Ko(e,t,n){return(t=Fo(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uo(e){e.flags|=4}function Vo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Tu(t)){if(null!==(t=za.current)&&((4194176&rc)===rc?null!==Ta:(62914560&rc)!==rc&&0===(536870912&rc)||t!==Ta))throw ha=oa,la;e.flags|=8192}}function qo(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ae():536870912,e.lanes|=t,fc|=t)}function Go(e,t){if(!Zr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ho(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=31457280&a.subtreeFlags,r|=31457280&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Jo(e,t,n){var r=t.pendingProps;switch(Gr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return Ho(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),vl(Ia),ee(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ra(t)?Uo(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Yr&&(Rc(Yr),Yr=null))),Ho(t),null;case 26:return n=t.memoizedState,null===e?(Uo(t),null!==n?(Ho(t),Vo(t,n)):(Ho(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Uo(t),Ho(t),Vo(t,n)):(Ho(t),t.flags&=-16777217):(e.memoizedProps!==r&&Uo(t),Ho(t),t.flags&=-16777217),null;case 27:ne(t),n=Y.current;var a=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Uo(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ho(t),null}e=J.current,ra(t)?ta(t):(e=cu(a,r,n),t.stateNode=e,Uo(t))}return Ho(t),null;case 5:if(ne(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Uo(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ho(t),null}if(e=J.current,ra(t))ta(t);else{switch(a=Jd(Y.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?a.createElement("select",{is:r.is}):a.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?a.createElement(n,{is:r.is}):a.createElement(n)}}e[Oe]=t,e[Ie]=r;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(qd(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Uo(t)}}return Ho(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Uo(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(e=Y.current,ra(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(a=Hr))switch(a.tag){case 27:case 5:r=a.memoizedProps}e[Oe]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Md(e.nodeValue,n)))||ea(t)}else(e=Jd(e).createTextNode(r))[Oe]=t,t.stateNode=e}return Ho(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=ra(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[Oe]=t}else aa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ho(t),a=!1}else null!==Yr&&(Rc(Yr),Yr=null),a=!0;if(!a)return 256&t.flags?(Ba(t),t):(Ba(t),null)}if(Ba(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){a=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(a=r.alternate.memoizedState.cachePool.pool);var i=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==a&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),qo(t,t.updateQueue),Ho(t),null;case 4:return ee(),null===e&&Dd(t.stateNode.containerInfo),Ho(t),null;case 10:return vl(t.type),Ho(t),null;case 19:if(G(Ra),null===(a=t.memoizedState))return Ho(t),null;if(r=0!==(128&t.flags),null===(i=a.rendering))if(r)Go(a,!1);else{if(0!==dc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=Fa(e))){for(t.flags|=128,Go(a,!1),e=i.updateQueue,t.updateQueue=e,qo(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Oo(n,e),n=n.sibling;return H(Ra,1&Ra.current|2),t.child}e=e.sibling}null!==a.tail&&oe()>jc&&(t.flags|=128,r=!0,Go(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Fa(i))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,qo(t,e),Go(a,!0),null===a.tail&&"hidden"===a.tailMode&&!i.alternate&&!Zr)return Ho(t),null}else 2*oe()-a.renderingStartTime>jc&&536870912!==n&&(t.flags|=128,r=!0,Go(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=a.last)?e.sibling=i:t.child=i,a.last=i)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=oe(),t.sibling=null,e=Ra.current,H(Ra,r?1&e|2:1&e),t):(Ho(t),null);case 22:case 23:return Ba(t),Ca(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(Ho(t),6&t.subtreeFlags&&(t.flags|=8192)):Ho(t),null!==(n=t.updateQueue)&&qo(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&G(Ha),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),vl(Ia),Ho(t),null;case 25:return null}throw Error(s(156,t.tag))}function Zo(e,t){switch(Gr(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return vl(Ia),ee(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return ne(t),null;case 13:if(Ba(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));aa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return G(Ra),null;case 4:return ee(),null;case 10:return vl(t.type),null;case 22:case 23:return Ba(t),Ca(),null!==e&&G(Ha),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return vl(Ia),null;default:return null}}function Yo(e,t){switch(Gr(t),t.tag){case 3:vl(Ia),ee();break;case 26:case 27:case 5:ne(t);break;case 4:ee();break;case 13:Ba(t);break;case 19:G(Ra);break;case 10:vl(t.type);break;case 22:case 23:Ba(t),Ca(),null!==e&&G(Ha);break;case 24:vl(Ia)}}var Qo={getCacheForType:function(e){var t=Nl(Ia),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},Xo="function"===typeof WeakMap?WeakMap:Map,ec=0,tc=null,nc=null,rc=0,ac=0,ic=null,sc=!1,lc=!1,oc=!1,cc=0,dc=0,uc=0,hc=0,mc=0,pc=0,fc=0,gc=null,xc=null,vc=!1,bc=0,jc=1/0,yc=null,kc=null,wc=!1,Nc=null,Sc=0,_c=0,Cc=null,zc=0,Tc=null;function Ac(){if(0!==(2&ec)&&0!==rc)return rc&-rc;if(null!==A.T){return 0!==Ua?Ua:yd()}return Le()}function Ec(){0===pc&&(pc=0===(536870912&rc)||Zr?Te():536870912);var e=za.current;return null!==e&&(e.flags|=32),pc}function Dc(e,t,n){(e===tc&&2===ac||null!==e.cancelPendingCommit)&&($c(e,0),Pc(e,rc,pc,!1)),De(e,n),0!==(2&ec)&&e===tc||(e===tc&&(0===(2&ec)&&(hc|=n),4===dc&&Pc(e,rc,pc,!1)),fd(e))}function Bc(e,t,n){if(0!==(6&ec))throw Error(s(327));for(var r=!n&&0===(60&t)&&0===(t&e.expiredLanes)||Ce(e,t),a=r?function(e,t){var n=ec;ec|=2;var r=Mc(),a=Kc();tc!==e||rc!==t?(yc=null,jc=oe()+500,$c(e,t)):lc=Ce(e,t);e:for(;;)try{if(0!==ac&&null!==nc){t=nc;var i=ic;t:switch(ac){case 1:ac=0,ic=null,Zc(e,t,i,1);break;case 2:if(ca(i)){ac=0,ic=null,Jc(t);break}t=function(){2===ac&&tc===e&&(ac=7),fd(e)},i.then(t,t);break e;case 3:ac=7;break e;case 4:ac=5;break e;case 7:ca(i)?(ac=0,ic=null,Jc(t)):(ac=0,ic=null,Zc(e,t,i,7));break;case 5:var l=null;switch(nc.tag){case 26:l=nc.memoizedState;case 5:case 27:var o=nc;if(!l||Tu(l)){ac=0,ic=null;var c=o.sibling;if(null!==c)nc=c;else{var d=o.return;null!==d?(nc=d,Yc(d)):nc=null}break t}}ac=0,ic=null,Zc(e,t,i,5);break;case 6:ac=0,ic=null,Zc(e,t,i,6);break;case 8:Ic(),dc=6;break e;default:throw Error(s(462))}}Gc();break}catch(u){Wc(e,u)}return gl=fl=null,A.H=r,A.A=a,ec=n,null!==nc?0:(tc=null,rc=0,_r(),dc)}(e,t):Vc(e,t,!0),i=r;;){if(0===a){lc&&!r&&Pc(e,t,0,!1);break}if(6===a)Pc(e,t,0,!sc);else{if(n=e.current.alternate,i&&!Lc(n)){a=Vc(e,t,!1),i=!1;continue}if(2===a){if(i=t,e.errorRecoveryDisabledLanes&i)var l=0;else l=0!==(l=-536870913&e.pendingLanes)?l:536870912&l?536870912:0;if(0!==l){t=l;e:{var o=e;a=gc;var c=o.current.memoizedState.isDehydrated;if(c&&($c(o,l).flags|=256),2!==(l=Vc(o,l,!1))){if(oc&&!c){o.errorRecoveryDisabledLanes|=i,hc|=i,a=4;break e}i=xc,xc=a,null!==i&&Rc(i)}a=l}if(i=!1,2!==a)continue}}if(1===a){$c(e,0),Pc(e,t,0,!0);break}e:{switch(r=e,a){case 0:case 1:throw Error(s(345));case 4:if((4194176&t)===t){Pc(r,t,pc,!sc);break e}break;case 2:xc=null;break;case 3:case 5:break;default:throw Error(s(329))}if(r.finishedWork=n,r.finishedLanes=t,(62914560&t)===t&&10<(i=bc+300-oe())){if(Pc(r,t,pc,!sc),0!==_e(r,0))break e;r.timeoutHandle=eu(Fc.bind(null,r,n,xc,yc,vc,t,pc,hc,fc,sc,2,-0,0),i)}else Fc(r,n,xc,yc,vc,t,pc,hc,fc,sc,0,-0,0)}}break}fd(e)}function Rc(e){null===xc?xc=e:xc.push.apply(xc,e)}function Fc(e,t,n,r,a,i,l,o,c,d,u,h,m){var p=t.subtreeFlags;if((8192&p||16785408===(16785408&p))&&(Au={stylesheets:null,count:0,unsuspend:Eu},zo(t),null!==(t=function(){if(null===Au)throw Error(s(475));var e=Au;return e.stylesheets&&0===e.count&&Ru(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Ru(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=t(Xc.bind(null,e,n,r,a,l,o,c,1,h,m)),void Pc(e,i,l,!d);Xc(e,n,r,a,l,o,c,u,h,m)}function Lc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!Hn(i(),a))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pc(e,t,n,r){t&=~mc,t&=~hc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var i=31-je(a),s=1<<i;r[i]=-1,a&=~s}0!==n&&Be(e,n,t)}function Oc(){return 0!==(6&ec)||(gd(0,!1),!1)}function Ic(){if(null!==nc){if(0===ac)var e=nc.return;else gl=fl=null,xi(e=nc),pa=null,fa=0,e=nc;for(;null!==e;)Yo(e.alternate,e),e=e.return;nc=null}}function $c(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,tu(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Ic(),tc=e,nc=n=Po(e.current,null),rc=t,ac=0,ic=null,sc=!1,lc=Ce(e,t),oc=!1,fc=pc=mc=hc=uc=dc=0,xc=gc=null,vc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var a=31-je(r),i=1<<a;t|=e[a],r&=~i}return cc=t,_r(),n}function Wc(e,t){Xa=null,A.H=Ns,t===sa?(t=ma(),ac=3):t===la?(t=ma(),ac=4):ac=t===Ms?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,ic=t,null===nc&&(dc=1,Ps(e,Rr(t,e.current)))}function Mc(){var e=A.H;return A.H=Ns,null===e?Ns:e}function Kc(){var e=A.A;return A.A=Qo,e}function Uc(){dc=4,sc||(4194176&rc)!==rc&&null!==za.current||(lc=!0),0===(134217727&uc)&&0===(134217727&hc)||null===tc||Pc(tc,rc,pc,!1)}function Vc(e,t,n){var r=ec;ec|=2;var a=Mc(),i=Kc();tc===e&&rc===t||(yc=null,$c(e,t)),t=!1;var s=dc;e:for(;;)try{if(0!==ac&&null!==nc){var l=nc,o=ic;switch(ac){case 8:Ic(),s=6;break e;case 3:case 2:case 6:null===za.current&&(t=!0);var c=ac;if(ac=0,ic=null,Zc(e,l,o,c),n&&lc){s=0;break e}break;default:c=ac,ac=0,ic=null,Zc(e,l,o,c)}}qc(),s=dc;break}catch(d){Wc(e,d)}return t&&e.shellSuspendCounter++,gl=fl=null,ec=r,A.H=a,A.A=i,null===nc&&(tc=null,rc=0,_r()),s}function qc(){for(;null!==nc;)Hc(nc)}function Gc(){for(;null!==nc&&!se();)Hc(nc)}function Hc(e){var t=ml(e.alternate,e,cc);e.memoizedProps=e.pendingProps,null===t?Yc(e):nc=t}function Jc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Qs(n,t,t.pendingProps,t.type,void 0,rc);break;case 11:t=Qs(n,t,t.pendingProps,t.type.render,t.ref,rc);break;case 5:xi(t);default:Yo(n,t),t=ml(n,t=nc=Oo(t,cc),cc)}e.memoizedProps=e.pendingProps,null===t?Yc(e):nc=t}function Zc(e,t,n,r){gl=fl=null,xi(t),pa=null,fa=0;var a=t.return;try{if(function(e,t,n,r,a){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&yl(t,n,a,!0),null!==(n=za.current)){switch(n.tag){case 13:return null===Ta?Uc():null===n.alternate&&0===dc&&(dc=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===oa?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),ad(e,r,a)),!1;case 22:return n.flags|=65536,r===oa?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),ad(e,r,a)),!1}throw Error(s(435,n.tag))}return ad(e,r,a),Uc(),!1}if(Zr)return null!==(t=za.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==Xr&&ia(Rr(e=Error(s(422),{cause:r}),n))):(r!==Xr&&ia(Rr(t=Error(s(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,r=Rr(r,n),Bl(e,a=Is(e.stateNode,r,a)),4!==dc&&(dc=2)),!1;var i=Error(s(520),{cause:r});if(i=Rr(i,n),null===gc?gc=[i]:gc.push(i),4!==dc&&(dc=2),null===t)return!0;r=Rr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,Bl(n,e=Is(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===kc||!kc.has(i))))return n.flags|=65536,a&=-a,n.lanes|=a,Ws(a=$s(a),e,n,r),Bl(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,rc))return dc=1,Ps(e,Rr(n,e.current)),void(nc=null)}catch(i){if(null!==a)throw nc=a,i;return dc=1,Ps(e,Rr(n,e.current)),void(nc=null)}32768&t.flags?(Zr||1===r?e=!0:lc||0!==(536870912&rc)?e=!1:(sc=e=!0,(2===r||3===r||6===r)&&(null!==(r=za.current)&&13===r.tag&&(r.flags|=16384))),Qc(t,e)):Yc(t)}function Yc(e){var t=e;do{if(0!==(32768&t.flags))return void Qc(t,sc);e=t.return;var n=Jo(t.alternate,t,cc);if(null!==n)return void(nc=n);if(null!==(t=t.sibling))return void(nc=t);nc=t=e}while(null!==t);0===dc&&(dc=5)}function Qc(e,t){do{var n=Zo(e.alternate,e);if(null!==n)return n.flags&=32767,void(nc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(nc=e);nc=e=n}while(null!==e);dc=6,nc=null}function Xc(e,t,n,r,a,i,l,o,c,d){var u=A.T,h=M.p;try{M.p=2,A.T=null,function(e,t,n,r,a,i,l,o){do{td()}while(null!==Nc);if(0!==(6&ec))throw Error(s(327));var c=e.finishedWork;if(r=e.finishedLanes,null===c)return null;if(e.finishedWork=null,e.finishedLanes=0,c===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var d=c.lanes|c.childLanes;if(function(e,t,n,r,a,i){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,o=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var d=31-je(n),u=1<<d;l[d]=0,o[d]=-1;var h=c[d];if(null!==h)for(c[d]=null,d=0;d<h.length;d++){var m=h[d];null!==m&&(m.lane&=-536870913)}n&=~u}0!==r&&Be(e,r,0),0!==i&&0===a&&0!==e.tag&&(e.suspendedLanes|=i&~(s&~t))}(e,r,d|=Sr,i,l,o),e===tc&&(nc=tc=null,rc=0),0===(10256&c.subtreeFlags)&&0===(10256&c.flags)||wc||(wc=!0,_c=d,Cc=n,function(e,t){ae(e,t)}(he,(function(){return td(),null}))),n=0!==(15990&c.flags),0!==(15990&c.subtreeFlags)||n?(n=A.T,A.T=null,i=M.p,M.p=2,l=ec,ec|=4,function(e,t){if(e=e.containerInfo,Gd=Uu,er(e=Xn(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var l=0,o=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==n||0!==a&&3!==h.nodeType||(o=l+a),h!==i||0!==r&&3!==h.nodeType||(c=l+r),3===h.nodeType&&(l+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++d===a&&(o=l),m===i&&++u===r&&(c=l),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}n=-1===o||-1===c?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hd={focusedElem:e,selectionRange:n},Uu=!1,to=t;null!==to;)if(e=(t=to).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,to=e;else for(;null!==to;){switch(i=(t=to).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,a=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var f=Ds(n.type,a,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(f,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(x){rd(n,n.return,x)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))su(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":su(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,to=e;break}to=t.return}f=no,no=!1}(e,c),po(c,e),tr(Hd,e.containerInfo),Uu=!!Gd,Hd=Gd=null,e.current=c,ro(e,c.alternate,c),le(),ec=l,M.p=i,A.T=n):e.current=c,wc?(wc=!1,Nc=e,Sc=r):ed(e,d),d=e.pendingLanes,0===d&&(kc=null),function(e){if(ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(xe,e,void 0,128===(128&e.current.flags))}catch(t){}}(c.stateNode),fd(e),null!==t)for(a=e.onRecoverableError,c=0;c<t.length;c++)d=t[c],a(d.value,{componentStack:d.stack});0!==(3&Sc)&&td(),d=e.pendingLanes,0!==(4194218&r)&&0!==(42&d)?e===Tc?zc++:(zc=0,Tc=e):zc=0,gd(0,!1)}(e,t,n,r,h,a,i,l)}finally{A.T=u,M.p=h}}function ed(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Wa(t)))}function td(){if(null!==Nc){var e=Nc,t=_c;_c=0;var n=Fe(Sc),r=A.T,a=M.p;try{if(M.p=32>n?32:n,A.T=null,null===Nc)var i=!1;else{n=Cc,Cc=null;var l=Nc,o=Sc;if(Nc=null,Sc=0,0!==(6&ec))throw Error(s(331));var c=ec;if(ec|=4,Eo(l.current),wo(l,l.current,o,n),ec=c,gd(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(xe,l)}catch(d){}i=!0}return i}finally{M.p=a,A.T=r,ed(e,t)}}return!1}function nd(e,t,n){t=Rr(n,t),null!==(e=El(e,t=Is(e.stateNode,t,2),2))&&(De(e,2),fd(e))}function rd(e,t,n){if(3===e.tag)nd(e,e,n);else for(;null!==t;){if(3===t.tag){nd(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===kc||!kc.has(r))){e=Rr(n,e),null!==(r=El(t,n=$s(2),2))&&(Ws(n,r,t,e),De(r,2),fd(r));break}}t=t.return}}function ad(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Xo;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(oc=!0,a.add(n),e=id.bind(null,e,t,n),t.then(e,e))}function id(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,tc===e&&(rc&n)===n&&(4===dc||3===dc&&(62914560&rc)===rc&&300>oe()-bc?0===(2&ec)&&$c(e,0):mc|=n,fc===rc&&(fc=0)),fd(e)}function sd(e,t){0===t&&(t=Ae()),null!==(e=Tr(e,t))&&(De(e,t),fd(e))}function ld(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),sd(e,n)}function od(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==r&&r.delete(t),sd(e,n)}var cd=null,dd=null,ud=!1,hd=!1,md=!1,pd=0;function fd(e){var t;e!==dd&&null===e.next&&(null===dd?cd=dd=e:dd=dd.next=e),hd=!0,ud||(ud=!0,t=xd,ru((function(){0!==(6&ec)?ae(de,t):t()})))}function gd(e,t){if(!md&&hd){md=!0;do{for(var n=!1,r=cd;null!==r;){if(!t)if(0!==e){var a=r.pendingLanes;if(0===a)var i=0;else{var s=r.suspendedLanes,l=r.pingedLanes;i=(1<<31-je(42|e)+1)-1,i=201326677&(i&=a&~(s&~l))?201326677&i|1:i?2|i:0}0!==i&&(n=!0,jd(r,i))}else i=rc,0===(3&(i=_e(r,r===tc?i:0)))||Ce(r,i)||(n=!0,jd(r,i));r=r.next}}while(n);md=!1}}function xd(){hd=ud=!1;var e=0;0!==pd&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==Xd&&(Xd=e,!0);return Xd=null,!1}()&&(e=pd),pd=0);for(var t=oe(),n=null,r=cd;null!==r;){var a=r.next,i=vd(r,t);0===i?(r.next=null,null===n?cd=a:n.next=a,null===a&&(dd=n)):(n=r,(0!==e||0!==(3&i))&&(hd=!0)),r=a}gd(e,!1)}function vd(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var s=31-je(i),l=1<<s,o=a[s];-1===o?0!==(l&n)&&0===(l&r)||(a[s]=ze(l,t)):o<=t&&(e.expiredLanes|=l),i&=~l}if(n=rc,n=_e(e,e===(t=tc)?n:0),r=e.callbackNode,0===n||e===t&&2===ac||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ie(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ce(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ie(r),Fe(n)){case 2:case 8:n=ue;break;case 32:default:n=he;break;case 268435456:n=pe}return r=bd.bind(null,e),n=ae(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ie(r),e.callbackPriority=2,e.callbackNode=null,2}function bd(e,t){var n=e.callbackNode;if(td()&&e.callbackNode!==n)return null;var r=rc;return 0===(r=_e(e,e===tc?r:0))?null:(Bc(e,r,t),vd(e,oe()),null!=e.callbackNode&&e.callbackNode===n?bd.bind(null,e):null)}function jd(e,t){if(td())return null;Bc(e,t,!0)}function yd(){return 0===pd&&(pd=Te()),pd}function kd(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Tt(""+e)}function wd(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Nd=0;Nd<yr.length;Nd++){var Sd=yr[Nd];kr(Sd.toLowerCase(),"on"+(Sd[0].toUpperCase()+Sd.slice(1)))}kr(mr,"onAnimationEnd"),kr(pr,"onAnimationIteration"),kr(fr,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(gr,"onTransitionRun"),kr(xr,"onTransitionStart"),kr(vr,"onTransitionCancel"),kr(br,"onTransitionEnd"),tt("onMouseEnter",["mouseout","mouseover"]),tt("onMouseLeave",["mouseout","mouseover"]),tt("onPointerEnter",["pointerout","pointerover"]),tt("onPointerLeave",["pointerout","pointerover"]),et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),et("onBeforeInput",["compositionend","keypress","textInput","paste"]),et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _d="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_d));function zd(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var l=r[s],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==i&&a.isPropagationStopped())break e;i=l,a.currentTarget=c;try{i(a)}catch(d){Bs(d)}a.currentTarget=null,i=o}else for(s=0;s<r.length;s++){if(o=(l=r[s]).instance,c=l.currentTarget,l=l.listener,o!==i&&a.isPropagationStopped())break e;i=l,a.currentTarget=c;try{i(a)}catch(d){Bs(d)}a.currentTarget=null,i=o}}}}function Td(e,t){var n=t[We];void 0===n&&(n=t[We]=new Set);var r=e+"__bubble";n.has(r)||(Bd(t,e,2,!1),n.add(r))}function Ad(e,t,n){var r=0;t&&(r|=4),Bd(n,e,r,t)}var Ed="_reactListening"+Math.random().toString(36).slice(2);function Dd(e){if(!e[Ed]){e[Ed]=!0,Qe.forEach((function(t){"selectionchange"!==t&&(Cd.has(t)||Ad(t,!1,e),Ad(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ed]||(t[Ed]=!0,Ad("selectionchange",!1,t))}}function Bd(e,t,n,r){switch(Yu(t)){case 2:var a=Vu;break;case 8:a=qu;break;default:a=Gu}n=a.bind(null,t,n,e),a=void 0,!Ot||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Rd(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var l=r.stateNode.containerInfo;if(l===a||8===l.nodeType&&l.parentNode===a)break;if(4===s)for(s=r.return;null!==s;){var o=s.tag;if((3===o||4===o)&&((o=s.stateNode.containerInfo)===a||8===o.nodeType&&o.parentNode===a))return;s=s.return}for(;null!==l;){if(null===(s=Ge(l)))return;if(5===(o=s.tag)||6===o||26===o||27===o){r=i=s;continue e}l=l.parentNode}}r=r.return}Lt((function(){var r=i,a=Et(n),s=[];e:{var l=jr.get(e);if(void 0!==l){var o=Qt,c=e;switch(e){case"keypress":if(0===Ut(n))break e;case"keydown":case"keyup":o=pn;break;case"focusin":c="focus",o=an;break;case"focusout":c="blur",o=an;break;case"beforeblur":case"afterblur":o=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=gn;break;case mr:case pr:case fr:o=sn;break;case br:o=xn;break;case"scroll":case"scrollend":o=en;break;case"wheel":o=vn;break;case"copy":case"cut":case"paste":o=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=fn;break;case"toggle":case"beforetoggle":o=bn}var d=0!==(4&t),u=!d&&("scroll"===e||"scrollend"===e),h=d?null!==l?l+"Capture":null:l;d=[];for(var m,p=r;null!==p;){var f=p;if(m=f.stateNode,5!==(f=f.tag)&&26!==f&&27!==f||null===m||null===h||null!=(f=Pt(p,h))&&d.push(Fd(p,f,m)),u)break;p=p.return}0<d.length&&(l=new o(l,c,null,n,a),s.push({event:l,listeners:d}))}}if(0===(7&t)){if(o="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===At||!(c=n.relatedTarget||n.fromElement)||!Ge(c)&&!c[$e])&&(o||l)&&(l=a.window===a?a:(l=a.ownerDocument)?l.defaultView||l.parentWindow:window,o?(o=r,null!==(c=(c=n.relatedTarget||n.toElement)?Ge(c):null)&&(u=P(c),d=c.tag,c!==u||5!==d&&27!==d&&6!==d)&&(c=null)):(o=null,c=r),o!==c)){if(d=nn,f="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=fn,f="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==o?l:Je(o),m=null==c?l:Je(c),(l=new d(f,p+"leave",o,n,a)).target=u,l.relatedTarget=m,f=null,Ge(a)===r&&((d=new d(h,p+"enter",c,n,a)).target=m,d.relatedTarget=u,f=d),u=f,o&&c)e:{for(h=c,p=0,m=d=o;m;m=Pd(m))p++;for(m=0,f=h;f;f=Pd(f))m++;for(;0<p-m;)d=Pd(d),p--;for(;0<m-p;)h=Pd(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Pd(d),h=Pd(h)}d=null}else d=null;null!==o&&Od(s,l,o,d,!1),null!==c&&null!==u&&Od(s,u,c,d,!0)}if("select"===(o=(l=r?Je(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===o&&"file"===l.type)var g=Pn;else if(En(l))if(On)g=Gn;else{g=Vn;var x=Un}else!(o=l.nodeName)||"input"!==o.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?r&&_t(r.elementType)&&(g=Pn):g=qn;switch(g&&(g=g(e,r))?Dn(s,g,n,a):(x&&x(e,l,r),"focusout"===e&&r&&"number"===l.type&&null!=r.memoizedProps.value&&vt(l,"number",l.value)),x=r?Je(r):window,e){case"focusin":(En(x)||"true"===x.contentEditable)&&(rr=x,ar=r,ir=null);break;case"focusout":ir=ar=rr=null;break;case"mousedown":sr=!0;break;case"contextmenu":case"mouseup":case"dragend":sr=!1,lr(s,n,a);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":lr(s,n,a)}var v;if(yn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Tn?Cn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Nn&&"ko"!==n.locale&&(Tn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Tn&&(v=Kt()):(Wt="value"in($t=a)?$t.value:$t.textContent,Tn=!0)),0<(x=Ld(r,b)).length&&(b=new on(b,e,null,n,a),s.push({event:b,listeners:x}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=wn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(_n=!0,Sn);case"textInput":return(e=t.data)===Sn&&_n?null:e;default:return null}}(e,n):function(e,t){if(Tn)return"compositionend"===e||!yn&&Cn(e,t)?(e=Kt(),Mt=Wt=$t=null,Tn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(b=Ld(r,"onBeforeInput")).length&&(x=new on("onBeforeInput","beforeinput",null,n,a),s.push({event:x,listeners:b}),x.data=v)),function(e,t,n,r,a){if("submit"===t&&n&&n.stateNode===a){var i=kd((a[Ie]||null).action),s=r.submitter;s&&null!==(t=(t=s[Ie]||null)?kd(t.formAction):s.getAttribute("formAction"))&&(i=t,s=null);var l=new Qt("action","action",null,r,a);e.push({event:l,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==pd){var e=s?wd(a,s):new FormData(a);ds(n,{pending:!0,data:e,method:a.method,action:i},null,e)}}else"function"===typeof i&&(l.preventDefault(),e=s?wd(a,s):new FormData(a),ds(n,{pending:!0,data:e,method:a.method,action:i},i,e))},currentTarget:a}]})}}(s,e,r,n,a)}zd(s,t)}))}function Fd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ld(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5!==(a=a.tag)&&26!==a&&27!==a||null===i||(null!=(a=Pt(e,n))&&r.unshift(Fd(e,a,i)),null!=(a=Pt(e,t))&&r.push(Fd(e,a,i))),e=e.return}return r}function Pd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Od(e,t,n,r,a){for(var i=t._reactName,s=[];null!==n&&n!==r;){var l=n,o=l.alternate,c=l.stateNode;if(l=l.tag,null!==o&&o===r)break;5!==l&&26!==l&&27!==l||null===c||(o=c,a?null!=(c=Pt(n,i))&&s.unshift(Fd(n,c,o)):a||null!=(c=Pt(n,i))&&s.push(Fd(n,c,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Id=/\r\n?/g,$d=/\u0000|\uFFFD/g;function Wd(e){return("string"===typeof e?e:""+e).replace(Id,"\n").replace($d,"")}function Md(e,t){return t=Wd(t),Wd(e)===t}function Kd(){}function Ud(e,t,n,r,a,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":lt(e,"class",r);break;case"tabIndex":lt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":lt(e,n,r);break;case"style":St(e,r,i);break;case"data":if("object"!==t){lt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Tt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&Ud(e,t,"name",a.name,a,null),Ud(e,t,"formEncType",a.formEncType,a,null),Ud(e,t,"formMethod",a.formMethod,a,null),Ud(e,t,"formTarget",a.formTarget,a,null)):(Ud(e,t,"encType",a.encType,a,null),Ud(e,t,"method",a.method,a,null),Ud(e,t,"target",a.target,a,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Tt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Kd);break;case"onScroll":null!=r&&Td("scroll",e);break;case"onScrollEnd":null!=r&&Td("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Tt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Td("beforetoggle",e),Td("toggle",e),st(e,"popover",r);break;case"xlinkActuate":ot(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ot(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ot(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ot(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ot(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ot(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ot(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ot(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ot(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":st(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&st(e,n=Ct.get(n)||n,r)}}function Vd(e,t,n,r,a,i){switch(n){case"style":St(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"===typeof r?kt(e,r):("number"===typeof r||"bigint"===typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&Td("scroll",e);break;case"onScrollEnd":null!=r&&Td("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Kd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Xe.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Ie]||null)?i[n]:null)&&e.removeEventListener(t,i,a),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):st(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a)))}}function qd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Td("error",e),Td("load",e);var r,a=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var l=n[r];if(null!=l)switch(r){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Ud(e,t,r,l,n,null)}}return i&&Ud(e,t,"srcSet",n.srcSet,n,null),void(a&&Ud(e,t,"src",n.src,n,null));case"input":Td("invalid",e);var o=r=l=i=null,c=null,d=null;for(a in n)if(n.hasOwnProperty(a)){var u=n[a];if(null!=u)switch(a){case"name":i=u;break;case"type":l=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":r=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(s(137,t));break;default:Ud(e,t,a,u,n,null)}}return xt(e,r,o,c,d,l,i,!1),void ut(e);case"select":for(i in Td("invalid",e),a=l=r=null,n)if(n.hasOwnProperty(i)&&null!=(o=n[i]))switch(i){case"value":r=o;break;case"defaultValue":l=o;break;case"multiple":a=o;default:Ud(e,t,i,o,n,null)}return t=r,n=l,e.multiple=!!a,void(null!=t?bt(e,!!a,t,!1):null!=n&&bt(e,!!a,n,!0));case"textarea":for(l in Td("invalid",e),r=i=a=null,n)if(n.hasOwnProperty(l)&&null!=(o=n[l]))switch(l){case"value":a=o;break;case"defaultValue":i=o;break;case"children":r=o;break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(s(91));break;default:Ud(e,t,l,o,n,null)}return yt(e,a,i,r),void ut(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(a=n[c]))if("selected"===c)e.selected=a&&"function"!==typeof a&&"symbol"!==typeof a;else Ud(e,t,c,a,n,null);return;case"dialog":Td("cancel",e),Td("close",e);break;case"iframe":case"object":Td("load",e);break;case"video":case"audio":for(a=0;a<_d.length;a++)Td(_d[a],e);break;case"image":Td("error",e),Td("load",e);break;case"details":Td("toggle",e);break;case"embed":case"source":case"link":Td("error",e),Td("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&null!=(a=n[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Ud(e,t,d,a,n,null)}return;default:if(_t(t)){for(u in n)n.hasOwnProperty(u)&&(void 0!==(a=n[u])&&Vd(e,t,u,a,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(null!=(a=n[o])&&Ud(e,t,o,a,n,null))}var Gd=null,Hd=null;function Jd(e){return 9===e.nodeType?e:e.ownerDocument}function Zd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Yd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function Qd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Xd=null;var eu="function"===typeof setTimeout?setTimeout:void 0,tu="function"===typeof clearTimeout?clearTimeout:void 0,nu="function"===typeof Promise?Promise:void 0,ru="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nu?function(e){return nu.resolve(null).then(e).catch(au)}:eu;function au(e){setTimeout((function(){throw e}))}function iu(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void fh(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);fh(t)}function su(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":su(n),qe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function lu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}function ou(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function cu(e,t,n){switch(t=Jd(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}var du=new Map,uu=new Set;function hu(e){return"function"===typeof e.getRootNode?e.getRootNode():e.ownerDocument}var mu=M.d;M.d={f:function(){var e=mu.f(),t=Oc();return e||t},r:function(e){var t=He(e);null!==t&&5===t.tag&&"form"===t.type?hs(t):mu.r(e)},D:function(e){mu.D(e),fu("dns-prefetch",e,null)},C:function(e,t){mu.C(e,t),fu("preconnect",e,t)},L:function(e,t,n){mu.L(e,t,n);var r=pu;if(r&&e&&t){var a='link[rel="preload"][as="'+ft(t)+'"]';"image"===t&&n&&n.imageSrcSet?(a+='[imagesrcset="'+ft(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(a+='[imagesizes="'+ft(n.imageSizes)+'"]')):a+='[href="'+ft(e)+'"]';var i=a;switch(t){case"style":i=xu(e);break;case"script":i=ju(e)}du.has(i)||(e=E({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),du.set(i,e),null!==r.querySelector(a)||"style"===t&&r.querySelector(vu(i))||"script"===t&&r.querySelector(yu(i))||(qd(t=r.createElement("link"),"link",e),Ye(t),r.head.appendChild(t)))}},m:function(e,t){mu.m(e,t);var n=pu;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+ft(r)+'"][href="'+ft(e)+'"]',i=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=ju(e)}if(!du.has(i)&&(e=E({rel:"modulepreload",href:e},t),du.set(i,e),null===n.querySelector(a))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(yu(i)))return}qd(r=n.createElement("link"),"link",e),Ye(r),n.head.appendChild(r)}}},X:function(e,t){mu.X(e,t);var n=pu;if(n&&e){var r=Ze(n).hoistableScripts,a=ju(e),i=r.get(a);i||((i=n.querySelector(yu(a)))||(e=E({src:e,async:!0},t),(t=du.get(a))&&Su(e,t),Ye(i=n.createElement("script")),qd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(a,i))}},S:function(e,t,n){mu.S(e,t,n);var r=pu;if(r&&e){var a=Ze(r).hoistableStyles,i=xu(e);t=t||"default";var s=a.get(i);if(!s){var l={loading:0,preload:null};if(s=r.querySelector(vu(i)))l.loading=5;else{e=E({rel:"stylesheet",href:e,"data-precedence":t},n),(n=du.get(i))&&Nu(e,n);var o=s=r.createElement("link");Ye(o),qd(o,"link",e),o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),o.addEventListener("load",(function(){l.loading|=1})),o.addEventListener("error",(function(){l.loading|=2})),l.loading|=4,wu(s,t,r)}s={type:"stylesheet",instance:s,count:1,state:l},a.set(i,s)}}},M:function(e,t){mu.M(e,t);var n=pu;if(n&&e){var r=Ze(n).hoistableScripts,a=ju(e),i=r.get(a);i||((i=n.querySelector(yu(a)))||(e=E({src:e,async:!0,type:"module"},t),(t=du.get(a))&&Su(e,t),Ye(i=n.createElement("script")),qd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(a,i))}}};var pu="undefined"===typeof document?null:document;function fu(e,t,n){var r=pu;if(r&&"string"===typeof t&&t){var a=ft(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"===typeof n&&(a+='[crossorigin="'+n+'"]'),uu.has(a)||(uu.add(a),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(a)&&(qd(t=r.createElement("link"),"link",e),Ye(t),r.head.appendChild(t)))}}function gu(e,t,n,r){var a,i,l,o,c=(c=Y.current)?hu(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=xu(n.href),(r=(n=Ze(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=xu(n.href);var d=Ze(c).hoistableStyles,u=d.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,u),(d=c.querySelector(vu(e)))&&!d._p&&(u.instance=d,u.state.loading=5),du.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},du.set(e,n),d||(a=c,i=e,l=n,o=u.state,a.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=a.createElement("link"),o.preload=i,i.addEventListener("load",(function(){return o.loading|=1})),i.addEventListener("error",(function(){return o.loading|=2})),qd(i,"link",l),Ye(i),a.head.appendChild(i))))),t&&null===r)throw Error(s(528,""));return u}if(t&&null!==r)throw Error(s(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=ju(n),(r=(n=Ze(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function xu(e){return'href="'+ft(e)+'"'}function vu(e){return'link[rel="stylesheet"]['+e+"]"}function bu(e){return E({},e,{"data-precedence":e.precedence,precedence:null})}function ju(e){return'[src="'+ft(e)+'"]'}function yu(e){return"script[async]"+e}function ku(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+ft(n.href)+'"]');if(r)return t.instance=r,Ye(r),r;var a=E({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ye(r=(e.ownerDocument||e).createElement("style")),qd(r,"style",a),wu(r,n.precedence,e),t.instance=r;case"stylesheet":a=xu(n.href);var i=e.querySelector(vu(a));if(i)return t.state.loading|=4,t.instance=i,Ye(i),i;r=bu(n),(a=du.get(a))&&Nu(r,a),Ye(i=(e.ownerDocument||e).createElement("link"));var l=i;return l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),qd(i,"link",r),t.state.loading|=4,wu(i,n.precedence,e),t.instance=i;case"script":return i=ju(n.src),(a=e.querySelector(yu(i)))?(t.instance=a,Ye(a),a):(r=n,(a=du.get(i))&&Su(r=E({},n),a),Ye(a=(e=e.ownerDocument||e).createElement("script")),qd(a,"link",r),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,wu(r,n.precedence,e));return t.instance}function wu(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,i=a,s=0;s<r.length;s++){var l=r[s];if(l.dataset.precedence===t)i=l;else if(i!==a)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Nu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Su(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var _u=null;function Cu(e,t,n){if(null===_u){var r=new Map,a=_u=new Map;a.set(n,r)}else(r=(a=_u).get(n))||(r=new Map,a.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var i=n[a];if(!(i[Ve]||i[Oe]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var s=i.getAttribute(t)||"";s=e+s;var l=r.get(s);l?l.push(i):r.set(s,[i])}}return r}function zu(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Tu(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Au=null;function Eu(){}function Du(){if(this.count--,0===this.count)if(this.stylesheets)Ru(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Bu=null;function Ru(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Bu=new Map,t.forEach(Fu,e),Bu=null,Du.call(e))}function Fu(e,t){if(!(4&t.state.loading)){var n=Bu.get(e);if(n)var r=n.get(null);else{n=new Map,Bu.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var s=a[i];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}s=(a=t.instance).getAttribute("data-precedence"),(i=n.get(s)||r)===r&&n.set(null,a),n.set(s,a),this.count++,r=Du.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),i?i.parentNode.insertBefore(a,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var Lu={$$typeof:g,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function Pu(e,t,n,r,a,i,s,l){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.hiddenUpdates=Ee(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function Ou(e,t,n,r,a,i,s,l,o,c,d,u){return e=new Pu(e,t,n,s,l,o,c,u),t=1,!0===i&&(t|=24),i=Fo(3,null,null,t),e.current=i,i.stateNode=e,(t=$a()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},zl(i),e}function Iu(e){return e?e=Dr:Dr}function $u(e,t,n,r,a,i){a=Iu(a),null===r.context?r.context=a:r.pendingContext=a,(r=Al(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=El(e,r,t))&&(Dc(n,0,t),Dl(n,e,t))}function Wu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Mu(e,t){Wu(e,t),(e=e.alternate)&&Wu(e,t)}function Ku(e){if(13===e.tag){var t=Tr(e,67108864);null!==t&&Dc(t,0,67108864),Mu(e,67108864)}}var Uu=!0;function Vu(e,t,n,r){var a=A.T;A.T=null;var i=M.p;try{M.p=2,Gu(e,t,n,r)}finally{M.p=i,A.T=a}}function qu(e,t,n,r){var a=A.T;A.T=null;var i=M.p;try{M.p=8,Gu(e,t,n,r)}finally{M.p=i,A.T=a}}function Gu(e,t,n,r){if(Uu){var a=Hu(r);if(null===a)Rd(e,t,r,Ju,n),sh(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Xu=lh(Xu,e,t,n,r,a),!0;case"dragenter":return eh=lh(eh,e,t,n,r,a),!0;case"mouseover":return th=lh(th,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return nh.set(i,lh(nh.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,rh.set(i,lh(rh.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(sh(e,r),4&t&&-1<ih.indexOf(e)){for(;null!==a;){var i=He(a);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var s=Se(i.pendingLanes);if(0!==s){var l=i;for(l.pendingLanes|=2,l.entangledLanes|=2;s;){var o=1<<31-je(s);l.entanglements[1]|=o,s&=~o}fd(i),0===(6&ec)&&(jc=oe()+500,gd(0,!1))}}break;case 13:null!==(l=Tr(i,2))&&Dc(l,0,2),Oc(),Mu(i,2)}if(null===(i=Hu(r))&&Rd(e,t,r,Ju,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Rd(e,t,r,null,n)}}function Hu(e){return Zu(e=Et(e))}var Ju=null;function Zu(e){if(Ju=null,null!==(e=Ge(e))){var t=P(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=O(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ju=e,null}function Yu(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case de:return 2;case ue:return 8;case he:case me:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Qu=!1,Xu=null,eh=null,th=null,nh=new Map,rh=new Map,ah=[],ih="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sh(e,t){switch(e){case"focusin":case"focusout":Xu=null;break;case"dragenter":case"dragleave":eh=null;break;case"mouseover":case"mouseout":th=null;break;case"pointerover":case"pointerout":nh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rh.delete(t.pointerId)}}function lh(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=He(t))&&Ku(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function oh(e){var t=Ge(e.target);if(null!==t){var n=P(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=O(n)))return e.blockedOn=t,void function(e,t){var n=M.p;try{return M.p=e,t()}finally{M.p=n}}(e.priority,(function(){if(13===n.tag){var e=Ac(),t=Tr(n,e);null!==t&&Dc(t,0,e),Mu(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function ch(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Hu(e.nativeEvent);if(null!==n)return null!==(t=He(n))&&Ku(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);At=r,n.target.dispatchEvent(r),At=null,t.shift()}return!0}function dh(e,t,n){ch(e)&&n.delete(t)}function uh(){Qu=!1,null!==Xu&&ch(Xu)&&(Xu=null),null!==eh&&ch(eh)&&(eh=null),null!==th&&ch(th)&&(th=null),nh.forEach(dh),rh.forEach(dh)}function hh(e,t){e.blockedOn===t&&(e.blockedOn=null,Qu||(Qu=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,uh)))}var mh=null;function ph(e){mh!==e&&(mh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){mh===e&&(mh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],a=e[t+2];if("function"!==typeof r){if(null===Zu(r||n))continue;break}var i=He(n);null!==i&&(e.splice(t,3),t-=3,ds(i,{pending:!0,data:a,method:n.method,action:r},r,a))}})))}function fh(e){function t(t){return hh(t,e)}null!==Xu&&hh(Xu,e),null!==eh&&hh(eh,e),null!==th&&hh(th,e),nh.forEach(t),rh.forEach(t);for(var n=0;n<ah.length;n++){var r=ah[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<ah.length&&null===(n=ah[0]).blockedOn;)oh(n),null===n.blockedOn&&ah.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var a=n[r],i=n[r+1],s=a[Ie]||null;if("function"===typeof i)s||ph(n);else if(s){var l=null;if(i&&i.hasAttribute("formAction")){if(a=i,s=i[Ie]||null)l=s.formAction;else if(null!==Zu(a))continue}else l=s.action;"function"===typeof l?n[r+1]=l:(n.splice(r,3),r-=3),ph(n)}}}function gh(e){this._internalRoot=e}function xh(e){this._internalRoot=e}xh.prototype.render=gh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));$u(t.current,Ac(),e,t,null,null)},xh.prototype.unmount=gh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;0===e.tag&&td(),$u(e.current,2,null,e,null,null),Oc(),t[$e]=null}},xh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Le();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ah.length&&0!==t&&t<ah[n].priority;n++);ah.splice(n,0,e),0===n&&oh(e)}};var vh=a.version;if("19.0.0"!==vh)throw Error(s(527,vh,"19.0.0"));M.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=P(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return I(a),e;if(i===r)return I(a),t;i=i.sibling}throw Error(s(188))}if(n.return!==r.return)n=a,r=i;else{for(var l=!1,o=a.child;o;){if(o===n){l=!0,n=a,r=i;break}if(o===r){l=!0,r=a,n=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===n){l=!0,n=i,r=a;break}if(o===r){l=!0,r=i,n=a;break}o=o.sibling}if(!l)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?$(e):null)?null:e.stateNode};var bh={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:A,findFiberByHostInstance:Ge,reconcilerVersion:"19.0.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jh.isDisabled&&jh.supportsFiber)try{xe=jh.inject(bh),ve=jh}catch(kh){}}t.createRoot=function(e,t){if(!l(e))throw Error(s(299));var n=!1,r="",a=Rs,i=Fs,o=Ls;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(o=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Ou(e,1,!1,null,0,n,r,a,i,o,0,null),e[$e]=t.current,Dd(8===e.nodeType?e.parentNode:e),new gh(t)},t.hydrateRoot=function(e,t,n){if(!l(e))throw Error(s(299));var r=!1,a="",i=Rs,o=Fs,c=Ls,d=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(o=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(d=n.formState)),(t=Ou(e,1,!0,t,0,r,a,i,o,c,0,d)).context=Iu(null),n=t.current,(a=Al(r=Ac())).callback=null,El(n,a,r),t.current.lanes=r,De(t,r),fd(t),e[$e]=t.current,Dd(e),new xh(t)},t.version="19.0.0"},43:(e,t,n)=>{e.exports=n(288)},201:(e,t,n)=>{n.d(t,{Qd:()=>a,updateVerein:()=>i});var r=n(825);async function a(e){try{const t=await(0,r.H2)(`/api/vereine/${e}`);return t.success&&t.data?t.data:t}catch(t){throw console.error("API Fehler getVereinById:",t),new Error("Fehler beim Abrufen des Vereins!")}}async function i(e,t){try{return await(0,r.H2)(`/api/vereine/${e}`,{method:"PUT",body:JSON.stringify(t)})}catch(n){throw console.error("API Fehler updateVerein:",n),new Error("Fehler beim Aktualisieren des Vereins!")}}},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=x.prototype;var j=b.prototype=new v;j.constructor=b,f(j,x.prototype),j.isPureReactComponent=!0;var y=Array.isArray,k={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function N(e,t,r,a,i,s){return r=s.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:s}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function z(){}function T(e,t,a,i,s){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var o,c,d=!1;if(null===e)d=!0;else switch(l){case"bigint":case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case n:case r:d=!0;break;case h:return T((d=e._init)(e._payload),t,a,i,s)}}if(d)return s=s(e),d=""===i?"."+C(e,0):i,y(s)?(a="",null!=d&&(a=d.replace(_,"$&/")+"/"),T(s,t,a,"",(function(e){return e}))):null!=s&&(S(s)&&(o=s,c=a+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(_,"$&/")+"/")+d,s=N(o.type,c,void 0,0,0,o.props)),t.push(s)),1;d=0;var u,p=""===i?".":i+":";if(y(e))for(var f=0;f<e.length;f++)d+=T(i=e[f],t,a,l=p+C(i,f),s);else if("function"===typeof(f=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=m&&u[m]||u["@@iterator"])?u:null))for(e=f.call(e),f=0;!(i=e.next()).done;)d+=T(i=i.value,t,a,l=p+C(i,f++),s);else if("object"===l){if("function"===typeof e.then)return T(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(z,z):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,i,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return d}function A(e,t,n){if(null==e)return e;var r=[],a=0;return T(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function E(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function B(){}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=a,t.Profiler=s,t.PureComponent=b,t.StrictMode=i,t.Suspense=d,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.act=function(){throw Error("act(...) is not supported in production builds of React.")},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=f({},e.props),a=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(a=""+t.key),t)!w.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+2];r.children=s}return N(e.type,a,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:l,_context:e},e},t.createElement=function(e,t,n){var r,a={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)w.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var l=Array(s),o=0;o<s;o++)l[o]=arguments[o+2];a.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return N(e,i,void 0,0,0,a)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:E}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var r=e(),a=k.S;null!==a&&a(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(B,D)}catch(i){D(i)}finally{k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return k.H.useEffect(e,t)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.0.0"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},488:(e,t,n)=>{n.d(t,{A:()=>a});const r={API_BASE_URL:"",BASE_URL:"",DEBUG:!1,API_TIMEOUT:1e4,MAX_RETRIES:3,HEALTH_CHECK_URL:"/api/health"};console.log("\ud83d\udd27 Frontend Config geladen:",r);const a=r},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(a(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");var o=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:l,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=o.T,n=s.p;try{if(o.T=null,s.p=2,e)return e()}finally{o.T=t,s.p=n,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),a="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:i}):"script"===n&&s.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);s.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return o.H.useFormState(e,t,n)},t.useFormStatus=function(){return o.H.useHostTransitionStatus()},t.version="19.0.0"},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(e,t,r){var a=null;if(void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:a,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=a,t.jsxs=a},825:(e,t,n)=>{n.d(t,{H2:()=>h});var r=n(488);let a=!1;const i=e=>{if(!e)return null;try{const t=e.split(".");if(3!==t.length)return null;return JSON.parse(atob(t[1]))}catch(t){return console.warn("\u26a0\ufe0f [Auth] Token konnte nicht dekodiert werden"),null}},s=e=>{const t=i(e);if(!t||!t.exp)return!1;const n=Math.floor(Date.now()/1e3);return t.exp>n},l=e=>{const t=i(e);if(!t||!t.exp)return!1;const n=Date.now();return 1e3*t.exp-n<18e5},o=async()=>{if(a)return;const e=d();if(e&&s(e)&&l(e)){a=!0,console.log("\ud83d\udd04 [Auth] Token l\xe4uft bald ab - Versuche Verl\xe4ngerung...");try{const n=(null===r.A||void 0===r.A?void 0:r.A.API_BASE_URL)||"https://events.tda-intl.org",a=await fetch(`${n}/api/auth/refresh`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(a.ok){const e=await a.json();if(e.token){localStorage.setItem("token",e.token),localStorage.setItem("authToken",e.token);try{const t=JSON.parse(localStorage.getItem("clubData")||"{}");t.token=e.token,localStorage.setItem("clubData",JSON.stringify(t))}catch(t){}console.log("\u2705 [Auth] Token erfolgreich um 2 Stunden verl\xe4ngert")}}else console.warn("\u26a0\ufe0f [Auth] Token-Refresh fehlgeschlagen:",a.status)}catch(n){console.error("\u274c [Auth] Token-Refresh Fehler:",n.message)}finally{a=!1}}},c=()=>{console.log("\ud83d\udeaa [Auth] Token abgelaufen - Automatischer Logout..."),localStorage.removeItem("token"),localStorage.removeItem("authToken"),localStorage.removeItem("clubData"),localStorage.removeItem("clubId"),localStorage.removeItem("vereins_id"),window.dispatchEvent(new CustomEvent("auth:logout",{detail:{reason:"token_expired"}})),window.location.href="/login?expired=1"},d=()=>{try{const e=JSON.parse(localStorage.getItem("clubData")||"{}");if(e.token)return e.token}catch(e){console.warn("\u26a0\ufe0f [Auth] Fehler beim Parsen von clubData")}return localStorage.getItem("authToken")||localStorage.getItem("token")||null},u=()=>{const e=d(),t={"Content-Type":"application/json"};return e?t.Authorization=`Bearer ${e}`:console.warn("\u26a0\ufe0f [Auth] Kein Token f\xfcr API-Request gefunden"),t},h=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await o();const n=`${(null===r.A||void 0===r.A?void 0:r.A.API_BASE_URL)||"https://events.tda-intl.org"}${e}`,a={...u(),...t.headers};t.body instanceof FormData&&delete a["Content-Type"];const i={...t,headers:a};console.log(`\ud83d\udce1 [API] ${t.method||"GET"} ${e}`);try{const t=await fetch(n,i);if(401===t.status)throw console.error("\u274c [API] 401 Unauthorized - Token abgelaufen oder ung\xfcltig"),c(),new Error("Sitzung abgelaufen. Sie werden zur Anmeldung weitergeleitet.");if(403===t.status)throw new Error("Keine Berechtigung f\xfcr diese Aktion.");if(!t.ok){const e=t.headers.get("content-type");if(e&&e.includes("application/json")){const e=await t.json();throw new Error(e.message||e.error||`HTTP ${t.status}`)}{const e=await t.text();throw new Error(`HTTP ${t.status}: ${e.substring(0,100)}`)}}const r=t.headers.get("content-type");if(r&&r.includes("application/json")){const n=await t.json();return console.log(`\u2705 [API] Success: ${e}`),n}return await t.text()}catch(s){throw s.message.includes("Sitzung abgelaufen")||console.error(`\u274c [API] Error f\xfcr ${e}:`,s.message),s}}},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,s=a>>>1;r<s;){var l=2*(r+1)-1,o=e[l],c=l+1,d=e[c];if(0>i(o,n))c<a&&0>i(d,o)?(e[r]=d,e[c]=n,r=c):(e[r]=o,e[l]=n,r=l);else{if(!(c<a&&0>i(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,h=null,m=3,p=!1,f=!1,g=!1,x="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function j(e){for(var t=r(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function y(e){if(g=!1,j(e),!f)if(null!==r(c))f=!0,E();else{var t=r(d);null!==t&&D(y,t.startTime-e)}}var k,w=!1,N=-1,S=5,_=-1;function C(){return!(t.unstable_now()-_<S)}function z(){if(w){var e=t.unstable_now();_=e;var n=!0;try{e:{f=!1,g&&(g=!1,v(N),N=-1),p=!0;var i=m;try{t:{for(j(e),h=r(c);null!==h&&!(h.expirationTime>e&&C());){var s=h.callback;if("function"===typeof s){h.callback=null,m=h.priorityLevel;var l=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof l){h.callback=l,j(e),n=!0;break t}h===r(c)&&a(c),j(e)}else a(c);h=r(c)}if(null!==h)n=!0;else{var o=r(d);null!==o&&D(y,o.startTime-e),n=!1}}break e}finally{h=null,m=i,p=!1}n=void 0}}finally{n?k():w=!1}}}if("function"===typeof b)k=function(){b(z)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,A=T.port2;T.port1.onmessage=z,k=function(){A.postMessage(null)}}else k=function(){x(z,0)};function E(){w||(w=!0,k())}function D(e,n){N=x((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,E())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,a,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:i,expirationTime:l=i+l,sortIndex:-1},i>s?(e.sortIndex=i,n(d,e),null===r(c)&&e===r(d)&&(g?(v(N),N=-1):g=!0,D(y,i-s))):(e.sortIndex=l,n(c,e),f||p||(f=!0,E())),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var l=2&a&&r;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(i,s),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".8ab44547.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="frontend:";n.l=(r,a,i,s)=>{if(e[r])e[r].push(a);else{var l,o;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+i){l=u;break}}l||(o=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+i),l.src=r),e[r]=[a];var h=(t,n)=>{l.onerror=l.onload=null,clearTimeout(m);var a=e[r];if(delete e[r],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach((e=>e(n))),t)return t(n)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=h.bind(null,l.onerror),l.onload=h.bind(null,l.onload),o&&document.head.appendChild(l)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise(((n,r)=>a=e[t]=[n,r]));r.push(a[2]=i);var s=n.p+n.u(t),l=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",l.name="ChunkLoadError",l.type=i,l.request=s,a[1](l)}}),"chunk-"+t,t)}};var t=(t,r)=>{var a,i,s=r[0],l=r[1],o=r[2],c=0;if(s.some((t=>0!==e[t]))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(o)o(n)}for(t&&t(r);c<s.length;c++)i=s[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkfrontend=self.webpackChunkfrontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r={};n.r(r),n.d(r,{hasBrowserEnv:()=>Ut,hasStandardBrowserEnv:()=>qt,hasStandardBrowserWebWorkerEnv:()=>Gt,navigator:()=>Vt,origin:()=>Ht});var a={};n.r(a),n.d(a,{Decoder:()=>qs,Encoder:()=>Us,PacketType:()=>Ks,protocol:()=>Ms});var i,s=n(43),l=n.t(s,2),o=n(391);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));const d="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function m(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function x(e,t,n,r){void 0===r&&(r={});let{window:a=document.defaultView,v5Compat:s=!1}=r,l=a.history,o=i.Pop,h=null,g=x();function x(){return(l.state||{idx:null}).idx}function v(){o=i.Pop;let e=x(),t=null==e?null:e-g;g=e,h&&h({action:o,location:j.location,delta:t})}function b(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,l.replaceState(c({},l.state,{idx:g}),""));let j={get action(){return o},get location(){return e(a,l)},listen(e){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(d,v),h=e,()=>{a.removeEventListener(d,v),h=null}},createHref:e=>t(a,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o=i.Push;let r=p(j.location,e,t);n&&n(r,e),g=x()+1;let c=m(r,g),d=j.createHref(r);try{l.pushState(c,"",d)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;a.location.assign(d)}s&&h&&h({action:o,location:j.location,delta:1})},replace:function(e,t){o=i.Replace;let r=p(j.location,e,t);n&&n(r,e),g=x();let a=m(r,g),c=j.createHref(r);l.replaceState(a,"",c),s&&h&&h({action:o,location:j.location,delta:0})},go:e=>l.go(e)};return j}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){return void 0===n&&(n="/"),j(e,t,n,!1)}function j(e,t,n,r){let a=R(("string"===typeof t?g(t):t).pathname||"/",n);if(null==a)return null;let i=y(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let l=0;null==s&&l<i.length;++l){let e=B(a);s=E(i[l],e,r)}return s}function y(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let a=(e,a,i)=>{let s={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};s.relativePath.startsWith("/")&&(u(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let l=I([r,s.relativePath]),o=n.concat(s);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),y(e.children,t,o,l)),(null!=e.path||e.index)&&t.push({path:l,score:A(l,e.index),routesMeta:o})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of k(e.path))a(e,t,r);else a(e,t)})),t}function k(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return a?[i,""]:[i];let s=k(r.join("/")),l=[];return l.push(...s.map((e=>""===e?i:[i,e].join("/")))),a&&l.push(...s),l.map((t=>e.startsWith("/")&&""===t?"/":t))}const w=/^:[\w-]+$/,N=3,S=2,_=1,C=10,z=-2,T=e=>"*"===e;function A(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=z),t&&(r+=S),n.filter((e=>!T(e))).reduce(((e,t)=>e+(w.test(t)?N:""===t?_:C)),r)}function E(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,a={},i="/",s=[];for(let l=0;l<r.length;++l){let e=r[l],o=l===r.length-1,c="/"===i?t:t.slice(i.length)||"/",d=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},c),u=e.route;if(!d&&o&&n&&!r[r.length-1].route.index&&(d=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(a,d.params),s.push({params:a,pathname:I([i,d.pathname]),pathnameBase:$(I([i,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(i=I([i,d.pathnameBase]))}return s}function D(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let i=new RegExp(a,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),l=a.slice(1),o=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=l[n]||"";s=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const o=l[n];return e[r]=a&&!o?void 0:(o||"").replace(/%2F/g,"/"),e}),{});return{params:o,pathname:i,pathnameBase:s,pattern:e}}function B(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function F(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function L(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function P(e,t){let n=L(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function O(e,t,n,r){let a;void 0===r&&(r=!1),"string"===typeof e?a=g(e):(a=c({},e),u(!a.pathname||!a.pathname.includes("?"),F("?","pathname","search",a)),u(!a.pathname||!a.pathname.includes("#"),F("#","pathname","hash",a)),u(!a.search||!a.search.includes("#"),F("#","search","hash",a)));let i,s=""===e||""===a.pathname,l=s?"/":a.pathname;if(null==l)i=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}i=e>=0?t[e]:"/"}let o=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:a=""}="string"===typeof e?g(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:W(r),hash:M(a)}}(a,i),d=l&&"/"!==l&&l.endsWith("/"),h=(s||"."===l)&&n.endsWith("/");return o.pathname.endsWith("/")||!d&&!h||(o.pathname+="/"),o}const I=e=>e.join("/").replace(/\/\/+/g,"/"),$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),W=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",M=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function K(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const U=["post","put","patch","delete"],V=(new Set(U),["get",...U]);new Set(V),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}const G=s.createContext(null);const H=s.createContext(null);const J=s.createContext(null);const Z=s.createContext(null);const Y=s.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=s.createContext(null);function X(){return null!=s.useContext(Z)}function ee(){return X()||u(!1),s.useContext(Z).location}function te(e){s.useContext(J).static||s.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=s.useContext(Y);return e?function(){let{router:e}=ue(ce.UseNavigateStable),t=me(de.UseNavigateStable),n=s.useRef(!1);return te((()=>{n.current=!0})),s.useCallback((function(r,a){void 0===a&&(a={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,q({fromRouteId:t},a)))}),[e,t])}():function(){X()||u(!1);let e=s.useContext(G),{basename:t,future:n,navigator:r}=s.useContext(J),{matches:a}=s.useContext(Y),{pathname:i}=ee(),l=JSON.stringify(P(a,n.v7_relativeSplatPath)),o=s.useRef(!1);return te((()=>{o.current=!0})),s.useCallback((function(n,a){if(void 0===a&&(a={}),!o.current)return;if("number"===typeof n)return void r.go(n);let s=O(n,JSON.parse(l),i,"path"===a.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:I([t,s.pathname])),(a.replace?r.replace:r.push)(s,a.state,a)}),[t,r,l,i,e])}()}function re(e,t,n,r){X()||u(!1);let{navigator:a,static:l}=s.useContext(J),{matches:o}=s.useContext(Y),c=o[o.length-1],d=c?c.params:{},h=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let m,p=ee();if(t){var f;let e="string"===typeof t?g(t):t;"/"===h||(null==(f=e.pathname)?void 0:f.startsWith(h))||u(!1),m=e}else m=p;let x=m.pathname||"/",v=x;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let j=!l&&n&&n.matches&&n.matches.length>0?n.matches:b(e,{pathname:v});let y=oe(j&&j.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:I([h,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:I([h,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,n,r);return t&&y?s.createElement(Z.Provider,{value:{location:q({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:i.Pop}},y):y}function ae(){let e=function(){var e;let t=s.useContext(Q),n=he(de.UseRouteError),r=me(de.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=K(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:a},n):null,null)}const ie=s.createElement(ae,null);class se extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(Y.Provider,{value:this.props.routeContext},s.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:t,match:n,children:r}=e,a=s.useContext(G);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(Y.Provider,{value:t},r)}function oe(e,t,n,r){var a;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var i;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(i=r)&&i.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let l=e,o=null==(a=n)?void 0:a.errors;if(null!=o){let e=l.findIndex((e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id])));e>=0||u(!1),l=l.slice(0,Math.min(l.length,e+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let s=0;s<l.length;s++){let e=l[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=s),e.route.id){let{loaderData:t,errors:r}=n,a=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){c=!0,l=d>=0?l.slice(0,d+1):[l[0]];break}}}return l.reduceRight(((e,r,a)=>{let i,u=!1,h=null,m=null;var p;n&&(i=o&&r.route.id?o[r.route.id]:void 0,h=r.route.errorElement||ie,c&&(d<0&&0===a?(p="route-fallback",!1||pe[p]||(pe[p]=!0),u=!0,m=null):d===a&&(u=!0,m=r.route.hydrateFallbackElement||null)));let f=t.concat(l.slice(0,a+1)),g=()=>{let t;return t=i?h:u?m:r.route.Component?s.createElement(r.route.Component,null):r.route.element?r.route.element:e,s.createElement(le,{match:r,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?s.createElement(se,{location:n.location,revalidation:n.revalidation,component:h,error:i,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()}),null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function ue(e){let t=s.useContext(G);return t||u(!1),t}function he(e){let t=s.useContext(H);return t||u(!1),t}function me(e){let t=function(){let e=s.useContext(Y);return e||u(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const pe={};function fe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}l.startTransition;function ge(e){let{to:t,replace:n,state:r,relative:a}=e;X()||u(!1);let{future:i,static:l}=s.useContext(J),{matches:o}=s.useContext(Y),{pathname:c}=ee(),d=ne(),h=O(t,P(o,i.v7_relativeSplatPath),c,"path"===a),m=JSON.stringify(h);return s.useEffect((()=>d(JSON.parse(m),{replace:n,state:r,relative:a})),[d,m,a,n,r]),null}function xe(e){u(!1)}function ve(e){let{basename:t="/",children:n=null,location:r,navigationType:a=i.Pop,navigator:l,static:o=!1,future:c}=e;X()&&u(!1);let d=t.replace(/^\/*/,"/"),h=s.useMemo((()=>({basename:d,navigator:l,static:o,future:q({v7_relativeSplatPath:!1},c)})),[d,c,l,o]);"string"===typeof r&&(r=g(r));let{pathname:m="/",search:p="",hash:f="",state:x=null,key:v="default"}=r,b=s.useMemo((()=>{let e=R(m,d);return null==e?null:{location:{pathname:e,search:p,hash:f,state:x,key:v},navigationType:a}}),[d,m,p,f,x,v,a]);return null==b?null:s.createElement(J.Provider,{value:h},s.createElement(Z.Provider,{children:n,value:b}))}function be(e){let{children:t,location:n}=e;return re(je(t),n)}new Promise((()=>{}));s.Component;function je(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,((e,r)=>{if(!s.isValidElement(e))return;let a=[...t,r];if(e.type===s.Fragment)return void n.push.apply(n,je(e.props.children,a));e.type!==xe&&u(!1),e.props.index&&e.props.children&&u(!1);let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=je(e.props.children,a)),n.push(i)})),n}const ye=()=>{(0,s.useEffect)((()=>{let e=null;const t=async()=>{try{const t=await fetch(`/version.json?t=${Date.now()}`,{cache:"no-cache",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!t.ok)return;const n=await t.json();if(null===e)return e=n.version,void console.log("\ud83d\udd0d Version Check aktiviert:",e);n.version!==e&&(console.log("\ud83d\udd04 Neue Version verf\xfcgbar! Lade Seite neu..."),console.log(`Alt: ${e} \u2192 Neu: ${n.version}`),"caches"in window&&caches.keys().then((e=>{e.forEach((e=>caches.delete(e)))})),window.location.reload(!0))}catch(t){console.error("\u274c Version Check Fehler:",t)}};t();const n=setInterval(t,3e4);return()=>clearInterval(n)}),[])};var ke=n(201),we=n(579);const Ne={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},Se={backgroundColor:"#fff",padding:"20px",borderRadius:"8px",width:"400px",maxWidth:"90%",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},_e={display:"flex",flexDirection:"column"},Ce={marginBottom:"15px"},ze={width:"100%",padding:"8px",marginTop:"5px",boxSizing:"border-box"},Te={display:"flex",justifyContent:"space-between",marginTop:"20px"},Ae={padding:"8px 16px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},Ee={padding:"8px 16px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},De=function(e){let{isOpen:t,onClose:n,clubData:r,onUpdate:a}=e;const[i,l]=(0,s.useState)({name:"",email:"",ansprechpartner:"",telefon:"",strasse:"",hausnummer:"",plz:"",ort:"",homepage:""});if((0,s.useEffect)((()=>{r&&(console.log("\ud83d\udce1 Empfangenes clubData in Modal:",r),l({name:r.name||"",email:r.email||"",ansprechpartner:r.ansprechpartner||"",telefon:r.telefon||"",strasse:r.strasse||"",hausnummer:r.hausnummer||"",plz:r.plz||"",ort:r.ort||"",homepage:r.homepage||""})),r&&l({name:r.name||"",email:r.email||"",ansprechpartner:r.ansprechpartner||"",telefon:r.telefon||"",strasse:r.strasse||"",hausnummer:r.hausnummer||"",plz:r.plz||"",ort:r.ort||"",homepage:r.homepage||""})}),[r]),!t)return null;const o=e=>{const{name:t,value:n}=e.target;l((e=>({...e,[t]:n})))};return(0,we.jsx)("div",{style:Ne,children:(0,we.jsxs)("div",{style:Se,children:[(0,we.jsx)("h2",{children:"Vereinsdaten bearbeiten"}),(0,we.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const{name:t,email:s,ansprechpartner:l,telefon:o,strasse:c,hausnummer:d,plz:u,ort:h}=i;if(!t.trim()||!s.trim()||!l.trim()||!o.trim()||!c.trim()||!d.trim()||!u.trim()||!h.trim())return void alert("Bitte alle Pflichtfelder ausf\xfcllen (Homepage ist optional).");let m={...r,...i};if(!m.vereins_id)return console.error("\u274c Fehler: vereins_id fehlt! \xdcberpr\xfcfe clubData:",r),void alert("Fehler: Vereins-ID fehlt! Speichern nicht m\xf6glich.");console.log("\ud83d\udce4 Sende Daten an API:",m);try{const e=await(0,ke.updateVerein)(m.vereins_id,m);if(!e)return void alert("Fehler beim Speichern der Vereinsdaten!");a(e),n()}catch(p){console.error("\u274c Fehler beim Speichern der Vereinsdaten:",p),alert("Fehler beim Speichern der Vereinsdaten!")}},style:_e,children:[(0,we.jsxs)("div",{style:Ce,children:[(0,we.jsx)("label",{children:"Name (Pflicht):"}),(0,we.jsx)("input",{type:"text",name:"name",value:i.name,onChange:o,required:!0,style:ze})]}),(0,we.jsxs)("div",{style:Ce,children:[(0,we.jsx)("label",{children:"Email (Pflicht):"}),(0,we.jsx)("input",{type:"email",name:"email",value:i.email,onChange:o,required:!0,style:ze})]}),(0,we.jsxs)("div",{style:Ce,children:[(0,we.jsx)("label",{children:"Ansprechpartner (Pflicht):"}),(0,we.jsx)("input",{type:"text",name:"ansprechpartner",value:i.ansprechpartner,onChange:o,required:!0,style:ze})]}),(0,we.jsxs)("div",{style:Ce,children:[(0,we.jsx)("label",{children:"Telefon (Pflicht):"}),(0,we.jsx)("input",{type:"text",name:"telefon",value:i.telefon,onChange:o,required:!0,style:ze})]}),(0,we.jsxs)("div",{style:Ce,children:[(0,we.jsx)("label",{children:"Strasse (Pflicht):"}),(0,we.jsx)("input",{type:"text",name:"strasse",value:i.strasse,onChange:o,required:!0,style:ze})]}),(0,we.jsxs)("div",{style:Ce,children:[(0,we.jsx)("label",{children:"Hausnummer (Pflicht):"}),(0,we.jsx)("input",{type:"text",name:"hausnummer",value:i.hausnummer,onChange:o,required:!0,style:ze})]}),(0,we.jsxs)("div",{style:Ce,children:[(0,we.jsx)("label",{children:"PLZ (Pflicht):"}),(0,we.jsx)("input",{type:"text",name:"plz",value:i.plz,onChange:o,required:!0,style:ze})]}),(0,we.jsxs)("div",{style:Ce,children:[(0,we.jsx)("label",{children:"Ort (Pflicht):"}),(0,we.jsx)("input",{type:"text",name:"ort",value:i.ort,onChange:o,required:!0,style:ze})]}),(0,we.jsxs)("div",{style:Ce,children:[(0,we.jsx)("label",{children:"Homepage (optional):"}),(0,we.jsx)("input",{type:"text",name:"homepage",value:i.homepage,onChange:o,style:ze})]}),(0,we.jsxs)("div",{style:Te,children:[(0,we.jsx)("button",{type:"submit",style:Ae,children:"Speichern"}),(0,we.jsx)("button",{type:"button",style:Ee,onClick:n,children:"Abbrechen"})]})]})]})})};var Be=n(825),Re=n(488);const Fe=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.checkHealth){if(!await(async()=>{try{const e=`${Re.A.API_BASE_URL}/api/health`,t=await fetch(e,{method:"GET",timeout:3e3});return console.log("\ud83c\udfe5 Backend Health Check:",t.status,e),t.ok}catch(e){return console.error("\u274c Backend Health Check failed:",e.message),!1}})())throw new Error('Backend-Server ist nicht erreichbar. Bitte starten Sie das Backend mit "cd backend && npm start"');delete t.checkHealth}try{return await(0,Be.H2)(`/api${e}`,t)}catch(n){throw n.message.includes("Backend-Server")&&alert(`\u26a0\ufe0f Backend Problem!\n\n${n.message}\n\nSchritte zur L\xf6sung:\n1. Terminal \xf6ffnen\n2. "cd backend"\n3. "npm start"`),n}},Le=async e=>{console.log(`\ud83c\udfc3\u200d\u2642\ufe0f [wettkaempferApi] Loading Wettk\xe4mpfer for Verein: ${e}`);try{const t=await Fe(`/wettkaempfer?verein_id=${e}`,{checkHealth:!0});let n=t;return t&&"object"===typeof t&&(t.success&&Array.isArray(t.data)||t.data&&Array.isArray(t.data)?n=t.data:Array.isArray(t)&&(n=t)),Array.isArray(n)?(console.log("\u2705 [wettkaempferApi] Wettk\xe4mpfer geladen:",{vereinId:e,count:n.length,firstMember:n[0]?{id:n[0].wettkaempfer_id,name:`${n[0].vorname} ${n[0].nachname}`}:null}),n):(console.warn("\u26a0\ufe0f [wettkaempferApi] Response ist kein Array:",typeof n),[])}catch(t){return console.error(`\u274c [wettkaempferApi] Error loading Wettk\xe4mpfer for Verein ${e}:`,t.message),[]}},Pe=async e=>{console.log("\u2795 [wettkaempferApi] Adding Wettk\xe4mpfer:",{name:`${e.vorname} ${e.nachname}`,hasPhoto:!!e.foto,vereinId:e.vereins_id});try{let t,n={};e.foto?(t=new FormData,Object.entries(e).forEach((e=>{let[n,r]=e;void 0!==r&&null!==r&&t.append(n,r)})),console.log("\ud83d\udcce Using FormData for file upload")):(t=JSON.stringify(e),n["Content-Type"]="application/json",console.log("\ud83d\udcdd Using JSON for data only"));const r=await Fe("/wettkaempfer",{method:"POST",headers:n,body:t});return console.log("\u2705 [wettkaempferApi] Wettk\xe4mpfer successfully added:",r),r}catch(t){throw console.error("\u26d4 [wettkaempferApi] Error adding Wettk\xe4mpfer:",t.message),t}},Oe=async e=>{if(!e.wettkaempfer_id||isNaN(Number(e.wettkaempfer_id))){const t=new Error("Wettk\xe4mpfer-ID fehlt oder ist ung\xfcltig");throw console.error("\u274c [wettkaempferApi] Validation Error:",{providedId:e.wettkaempfer_id,type:typeof e.wettkaempfer_id,member:e}),t}console.log("\ud83d\udd04 [wettkaempferApi] Updating Wettk\xe4mpfer:",{id:e.wettkaempfer_id,name:`${e.vorname} ${e.nachname}`,hasPhoto:!!e.foto});try{let t,n={};e.foto?(t=new FormData,Object.entries(e).forEach((e=>{let[n,r]=e;void 0!==r&&null!==r&&t.append(n,r)}))):(t=JSON.stringify(e),n["Content-Type"]="application/json");const r=await Fe(`/wettkaempfer/${e.wettkaempfer_id}`,{method:"PUT",headers:n,body:t});return console.log("\u2705 [wettkaempferApi] Wettk\xe4mpfer successfully updated:",r),r}catch(t){throw console.error("\u274c [wettkaempferApi] Error updating Wettk\xe4mpfer:",t.message),t}},Ie=async e=>{if(!e||isNaN(Number(e)))throw new Error("Ung\xfcltige Wettk\xe4mpfer-ID f\xfcr L\xf6schung");console.log("\ud83d\uddd1\ufe0f [wettkaempferApi] Deleting Wettk\xe4mpfer:",{id:e});try{const t=await Fe(`/wettkaempfer/${e}`,{method:"DELETE"});return console.log("\u2705 [wettkaempferApi] Wettk\xe4mpfer successfully deleted:",{id:e}),t}catch(t){throw console.error("\u274c [wettkaempferApi] Error deleting Wettk\xe4mpfer:",t.message),t}};function $e(e,t){return function(){return e.apply(t,arguments)}}const{toString:We}=Object.prototype,{getPrototypeOf:Me}=Object,{iterator:Ke,toStringTag:Ue}=Symbol,Ve=(e=>t=>{const n=We.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),qe=e=>(e=e.toLowerCase(),t=>Ve(t)===e),Ge=e=>t=>typeof t===e,{isArray:He}=Array,Je=Ge("undefined");function Ze(e){return null!==e&&!Je(e)&&null!==e.constructor&&!Je(e.constructor)&&Xe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ye=qe("ArrayBuffer");const Qe=Ge("string"),Xe=Ge("function"),et=Ge("number"),tt=e=>null!==e&&"object"===typeof e,nt=e=>{if("object"!==Ve(e))return!1;const t=Me(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Ue in e)&&!(Ke in e)},rt=qe("Date"),at=qe("File"),it=qe("Blob"),st=qe("FileList"),lt=qe("URLSearchParams"),[ot,ct,dt,ut]=["ReadableStream","Request","Response","Headers"].map(qe);function ht(e,t){let n,r,{allOwnKeys:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),He(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{if(Ze(e))return;const r=a?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let s;for(n=0;n<i;n++)s=r[n],t.call(null,e[s],s,e)}}function mt(e,t){if(Ze(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,a=n.length;for(;a-- >0;)if(r=n[a],t===r.toLowerCase())return r;return null}const pt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,ft=e=>!Je(e)&&e!==pt;const gt=(xt="undefined"!==typeof Uint8Array&&Me(Uint8Array),e=>xt&&e instanceof xt);var xt;const vt=qe("HTMLFormElement"),bt=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),jt=qe("RegExp"),yt=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};ht(n,((n,a)=>{let i;!1!==(i=t(n,a,e))&&(r[a]=i||n)})),Object.defineProperties(e,r)};const kt=qe("AsyncFunction"),wt=((e,t)=>{return e?setImmediate:t?(n=`axios@${Math.random()}`,r=[],pt.addEventListener("message",(e=>{let{source:t,data:a}=e;t===pt&&a===n&&r.length&&r.shift()()}),!1),e=>{r.push(e),pt.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,Xe(pt.postMessage)),Nt="undefined"!==typeof queueMicrotask?queueMicrotask.bind(pt):"undefined"!==typeof process&&process.nextTick||wt,St={isArray:He,isArrayBuffer:Ye,isBuffer:Ze,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Xe(e.append)&&("formdata"===(t=Ve(e))||"object"===t&&Xe(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Ye(e.buffer),t},isString:Qe,isNumber:et,isBoolean:e=>!0===e||!1===e,isObject:tt,isPlainObject:nt,isEmptyObject:e=>{if(!tt(e)||Ze(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:ot,isRequest:ct,isResponse:dt,isHeaders:ut,isUndefined:Je,isDate:rt,isFile:at,isBlob:it,isRegExp:jt,isFunction:Xe,isStream:e=>tt(e)&&Xe(e.pipe),isURLSearchParams:lt,isTypedArray:gt,isFileList:st,forEach:ht,merge:function e(){const{caseless:t,skipUndefined:n}=ft(this)&&this||{},r={},a=(a,i)=>{const s=t&&mt(r,i)||i;nt(r[s])&&nt(a)?r[s]=e(r[s],a):nt(a)?r[s]=e({},a):He(a)?r[s]=a.slice():n&&Je(a)||(r[s]=a)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&ht(arguments[i],a);return r},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return ht(t,((t,r)=>{n&&Xe(t)?e[r]=$e(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let a,i,s;const l={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)s=a[i],r&&!r(s,e,t)||l[s]||(t[s]=e[s],l[s]=!0);e=!1!==n&&Me(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Ve,kindOfTest:qe,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(He(e))return e;let t=e.length;if(!et(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Ke]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:vt,hasOwnProperty:bt,hasOwnProp:bt,reduceDescriptors:yt,freezeMethods:e=>{yt(e,((t,n)=>{if(Xe(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Xe(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return He(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:mt,global:pt,isContextDefined:ft,isSpecCompliantForm:function(e){return!!(e&&Xe(e.append)&&"FormData"===e[Ue]&&e[Ke])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(tt(e)){if(t.indexOf(e)>=0)return;if(Ze(e))return e;if(!("toJSON"in e)){t[r]=e;const a=He(e)?[]:{};return ht(e,((e,t)=>{const i=n(e,r+1);!Je(i)&&(a[t]=i)})),t[r]=void 0,a}}return e};return n(e,0)},isAsyncFn:kt,isThenable:e=>e&&(tt(e)||Xe(e))&&Xe(e.then)&&Xe(e.catch),setImmediate:wt,asap:Nt,isIterable:e=>null!=e&&Xe(e[Ke])};function _t(e,t,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}St.inherits(_t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:St.toJSONObject(this.config),code:this.code,status:this.status}}});const Ct=_t.prototype,zt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{zt[e]={value:e}})),Object.defineProperties(_t,zt),Object.defineProperty(Ct,"isAxiosError",{value:!0}),_t.from=(e,t,n,r,a,i)=>{const s=Object.create(Ct);St.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e));const l=e&&e.message?e.message:"Error",o=null==t&&e?e.code:t;return _t.call(s,l,o,n,r,a),e&&null==s.cause&&Object.defineProperty(s,"cause",{value:e,configurable:!0}),s.name=e&&e.name||"Error",i&&Object.assign(s,i),s};const Tt=_t;function At(e){return St.isPlainObject(e)||St.isArray(e)}function Et(e){return St.endsWith(e,"[]")?e.slice(0,-2):e}function Dt(e,t,n){return e?e.concat(t).map((function(e,t){return e=Et(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Bt=St.toFlatObject(St,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Rt=function(e,t,n){if(!St.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=St.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!St.isUndefined(t[e])}))).metaTokens,a=n.visitor||c,i=n.dots,s=n.indexes,l=(n.Blob||"undefined"!==typeof Blob&&Blob)&&St.isSpecCompliantForm(t);if(!St.isFunction(a))throw new TypeError("visitor must be a function");function o(e){if(null===e)return"";if(St.isDate(e))return e.toISOString();if(St.isBoolean(e))return e.toString();if(!l&&St.isBlob(e))throw new Tt("Blob is not supported. Use a Buffer instead.");return St.isArrayBuffer(e)||St.isTypedArray(e)?l&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,a){let l=e;if(e&&!a&&"object"===typeof e)if(St.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(St.isArray(e)&&function(e){return St.isArray(e)&&!e.some(At)}(e)||(St.isFileList(e)||St.endsWith(n,"[]"))&&(l=St.toArray(e)))return n=Et(n),l.forEach((function(e,r){!St.isUndefined(e)&&null!==e&&t.append(!0===s?Dt([n],r,i):null===s?n:n+"[]",o(e))})),!1;return!!At(e)||(t.append(Dt(a,n,i),o(e)),!1)}const d=[],u=Object.assign(Bt,{defaultVisitor:c,convertValue:o,isVisitable:At});if(!St.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!St.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+r.join("."));d.push(n),St.forEach(n,(function(n,i){!0===(!(St.isUndefined(n)||null===n)&&a.call(t,n,St.isString(i)?i.trim():i,r,u))&&e(n,r?r.concat(i):[i])})),d.pop()}}(e),t};function Ft(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Lt(e,t){this._pairs=[],e&&Rt(e,this,t)}const Pt=Lt.prototype;Pt.append=function(e,t){this._pairs.push([e,t])},Pt.toString=function(e){const t=e?function(t){return e.call(this,t,Ft)}:Ft;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Ot=Lt;function It(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function $t(e,t,n){if(!t)return e;const r=n&&n.encode||It;St.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let i;if(i=a?a(t,n):St.isURLSearchParams(t)?t.toString():new Ot(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const Wt=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){St.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Mt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Kt={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Ot,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Ut="undefined"!==typeof window&&"undefined"!==typeof document,Vt="object"===typeof navigator&&navigator||void 0,qt=Ut&&(!Vt||["ReactNative","NativeScript","NS"].indexOf(Vt.product)<0),Gt="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Ht=Ut&&window.location.href||"http://localhost",Jt={...r,...Kt};const Zt=function(e){function t(e,n,r,a){let i=e[a++];if("__proto__"===i)return!0;const s=Number.isFinite(+i),l=a>=e.length;if(i=!i&&St.isArray(r)?r.length:i,l)return St.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!s;r[i]&&St.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],a)&&St.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const a=n.length;let i;for(r=0;r<a;r++)i=n[r],t[i]=e[i];return t}(r[i])),!s}if(St.isFormData(e)&&St.isFunction(e.entries)){const n={};return St.forEachEntry(e,((e,r)=>{t(function(e){return St.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const Yt={transitional:Mt,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,a=St.isObject(e);a&&St.isHTMLForm(e)&&(e=new FormData(e));if(St.isFormData(e))return r?JSON.stringify(Zt(e)):e;if(St.isArrayBuffer(e)||St.isBuffer(e)||St.isStream(e)||St.isFile(e)||St.isBlob(e)||St.isReadableStream(e))return e;if(St.isArrayBufferView(e))return e.buffer;if(St.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Rt(e,new Jt.classes.URLSearchParams,{visitor:function(e,t,n,r){return Jt.isNode&&St.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((i=St.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Rt(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||r?(t.setContentType("application/json",!1),function(e,t,n){if(St.isString(e))try{return(t||JSON.parse)(e),St.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Yt.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(St.isResponse(e)||St.isReadableStream(e))return e;if(e&&St.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(a){if(n){if("SyntaxError"===a.name)throw Tt.from(a,Tt.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Jt.classes.FormData,Blob:Jt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};St.forEach(["delete","get","head","post","put","patch"],(e=>{Yt.headers[e]={}}));const Qt=Yt,Xt=St.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),en=Symbol("internals");function tn(e){return e&&String(e).trim().toLowerCase()}function nn(e){return!1===e||null==e?e:St.isArray(e)?e.map(nn):String(e)}function rn(e,t,n,r,a){return St.isFunction(r)?r.call(this,t,n):(a&&(t=n),St.isString(t)?St.isString(r)?-1!==t.indexOf(r):St.isRegExp(r)?r.test(t):void 0:void 0)}class an{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function a(e,t,n){const a=tn(t);if(!a)throw new Error("header name must be a non-empty string");const i=St.findKey(r,a);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=nn(e))}const i=(e,t)=>St.forEach(e,((e,n)=>a(e,n,t)));if(St.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(St.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,r,a;return e&&e.split("\n").forEach((function(e){a=e.indexOf(":"),n=e.substring(0,a).trim().toLowerCase(),r=e.substring(a+1).trim(),!n||t[n]&&Xt[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(St.isObject(e)&&St.isIterable(e)){let n,r,a={};for(const t of e){if(!St.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[r=t[0]]=(n=a[r])?St.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}i(a,t)}else null!=e&&a(t,e,n);return this}get(e,t){if(e=tn(e)){const n=St.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(St.isFunction(t))return t.call(this,e,n);if(St.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=tn(e)){const n=St.findKey(this,e);return!(!n||void 0===this[n]||t&&!rn(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function a(e){if(e=tn(e)){const a=St.findKey(n,e);!a||t&&!rn(0,n[a],a,t)||(delete n[a],r=!0)}}return St.isArray(e)?e.forEach(a):a(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const a=t[n];e&&!rn(0,this[a],a,e,!0)||(delete this[a],r=!0)}return r}normalize(e){const t=this,n={};return St.forEach(this,((r,a)=>{const i=St.findKey(n,a);if(i)return t[i]=nn(r),void delete t[a];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(a):String(a).trim();s!==a&&delete t[a],t[s]=nn(r),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return St.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&St.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[en]=this[en]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=tn(e);t[r]||(!function(e,t){const n=St.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,a){return this[r].call(this,t,e,n,a)},configurable:!0})}))}(n,e),t[r]=!0)}return St.isArray(e)?e.forEach(r):r(e),this}}an.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),St.reduceDescriptors(an.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),St.freezeMethods(an);const sn=an;function ln(e,t){const n=this||Qt,r=t||n,a=sn.from(r.headers);let i=r.data;return St.forEach(e,(function(e){i=e.call(n,i,a.normalize(),t?t.status:void 0)})),a.normalize(),i}function on(e){return!(!e||!e.__CANCEL__)}function cn(e,t,n){Tt.call(this,null==e?"canceled":e,Tt.ERR_CANCELED,t,n),this.name="CanceledError"}St.inherits(cn,Tt,{__CANCEL__:!0});const dn=cn;function un(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Tt("Request failed with status code "+n.status,[Tt.ERR_BAD_REQUEST,Tt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const hn=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let a,i=0,s=0;return t=void 0!==t?t:1e3,function(l){const o=Date.now(),c=r[s];a||(a=o),n[i]=l,r[i]=o;let d=s,u=0;for(;d!==i;)u+=n[d++],d%=e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),o-a<t)return;const h=c&&o-c;return h?Math.round(1e3*u/h):void 0}};const mn=function(e,t){let n,r,a=0,i=1e3/t;const s=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();a=i,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[function(){const e=Date.now(),t=e-a;for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];t>=i?s(o,e):(n=o,r||(r=setTimeout((()=>{r=null,s(n)}),i-t)))},()=>n&&s(n)]},pn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const a=hn(50,250);return mn((n=>{const i=n.loaded,s=n.lengthComputable?n.total:void 0,l=i-r,o=a(l);r=i;e({loaded:i,total:s,progress:s?i/s:void 0,bytes:l,rate:o||void 0,estimated:o&&s&&i<=s?(s-i)/o:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})}),n)},fn=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},gn=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return St.asap((()=>e(...n)))},xn=Jt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Jt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Jt.origin),Jt.navigator&&/(msie|trident)/i.test(Jt.navigator.userAgent)):()=>!0,vn=Jt.hasStandardBrowserEnv?{write(e,t,n,r,a,i,s){if("undefined"===typeof document)return;const l=[`${e}=${encodeURIComponent(t)}`];St.isNumber(n)&&l.push(`expires=${new Date(n).toUTCString()}`),St.isString(r)&&l.push(`path=${r}`),St.isString(a)&&l.push(`domain=${a}`),!0===i&&l.push("secure"),St.isString(s)&&l.push(`SameSite=${s}`),document.cookie=l.join("; ")},read(e){if("undefined"===typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function bn(e,t,n){let r=!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const jn=e=>e instanceof sn?{...e}:e;function yn(e,t){t=t||{};const n={};function r(e,t,n,r){return St.isPlainObject(e)&&St.isPlainObject(t)?St.merge.call({caseless:r},e,t):St.isPlainObject(t)?St.merge({},t):St.isArray(t)?t.slice():t}function a(e,t,n,a){return St.isUndefined(t)?St.isUndefined(e)?void 0:r(void 0,e,0,a):r(e,t,0,a)}function i(e,t){if(!St.isUndefined(t))return r(void 0,t)}function s(e,t){return St.isUndefined(t)?St.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function l(n,a,i){return i in t?r(n,a):i in e?r(void 0,n):void 0}const o={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l,headers:(e,t,n)=>a(jn(e),jn(t),0,!0)};return St.forEach(Object.keys({...e,...t}),(function(r){const i=o[r]||a,s=i(e[r],t[r],r);St.isUndefined(s)&&i!==l||(n[r]=s)})),n}const kn=e=>{const t=yn({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:i,headers:s,auth:l}=t;if(t.headers=s=sn.from(s),t.url=$t(bn(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),St.isFormData(n))if(Jt.hasStandardBrowserEnv||Jt.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(St.isFunction(n.getHeaders)){const e=n.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach((e=>{let[n,r]=e;t.includes(n.toLowerCase())&&s.set(n,r)}))}if(Jt.hasStandardBrowserEnv&&(r&&St.isFunction(r)&&(r=r(t)),r||!1!==r&&xn(t.url))){const e=a&&i&&vn.read(i);e&&s.set(a,e)}return t},wn="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=kn(e);let a=r.data;const i=sn.from(r.headers).normalize();let s,l,o,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:m}=r;function p(){c&&c(),d&&d(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let f=new XMLHttpRequest;function g(){if(!f)return;const r=sn.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());un((function(e){t(e),p()}),(function(e){n(e),p()}),{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f}),f=null}f.open(r.method.toUpperCase(),r.url,!0),f.timeout=r.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(n(new Tt("Request aborted",Tt.ECONNABORTED,e,f)),f=null)},f.onerror=function(t){const r=t&&t.message?t.message:"Network Error",a=new Tt(r,Tt.ERR_NETWORK,e,f);a.event=t||null,n(a),f=null},f.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const a=r.transitional||Mt;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Tt(t,a.clarifyTimeoutError?Tt.ETIMEDOUT:Tt.ECONNABORTED,e,f)),f=null},void 0===a&&i.setContentType(null),"setRequestHeader"in f&&St.forEach(i.toJSON(),(function(e,t){f.setRequestHeader(t,e)})),St.isUndefined(r.withCredentials)||(f.withCredentials=!!r.withCredentials),u&&"json"!==u&&(f.responseType=r.responseType),m&&([o,d]=pn(m,!0),f.addEventListener("progress",o)),h&&f.upload&&([l,c]=pn(h),f.upload.addEventListener("progress",l),f.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(s=t=>{f&&(n(!t||t.type?new dn(null,e,f):t),f.abort(),f=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const x=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);x&&-1===Jt.protocols.indexOf(x)?n(new Tt("Unsupported protocol "+x+":",Tt.ERR_BAD_REQUEST,e)):f.send(a||null)}))},Nn=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const a=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Tt?t:new dn(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,a(new Tt(`timeout ${t} of ms exceeded`,Tt.ETIMEDOUT))}),t);const s=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)})),e=null)};e.forEach((e=>e.addEventListener("abort",a)));const{signal:l}=r;return l.unsubscribe=()=>St.asap(s),l}},Sn=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,a=0;for(;a<n;)r=a+t,yield e.slice(a,r),a=r},_n=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Cn=(e,t,n,r)=>{const a=async function*(e,t){for await(const n of _n(e))yield*Sn(n,t)}(e,t);let i,s=0,l=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await a.next();if(t)return l(),void e.close();let i=r.byteLength;if(n){let e=s+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw l(t),t}},cancel:e=>(l(e),a.return())},{highWaterMark:2})},{isFunction:zn}=St,Tn=(e=>{let{Request:t,Response:n}=e;return{Request:t,Response:n}})(St.global),{ReadableStream:An,TextEncoder:En}=St.global,Dn=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(a){return!1}},Bn=e=>{e=St.merge.call({skipUndefined:!0},Tn,e);const{fetch:t,Request:n,Response:r}=e,a=t?zn(t):"function"===typeof fetch,i=zn(n),s=zn(r);if(!a)return!1;const l=a&&zn(An),o=a&&("function"===typeof En?(c=new En,e=>c.encode(e)):async e=>new Uint8Array(await new n(e).arrayBuffer()));var c;const d=i&&l&&Dn((()=>{let e=!1;const t=new n(Jt.origin,{body:new An,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),u=s&&l&&Dn((()=>St.isReadableStream(new r("").body))),h={stream:u&&(e=>e.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!h[e]&&(h[e]=(t,n)=>{let r=t&&t[e];if(r)return r.call(t);throw new Tt(`Response type '${e}' is not supported`,Tt.ERR_NOT_SUPPORT,n)})}));const m=async(e,t)=>{const r=St.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(St.isBlob(e))return e.size;if(St.isSpecCompliantForm(e)){const t=new n(Jt.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return St.isArrayBufferView(e)||St.isArrayBuffer(e)?e.byteLength:(St.isURLSearchParams(e)&&(e+=""),St.isString(e)?(await o(e)).byteLength:void 0)})(t):r};return async e=>{let{url:a,method:s,data:l,signal:o,cancelToken:c,timeout:p,onDownloadProgress:f,onUploadProgress:g,responseType:x,headers:v,withCredentials:b="same-origin",fetchOptions:j}=kn(e),y=t||fetch;x=x?(x+"").toLowerCase():"text";let k=Nn([o,c&&c.toAbortSignal()],p),w=null;const N=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let S;try{if(g&&d&&"get"!==s&&"head"!==s&&0!==(S=await m(v,l))){let e,t=new n(a,{method:"POST",body:l,duplex:"half"});if(St.isFormData(l)&&(e=t.headers.get("content-type"))&&v.setContentType(e),t.body){const[e,n]=fn(S,pn(gn(g)));l=Cn(t.body,65536,e,n)}}St.isString(b)||(b=b?"include":"omit");const t=i&&"credentials"in n.prototype,o={...j,signal:k,method:s.toUpperCase(),headers:v.normalize().toJSON(),body:l,duplex:"half",credentials:t?b:void 0};w=i&&new n(a,o);let c=await(i?y(w,j):y(a,o));const p=u&&("stream"===x||"response"===x);if(u&&(f||p&&N)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=c[t]}));const t=St.toFiniteNumber(c.headers.get("content-length")),[n,a]=f&&fn(t,pn(gn(f),!0))||[];c=new r(Cn(c.body,65536,n,(()=>{a&&a(),N&&N()})),e)}x=x||"text";let _=await h[St.findKey(h,x)||"text"](c,e);return!p&&N&&N(),await new Promise(((t,n)=>{un(t,n,{data:_,headers:sn.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:w})}))}catch(_){if(N&&N(),_&&"TypeError"===_.name&&/Load failed|fetch/i.test(_.message))throw Object.assign(new Tt("Network Error",Tt.ERR_NETWORK,e,w),{cause:_.cause||_});throw Tt.from(_,_&&_.code,e,w)}}},Rn=new Map,Fn=e=>{let t=e&&e.env||{};const{fetch:n,Request:r,Response:a}=t,i=[r,a,n];let s,l,o=i.length,c=Rn;for(;o--;)s=i[o],l=c.get(s),void 0===l&&c.set(s,l=o?new Map:Bn(t)),c=l;return l},Ln=(Fn(),{http:null,xhr:wn,fetch:{get:Fn}});St.forEach(Ln,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const Pn=e=>`- ${e}`,On=e=>St.isFunction(e)||null===e||!1===e;const In={getAdapter:function(e,t){e=St.isArray(e)?e:[e];const{length:n}=e;let r,a;const i={};for(let s=0;s<n;s++){let n;if(r=e[s],a=r,!On(r)&&(a=Ln[(n=String(r)).toLowerCase()],void 0===a))throw new Tt(`Unknown adapter '${n}'`);if(a&&(St.isFunction(a)||(a=a.get(t))))break;i[n||"#"+s]=a}if(!a){const e=Object.entries(i).map((e=>{let[t,n]=e;return`adapter ${t} `+(!1===n?"is not supported by the environment":"is not available in the build")}));let t=n?e.length>1?"since :\n"+e.map(Pn).join("\n"):" "+Pn(e[0]):"as no adapter specified";throw new Tt("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return a},adapters:Ln};function $n(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new dn(null,e)}function Wn(e){$n(e),e.headers=sn.from(e.headers),e.data=ln.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return In.getAdapter(e.adapter||Qt.adapter,e)(e).then((function(t){return $n(e),t.data=ln.call(e,e.transformResponse,t),t.headers=sn.from(t.headers),t}),(function(t){return on(t)||($n(e),t&&t.response&&(t.response.data=ln.call(e,e.transformResponse,t.response),t.response.headers=sn.from(t.response.headers))),Promise.reject(t)}))}const Mn="1.13.2",Kn={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Kn[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Un={};Kn.transitional=function(e,t,n){function r(e,t){return"[Axios v"+Mn+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,a,i)=>{if(!1===e)throw new Tt(r(a," has been removed"+(t?" in "+t:"")),Tt.ERR_DEPRECATED);return t&&!Un[a]&&(Un[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,a,i)}},Kn.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const Vn={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Tt("options must be an object",Tt.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const i=r[a],s=t[i];if(s){const t=e[i],n=void 0===t||s(t,i,e);if(!0!==n)throw new Tt("option "+i+" must be "+n,Tt.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Tt("Unknown option "+i,Tt.ERR_BAD_OPTION)}},validators:Kn},qn=Vn.validators;class Gn{constructor(e){this.defaults=e||{},this.interceptors={request:new Wt,response:new Wt}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(r){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=yn(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:a}=t;void 0!==n&&Vn.assertOptions(n,{silentJSONParsing:qn.transitional(qn.boolean),forcedJSONParsing:qn.transitional(qn.boolean),clarifyTimeoutError:qn.transitional(qn.boolean)},!1),null!=r&&(St.isFunction(r)?t.paramsSerializer={serialize:r}:Vn.assertOptions(r,{encode:qn.function,serialize:qn.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Vn.assertOptions(t,{baseUrl:qn.spelling("baseURL"),withXsrfToken:qn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=a&&St.merge(a.common,a[t.method]);a&&St.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete a[e]})),t.headers=sn.concat(i,a);const s=[];let l=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const o=[];let c;this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)}));let d,u=0;if(!l){const e=[Wn.bind(this),void 0];for(e.unshift(...s),e.push(...o),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=s.length;let h=t;for(;u<d;){const e=s[u++],t=s[u++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=Wn.call(this,h)}catch(m){return Promise.reject(m)}for(u=0,d=o.length;u<d;)c=c.then(o[u++],o[u++]);return c}getUri(e){return $t(bn((e=yn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}St.forEach(["delete","get","head","options"],(function(e){Gn.prototype[e]=function(t,n){return this.request(yn(n||{},{method:e,url:t,data:(n||{}).data}))}})),St.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,a){return this.request(yn(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Gn.prototype[e]=t(),Gn.prototype[e+"Form"]=t(!0)}));const Hn=Gn;class Jn{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,a){n.reason||(n.reason=new dn(e,r,a),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Jn((function(t){e=t})),cancel:e}}}const Zn=Jn;const Yn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Yn).forEach((e=>{let[t,n]=e;Yn[n]=t}));const Qn=Yn;const Xn=function e(t){const n=new Hn(t),r=$e(Hn.prototype.request,n);return St.extend(r,Hn.prototype,n,{allOwnKeys:!0}),St.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(yn(t,n))},r}(Qt);Xn.Axios=Hn,Xn.CanceledError=dn,Xn.CancelToken=Zn,Xn.isCancel=on,Xn.VERSION=Mn,Xn.toFormData=Rt,Xn.AxiosError=Tt,Xn.Cancel=Xn.CanceledError,Xn.all=function(e){return Promise.all(e)},Xn.spread=function(e){return function(t){return e.apply(null,t)}},Xn.isAxiosError=function(e){return St.isObject(e)&&!0===e.isAxiosError},Xn.mergeConfig=yn,Xn.AxiosHeaders=sn,Xn.formToJSON=e=>Zt(St.isHTMLForm(e)?new FormData(e):e),Xn.getAdapter=In.getAdapter,Xn.HttpStatusCode=Qn,Xn.default=Xn;const er=Xn,tr="/api",nr=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const n=await er.get(`${tr}/divisionen`,{params:e});if(n.data&&n.data.success)return n.data.data||[];var t;throw new Error((null===(t=n.data)||void 0===t?void 0:t.error)||"Fehler beim Laden der Divisionen")}catch(n){throw console.error("Fehler beim Abrufen der Divisionen:",n),n}};function rr(e){if(!e)return"";return new Date(e).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})}function ar(e){if(!e)return"";return new Date(e).toISOString().split("T")[0]}const ir=["Beginner","Intermediate","Advanced","Black Belt"],sr=["Wei\xdf","Wei\xdf/Gelb","Gelb","Orange","Gr\xfcn","Gr\xfcn/Blau","Blau","Lila","Blau/Rot","Rot","Braun","Schwarz"],lr=["m\xe4nnlich","weiblich","divers"];const or=function(e){let{verein_id:t}=e;const[n,r]=(0,s.useState)([]),[a,i]=(0,s.useState)(""),[l,o]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[u,h]=(0,s.useState)(null),[m,p]=(0,s.useState)([]),[f,g]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(async()=>{try{if(!t)return;const e=await Le(t);r(e)}catch(e){console.error("\u274c Fehler beim Abrufen der Wettk\xe4mpfer:",e)}})(),(async()=>{try{g(!0);const e=await nr();p(e||[]),console.log("\u2705 Divisionen geladen:",(null===e||void 0===e?void 0:e.length)||0)}catch(e){console.error("\u274c Fehler beim Laden der Divisionen:",e),p([])}finally{g(!1)}})()}),[t]),(0,s.useEffect)((()=>{const e=[...new Set(n.map((e=>{var t;return null===(t=e.nachname)||void 0===t?void 0:t.charAt(0).toUpperCase()})).filter(Boolean))].sort();o(e)}),[n]),(0,s.useEffect)((()=>{const e=a?n.filter((e=>{var t;return(null===(t=e.nachname)||void 0===t?void 0:t.charAt(0).toUpperCase())===a})):n;d(e)}),[a,n]);const x=e=>{h({...u,[e.target.name]:e.target.value})},v={padding:"10px 15px",backgroundColor:"#8B0000",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",textAlign:"center",fontSize:"14px",width:"100%"};return(0,we.jsxs)("div",{style:{padding:"15px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",marginTop:"20px"},children:[(0,we.jsxs)("h3",{children:["Wettk\xe4mpfer",f&&(0,we.jsx)("span",{style:{color:"#999",fontSize:"12px"},children:" (Lade Kategorien...)"})]}),(0,we.jsxs)("div",{style:{display:"flex",gap:"5px",marginBottom:"10px"},children:[(0,we.jsx)("button",{onClick:()=>i(""),style:v,children:"Alle"}),l.map((e=>(0,we.jsx)("button",{onClick:()=>i(e),style:v,children:e},e)))]}),(0,we.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"15px",marginTop:"20px"},children:c.map((e=>{const t=m.find((t=>t.Division_Code===e.division_code));return(0,we.jsxs)("div",{style:{backgroundColor:"#f8f9fa",borderRadius:"10px",padding:"15px"},children:[(0,we.jsxs)("div",{style:{fontWeight:"bold",borderBottom:"2px solid #8B0000"},children:[e.nachname,", ",e.vorname]}),(0,we.jsxs)("div",{children:[(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Geburtsdatum:"})," ",rr(e.geburtsdatum)]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Geschlecht:"})," ",e.geschlecht]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Gewicht:"})," ",e.gewicht," kg"]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Skill Level:"})," ",e.skill_level]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Kategorie:"})," ",t?(0,we.jsx)("span",{title:t.Division_Name,style:{backgroundColor:"#8B0000",color:"white",padding:"2px 6px",borderRadius:"3px",fontSize:"12px"},children:t.Division_Code}):(0,we.jsx)("span",{style:{color:"#999"},children:e.division_code||"Keine Kategorie"})]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Email:"})," ",e.email||"Nicht angegeben"]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Handy:"})," ",e.handy||"Nicht angegeben"]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Nationalit\xe4t:"})," ",e.nationalitaet]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Gurtfarbe:"})," ",e.gurtfarbe]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Kampfstil:"})," ",e.kampfstil]}),(0,we.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[(0,we.jsx)("button",{style:v,onClick:()=>(e=>{h({...e})})(e),children:"Bearbeiten"}),(0,we.jsx)("button",{style:v,onClick:()=>(async e=>{if(window.confirm("Wollen Sie wirklich den Wettk\xe4mpfer l\xf6schen?"))try{await Ie(e),r((t=>t.filter((t=>t.wettkaempfer_id!==e))))}catch(t){console.error("\u274c Fehler beim L\xf6schen:",t)}})(e.wettkaempfer_id),children:"L\xf6schen"}),(0,we.jsx)("button",{style:v,onClick:()=>console.log("Turnieranmeldung",e.wettkaempfer_id),children:"Turnieranmeldung"})]})]})]},e.wettkaempfer_id)}))}),u&&(0,we.jsx)("div",{style:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,we.jsxs)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.3)",maxHeight:"80vh",overflowY:"auto"},children:[(0,we.jsx)("h3",{children:"Bearbeiten"}),(0,we.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,we.jsx)("label",{children:"Vorname"}),(0,we.jsx)("input",{name:"vorname",value:u.vorname,onChange:x}),(0,we.jsx)("label",{children:"Nachname"}),(0,we.jsx)("input",{name:"nachname",value:u.nachname,onChange:x}),(0,we.jsx)("label",{children:"Geburtsdatum"}),(0,we.jsx)("input",{name:"geburtsdatum",type:"date",value:ar(u.geburtsdatum),onChange:x}),(0,we.jsx)("label",{children:"Gewicht"}),(0,we.jsx)("input",{name:"gewicht",type:"number",value:u.gewicht,onChange:x}),(0,we.jsx)("label",{children:"Geschlecht"}),(0,we.jsxs)("select",{name:"geschlecht",value:u.geschlecht,onChange:x,children:[(0,we.jsx)("option",{value:"",children:"Bitte w\xe4hlen"}),lr.map((e=>(0,we.jsx)("option",{value:e,children:e},e)))]}),(0,we.jsx)("label",{children:"Skill Level"}),(0,we.jsxs)("select",{name:"skill_level",value:u.skill_level,onChange:x,children:[(0,we.jsx)("option",{value:"",children:"Bitte w\xe4hlen"}),ir.map((e=>(0,we.jsx)("option",{value:e,children:e},e)))]}),(0,we.jsx)("label",{children:"Kategorie"}),(0,we.jsxs)("select",{name:"division_code",value:u.division_code||"",onChange:x,children:[(0,we.jsx)("option",{value:"",children:"Keine Kategorie"}),m.map((e=>(0,we.jsxs)("option",{value:e.Division_Code,children:[e.Division_Code," - ",e.Division_Name]},e.Division_Code)))]}),(0,we.jsx)("label",{children:"Email"}),(0,we.jsx)("input",{name:"email",value:u.email,onChange:x}),(0,we.jsx)("label",{children:"Handy"}),(0,we.jsx)("input",{name:"handy",value:u.handy,onChange:x}),(0,we.jsx)("label",{children:"Nationalit\xe4t"}),(0,we.jsx)("input",{name:"nationalitaet",value:u.nationalitaet,onChange:x}),(0,we.jsx)("label",{children:"Gurtfarbe"}),(0,we.jsxs)("select",{name:"gurtfarbe",value:u.gurtfarbe,onChange:x,children:[(0,we.jsx)("option",{value:"",children:"Bitte w\xe4hlen"}),sr.map((e=>(0,we.jsx)("option",{value:e,children:e},e)))]}),(0,we.jsx)("label",{children:"Kampfstil"}),(0,we.jsx)("input",{name:"kampfstil",value:u.kampfstil,onChange:x})]}),(0,we.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[(0,we.jsx)("button",{style:v,onClick:async()=>{if(!u||!u.wettkaempfer_id||isNaN(u.wettkaempfer_id))return void alert("Fehler: Kein `wettkaempfer_id` gesetzt!");const e={...u,wettkaempfer_id:Number(u.wettkaempfer_id),gewicht:parseFloat(u.gewicht)};try{if(!await Oe(e))return;r((t=>t.map((t=>t.wettkaempfer_id===e.wettkaempfer_id?{...t,...e}:t)))),h(null)}catch(t){console.error("\u274c Fehler beim Speichern:",t)}},children:"Speichern"}),(0,we.jsx)("button",{style:v,onClick:()=>{h(null)},children:"Abbrechen"})]})]})})]})},cr={containerStyle:{padding:"15px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",marginTop:"20px"},letterNavStyle:{display:"flex",gap:"5px",marginBottom:"10px"},letterButtonStyle:{padding:"5px 10px",border:"none",borderRadius:"4px",cursor:"pointer",color:"white",backgroundColor:"#8B0000"},cardContainerStyle:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"15px",marginTop:"20px"},cardStyle:{backgroundColor:"#f8f9fa",borderRadius:"10px",padding:"15px"},cardHeaderStyle:{fontWeight:"bold",borderBottom:"2px solid #8B0000"},buttonGroupStyle:{display:"flex",gap:"10px",marginTop:"20px"},addButtonStyle:{padding:"10px 20px",fontSize:"16px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#8B0000",color:"white"},deleteButtonStyle:{padding:"10px 20px",fontSize:"16px",border:"none",borderRadius:"5px",cursor:"pointer",backgroundColor:"#8B0000",color:"white"},editButtonStyle:{padding:"5px 10px",backgroundColor:"#8B0000",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",width:"100%"},modalOverlayStyle:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center"},modalContentStyle:{backgroundColor:"#fff",padding:"20px",borderRadius:"8px",width:"500px",maxHeight:"80%",overflowY:"auto",textAlign:"center",margin:"auto"},formContainerStyle:{display:"flex",flexDirection:"column",gap:"15px",alignItems:"center"},fieldContainerStyle:{display:"flex",flexDirection:"column",width:"90%",alignItems:"center"},labelStyle:{fontSize:"14px",fontWeight:"bold",marginBottom:"5px",textAlign:"left",width:"100%"},inputStyle:{padding:"8px",fontSize:"14px",border:"1px solid #ccc",borderRadius:"5px",width:"100%"},selectStyle:{padding:"8px",fontSize:"14px",border:"1px solid #ccc",borderRadius:"5px",width:"100%"},imagePreviewStyle:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"5px",marginTop:"10px"},formRowStyle:{display:"flex",justifyContent:"space-between",gap:"15px"},columnStyle:{width:"48%"},buttonContainerStyle:{display:"flex",justifyContent:"center",gap:"15px",marginTop:"15px"},saveButtonStyle:{backgroundColor:"#8B0000",color:"white",padding:"10px 20px",border:"none",borderRadius:"5px",cursor:"pointer"},cancelButtonStyle:{backgroundColor:"#555",color:"white",padding:"10px 20px",border:"none",borderRadius:"5px",cursor:"pointer"},meineSchuleContainerStyle:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},flexContainerStyle:{display:"flex",flexWrap:"wrap",gap:"20px"},leftPaneStyle:{flex:"0 0 300px",minWidth:"300px"},middlePaneStyle:{flex:"1 1 600px",minWidth:"300px"},rightPaneStyle:{flex:"0 0 300px",minWidth:"250px"},clubDataStyle:{backgroundColor:"#fff",padding:"20px",border:"1px solid #ddd",borderRadius:"8px"},buttonRowStyle:{display:"flex",gap:"15px",justifyContent:"flex-start",marginBottom:"20px"},filterButtonStyle:{padding:"10px 15px",backgroundColor:"#004085",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},largeRegisterButtonStyle:{backgroundColor:"#28a745",color:"white",fontSize:"16px",padding:"12px 24px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"10px",border:"none",cursor:"pointer",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"},buttonIconStyle:{width:"24px",height:"24px"},wettkaempferContainerStyle:{backgroundColor:"#fff",padding:"20px",borderRadius:"8px",border:"1px solid #ddd",marginTop:"20px"},buttonColumnStyle:{display:"flex",flexDirection:"column",gap:"10px"},registerFighterButtonStyle:{padding:"10px 20px",backgroundColor:"#006400",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"}},dr=["Beginner","Intermediate","Advanced","Black Belt"],ur=["Wei\xdf","Wei\xdf/Gelb","Gelb","Orange","Gr\xfcn","Gr\xfcn/Blau","Blau","Lila","Blau/Rot","Rot","Braun","Schwarz"],hr=[{value:"m\xe4nnlich",label:"m\xe4nnlich"},{value:"weiblich",label:"weiblich"},{value:"divers",label:"divers"}];const mr=function(e){let{setIsAdding:t,setWettkaempfer:n,onWettkaempferAdded:r}=e;const a=((e,t)=>{const[n]=(0,s.useState)((()=>{try{const n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.error(`Fehler beim Laden von localStorage key "${e}":`,n),t}}));return n})("clubData",{}),[i,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)(""),[d,u]=(0,s.useState)({}),h=(0,s.useMemo)((()=>({vereins_id:a.vereins_id||null,vorname:"",nachname:"",geburtsdatum:"",geschlecht:"",gewicht:"",skill_level:"",gurtfarbe:"",email:"",handy:"",kampfstil:"",nationalitaet:""})),[a.vereins_id]),[m,p]=(0,s.useState)(h),f=(0,s.useCallback)(((e,t)=>{p((n=>({...n,[e]:t}))),d[e]&&u((t=>{const n={...t};return delete n[e],n}))}),[d]),g=(0,s.useCallback)((()=>{t(!1)}),[t]);return(0,we.jsx)("div",{style:cr.modalOverlayStyle,children:(0,we.jsxs)("div",{style:cr.modalContentStyle,children:[(0,we.jsx)("h3",{children:"Wettk\xe4mpfer anlegen"}),o&&(0,we.jsx)("div",{style:{color:"red",textAlign:"center",marginBottom:"15px",padding:"10px",backgroundColor:"#ffebee",borderRadius:"4px",border:"1px solid #ffcdd2"},children:o}),(0,we.jsxs)("div",{style:cr.formRowStyle,children:[(0,we.jsxs)("div",{style:cr.columnStyle,children:[(0,we.jsxs)("div",{style:cr.fieldContainerStyle,children:[(0,we.jsxs)("label",{style:cr.labelStyle,children:["Vorname: ",(0,we.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,we.jsx)("input",{type:"text",placeholder:"z.B. Max",value:m.vorname,onChange:e=>f("vorname",e.target.value),style:cr.inputStyle,"aria-label":"Vorname",required:!0,maxLength:50})]}),(0,we.jsxs)("div",{style:cr.fieldContainerStyle,children:[(0,we.jsxs)("label",{style:cr.labelStyle,children:["Nachname: ",(0,we.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,we.jsx)("input",{type:"text",placeholder:"z.B. Mustermann",value:m.nachname,onChange:e=>f("nachname",e.target.value),style:cr.inputStyle,"aria-label":"Nachname",required:!0,maxLength:50})]}),(0,we.jsxs)("div",{style:cr.fieldContainerStyle,children:[(0,we.jsxs)("label",{style:cr.labelStyle,children:["Geburtsdatum: ",(0,we.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,we.jsx)("input",{type:"date",value:m.geburtsdatum,onChange:e=>f("geburtsdatum",e.target.value),style:cr.inputStyle,"aria-label":"Geburtsdatum",required:!0,min:"1924-01-01",max:(new Date).toISOString().split("T")[0]})]}),(0,we.jsxs)("div",{style:cr.fieldContainerStyle,children:[(0,we.jsx)("label",{style:cr.labelStyle,children:"Gewicht (kg):"}),(0,we.jsx)("input",{type:"number",placeholder:"z.B. 62",value:m.gewicht,onChange:e=>f("gewicht",e.target.value),style:cr.inputStyle,"aria-label":"Gewicht in Kilogramm",min:"0",max:"300",step:"0.1"})]}),(0,we.jsxs)("div",{style:cr.fieldContainerStyle,children:[(0,we.jsxs)("label",{style:cr.labelStyle,children:["Skill Level: ",(0,we.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,we.jsxs)("select",{value:m.skill_level,onChange:e=>f("skill_level",e.target.value),style:cr.inputStyle,"aria-label":"Skill Level",required:!0,children:[(0,we.jsx)("option",{value:"",children:"Bitte w\xe4hlen"}),dr.map((e=>(0,we.jsx)("option",{value:e,children:e},e)))]})]}),(0,we.jsxs)("div",{style:cr.fieldContainerStyle,children:[(0,we.jsxs)("label",{style:cr.labelStyle,children:["Geschlecht: ",(0,we.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,we.jsxs)("select",{value:m.geschlecht,onChange:e=>f("geschlecht",e.target.value),style:cr.inputStyle,"aria-label":"Geschlecht",required:!0,children:[(0,we.jsx)("option",{value:"",children:"Bitte w\xe4hlen"}),hr.map((e=>(0,we.jsx)("option",{value:e.value,children:e.label},e.value)))]})]})]}),(0,we.jsxs)("div",{style:cr.columnStyle,children:[(0,we.jsxs)("div",{style:cr.fieldContainerStyle,children:[(0,we.jsx)("label",{style:cr.labelStyle,children:"Nationalit\xe4t:"}),(0,we.jsx)("input",{type:"text",placeholder:"z.B. Deutschland, \xd6sterreich",value:m.nationalitaet,onChange:e=>f("nationalitaet",e.target.value),style:cr.inputStyle,"aria-label":"Nationalit\xe4t",maxLength:50})]}),(0,we.jsxs)("div",{style:cr.fieldContainerStyle,children:[(0,we.jsxs)("label",{style:cr.labelStyle,children:["Gurtfarbe: ",(0,we.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,we.jsxs)("select",{value:m.gurtfarbe,onChange:e=>f("gurtfarbe",e.target.value),style:cr.inputStyle,"aria-label":"Gurtfarbe",required:!0,children:[(0,we.jsx)("option",{value:"",children:"Bitte w\xe4hlen"}),ur.map((e=>(0,we.jsx)("option",{value:e,children:e},e)))]})]}),(0,we.jsxs)("div",{style:cr.fieldContainerStyle,children:[(0,we.jsx)("label",{style:cr.labelStyle,children:"Kampfstil:"}),(0,we.jsx)("input",{type:"text",placeholder:"z.B. Karate, Judo, Taekwondo",value:m.kampfstil,onChange:e=>f("kampfstil",e.target.value),style:cr.inputStyle,"aria-label":"Kampfstil",maxLength:50})]}),(0,we.jsxs)("div",{style:cr.fieldContainerStyle,children:[(0,we.jsx)("label",{style:cr.labelStyle,children:"E-Mail:"}),(0,we.jsx)("input",{type:"email",placeholder:"z.B. max@beispiel.de",value:m.email,onChange:e=>f("email",e.target.value),style:cr.inputStyle,"aria-label":"E-Mail-Adresse",maxLength:100})]}),(0,we.jsxs)("div",{style:cr.fieldContainerStyle,children:[(0,we.jsx)("label",{style:cr.labelStyle,children:"Handy:"}),(0,we.jsx)("input",{type:"tel",placeholder:"z.B. 0176 12345678",value:m.handy,onChange:e=>f("handy",e.target.value),style:cr.inputStyle,"aria-label":"Handynummer",maxLength:20})]})]})]}),(0,we.jsxs)("div",{style:cr.buttonContainerStyle,children:[(0,we.jsx)("button",{style:cr.saveButtonStyle,onClick:async()=>{c(""),u({});const e=(e=>{var t,n;const r=[];var a,i;if(null!==(t=e.vorname)&&void 0!==t&&t.trim()||r.push("Vorname ist erforderlich"),null!==(n=e.nachname)&&void 0!==n&&n.trim()||r.push("Nachname ist erforderlich"),e.geburtsdatum||r.push("Geburtsdatum ist erforderlich"),e.geschlecht||r.push("Geschlecht ist erforderlich"),e.skill_level||r.push("Skill Level ist erforderlich"),e.gurtfarbe||r.push("Gurtfarbe ist erforderlich"),e.email&&(a=e.email,!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a))&&r.push("Ung\xfcltige E-Mail-Adresse"),e.handy&&(i=e.handy,!/^[\d\s\-\+\(\)]{10,20}$/.test(i))&&r.push("Ung\xfcltige Handynummer"),e.gewicht&&(e.gewicht<0||e.gewicht>300)&&r.push("Gewicht muss zwischen 0 und 300 kg liegen"),e.geburtsdatum){const t=new Date(e.geburtsdatum),n=(new Date).getFullYear()-t.getFullYear();(n<5||n>100)&&r.push("Alter muss zwischen 5 und 100 Jahren liegen")}return r})(m);if(e.length>0)c(`\u274c Bitte korrigiere folgende Fehler: ${e.join(", ")}`);else if(m.vereins_id){l(!0);try{const e=(e=>{var t,n,r,a;return{...e,vorname:e.vorname.trim(),nachname:e.nachname.trim(),nationalitaet:(null===(t=e.nationalitaet)||void 0===t?void 0:t.trim())||"Deutschland",kampfstil:(null===(n=e.kampfstil)||void 0===n?void 0:n.trim())||"unbekannt",gewicht:e.gewicht?parseFloat(e.gewicht).toString():"0.0",email:(null===(r=e.email)||void 0===r?void 0:r.trim())||null,handy:(null===(a=e.handy)||void 0===a?void 0:a.trim())||null}})(m);console.log("\ud83d\udea9 Sende an Backend:",e);const i=await Pe(e);if(!i||!i.id&&!i.wettkaempfer_id)throw new Error((null===i||void 0===i?void 0:i.error)||"Unbekannter Serverfehler");try{const e=await Le(m.vereins_id);n(Array.isArray(e)?e:[e]),t(!1),null===r||void 0===r||r()}catch(a){console.error("Fehler beim Aktualisieren der Liste:",a),t(!1),null===r||void 0===r||r()}}catch(i){console.error("Fehler beim Speichern:",i),i.message.includes("400")?c("\u26a0\ufe0f Ung\xfcltige Daten. Bitte \xfcberpr\xfcfe deine Eingaben."):i.message.includes("409")?c("\u26a0\ufe0f Wettk\xe4mpfer existiert bereits."):i.message.includes("500")?c("\u26a0\ufe0f Serverfehler. Bitte versuche es sp\xe4ter erneut."):c(`\u26a0\ufe0f Fehler: ${i.message||"Unbekannter Fehler beim Speichern"}`)}finally{l(!1)}}else c("\u274c Fehler: Keine Vereins-ID gefunden. Bitte lade die Seite neu.")},disabled:i,"aria-label":"Wettk\xe4mpfer speichern",children:i?"Speichert...":"Speichern"}),(0,we.jsx)("button",{style:cr.cancelButtonStyle,onClick:g,disabled:i,"aria-label":"Abbrechen",children:"Abbrechen"})]})]})})},pr=e=>{let{turnierId:t,onScheduleUpdate:n}=e;const[r,a]=(0,s.useState)([]),[i,l]=(0,s.useState)([]),[o,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(!1),[h,m]=(0,s.useState)(!1),[p,f]=(0,s.useState)(!1),[g,x]=(0,s.useState)(""),[v,b]=(0,s.useState)({schedule_name:"",schedule_date:"",start_time:"09:00",end_time:"18:00",template_id:"",venue_info:{venue_name:"",address:"",rings:2,facilities:[]},notes:""});(0,s.useEffect)((()=>{t&&(j(),y())}),[t]);const j=async()=>{try{f(!0);const e=await fetch(`/api/schedule/tournament/${t}/schedules`);if(e.ok){const t=await e.json();a(t)}}catch(g){console.error("Fehler beim Laden der Zeitpl\xe4ne:",g),x("Zeitpl\xe4ne konnten nicht geladen werden")}finally{f(!1)}},y=async()=>{try{const e=await fetch("/api/schedule/templates");if(e.ok){const t=await e.json();l(t)}}catch(g){console.error("Fehler beim Laden der Templates:",g)}},k=e=>new Date(`2000-01-01T${e}`).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}),w=e=>({draft:"Entwurf",published:"Ver\xf6ffentlicht",active:"Aktiv",completed:"Abgeschlossen",cancelled:"Abgebrochen"}[e]||e);return(0,we.jsxs)("div",{className:"schedule-manager",children:[(0,we.jsxs)("div",{className:"schedule-header",children:[(0,we.jsx)("h3",{children:"Zeitplan-Verwaltung"}),(0,we.jsx)("button",{className:"btn btn-primary",onClick:()=>u(!0),children:"Neuer Zeitplan"})]}),g&&(0,we.jsxs)("div",{className:"alert alert-danger",children:[g,(0,we.jsx)("button",{onClick:()=>x(""),children:"\xd7"})]}),p&&(0,we.jsx)("div",{className:"loading",children:"Lade Zeitpl\xe4ne..."}),(0,we.jsx)("div",{className:"schedules-list",children:r.map((e=>{return(0,we.jsxs)("div",{className:"schedule-card",children:[(0,we.jsxs)("div",{className:"schedule-card-header",children:[(0,we.jsx)("h4",{children:e.schedule_name}),(0,we.jsx)("span",{className:"status-badge",style:{backgroundColor:(t=e.status,{draft:"#6c757d",published:"#007bff",active:"#28a745",completed:"#6f42c1",cancelled:"#dc3545"}[t]||"#6c757d")},children:w(e.status)})]}),(0,we.jsxs)("div",{className:"schedule-card-body",children:[(0,we.jsxs)("div",{className:"schedule-info",children:[(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Datum:"})," ",new Date(e.schedule_date).toLocaleDateString("de-DE")]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Zeit:"})," ",k(e.start_time)," - ",k(e.end_time)]}),e.venue_info&&(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Venue:"})," ",JSON.parse(e.venue_info).venue_name||"Nicht angegeben"]}),e.notes&&(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Notizen:"})," ",e.notes]})]}),(0,we.jsxs)("div",{className:"schedule-actions",children:["draft"===e.status&&(0,we.jsxs)(we.Fragment,{children:[(0,we.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>(async e=>{try{f(!0);const t=await fetch(`/api/schedule/schedules/${e}/generate-slots`,{method:"POST"});if(t.ok){const e=await t.json();alert(`${e.slotsCreated} Zeitslots erfolgreich generiert`),j()}else x("Zeitslots konnten nicht generiert werden")}catch(g){console.error("Fehler beim Generieren der Zeitslots:",g),x("Fehler beim Generieren der Zeitslots")}finally{f(!1)}})(e.schedule_id),children:"Zeitslots generieren"}),(0,we.jsx)("button",{className:"btn btn-success btn-sm",onClick:()=>(async e=>{try{(await fetch(`/api/schedule/schedules/${e}/publish`,{method:"PUT"})).ok?(j(),alert("Zeitplan wurde ver\xf6ffentlicht")):x("Zeitplan konnte nicht ver\xf6ffentlicht werden")}catch(g){console.error("Fehler beim Ver\xf6ffentlichen:",g),x("Fehler beim Ver\xf6ffentlichen")}})(e.schedule_id),children:"Ver\xf6ffentlichen"})]}),(0,we.jsx)("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>c(e),children:"Details"})]})]})]},e.schedule_id);var t}))}),d&&(0,we.jsx)("div",{className:"modal-overlay",children:(0,we.jsxs)("div",{className:"modal-content",children:[(0,we.jsxs)("div",{className:"modal-header",children:[(0,we.jsx)("h4",{children:"Neuen Zeitplan erstellen"}),(0,we.jsx)("button",{onClick:()=>u(!1),children:"\xd7"})]}),(0,we.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{f(!0);const e={...v,turnier_id:t,venue_info:JSON.stringify(v.venue_info)},i=await fetch("/api/schedule/schedules",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(i.ok){const e=await i.json();a([...r,e]),u(!1),b({schedule_name:"",schedule_date:"",start_time:"09:00",end_time:"18:00",template_id:"",venue_info:{venue_name:"",address:"",rings:2,facilities:[]},notes:""}),n&&n()}else x("Zeitplan konnte nicht erstellt werden")}catch(g){console.error("Fehler beim Erstellen des Zeitplans:",g),x("Fehler beim Erstellen des Zeitplans")}finally{f(!1)}},children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Zeitplan Name"}),(0,we.jsx)("input",{type:"text",value:v.schedule_name,onChange:e=>b({...v,schedule_name:e.target.value}),required:!0})]}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Datum"}),(0,we.jsx)("input",{type:"date",value:v.schedule_date,onChange:e=>b({...v,schedule_date:e.target.value}),required:!0})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Startzeit"}),(0,we.jsx)("input",{type:"time",value:v.start_time,onChange:e=>b({...v,start_time:e.target.value}),required:!0})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Endzeit"}),(0,we.jsx)("input",{type:"time",value:v.end_time,onChange:e=>b({...v,end_time:e.target.value}),required:!0})]})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Template"}),(0,we.jsxs)("select",{value:v.template_id,onChange:e=>b({...v,template_id:e.target.value}),children:[(0,we.jsx)("option",{value:"",children:"Kein Template"}),i.map((e=>(0,we.jsxs)("option",{value:e.template_id,children:[e.template_name," (",e.template_type,")"]},e.template_id)))]})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Venue Name"}),(0,we.jsx)("input",{type:"text",value:v.venue_info.venue_name,onChange:e=>b({...v,venue_info:{...v.venue_info,venue_name:e.target.value}})})]}),(0,we.jsx)("div",{className:"form-row",children:(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Anzahl Ringe"}),(0,we.jsx)("input",{type:"number",min:"1",max:"10",value:v.venue_info.rings,onChange:e=>b({...v,venue_info:{...v.venue_info,rings:parseInt(e.target.value)}})})]})}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Notizen"}),(0,we.jsx)("textarea",{value:v.notes,onChange:e=>b({...v,notes:e.target.value}),rows:"3"})]}),(0,we.jsxs)("div",{className:"modal-actions",children:[(0,we.jsx)("button",{type:"button",onClick:()=>u(!1),children:"Abbrechen"}),(0,we.jsx)("button",{type:"submit",disabled:p,children:p?"Erstelle...":"Erstellen"})]})]})]})})]})},fr=e=>{let{turnierId:t,scheduleId:n,onAssignmentUpdate:r}=e;const[a,i]=(0,s.useState)([]),[l,o]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[u,h]=(0,s.useState)([]),[m,p]=(0,s.useState)(null),[f,g]=(0,s.useState)(!1),[x,v]=(0,s.useState)(!1),[b,j]=(0,s.useState)(!1),[y,k]=(0,s.useState)(""),[w,N]=(0,s.useState)({user_id:"",slot_id:"",ring_number:1,role:"hauptkampfrichter",assignment_start:"",assignment_end:"",qualification_level:"c_lizenz",notes:""}),[S,_]=(0,s.useState)({available_date:"",start_time:"09:00",end_time:"18:00",availability_type:"available",max_consecutive_hours:4,break_required_minutes:30,preferred_roles:[],restrictions:""}),C=[{value:"hauptkampfrichter",label:"Hauptkampfrichter"},{value:"seitenkampfrichter",label:"Seitenkampfrichter"},{value:"punktrichter",label:"Punktrichter"},{value:"zeitnehmer",label:"Zeitnehmer"}],z=[{value:"c_lizenz",label:"C-Lizenz"},{value:"b_lizenz",label:"B-Lizenz"},{value:"a_lizenz",label:"A-Lizenz"},{value:"international",label:"International"}];(0,s.useEffect)((()=>{t&&(T(),A(),E(),n&&D())}),[t,n]);const T=async()=>{try{j(!0);const e=await fetch("/api/schedule/referees");if(e.ok){const t=await e.json();i(t)}}catch(y){console.error("Fehler beim Laden der Kampfrichter:",y),k("Kampfrichter konnten nicht geladen werden")}finally{j(!1)}},A=async()=>{try{const e=await fetch(`/api/schedule/tournament/${t}/assignments`);if(e.ok){const t=await e.json();o(t)}}catch(y){console.error("Fehler beim Laden der Zuteilungen:",y)}},E=async()=>{try{const e=await fetch(`/api/schedule/tournament/${t}/availability`);if(e.ok){const t=await e.json();d(t)}}catch(y){console.error("Fehler beim Laden der Verf\xfcgbarkeiten:",y)}},D=async()=>{try{const e=await fetch(`/api/schedule/schedules/${n}/slots`);if(e.ok){const t=await e.json();h(t)}}catch(y){console.error("Fehler beim Laden der Zeitslots:",y)}},B=()=>{N({user_id:"",slot_id:"",ring_number:1,role:"hauptkampfrichter",assignment_start:"",assignment_end:"",qualification_level:"c_lizenz",notes:""})},R=()=>{_({available_date:"",start_time:"09:00",end_time:"18:00",availability_type:"available",max_consecutive_hours:4,break_required_minutes:30,preferred_roles:[],restrictions:""})},F=e=>new Date(e).toLocaleString("de-DE");return(0,we.jsxs)("div",{className:"referee-manager",children:[(0,we.jsxs)("div",{className:"referee-header",children:[(0,we.jsx)("h3",{children:"Kampfrichter-Verwaltung"}),(0,we.jsxs)("div",{className:"header-actions",children:[(0,we.jsx)("button",{className:"btn btn-primary",onClick:()=>g(!0),disabled:!n,children:"Kampfrichter zuteilen"}),n&&(0,we.jsx)("button",{className:"btn btn-success",onClick:async()=>{try{j(!0);const e=await fetch(`/api/schedule/schedules/${n}/auto-assign-referees`,{method:"POST"});if(e.ok){const t=await e.json();alert(`${t.assignmentsCreated} Kampfrichter automatisch zugeteilt`),A()}else k("Automatische Zuteilung fehlgeschlagen")}catch(y){console.error("Fehler bei automatischer Zuteilung:",y),k("Fehler bei automatischer Zuteilung")}finally{j(!1)}},disabled:b,children:"Auto-Zuteilung"})]})]}),y&&(0,we.jsxs)("div",{className:"alert alert-danger",children:[y,(0,we.jsx)("button",{onClick:()=>k(""),children:"\xd7"})]}),b&&(0,we.jsx)("div",{className:"loading",children:"Lade Kampfrichter-Daten..."}),(0,we.jsxs)("div",{className:"referee-content",children:[(0,we.jsxs)("div",{className:"referees-list",children:[(0,we.jsx)("h4",{children:"Verf\xfcgbare Kampfrichter"}),a.map((e=>{var t;const n=(r=e.id,l.filter((e=>e.user_id===r)));var r;const a=(e=>c.filter((t=>t.user_id===e)))(e.id);return(0,we.jsxs)("div",{className:"referee-card",children:[(0,we.jsxs)("div",{className:"referee-info",children:[(0,we.jsx)("h5",{children:e.name}),(0,we.jsx)("p",{className:"referee-email",children:e.email}),e.qualification_level&&(0,we.jsx)("span",{className:"qualification-badge",style:{backgroundColor:(i=e.qualification_level,{c_lizenz:"#6c757d",b_lizenz:"#17a2b8",a_lizenz:"#28a745",international:"#dc3545"}[i]||"#6c757d")},children:null===(t=z.find((t=>t.value===e.qualification_level)))||void 0===t?void 0:t.label})]}),(0,we.jsxs)("div",{className:"referee-stats",children:[(0,we.jsxs)("div",{className:"stat",children:[(0,we.jsx)("span",{className:"stat-number",children:n.length}),(0,we.jsx)("span",{className:"stat-label",children:"Zuteilungen"})]}),(0,we.jsxs)("div",{className:"stat",children:[(0,we.jsx)("span",{className:"stat-number",children:a.length}),(0,we.jsx)("span",{className:"stat-label",children:"Verf\xfcgbarkeiten"})]})]}),(0,we.jsx)("div",{className:"referee-actions",children:(0,we.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>{p(e),v(!0)},children:"Verf\xfcgbarkeit"})})]},e.id);var i}))]}),n&&(0,we.jsxs)("div",{className:"assignments-list",children:[(0,we.jsx)("h4",{children:"Aktuelle Zuteilungen"}),l.filter((e=>e.schedule_id===parseInt(n))).map((e=>{var t;return(0,we.jsxs)("div",{className:"assignment-card",children:[(0,we.jsxs)("div",{className:"assignment-info",children:[(0,we.jsx)("h6",{children:e.referee_name}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Rolle:"})," ",null===(t=C.find((t=>t.value===e.role)))||void 0===t?void 0:t.label]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Ring:"})," ",e.ring_number]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Zeit:"})," ",F(e.assignment_start)," - ",F(e.assignment_end)]}),e.notes&&(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Notizen:"})," ",e.notes]})]}),(0,we.jsx)("div",{className:"assignment-actions",children:(0,we.jsx)("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>(async e=>{try{(await fetch(`/api/schedule/assignments/${e}`,{method:"DELETE"})).ok?(o(l.filter((t=>t.assignment_id!==e))),r&&r()):k("Zuteilung konnte nicht entfernt werden")}catch(y){console.error("Fehler beim Entfernen der Zuteilung:",y),k("Fehler beim Entfernen der Zuteilung")}})(e.assignment_id),children:"Entfernen"})})]},e.assignment_id)}))]})]}),f&&(0,we.jsx)("div",{className:"modal-overlay",children:(0,we.jsxs)("div",{className:"modal-content",children:[(0,we.jsxs)("div",{className:"modal-header",children:[(0,we.jsx)("h4",{children:"Kampfrichter zuteilen"}),(0,we.jsx)("button",{onClick:()=>g(!1),children:"\xd7"})]}),(0,we.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{j(!0);const e={...w,turnier_id:t,schedule_id:n,preferred_roles:JSON.stringify(w.preferred_roles||[])},a=await fetch("/api/schedule/assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(a.ok){const e=await a.json();o([...l,e]),g(!1),B(),r&&r()}else{const e=await a.json();k(e.message||"Zuteilung konnte nicht erstellt werden")}}catch(y){console.error("Fehler beim Zuteilen des Kampfrichters:",y),k("Fehler beim Zuteilen des Kampfrichters")}finally{j(!1)}},children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Kampfrichter"}),(0,we.jsxs)("select",{value:w.user_id,onChange:e=>N({...w,user_id:e.target.value}),required:!0,children:[(0,we.jsx)("option",{value:"",children:"Kampfrichter ausw\xe4hlen"}),a.map((e=>(0,we.jsxs)("option",{value:e.id,children:[e.name," (",e.email,")"]},e.id)))]})]}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Rolle"}),(0,we.jsx)("select",{value:w.role,onChange:e=>N({...w,role:e.target.value}),required:!0,children:C.map((e=>(0,we.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Ring"}),(0,we.jsx)("input",{type:"number",min:"1",max:"10",value:w.ring_number,onChange:e=>N({...w,ring_number:parseInt(e.target.value)}),required:!0})]})]}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Start Zeit"}),(0,we.jsx)("input",{type:"datetime-local",value:w.assignment_start,onChange:e=>N({...w,assignment_start:e.target.value}),required:!0})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"End Zeit"}),(0,we.jsx)("input",{type:"datetime-local",value:w.assignment_end,onChange:e=>N({...w,assignment_end:e.target.value}),required:!0})]})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Qualifikation"}),(0,we.jsx)("select",{value:w.qualification_level,onChange:e=>N({...w,qualification_level:e.target.value}),children:z.map((e=>(0,we.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Notizen"}),(0,we.jsx)("textarea",{value:w.notes,onChange:e=>N({...w,notes:e.target.value}),rows:"3"})]}),(0,we.jsxs)("div",{className:"modal-actions",children:[(0,we.jsx)("button",{type:"button",onClick:()=>g(!1),children:"Abbrechen"}),(0,we.jsx)("button",{type:"submit",disabled:b,children:b?"Zuteilen...":"Zuteilen"})]})]})]})}),x&&m&&(0,we.jsx)("div",{className:"modal-overlay",children:(0,we.jsxs)("div",{className:"modal-content",children:[(0,we.jsxs)("div",{className:"modal-header",children:[(0,we.jsxs)("h4",{children:["Verf\xfcgbarkeit setzen - ",m.name]}),(0,we.jsx)("button",{onClick:()=>v(!1),children:"\xd7"})]}),(0,we.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{j(!0);const e={...S,user_id:m.id,turnier_id:t,preferred_roles:JSON.stringify(S.preferred_roles||[])},n=await fetch("/api/schedule/availability",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(n.ok){const e=await n.json();d([...e,e]),v(!1),R(),E()}else k("Verf\xfcgbarkeit konnte nicht gesetzt werden")}catch(y){console.error("Fehler beim Setzen der Verf\xfcgbarkeit:",y),k("Fehler beim Setzen der Verf\xfcgbarkeit")}finally{j(!1)}},children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Datum"}),(0,we.jsx)("input",{type:"date",value:S.available_date,onChange:e=>_({...S,available_date:e.target.value}),required:!0})]}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Start Zeit"}),(0,we.jsx)("input",{type:"time",value:S.start_time,onChange:e=>_({...S,start_time:e.target.value}),required:!0})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"End Zeit"}),(0,we.jsx)("input",{type:"time",value:S.end_time,onChange:e=>_({...S,end_time:e.target.value}),required:!0})]})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Verf\xfcgbarkeitstyp"}),(0,we.jsx)("select",{value:S.availability_type,onChange:e=>_({...S,availability_type:e.target.value}),children:[{value:"available",label:"Verf\xfcgbar"},{value:"preferred",label:"Bevorzugt"},{value:"limited",label:"Eingeschr\xe4nkt"},{value:"unavailable",label:"Nicht verf\xfcgbar"}].map((e=>(0,we.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Max. aufeinanderfolgende Stunden"}),(0,we.jsx)("input",{type:"number",min:"1",max:"12",value:S.max_consecutive_hours,onChange:e=>_({...S,max_consecutive_hours:parseInt(e.target.value)})})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Pausenzeit (Minuten)"}),(0,we.jsx)("input",{type:"number",min:"0",max:"120",value:S.break_required_minutes,onChange:e=>_({...S,break_required_minutes:parseInt(e.target.value)})})]})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Einschr\xe4nkungen"}),(0,we.jsx)("textarea",{value:S.restrictions,onChange:e=>_({...S,restrictions:e.target.value}),rows:"3",placeholder:"Besondere Einschr\xe4nkungen oder Notizen..."})]}),(0,we.jsxs)("div",{className:"modal-actions",children:[(0,we.jsx)("button",{type:"button",onClick:()=>v(!1),children:"Abbrechen"}),(0,we.jsx)("button",{type:"submit",disabled:b,children:b?"Speichern...":"Speichern"})]})]})]})})]})},gr={position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0,0,0,0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},xr={backgroundColor:"white",borderRadius:"12px",width:"90%",maxWidth:"1200px",height:"80%",display:"flex",flexDirection:"column",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},vr={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #eee",backgroundColor:"#f8f9fa",borderRadius:"12px 12px 0 0"},br={display:"flex",alignItems:"center",gap:"15px"},jr={padding:"8px 12px",borderRadius:"6px",border:"1px solid #ddd",fontSize:"14px"},yr={background:"#dc3545",color:"white",border:"none",borderRadius:"6px",width:"32px",height:"32px",fontSize:"18px",cursor:"pointer"},kr={flex:1,padding:"20px",overflow:"auto"},wr={display:"flex",flexDirection:"column",gap:"20px"},Nr={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"20px"},Sr={padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"8px",textAlign:"center",border:"1px solid #e9ecef"},_r={fontSize:"32px",fontWeight:"bold",color:"#8B0000",marginTop:"10px"},Cr={display:"flex",gap:"15px",marginBottom:"20px"},zr={padding:"12px 24px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",cursor:"pointer",fontWeight:"bold"},Tr={padding:"12px 24px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},Ar={padding:"12px 24px",backgroundColor:"#ffc107",color:"#212529",border:"none",borderRadius:"6px",fontSize:"14px",cursor:"pointer",fontWeight:"bold"},Er={display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"20px"},Dr={border:"1px solid #ddd",borderRadius:"8px",padding:"16px",backgroundColor:"white",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},Br={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},Rr={backgroundColor:"#007bff",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},Fr={display:"flex",flexDirection:"column",gap:"8px"},Lr={fontSize:"14px",fontWeight:"bold",color:"#6c757d"},Pr={fontSize:"13px",color:"#495057"},Or={display:"flex",flexDirection:"column",gap:"4px"},Ir={fontSize:"12px",color:"#6c757d",padding:"2px 0"},$r={fontSize:"12px",color:"#007bff",fontWeight:"bold"},Wr={display:"flex",flexDirection:"column",height:"100%"},Mr={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},Kr={padding:"8px 16px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},Ur={textAlign:"center",padding:"60px 20px",color:"#6c757d"},Vr={display:"flex",flexDirection:"column",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden"},qr={display:"grid",gridTemplateColumns:"2fr 1fr 2fr 1fr 2fr",backgroundColor:"#f8f9fa",padding:"12px",fontWeight:"bold",borderBottom:"1px solid #ddd"},Gr={display:"grid",gridTemplateColumns:"2fr 1fr 2fr 1fr 2fr",padding:"12px",borderBottom:"1px solid #eee",alignItems:"center"},Hr={display:"flex",flexDirection:"column"},Jr={textAlign:"center",fontSize:"14px"},Zr={display:"flex",flexDirection:"column"},Yr={textAlign:"center"},Qr=e=>({backgroundColor:e>.8?"#28a745":e>.6?"#ffc107":"#dc3545",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"}),Xr={fontSize:"12px",color:"#6c757d"},ea={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px"},ta={width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #8B0000",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"20px"},na=e=>{let{turnier:t,onClose:n}=e;const[r,a]=(0,s.useState)([]),[i,l]=(0,s.useState)([]),[o,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(!0),[h,m]=(0,s.useState)("karate"),[p,f]=(0,s.useState)(!1),[g,x]=(0,s.useState)("overview");(0,s.useEffect)((()=>{v()}),[t.turnier_id,h]);const v=async()=>{u(!0);try{const e=await fetch(`/api/pairing/weight-classes?sport=${h}`),n=await e.json();n.success&&a(n.data);const r=await fetch(`/api/pairing/tournaments/${t.turnier_id}/weight-assignments`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),i=await r.json();i.success&&l(i.data);const s=await fetch(`/api/anmeldungen/turnier/${t.turnier_id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),o=await s.json();o.success&&c(o.data)}catch(e){console.error("Fehler beim Laden der Daten:",e)}finally{u(!1)}},b=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];f(!0);try{const n=await fetch(`/api/pairing/tournaments/${t.turnier_id}/auto-assign-weights`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({sport_art:h,force_reassign:e})}),r=await n.json();r.success?(alert(`\u2705 Automatische Zuordnung erfolgreich!\n${r.assignments.length} Teilnehmer zugeordnet.`),v()):alert(`\u274c Fehler bei automatischer Zuordnung: ${r.message}`)}catch(n){console.error("Fehler bei automatischer Zuordnung:",n),alert("\u274c Fehler bei der Verbindung zum Server.")}finally{f(!1)}},j=()=>{const e={};return i.forEach((t=>{const n=t.division_code;e[n]||(e[n]={weightClass:t,participants:[]}),e[n].participants.push(t)})),(0,we.jsxs)("div",{style:wr,children:[(0,we.jsxs)("div",{style:Nr,children:[(0,we.jsxs)("div",{style:Sr,children:[(0,we.jsx)("h3",{children:"Teilnehmer Gesamt"}),(0,we.jsx)("div",{style:_r,children:o.length})]}),(0,we.jsxs)("div",{style:Sr,children:[(0,we.jsx)("h3",{children:"Zugeordnet"}),(0,we.jsx)("div",{style:_r,children:i.length})]}),(0,we.jsxs)("div",{style:Sr,children:[(0,we.jsx)("h3",{children:"Nicht zugeordnet"}),(0,we.jsx)("div",{style:_r,children:o.length-i.length})]}),(0,we.jsxs)("div",{style:Sr,children:[(0,we.jsx)("h3",{children:"Gewichtsklassen"}),(0,we.jsx)("div",{style:_r,children:Object.keys(e).length})]})]}),(0,we.jsxs)("div",{style:Cr,children:[(0,we.jsx)("button",{onClick:()=>b(!1),disabled:p,style:zr,children:p?"\u23f3 Wird zugeordnet...":"\ud83e\udd16 Automatische Zuordnung"}),(0,we.jsx)("button",{onClick:()=>b(!0),disabled:p,style:Ar,children:"\ud83d\udd04 Neu zuordnen (alle)"}),(0,we.jsx)("button",{onClick:()=>x("assignments"),style:Tr,children:"\ud83d\udccb Details anzeigen"})]}),Object.keys(e).length>0&&(0,we.jsx)("div",{style:Er,children:Object.entries(e).map((e=>{let[t,n]=e;return(0,we.jsx)(k,{divisionCode:t,weightClass:n.weightClass,participants:n.participants},t)}))})]})},y=()=>(0,we.jsxs)("div",{style:Wr,children:[(0,we.jsxs)("div",{style:Mr,children:[(0,we.jsx)("h3",{children:"Gewichtsklassen-Zuordnungen"}),(0,we.jsx)("button",{onClick:()=>x("overview"),style:Kr,children:"\u2190 Zur\xfcck zur \xdcbersicht"})]}),0===i.length?(0,we.jsxs)("div",{style:Ur,children:[(0,we.jsx)("p",{children:"\ud83e\udd37\u200d\u2642\ufe0f Noch keine Zuordnungen vorhanden."}),(0,we.jsx)("p",{children:"Verwende die automatische Zuordnung um zu beginnen."})]}):(0,we.jsxs)("div",{style:Vr,children:[(0,we.jsxs)("div",{style:qr,children:[(0,we.jsx)("div",{children:"Teilnehmer"}),(0,we.jsx)("div",{children:"Gewicht"}),(0,we.jsx)("div",{children:"Gewichtsklasse"}),(0,we.jsx)("div",{children:"Vertrauen"}),(0,we.jsx)("div",{children:"Grund"})]}),i.map((e=>(0,we.jsxs)("div",{style:Gr,children:[(0,we.jsxs)("div",{style:Hr,children:[(0,we.jsxs)("strong",{children:[e.vorname," ",e.nachname]}),(0,we.jsx)("small",{children:e.verein_name})]}),(0,we.jsxs)("div",{style:Jr,children:[e.gewicht,"kg (",e.geschlecht,")"]}),(0,we.jsxs)("div",{style:Zr,children:[(0,we.jsx)("strong",{children:e.division_code}),(0,we.jsx)("small",{children:e.klassen_name})]}),(0,we.jsx)("div",{style:Yr,children:(0,we.jsxs)("div",{style:Qr(e.confidence_score),children:[Math.round(100*e.confidence_score),"%"]})}),(0,we.jsx)("div",{style:Xr,children:e.zuordnung_grund})]},e.zuordnung_id)))]})]}),k=e=>{let{divisionCode:t,weightClass:n,participants:r}=e;return(0,we.jsxs)("div",{style:Dr,children:[(0,we.jsxs)("div",{style:Br,children:[(0,we.jsx)("h4",{children:t}),(0,we.jsxs)("span",{style:Rr,children:[r.length," Teilnehmer"]})]}),(0,we.jsxs)("div",{style:Fr,children:[(0,we.jsxs)("div",{style:Lr,children:[n.min_gewicht?`${n.min_gewicht}kg`:"Keine Untergrenze"," - ",n.max_gewicht?`${n.max_gewicht}kg`:"Keine Obergrenze"]}),(0,we.jsx)("div",{style:Pr,children:(0,we.jsx)("span",{children:n.klassen_name})}),(0,we.jsxs)("div",{style:Or,children:[r.slice(0,3).map((e=>(0,we.jsxs)("div",{style:Ir,children:[e.vorname," ",e.nachname," (",e.gewicht,"kg)"]},e.wettkaempfer_id))),r.length>3&&(0,we.jsxs)("div",{style:$r,children:["+",r.length-3," weitere"]})]})]})]})};return d?(0,we.jsx)("div",{style:gr,children:(0,we.jsx)("div",{style:xr,children:(0,we.jsxs)("div",{style:ea,children:[(0,we.jsx)("div",{style:ta}),(0,we.jsx)("p",{children:"Lade Gewichtsklassen-Daten..."})]})})}):(0,we.jsx)("div",{style:gr,children:(0,we.jsxs)("div",{style:xr,children:[(0,we.jsxs)("div",{style:vr,children:[(0,we.jsx)("h2",{children:"Gewichtsklassen-Management"}),(0,we.jsxs)("div",{style:br,children:[(0,we.jsxs)("select",{value:h,onChange:e=>m(e.target.value),style:jr,children:[(0,we.jsx)("option",{value:"karate",children:"Karate"}),(0,we.jsx)("option",{value:"kickboxing",children:"Kickboxing"}),(0,we.jsx)("option",{value:"taekwondo",children:"Taekwondo"}),(0,we.jsx)("option",{value:"judo",children:"Judo"})]}),(0,we.jsx)("button",{onClick:n,style:yr,children:"\xd7"})]})]}),(0,we.jsxs)("div",{style:kr,children:["overview"===g&&(0,we.jsx)(j,{}),"assignments"===g&&(0,we.jsx)(y,{})]})]})})},ra={position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0,0,0,0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},aa={backgroundColor:"white",borderRadius:"12px",width:"90%",maxWidth:"1200px",height:"85%",display:"flex",flexDirection:"column",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},ia={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #eee",backgroundColor:"#f8f9fa",borderRadius:"12px 12px 0 0"},sa={background:"#dc3545",color:"white",border:"none",borderRadius:"6px",width:"32px",height:"32px",fontSize:"18px",cursor:"pointer"},la={flex:1,padding:"20px",overflow:"auto"},oa={display:"flex",flexDirection:"column",gap:"20px"},ca={display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(400px, 1fr))",gap:"16px"},da={border:"2px solid #e9ecef",borderRadius:"8px",padding:"20px",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:"white"},ua={borderColor:"#8B0000",backgroundColor:"#fff5f5"},ha={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},ma={backgroundColor:"#007bff",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},pa={marginBottom:"12px"},fa={fontSize:"14px",color:"#6c757d",fontWeight:"bold"},ga={display:"flex",flexWrap:"wrap",gap:"6px"},xa={backgroundColor:"#f8f9fa",padding:"2px 6px",borderRadius:"4px",fontSize:"12px",color:"#495057"},va={backgroundColor:"#007bff",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"},ba={display:"flex",flexDirection:"column",gap:"20px"},ja={display:"flex",justifyContent:"space-between",alignItems:"center"},ya={padding:"8px 16px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},ka={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"8px"},wa={display:"flex",flexDirection:"column",gap:"8px"},Na={padding:"8px 12px",borderRadius:"6px",border:"1px solid #ddd",fontSize:"14px"},Sa={color:"#6c757d",fontSize:"13px"},_a={padding:"12px 24px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"bold",cursor:"pointer"},Ca={textAlign:"center",padding:"60px 20px",color:"#6c757d"},za={border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden"},Ta={display:"grid",gridTemplateColumns:"80px 2fr 1fr 1fr 100px 2fr",backgroundColor:"#f8f9fa",padding:"12px",fontWeight:"bold",borderBottom:"1px solid #ddd"},Aa={display:"grid",gridTemplateColumns:"80px 2fr 1fr 1fr 100px 2fr",padding:"12px",borderBottom:"1px solid #eee",alignItems:"center"},Ea={display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},Da={fontSize:"18px",fontWeight:"bold",color:"#8B0000"},Ba={backgroundColor:"#ffd700",color:"#000",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"bold"},Ra={display:"flex",flexDirection:"column"},Fa={display:"flex",flexDirection:"column",alignItems:"center"},La={fontSize:"16px",fontWeight:"bold",color:"#007bff"},Pa={display:"flex",flexDirection:"column",alignItems:"center",fontSize:"14px"},Oa={textAlign:"center",fontSize:"16px",fontWeight:"bold",color:"#28a745"},Ia={fontSize:"12px",color:"#6c757d"},$a={color:"#6c757d",fontStyle:"italic",fontSize:"13px"},Wa={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px"},Ma={width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #8B0000",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"20px"},Ka=e=>{let{turnier:t,onClose:n}=e;const[r,a]=(0,s.useState)([]),[i,l]=(0,s.useState)(null),[o,c]=(0,s.useState)([]),[d,u]=(0,s.useState)([]),[h,m]=(0,s.useState)(!0),[p,f]=(0,s.useState)(!1),[g,x]=(0,s.useState)("combined"),v={elo:{name:"ELO-Rating",description:"Basierend auf aktuellen ELO-Ratings"},tournament_wins:{name:"Turniersiege",description:"Basierend auf gewonnenen Turnieren"},combined:{name:"Kombiniert",description:"ELO + Turniersiege (empfohlen)"},manual:{name:"Manuell",description:"Manuelle Setzung durch Admin"},random:{name:"Zuf\xe4llig",description:"Zuf\xe4llige Setzung f\xfcr Testzwecke"}};(0,s.useEffect)((()=>{b(),j()}),[t.turnier_id]),(0,s.useEffect)((()=>{i&&y()}),[i]);const b=async()=>{try{const e=await fetch(`/api/pairing/tournaments/${t.turnier_id}/weight-assignments`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),n=await e.json();if(n.success){const e={};n.data.forEach((t=>{const n=t.gewichtsklasse_id;e[n]||(e[n]={...t,participants:[]}),e[n].participants.push(t)})),a(Object.values(e))}}catch(e){console.error("Fehler beim Laden der Gewichtsklassen:",e)}finally{m(!1)}},j=async()=>{try{const e=await fetch("/api/pairing/elo-ratings?limit=100"),t=await e.json();t.success&&u(t.data)}catch(e){console.error("Fehler beim Laden der ELO-Ratings:",e)}},y=async()=>{if(i)try{const e=await fetch(`/api/pairing/tournaments/${t.turnier_id}/weight-classes/${i.gewichtsklasse_id}/seeds`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),n=await e.json();n.success&&c(n.data)}catch(e){console.error("Fehler beim Laden der Seeds:",e)}},k=async()=>{if(i){f(!0);try{const e=await fetch(`/api/pairing/tournaments/${t.turnier_id}/weight-classes/${i.gewichtsklasse_id}/auto-seed`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({seeding_method:g})}),n=await e.json();n.success?(alert(`\u2705 Automatisches Seeding erfolgreich!\n${n.seeds.length} Teilnehmer geseedet.`),y()):alert(`\u274c Fehler beim Seeding: ${n.message}`)}catch(e){console.error("Fehler beim automatischen Seeding:",e),alert("\u274c Fehler bei der Verbindung zum Server.")}finally{f(!1)}}},w=()=>(0,we.jsxs)("div",{style:oa,children:[(0,we.jsx)("h3",{children:"Gewichtsklasse f\xfcr Seeding ausw\xe4hlen"}),(0,we.jsx)("div",{style:ca,children:r.map((e=>(0,we.jsxs)("div",{onClick:()=>l(e),style:{...da,...(null===i||void 0===i?void 0:i.gewichtsklasse_id)===e.gewichtsklasse_id?ua:{}},children:[(0,we.jsxs)("div",{style:ha,children:[(0,we.jsx)("h4",{children:e.division_code}),(0,we.jsxs)("span",{style:ma,children:[e.participants.length," Teilnehmer"]})]}),(0,we.jsxs)("div",{style:pa,children:[(0,we.jsx)("div",{children:e.klassen_name}),(0,we.jsxs)("div",{style:fa,children:[e.min_gewicht||"Min"," - ",e.max_gewicht||"Max"," kg"]})]}),(0,we.jsxs)("div",{style:ga,children:[e.participants.slice(0,3).map((e=>(0,we.jsxs)("span",{style:xa,children:[e.vorname," ",e.nachname]},e.wettkaempfer_id))),e.participants.length>3&&(0,we.jsxs)("span",{style:va,children:["+",e.participants.length-3]})]})]},e.gewichtsklasse_id)))})]}),N=()=>(0,we.jsxs)("div",{style:ba,children:[(0,we.jsxs)("div",{style:ja,children:[(0,we.jsxs)("div",{children:[(0,we.jsxs)("h3",{children:["Seeding: ",i.division_code]}),(0,we.jsx)("p",{children:i.klassen_name})]}),(0,we.jsx)("button",{onClick:()=>l(null),style:ya,children:"\u2190 Zur\xfcck"})]}),(0,we.jsxs)("div",{style:ka,children:[(0,we.jsxs)("div",{style:wa,children:[(0,we.jsx)("label",{children:"Seeding-Methode:"}),(0,we.jsx)("select",{value:g,onChange:e=>x(e.target.value),style:Na,children:Object.entries(v).map((e=>{let[t,n]=e;return(0,we.jsx)("option",{value:t,children:n.name},t)}))}),(0,we.jsx)("small",{style:Sa,children:v[g].description})]}),(0,we.jsx)("button",{onClick:k,disabled:p,style:_a,children:p?"\u23f3 Wird geseedet...":"\ud83c\udfaf Automatisches Seeding"})]}),o.length>0?(0,we.jsx)(S,{}):(0,we.jsxs)("div",{style:Ca,children:[(0,we.jsx)("p",{children:"\ud83c\udf31 Noch keine Seeds vorhanden."}),(0,we.jsx)("p",{children:"Verwende das automatische Seeding um die Teilnehmer zu setzen."})]})]}),S=()=>(0,we.jsxs)("div",{style:za,children:[(0,we.jsxs)("div",{style:Ta,children:[(0,we.jsx)("div",{children:"Seed"}),(0,we.jsx)("div",{children:"Teilnehmer"}),(0,we.jsx)("div",{children:"ELO-Rating"}),(0,we.jsx)("div",{children:"Bilanz"}),(0,we.jsx)("div",{children:"Score"}),(0,we.jsx)("div",{children:"Grund"})]}),o.map((e=>{const t=d.find((t=>t.wettkaempfer_id===e.wettkaempfer_id));return(0,we.jsxs)("div",{style:Aa,children:[(0,we.jsxs)("div",{style:Ea,children:[(0,we.jsxs)("div",{style:Da,children:["#",e.seed_position]}),e.seed_position<=4&&(0,we.jsx)("div",{style:Ba,children:"TOP"})]}),(0,we.jsxs)("div",{style:Ra,children:[(0,we.jsxs)("strong",{children:[e.vorname," ",e.nachname]}),(0,we.jsx)("small",{children:e.verein_name})]}),(0,we.jsx)("div",{style:Fa,children:t?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsx)("div",{style:La,children:Math.round(t.current_rating)}),(0,we.jsx)("small",{children:t.is_provisional?"Provisional":"Etabliert"})]}):(0,we.jsx)("span",{style:$a,children:"Kein Rating"})}),(0,we.jsx)("div",{style:Pa,children:t?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("div",{children:[t.wins,"W - ",t.losses,"L"]}),(0,we.jsxs)("small",{children:[t.games_played," K\xe4mpfe"]})]}):(0,we.jsx)("span",{style:$a,children:"Keine Daten"})}),(0,we.jsx)("div",{style:Oa,children:Math.round(e.seed_score)}),(0,we.jsx)("div",{style:Ia,children:e.seed_reason})]},e.seed_id)}))]});return h?(0,we.jsx)("div",{style:ra,children:(0,we.jsx)("div",{style:aa,children:(0,we.jsxs)("div",{style:Wa,children:[(0,we.jsx)("div",{style:Ma}),(0,we.jsx)("p",{children:"Lade Seeding-Daten..."})]})})}):(0,we.jsx)("div",{style:ra,children:(0,we.jsxs)("div",{style:aa,children:[(0,we.jsxs)("div",{style:ia,children:[(0,we.jsx)("h2",{children:"Seeding-Management"}),(0,we.jsx)("button",{onClick:n,style:sa,children:"\xd7"})]}),(0,we.jsx)("div",{style:la,children:i?(0,we.jsx)(N,{}):(0,we.jsx)(w,{})})]})})},Ua={position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0,0,0,0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},Va={backgroundColor:"white",borderRadius:"12px",width:"95%",maxWidth:"1400px",height:"90%",display:"flex",flexDirection:"column",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},qa={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #eee",backgroundColor:"#f8f9fa",borderRadius:"12px 12px 0 0"},Ga={background:"#dc3545",color:"white",border:"none",borderRadius:"6px",width:"32px",height:"32px",fontSize:"18px",cursor:"pointer"},Ha={display:"flex",borderBottom:"1px solid #eee",backgroundColor:"#f8f9fa"},Ja={padding:"12px 20px",border:"none",backgroundColor:"transparent",cursor:"pointer",fontSize:"14px",transition:"all 0.2s ease"},Za={backgroundColor:"white",borderBottom:"2px solid #8B0000",fontWeight:"bold"},Ya={flex:1,padding:"20px",overflow:"auto"},Qa={display:"flex",flexDirection:"column",gap:"20px"},Xa={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},ei={display:"flex",alignItems:"center",padding:"20px",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e9ecef"},ti=e=>({fontSize:"32px",marginRight:"15px",color:e}),ni={display:"flex",flexDirection:"column"},ri={fontSize:"24px",fontWeight:"bold",color:"#2c3e50"},ai={fontSize:"14px",color:"#6c757d",marginTop:"4px"},ii={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},si={padding:"20px",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e9ecef"},li={display:"flex",flexDirection:"column",gap:"10px",marginTop:"15px"},oi=(e,t,n)=>({display:"flex",alignItems:"center",padding:"8px",backgroundColor:"male"===e?"#007bff":"#e83e8c",color:"white",borderRadius:"4px",width:t/n*100+"%",minWidth:"120px",fontSize:"14px",fontWeight:"bold"}),ci={display:"flex",flexDirection:"column",gap:"8px",marginTop:"15px"},di={display:"flex",alignItems:"center",gap:"10px"},ui={minWidth:"100px",fontSize:"12px",color:"#6c757d"},hi=(e,t,n)=>({backgroundColor:e,color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",width:`${Math.max(t/n*200,30)}px`,textAlign:"center"}),mi={backgroundColor:"white",borderRadius:"8px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e9ecef"},pi={display:"flex",flexDirection:"column",gap:"8px",marginTop:"15px"},fi={display:"grid",gridTemplateColumns:"2fr 1fr 80px",alignItems:"center",padding:"8px",backgroundColor:"#f8f9fa",borderRadius:"4px"},gi={fontWeight:"bold"},xi={textAlign:"center"},vi={textAlign:"center",fontSize:"12px",color:"#6c757d"},bi={display:"flex",flexDirection:"column",marginTop:"15px"},ji={display:"grid",gridTemplateColumns:"60px 2fr 1fr 100px 80px 100px",padding:"8px",backgroundColor:"#f8f9fa",fontWeight:"bold",borderRadius:"4px 4px 0 0",borderBottom:"1px solid #ddd"},yi={display:"grid",gridTemplateColumns:"60px 2fr 1fr 100px 80px 100px",padding:"8px",borderBottom:"1px solid #eee",alignItems:"center"},ki={fontWeight:"bold",color:"#8B0000"},wi={fontWeight:"bold"},Ni={textAlign:"center",fontWeight:"bold",color:"#007bff"},Si={fontSize:"10px",color:"#ffc107",marginLeft:"4px"},_i={textAlign:"center",fontSize:"12px",fontWeight:"bold"},Ci={textAlign:"center",fontSize:"12px"},zi={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px"},Ti={width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #8B0000",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"20px"},Ai=e=>{let{turnier:t,onClose:n}=e;const[r,a]=(0,s.useState)(null),[i,l]=(0,s.useState)(!0),[o,c]=(0,s.useState)("overview"),[d,u]=(0,s.useState)("all");(0,s.useEffect)((()=>{h()}),[t.turnier_id,d]);const h=async()=>{l(!0);try{const[e,n,r,i]=await Promise.all([fetch("/api/pairing/statistics/overview",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>e.json())),fetch(`/api/anmeldungen/turnier/${t.turnier_id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>e.json())),fetch("/api/pairing/elo-ratings?limit=100").then((e=>e.json())),fetch(`/api/pairing/tournaments/${t.turnier_id}/weight-assignments`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>e.json()))]),s=m({pairingStats:e.success?e.data:{},participants:n.success?n.data:[],eloRatings:r.success?r.data:[],weightAssignments:i.success?i.data:[]});a(s)}catch(e){console.error("Fehler beim Laden der Analytics-Daten:",e)}finally{l(!1)}},m=e=>{const{pairingStats:t,participants:n,eloRatings:r,weightAssignments:a}=e,i={totalParticipants:n.length,totalWeightClasses:new Set(a.map((e=>e.gewichtsklasse_id))).size,averageAge:n.length>0?Math.round(n.reduce(((e,t)=>e+(t.alter||25)),0)/n.length):0,genderDistribution:{male:n.filter((e=>"male"===e.geschlecht)).length,female:n.filter((e=>"female"===e.geschlecht)).length}},s={};n.forEach((e=>{const t=e.verein_name||"Unbekannt";s[t]||(s[t]={count:0,participants:[]}),s[t].count++,s[t].participants.push(e)}));const l={};n.forEach((e=>{if(e.gewicht){const t=p(e.gewicht);l[t]=(l[t]||0)+1}}));const o={averageRating:r.length>0?Math.round(r.reduce(((e,t)=>e+t.current_rating),0)/r.length):0,topRated:r.slice(0,5),bysport:{}};r.forEach((e=>{o.bySort||(o.bySport={}),o.bySport[e.sport_art]||(o.bySport[e.sport_art]=[]),o.bySport[e.sport_art].push(e)}));const c={highConfidence:a.filter((e=>e.confidence_score>=.9)).length,mediumConfidence:a.filter((e=>e.confidence_score>=.7&&e.confidence_score<.9)).length,lowConfidence:a.filter((e=>e.confidence_score<.7)).length,averageConfidence:a.length>0?a.reduce(((e,t)=>e+t.confidence_score),0)/a.length:0};return{overview:i,clubStats:s,weightDistribution:l,eloStats:o,assignmentQuality:c,pairingSystemStats:t,rawData:{participants:n,eloRatings:r,weightAssignments:a}}},p=e=>e<=60?"\u226460kg":e<=70?"61-70kg":e<=80?"71-80kg":e<=90?"81-90kg":">90kg",f=()=>{if(!r)return null;const{overview:e,assignmentQuality:t}=r;return(0,we.jsxs)("div",{style:Qa,children:[(0,we.jsxs)("div",{style:Xa,children:[(0,we.jsx)(v,{title:"Teilnehmer Gesamt",value:e.totalParticipants,icon:"\ud83d\udc65",color:"#007bff"}),(0,we.jsx)(v,{title:"Gewichtsklassen",value:e.totalWeightClasses,icon:"\u2696\ufe0f",color:"#28a745"}),(0,we.jsx)(v,{title:"Durchschnittsalter",value:`${e.averageAge} Jahre`,icon:"\ud83d\udcc5",color:"#ffc107"}),(0,we.jsx)(v,{title:"Zuordnungsqualit\xe4t",value:`${Math.round(100*t.averageConfidence)}%`,icon:"\ud83c\udfaf",color:"#17a2b8"})]}),(0,we.jsxs)("div",{style:ii,children:[(0,we.jsx)(b,{data:e.genderDistribution}),(0,we.jsx)(j,{data:t})]})]})},g=()=>{if(!r)return null;const{clubStats:e,weightDistribution:t}=r;return(0,we.jsxs)("div",{style:Qa,children:[(0,we.jsxs)("div",{style:ii,children:[(0,we.jsx)(y,{data:e}),(0,we.jsx)(k,{data:t})]}),(0,we.jsxs)("div",{style:mi,children:[(0,we.jsx)("h3",{children:"Top Vereine nach Teilnehmerzahl"}),(0,we.jsx)("div",{style:pi,children:Object.entries(e).sort(((e,t)=>{let[,n]=e,[,r]=t;return r.count-n.count})).slice(0,10).map((e=>{let[t,n]=e;return(0,we.jsxs)("div",{style:fi,children:[(0,we.jsx)("div",{style:gi,children:t}),(0,we.jsxs)("div",{style:xi,children:[n.count," Teilnehmer"]}),(0,we.jsxs)("div",{style:vi,children:[Math.round(n.count/r.overview.totalParticipants*100),"%"]})]},t)}))})]})]})},x=()=>{if(!r)return null;const{eloStats:e}=r;return(0,we.jsxs)("div",{style:Qa,children:[(0,we.jsxs)("div",{style:Xa,children:[(0,we.jsx)(v,{title:"Durchschnitts-ELO",value:e.averageRating,icon:"\ud83d\udcca",color:"#007bff"}),(0,we.jsx)(v,{title:"Bewertete K\xe4mpfer",value:e.topRated.length,icon:"\ud83c\udfc6",color:"#28a745"})]}),(0,we.jsxs)("div",{style:mi,children:[(0,we.jsx)("h3",{children:"Top ELO-Ratings"}),(0,we.jsxs)("div",{style:bi,children:[(0,we.jsxs)("div",{style:ji,children:[(0,we.jsx)("div",{children:"Rang"}),(0,we.jsx)("div",{children:"Name"}),(0,we.jsx)("div",{children:"Verein"}),(0,we.jsx)("div",{children:"Rating"}),(0,we.jsx)("div",{children:"Sport"}),(0,we.jsx)("div",{children:"Bilanz"})]}),e.topRated.map(((e,t)=>(0,we.jsxs)("div",{style:yi,children:[(0,we.jsxs)("div",{style:ki,children:["#",t+1]}),(0,we.jsxs)("div",{style:wi,children:[e.vorname," ",e.nachname]}),(0,we.jsx)("div",{children:e.verein_name}),(0,we.jsxs)("div",{style:Ni,children:[Math.round(e.current_rating),e.is_provisional&&(0,we.jsx)("span",{style:Si,children:"P"})]}),(0,we.jsx)("div",{style:_i,children:e.sport_art.toUpperCase()}),(0,we.jsxs)("div",{style:Ci,children:[e.wins,"W-",e.losses,"L"]})]},e.rating_id)))]})]})]})},v=e=>{let{title:t,value:n,icon:r,color:a}=e;return(0,we.jsxs)("div",{style:ei,children:[(0,we.jsx)("div",{style:ti(a),children:r}),(0,we.jsxs)("div",{style:ni,children:[(0,we.jsx)("div",{style:ri,children:n}),(0,we.jsx)("div",{style:ai,children:t})]})]})},b=e=>{let{data:t}=e;return(0,we.jsxs)("div",{style:si,children:[(0,we.jsx)("h3",{children:"Geschlechterverteilung"}),(0,we.jsxs)("div",{style:li,children:[(0,we.jsx)("div",{style:oi("male",t.male,t.male+t.female),children:(0,we.jsxs)("span",{children:["Herren: ",t.male]})}),(0,we.jsx)("div",{style:oi("female",t.female,t.male+t.female),children:(0,we.jsxs)("span",{children:["Damen: ",t.female]})})]})]})},j=e=>{let{data:t}=e;return(0,we.jsxs)("div",{style:si,children:[(0,we.jsx)("h3",{children:"Zuordnungsqualit\xe4t"}),(0,we.jsxs)("div",{style:ci,children:[(0,we.jsxs)("div",{style:di,children:[(0,we.jsx)("div",{style:ui,children:"Hoch (\u226590%)"}),(0,we.jsx)("div",{style:hi("#28a745",t.highConfidence,t.highConfidence+t.mediumConfidence+t.lowConfidence),children:t.highConfidence})]}),(0,we.jsxs)("div",{style:di,children:[(0,we.jsx)("div",{style:ui,children:"Mittel (70-89%)"}),(0,we.jsx)("div",{style:hi("#ffc107",t.mediumConfidence,t.highConfidence+t.mediumConfidence+t.lowConfidence),children:t.mediumConfidence})]}),(0,we.jsxs)("div",{style:di,children:[(0,we.jsxs)("div",{style:ui,children:["Niedrig (","<70%",")"]}),(0,we.jsx)("div",{style:hi("#dc3545",t.lowConfidence,t.highConfidence+t.mediumConfidence+t.lowConfidence),children:t.lowConfidence})]})]})]})},y=e=>{let{data:t}=e;return(0,we.jsxs)("div",{style:si,children:[(0,we.jsx)("h3",{children:"Top 5 Vereine"}),(0,we.jsx)("div",{style:ci,children:Object.entries(t).sort(((e,t)=>{let[,n]=e,[,r]=t;return r.count-n.count})).slice(0,5).map((e=>{let[n,r]=e;return(0,we.jsxs)("div",{style:di,children:[(0,we.jsxs)("div",{style:ui,children:[n.substring(0,15),"..."]}),(0,we.jsx)("div",{style:hi("#007bff",r.count,Math.max(...Object.values(t).map((e=>e.count)))),children:r.count})]},n)}))})]})},k=e=>{let{data:t}=e;return(0,we.jsxs)("div",{style:si,children:[(0,we.jsx)("h3",{children:"Gewichtsverteilung"}),(0,we.jsx)("div",{style:ci,children:Object.entries(t).map((e=>{let[n,r]=e;return(0,we.jsxs)("div",{style:di,children:[(0,we.jsx)("div",{style:ui,children:n}),(0,we.jsx)("div",{style:hi("#17a2b8",r,Math.max(...Object.values(t))),children:r})]},n)}))})]})};return i?(0,we.jsx)("div",{style:Ua,children:(0,we.jsx)("div",{style:Va,children:(0,we.jsxs)("div",{style:zi,children:[(0,we.jsx)("div",{style:Ti}),(0,we.jsx)("p",{children:"Lade Analytics-Daten..."})]})})}):(0,we.jsx)("div",{style:Ua,children:(0,we.jsxs)("div",{style:Va,children:[(0,we.jsxs)("div",{style:qa,children:[(0,we.jsxs)("h2",{children:["Analytics Dashboard - ",t.name]}),(0,we.jsx)("button",{onClick:n,style:Ga,children:"\xd7"})]}),(0,we.jsx)("div",{style:Ha,children:Object.entries({overview:{name:"\xdcbersicht",icon:"\ud83d\udcca"},participants:{name:"Teilnehmer",icon:"\ud83d\udc65"},performance:{name:"Performance",icon:"\ud83c\udfc6"},weights:{name:"Gewichtsklassen",icon:"\u2696\ufe0f"},clubs:{name:"Vereine",icon:"\ud83c\udfe2"},elo:{name:"ELO-Ratings",icon:"\ud83d\udcc8"}}).map((e=>{let[t,n]=e;return(0,we.jsxs)("button",{onClick:()=>c(t),style:{...Ja,...o===t?Za:{}},children:[n.icon," ",n.name]},t)}))}),(0,we.jsxs)("div",{style:Ya,children:["overview"===o&&(0,we.jsx)(f,{}),"participants"===o&&(0,we.jsx)(g,{}),"elo"===o&&(0,we.jsx)(x,{})]})]})})},Ei=e=>{let{onSportSelected:t}=e;const[n,r]=(0,s.useState)([]),[a,i]=(0,s.useState)(null),[l,o]=(0,s.useState)("overview"),[c,d]=(0,s.useState)([]),[u,h]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[f,g]=(0,s.useState)([]),[x,v]=(0,s.useState)(!1),[b,j]=(0,s.useState)(""),[y,k]=(0,s.useState)({gender:"",ageCategory:"",techniqueCategory:""});(0,s.useEffect)((()=>{w()}),[]),(0,s.useEffect)((()=>{a&&N()}),[a,l,y]);const w=async()=>{try{v(!0);const e=await fetch("/api/sports/sports");if(e.ok){const t=await e.json();r(t)}}catch(b){console.error("Fehler beim Laden der Sportarten:",b),j("Sportarten konnten nicht geladen werden")}finally{v(!1)}},N=async()=>{if(a)try{if(v(!0),"weight-classes"===l){const e=new URLSearchParams;y.gender&&e.append("gender",y.gender),y.ageCategory&&e.append("ageCategory",y.ageCategory);const t=await fetch(`/api/sports/sports/${a.sport_id}/weight-classes?${e}`);if(t.ok){const e=await t.json();d(e)}}if("techniques"===l){const e=new URLSearchParams;y.techniqueCategory&&e.append("category",y.techniqueCategory);const t=await fetch(`/api/sports/sports/${a.sport_id}/techniques?${e}`);if(t.ok){const e=await t.json();h(e)}}if("rulesets"===l){const e=await fetch(`/api/sports/sports/${a.sport_id}/rulesets`);if(e.ok){const t=await e.json();p(t)}}if("athletes"===l){const e=await fetch(`/api/sports/sports/${a.sport_id}/athletes`);if(e.ok){const t=await e.json();g(t)}}}catch(b){console.error("Fehler beim Laden der Sport-Details:",b),j("Sport-Details konnten nicht geladen werden")}finally{v(!1)}},S=e=>({striking:"\ud83d\udc4a",grappling:"\ud83e\udd3c",mixed:"\ud83e\udd4b",traditional:"\ud83c\udfdb\ufe0f",weapons:"\u2694\ufe0f"}[e]||"\ud83e\udd4b"),_=e=>({point_based:"Punkt-basiert",round_based:"Runden-basiert",time_based:"Zeit-basiert",kata_form:"Kata/Form",ippon_system:"Ippon-System"}[e]||e);return a?(0,we.jsxs)("div",{className:"sports-manager",children:[(0,we.jsxs)("div",{className:"sports-header",children:[(0,we.jsx)("button",{className:"back-button",onClick:()=>i(null),children:"\u2190 Zur\xfcck zu Sportarten"}),(0,we.jsxs)("div",{className:"sport-title",children:[(0,we.jsx)("span",{className:"sport-icon",children:S(a.sport_category)}),(0,we.jsx)("h2",{children:a.sport_name}),(0,we.jsx)("span",{className:"sport-code",children:a.sport_code})]})]}),(0,we.jsxs)("div",{className:"tab-container",children:[(0,we.jsx)("button",{className:"overview"===l?"tab active":"tab",onClick:()=>o("overview"),children:"\xdcbersicht"}),(0,we.jsx)("button",{className:"weight-classes"===l?"tab active":"tab",onClick:()=>o("weight-classes"),children:"Gewichtsklassen"}),(0,we.jsx)("button",{className:"techniques"===l?"tab active":"tab",onClick:()=>o("techniques"),children:"Techniken"}),(0,we.jsx)("button",{className:"rulesets"===l?"tab active":"tab",onClick:()=>o("rulesets"),children:"Regelsets"}),(0,we.jsx)("button",{className:"athletes"===l?"tab active":"tab",onClick:()=>o("athletes"),children:"Athleten"})]}),(0,we.jsxs)("div",{className:"tab-content",children:[b&&(0,we.jsxs)("div",{className:"alert alert-danger",children:[b,(0,we.jsx)("button",{onClick:()=>j(""),children:"\xd7"})]}),x&&(0,we.jsx)("div",{className:"loading",children:"Lade Daten..."}),"overview"===l&&(0,we.jsx)("div",{className:"sport-overview",children:(0,we.jsxs)("div",{className:"info-grid",children:[(0,we.jsxs)("div",{className:"info-card",children:[(0,we.jsx)("h4",{children:"Grundinformationen"}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Name:"})," ",a.sport_name]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Code:"})," ",a.sport_code]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Verband:"})," ",a.federation||"Nicht angegeben"]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Kategorie:"})," ",a.sport_category]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Beschreibung:"})," ",a.description||"Keine Beschreibung verf\xfcgbar"]})]}),(0,we.jsxs)("div",{className:"info-card",children:[(0,we.jsx)("h4",{children:"Kampfeinstellungen"}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Kampfdauer:"})," ",a.default_fight_duration_minutes," Minuten"]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Pausenzeit:"})," ",a.default_break_duration_seconds||60," Sekunden"]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Wertungssystem:"})," ",_(a.scoring_system)]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Max. Punkte/Technik:"})," ",a.max_score_per_technique]})]}),a.statistics&&(0,we.jsxs)("div",{className:"info-card",children:[(0,we.jsx)("h4",{children:"Statistiken"}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Gewichtsklassen:"})," ",a.statistics.weight_classes]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Techniken:"})," ",a.statistics.techniques]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Regelsets:"})," ",a.statistics.rulesets]})]})]})}),"weight-classes"===l&&(0,we.jsxs)("div",{className:"weight-classes-tab",children:[(0,we.jsxs)("div",{className:"filters",children:[(0,we.jsxs)("select",{value:y.gender,onChange:e=>k({...y,gender:e.target.value}),children:[(0,we.jsx)("option",{value:"",children:"Alle Geschlechter"}),(0,we.jsx)("option",{value:"male",children:"Herren"}),(0,we.jsx)("option",{value:"female",children:"Damen"}),(0,we.jsx)("option",{value:"mixed",children:"Mixed"})]}),(0,we.jsxs)("select",{value:y.ageCategory,onChange:e=>k({...y,ageCategory:e.target.value}),children:[(0,we.jsx)("option",{value:"",children:"Alle Altersgruppen"}),(0,we.jsx)("option",{value:"children",children:"Kinder"}),(0,we.jsx)("option",{value:"cadets",children:"Kadetten"}),(0,we.jsx)("option",{value:"juniors",children:"Junioren"}),(0,we.jsx)("option",{value:"seniors",children:"Senioren"}),(0,we.jsx)("option",{value:"veterans",children:"Veteranen"})]})]}),(0,we.jsx)("div",{className:"weight-classes-grid",children:c.map((e=>(0,we.jsxs)("div",{className:"weight-class-card",children:[(0,we.jsx)("h5",{children:e.class_name}),(0,we.jsxs)("div",{className:"weight-range",children:[e.min_weight_kg,"kg - ",e.max_weight_kg,"kg"]}),(0,we.jsxs)("div",{className:"class-details",children:[(0,we.jsx)("span",{className:"gender",children:"male"===e.gender?"Herren":"female"===e.gender?"Damen":"Mixed"}),(0,we.jsx)("span",{className:"age-category",children:e.age_category})]}),e.min_age&&e.max_age&&(0,we.jsxs)("div",{className:"age-range",children:["Alter: ",e.min_age,"-",e.max_age," Jahre"]})]},e.weight_class_id)))})]}),"techniques"===l&&(0,we.jsxs)("div",{className:"techniques-tab",children:[(0,we.jsx)("div",{className:"filters",children:(0,we.jsxs)("select",{value:y.techniqueCategory,onChange:e=>k({...y,techniqueCategory:e.target.value}),children:[(0,we.jsx)("option",{value:"",children:"Alle Kategorien"}),(0,we.jsx)("option",{value:"basic",children:"Grundtechniken"}),(0,we.jsx)("option",{value:"advanced",children:"Fortgeschritten"}),(0,we.jsx)("option",{value:"special",children:"Spezial"}),(0,we.jsx)("option",{value:"penalty",children:"Strafen"})]})}),(0,we.jsx)("div",{className:"techniques-list",children:u.map((e=>{return(0,we.jsxs)("div",{className:"technique-card",children:[(0,we.jsxs)("div",{className:"technique-header",children:[(0,we.jsx)("h5",{children:e.technique_name}),(0,we.jsx)("div",{className:"points-badge",style:{backgroundColor:(t=e.points,t<=0?"#dc3545":1===t?"#28a745":2===t?"#ffc107":t>=3?"#007bff":"#6c757d")},children:e.points>0?`+${e.points}`:e.points})]}),(0,we.jsxs)("div",{className:"technique-details",children:[(0,we.jsx)("span",{className:"category",children:e.category}),(0,we.jsx)("span",{className:"code",children:e.technique_code})]}),e.description&&(0,we.jsx)("p",{className:"description",children:e.description}),e.execution_requirements&&(0,we.jsxs)("div",{className:"requirements",children:[(0,we.jsx)("strong",{children:"Ausf\xfchrung:"})," ",e.execution_requirements]})]},e.technique_id);var t}))})]}),"rulesets"===l&&(0,we.jsx)("div",{className:"rulesets-tab",children:(0,we.jsx)("div",{className:"rulesets-list",children:m.map((e=>(0,we.jsxs)("div",{className:"ruleset-card",children:[(0,we.jsxs)("div",{className:"ruleset-header",children:[(0,we.jsx)("h5",{children:e.ruleset_name}),(0,we.jsxs)("div",{className:"ruleset-meta",children:[(0,we.jsxs)("span",{className:"version",children:["v",e.version]}),e.is_default&&(0,we.jsx)("span",{className:"default-badge",children:"Standard"})]})]}),(0,we.jsxs)("div",{className:"ruleset-details",children:[(0,we.jsxs)("div",{className:"detail-item",children:[(0,we.jsx)("strong",{children:"Kampfdauer:"})," ",e.fight_duration_minutes," Minuten"]}),(0,we.jsxs)("div",{className:"detail-item",children:[(0,we.jsx)("strong",{children:"Runden:"})," ",e.number_of_rounds||1]}),e.break_between_rounds_seconds&&(0,we.jsxs)("div",{className:"detail-item",children:[(0,we.jsx)("strong",{children:"Rundenpause:"})," ",e.break_between_rounds_seconds," Sekunden"]}),e.overtime_duration_minutes&&(0,we.jsxs)("div",{className:"detail-item",children:[(0,we.jsx)("strong",{children:"Verl\xe4ngerung:"})," ",e.overtime_duration_minutes," Minuten"]}),e.effective_date&&(0,we.jsxs)("div",{className:"detail-item",children:[(0,we.jsx)("strong",{children:"G\xfcltig ab:"})," ",new Date(e.effective_date).toLocaleDateString("de-DE")]})]}),e.winning_conditions&&(0,we.jsxs)("div",{className:"conditions",children:[(0,we.jsx)("h6",{children:"Gewinnbedingungen:"}),(0,we.jsx)("pre",{children:JSON.stringify(JSON.parse(e.winning_conditions),null,2)})]})]},e.ruleset_id)))})}),"athletes"===l&&(0,we.jsx)("div",{className:"athletes-tab",children:(0,we.jsx)("div",{className:"athletes-list",children:f.map((e=>(0,we.jsxs)("div",{className:"athlete-card",children:[(0,we.jsxs)("div",{className:"athlete-header",children:[(0,we.jsxs)("h5",{children:[e.vorname," ",e.nachname]}),e.belt_rank&&(0,we.jsx)("span",{className:"belt-rank",children:e.belt_rank})]}),(0,we.jsxs)("div",{className:"athlete-details",children:[(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Verein:"})," ",e.verein_name||"Kein Verein"]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Geburtsdatum:"})," ",new Date(e.geburtsdatum).toLocaleDateString("de-DE")]}),e.gewicht&&(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Gewicht:"})," ",e.gewicht,"kg"]}),e.preferred_weight_class&&(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Bevorzugte Klasse:"})," ",e.preferred_weight_class]}),e.years_experience&&(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Erfahrung:"})," ",e.years_experience," Jahre"]}),e.coach_name&&(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Trainer:"})," ",e.coach_name]}),e.dojo_club&&(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Dojo/Club:"})," ",e.dojo_club]})]}),(0,we.jsxs)("div",{className:"medical-info",children:[e.medical_clearance_date&&(0,we.jsxs)("span",{className:"medical-clearance",children:["\xc4rztl. Freigabe: ",new Date(e.medical_clearance_date).toLocaleDateString("de-DE")]}),e.insurance_valid_until&&(0,we.jsxs)("span",{className:"insurance",children:["Versicherung: bis ",new Date(e.insurance_valid_until).toLocaleDateString("de-DE")]})]})]},e.profile_id)))})})]})]}):(0,we.jsxs)("div",{className:"sports-manager",children:[(0,we.jsxs)("div",{className:"sports-header",children:[(0,we.jsx)("h2",{children:"Multi-Sport Management"}),(0,we.jsx)("p",{children:"Verwalten Sie verschiedene Kampfsportarten und deren spezifische Eigenschaften"})]}),b&&(0,we.jsxs)("div",{className:"alert alert-danger",children:[b,(0,we.jsx)("button",{onClick:()=>j(""),children:"\xd7"})]}),x&&(0,we.jsx)("div",{className:"loading",children:"Lade Sportarten..."}),(0,we.jsx)("div",{className:"sports-grid",children:n.map((e=>(0,we.jsxs)("div",{className:"sport-card",onClick:()=>(e=>{i(e),o("overview"),t&&t(e)})(e),children:[(0,we.jsx)("div",{className:"sport-icon",children:S(e.sport_category)}),(0,we.jsx)("h3",{children:e.sport_name}),(0,we.jsx)("p",{className:"sport-code",children:e.sport_code}),(0,we.jsxs)("div",{className:"sport-meta",children:[(0,we.jsx)("span",{className:"category",children:e.sport_category}),(0,we.jsx)("span",{className:"scoring",children:_(e.scoring_system)})]}),e.federation&&(0,we.jsx)("p",{className:"federation",children:e.federation}),(0,we.jsxs)("div",{className:"sport-stats",children:[(0,we.jsxs)("span",{className:"duration",children:[e.default_fight_duration_minutes,"min"]}),(0,we.jsxs)("span",{className:"max-points",children:["Max: ",e.max_score_per_technique,"p"]})]})]},e.sport_id)))})]})},Di=e=>{let{onTournamentCreated:t}=e;const[n,r]=(0,s.useState)([]),[a,i]=(0,s.useState)([]),[l,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(""),[m,p]=(0,s.useState)({tournament_name:"",tournament_type:"single_sport",primary_sport_id:"",organizer:"",venue_name:"",venue_address:"",start_date:"",end_date:"",registration_deadline:"",max_participants:100,entry_fee_amount:0,entry_fee_currency:"EUR",sports_included:[]}),f=[{value:"single_sport",label:"Einzelsport-Turnier"},{value:"multi_sport",label:"Multi-Sport-Turnier"},{value:"open_tournament",label:"Offenes Turnier"},{value:"championship",label:"Meisterschaft"}],g={planning:{label:"Planung",color:"#6c757d"},registration_open:{label:"Anmeldung offen",color:"#28a745"},registration_closed:{label:"Anmeldung geschlossen",color:"#ffc107"},in_progress:{label:"L\xe4uft",color:"#007bff"},completed:{label:"Abgeschlossen",color:"#6f42c1"},cancelled:{label:"Abgesagt",color:"#dc3545"}};(0,s.useEffect)((()=>{x(),v()}),[]);const x=async()=>{try{d(!0);const e=await fetch("/api/sports/tournaments");if(e.ok){const t=await e.json();r(t)}}catch(u){console.error("Fehler beim Laden der Turniere:",u),h("Turniere konnten nicht geladen werden")}finally{d(!1)}},v=async()=>{try{const e=await fetch("/api/sports/sports");if(e.ok){const t=await e.json();i(t)}}catch(u){console.error("Fehler beim Laden der Sportarten:",u)}},b=(e,t,n)=>{const r=[...m.sports_included];r[e]={...r[e],[t]:"sport_id"===t||"max_participants"===t?parseInt(n):n},p({...m,sports_included:r})},j=()=>{p({tournament_name:"",tournament_type:"single_sport",primary_sport_id:"",organizer:"",venue_name:"",venue_address:"",start_date:"",end_date:"",registration_deadline:"",max_participants:100,entry_fee_amount:0,entry_fee_currency:"EUR",sports_included:[]})},y=e=>new Date(e).toLocaleDateString("de-DE");return(0,we.jsxs)("div",{className:"multi-sport-tournament-manager",children:[(0,we.jsxs)("div",{className:"manager-header",children:[(0,we.jsx)("h2",{children:"Multi-Sport Turnier-Verwaltung"}),(0,we.jsx)("button",{className:"btn btn-primary",onClick:()=>o(!0),children:"Neues Turnier erstellen"})]}),u&&(0,we.jsxs)("div",{className:"alert alert-danger",children:[u,(0,we.jsx)("button",{onClick:()=>h(""),children:"\xd7"})]}),c&&(0,we.jsx)("div",{className:"loading",children:"Lade Turniere..."}),(0,we.jsx)("div",{className:"tournaments-grid",children:n.map((e=>{var t,n,r;return(0,we.jsxs)("div",{className:"tournament-card",children:[(0,we.jsxs)("div",{className:"tournament-header",children:[(0,we.jsx)("h3",{children:e.tournament_name}),(0,we.jsxs)("div",{className:"tournament-meta",children:[(0,we.jsx)("span",{className:"status-badge",style:{backgroundColor:null===(t=g[e.status])||void 0===t?void 0:t.color},children:null===(n=g[e.status])||void 0===n?void 0:n.label}),(0,we.jsx)("span",{className:"tournament-type",children:null===(r=f.find((t=>t.value===e.tournament_type)))||void 0===r?void 0:r.label})]})]}),(0,we.jsxs)("div",{className:"tournament-info",children:[(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("strong",{children:"Hauptsportart:"})," ",e.primary_sport]}),(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("strong",{children:"Veranstalter:"})," ",e.organizer||"Nicht angegeben"]}),(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("strong",{children:"Ort:"})," ",e.venue_name||"Nicht angegeben"]}),(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("strong",{children:"Datum:"})," ",y(e.start_date)," - ",y(e.end_date)]}),e.entry_fee_amount>0&&(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("strong",{children:"Startgeld:"})," ",e.entry_fee_amount," ",e.entry_fee_currency]})]}),(0,we.jsxs)("div",{className:"tournament-stats",children:[(0,we.jsxs)("div",{className:"stat",children:[(0,we.jsx)("span",{className:"stat-number",children:e.sports_count||0}),(0,we.jsx)("span",{className:"stat-label",children:"Sportarten"})]}),(0,we.jsxs)("div",{className:"stat",children:[(0,we.jsx)("span",{className:"stat-number",children:e.max_participants}),(0,we.jsx)("span",{className:"stat-label",children:"Max. Teilnehmer"})]}),(0,we.jsxs)("div",{className:"stat",children:[(0,we.jsx)("span",{className:"stat-number",children:e.confirmed_registrations||0}),(0,we.jsx)("span",{className:"stat-label",children:"Anmeldungen"})]})]}),(0,we.jsxs)("div",{className:"tournament-actions",children:[(0,we.jsx)("button",{className:"btn btn-outline-primary btn-sm",children:"Details"}),(0,we.jsx)("button",{className:"btn btn-outline-secondary btn-sm",children:"Bearbeiten"})]})]},e.tournament_id)}))}),0===n.length&&!c&&(0,we.jsxs)("div",{className:"empty-state",children:[(0,we.jsx)("h4",{children:"Keine Turniere vorhanden"}),(0,we.jsx)("p",{children:"Erstellen Sie Ihr erstes Multi-Sport-Turnier!"})]}),l&&(0,we.jsx)("div",{className:"modal-overlay",children:(0,we.jsxs)("div",{className:"modal-content large-modal",children:[(0,we.jsxs)("div",{className:"modal-header",children:[(0,we.jsx)("h4",{children:"Neues Multi-Sport-Turnier erstellen"}),(0,we.jsx)("button",{onClick:()=>o(!1),children:"\xd7"})]}),(0,we.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{d(!0);const e=[...m.sports_included];e.find((e=>e.sport_id===parseInt(m.primary_sport_id)))||e.push({sport_id:parseInt(m.primary_sport_id),is_primary:!0,max_participants:m.max_participants,entry_fee:m.entry_fee_amount});const n={...m,primary_sport_id:parseInt(m.primary_sport_id),max_participants:parseInt(m.max_participants),entry_fee_amount:parseFloat(m.entry_fee_amount),sports_included:e},r=await fetch("/api/sports/tournaments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(r.ok){const e=await r.json();o(!1),j(),x(),t&&t(e),alert("Multi-Sport-Turnier erfolgreich erstellt!")}else{const e=await r.json();h(e.message||"Turnier konnte nicht erstellt werden")}}catch(u){console.error("Fehler beim Erstellen des Turniers:",u),h("Fehler beim Erstellen des Turniers")}finally{d(!1)}},children:[(0,we.jsxs)("div",{className:"form-section",children:[(0,we.jsx)("h5",{children:"Grundinformationen"}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Turniername"}),(0,we.jsx)("input",{type:"text",value:m.tournament_name,onChange:e=>p({...m,tournament_name:e.target.value}),required:!0})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Turniertyp"}),(0,we.jsx)("select",{value:m.tournament_type,onChange:e=>p({...m,tournament_type:e.target.value}),children:f.map((e=>(0,we.jsx)("option",{value:e.value,children:e.label},e.value)))})]})]}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Hauptsportart"}),(0,we.jsxs)("select",{value:m.primary_sport_id,onChange:e=>p({...m,primary_sport_id:e.target.value}),required:!0,children:[(0,we.jsx)("option",{value:"",children:"Hauptsportart ausw\xe4hlen"}),a.map((e=>(0,we.jsx)("option",{value:e.sport_id,children:e.sport_name},e.sport_id)))]})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Veranstalter"}),(0,we.jsx)("input",{type:"text",value:m.organizer,onChange:e=>p({...m,organizer:e.target.value})})]})]})]}),(0,we.jsxs)("div",{className:"form-section",children:[(0,we.jsx)("h5",{children:"Veranstaltungsort & Termine"}),(0,we.jsx)("div",{className:"form-row",children:(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Veranstaltungsort"}),(0,we.jsx)("input",{type:"text",value:m.venue_name,onChange:e=>p({...m,venue_name:e.target.value})})]})}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Adresse"}),(0,we.jsx)("textarea",{value:m.venue_address,onChange:e=>p({...m,venue_address:e.target.value}),rows:"2"})]}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Startdatum"}),(0,we.jsx)("input",{type:"date",value:m.start_date,onChange:e=>p({...m,start_date:e.target.value}),required:!0})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Enddatum"}),(0,we.jsx)("input",{type:"date",value:m.end_date,onChange:e=>p({...m,end_date:e.target.value}),required:!0})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Anmeldeschluss"}),(0,we.jsx)("input",{type:"datetime-local",value:m.registration_deadline,onChange:e=>p({...m,registration_deadline:e.target.value})})]})]})]}),(0,we.jsxs)("div",{className:"form-section",children:[(0,we.jsx)("h5",{children:"Teilnahme & Geb\xfchren"}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Max. Teilnehmer"}),(0,we.jsx)("input",{type:"number",min:"1",max:"10000",value:m.max_participants,onChange:e=>p({...m,max_participants:e.target.value})})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Startgeld"}),(0,we.jsx)("input",{type:"number",min:"0",step:"0.01",value:m.entry_fee_amount,onChange:e=>p({...m,entry_fee_amount:e.target.value})})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"W\xe4hrung"}),(0,we.jsxs)("select",{value:m.entry_fee_currency,onChange:e=>p({...m,entry_fee_currency:e.target.value}),children:[(0,we.jsx)("option",{value:"EUR",children:"EUR"}),(0,we.jsx)("option",{value:"USD",children:"USD"}),(0,we.jsx)("option",{value:"CHF",children:"CHF"})]})]})]})]}),"multi_sport"===m.tournament_type&&(0,we.jsxs)("div",{className:"form-section",children:[(0,we.jsxs)("div",{className:"section-header",children:[(0,we.jsx)("h5",{children:"Zus\xe4tzliche Sportarten"}),(0,we.jsx)("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>{p({...m,sports_included:[...m.sports_included,{sport_id:"",is_primary:!1,max_participants:50,entry_fee:0,specific_rules:{}}]})},children:"Sportart hinzuf\xfcgen"})]}),m.sports_included.map(((e,t)=>(0,we.jsx)("div",{className:"sport-item",children:(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Sportart"}),(0,we.jsxs)("select",{value:e.sport_id,onChange:e=>b(t,"sport_id",e.target.value),required:!0,children:[(0,we.jsx)("option",{value:"",children:"Sportart ausw\xe4hlen"}),a.map((e=>(0,we.jsx)("option",{value:e.sport_id,children:e.sport_name},e.sport_id)))]})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Max. Teilnehmer"}),(0,we.jsx)("input",{type:"number",min:"1",value:e.max_participants,onChange:e=>b(t,"max_participants",e.target.value)})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Startgeld"}),(0,we.jsx)("input",{type:"number",min:"0",step:"0.01",value:e.entry_fee,onChange:e=>b(t,"entry_fee",e.target.value)})]}),(0,we.jsx)("div",{className:"form-group",children:(0,we.jsx)("button",{type:"button",className:"btn btn-outline-danger btn-sm remove-sport",onClick:()=>(e=>{const t=m.sports_included.filter(((t,n)=>n!==e));p({...m,sports_included:t})})(t),children:"Entfernen"})})]})},t)))]}),(0,we.jsxs)("div",{className:"modal-actions",children:[(0,we.jsx)("button",{type:"button",onClick:()=>o(!1),children:"Abbrechen"}),(0,we.jsx)("button",{type:"submit",disabled:c,children:c?"Erstelle...":"Turnier erstellen"})]})]})]})})]})},Bi=Object.create(null);Bi.open="0",Bi.close="1",Bi.ping="2",Bi.pong="3",Bi.message="4",Bi.upgrade="5",Bi.noop="6";const Ri=Object.create(null);Object.keys(Bi).forEach((e=>{Ri[Bi[e]]=e}));const Fi={type:"error",data:"parser error"},Li="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Pi="function"===typeof ArrayBuffer,Oi=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Ii=(e,t,n)=>{let{type:r,data:a}=e;return Li&&a instanceof Blob?t?n(a):$i(a,n):Pi&&(a instanceof ArrayBuffer||Oi(a))?t?n(a):$i(new Blob([a]),n):n(Bi[r]+(a||""))},$i=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function Wi(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Mi;const Ki="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ui="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let Qo=0;Qo<64;Qo++)Ui[Ki.charCodeAt(Qo)]=Qo;const Vi="function"===typeof ArrayBuffer,qi=(e,t)=>{if("string"!==typeof e)return{type:"message",data:Hi(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:Gi(e.substring(1),t)};return Ri[n]?e.length>1?{type:Ri[n],data:e.substring(1)}:{type:Ri[n]}:Fi},Gi=(e,t)=>{if(Vi){const n=(e=>{let t,n,r,a,i,s=.75*e.length,l=e.length,o=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);const c=new ArrayBuffer(s),d=new Uint8Array(c);for(t=0;t<l;t+=4)n=Ui[e.charCodeAt(t)],r=Ui[e.charCodeAt(t+1)],a=Ui[e.charCodeAt(t+2)],i=Ui[e.charCodeAt(t+3)],d[o++]=n<<2|r>>4,d[o++]=(15&r)<<4|a>>2,d[o++]=(3&a)<<6|63&i;return c})(e);return Hi(n,t)}return{base64:!0,data:e}},Hi=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,Ji=String.fromCharCode(30);function Zi(){return new TransformStream({transform(e,t){!function(e,t){Li&&e.data instanceof Blob?e.data.arrayBuffer().then(Wi).then(t):Pi&&(e.data instanceof ArrayBuffer||Oi(e.data))?t(Wi(e.data)):Ii(e,!1,(e=>{Mi||(Mi=new TextEncoder),t(Mi.encode(e))}))}(e,(n=>{const r=n.length;let a;if(r<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,r);else if(r<65536){a=new Uint8Array(3);const e=new DataView(a.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{a=new Uint8Array(9);const e=new DataView(a.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}e.data&&"string"!==typeof e.data&&(a[0]|=128),t.enqueue(a),t.enqueue(n)}))}})}let Yi;function Qi(e){return e.reduce(((e,t)=>e+t.length),0)}function Xi(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let a=0;a<t;a++)n[a]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function es(e){if(e)return function(e){for(var t in es.prototype)e[t]=es.prototype[t];return e}(e)}es.prototype.on=es.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},es.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},es.prototype.off=es.prototype.removeListener=es.prototype.removeAllListeners=es.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a=0;a<r.length;a++)if((n=r[a])===t||n.fn===t){r.splice(a,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},es.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var a=(n=n.slice(0)).length;r<a;++r)n[r].apply(this,t)}return this},es.prototype.emitReserved=es.prototype.emit,es.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},es.prototype.hasListeners=function(e){return!!this.listeners(e).length};const ts="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),ns="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function rs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const as=ns.setTimeout,is=ns.clearTimeout;function ss(e,t){t.useNativeTimers?(e.setTimeoutFn=as.bind(ns),e.clearTimeoutFn=is.bind(ns)):(e.setTimeoutFn=ns.setTimeout.bind(ns),e.clearTimeoutFn=ns.clearTimeout.bind(ns))}function ls(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class os extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class cs extends es{constructor(e){super(),this.writable=!1,ss(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new os(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=qi(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class ds extends cs{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(Ji),r=[];for(let a=0;a<n.length;a++){const e=qi(n[a],t);if(r.push(e),"error"===e.type)break}return r})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=new Array(n);let a=0;e.forEach(((e,i)=>{Ii(e,!1,(e=>{r[i]=e,++a===n&&t(r.join(Ji))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=ls()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let us=!1;try{us="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(Zo){}const hs=us;function ms(){}class ps extends ds{constructor(e){if(super(e),"undefined"!==typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class fs extends es{constructor(e,t,n){super(),this.createRequest=e,ss(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=rs(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(r){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(r){}try{n.setRequestHeader("Accept","*/*")}catch(r){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"===typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(r){return void this.setTimeoutFn((()=>{this._onError(r)}),0)}"undefined"!==typeof document&&(this._index=fs.requestsCount++,fs.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if("undefined"!==typeof this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=ms,e)try{this._xhr.abort()}catch(t){}"undefined"!==typeof document&&delete fs.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(fs.requestsCount=0,fs.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",gs);else if("function"===typeof addEventListener){addEventListener("onpagehide"in ns?"pagehide":"unload",gs,!1)}function gs(){for(let e in fs.requests)fs.requests.hasOwnProperty(e)&&fs.requests[e].abort()}const xs=function(){const e=vs({xdomain:!1});return e&&null!==e.responseType}();function vs(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||hs))return new XMLHttpRequest}catch(n){}if(!t)try{return new(ns[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(n){}}const bs="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class js extends cs{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=bs?{}:rs(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(Zo){return this.emitReserved("error",Zo)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;Ii(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(t){}r&&ts((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){"undefined"!==typeof this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=ls()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const ys=ns.WebSocket||ns.MozWebSocket;const ks={websocket:class extends js{createSocket(e,t,n){return bs?new ys(e,t,n):t?new ys(e,t):new ys(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends cs{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(Zo){return this.emitReserved("error",Zo)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const t=function(e,t){Yi||(Yi=new TextDecoder);const n=[];let r=0,a=-1,i=!1;return new TransformStream({transform(s,l){for(n.push(s);;){if(0===r){if(Qi(n)<1)break;const e=Xi(n,1);i=128===(128&e[0]),a=127&e[0],r=a<126?3:126===a?1:2}else if(1===r){if(Qi(n)<2)break;const e=Xi(n,2);a=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),r=3}else if(2===r){if(Qi(n)<8)break;const e=Xi(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),i=t.getUint32(0);if(i>Math.pow(2,21)-1){l.enqueue(Fi);break}a=i*Math.pow(2,32)+t.getUint32(4),r=3}else{if(Qi(n)<a)break;const e=Xi(n,a);l.enqueue(qi(i?e:Yi.decode(e),t)),r=0}if(0===a||a>e){l.enqueue(Fi);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=Zi();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const a=()=>{n.read().then((e=>{let{done:t,value:n}=e;t||(this.onPacket(n),a())})).catch((e=>{}))};a();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this._writer.write(i).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then((()=>{r&&ts((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends ps{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=xs&&!t}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd},this.opts),new fs(vs,this.uri(),e)}}},ws=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ns=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ss(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let a=ws.exec(e||""),i={},s=14;for(;s--;)i[Ns[s]]=a[s]||"";return-1!=n&&-1!=r&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,i.path),i.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,i.query),i}const _s="function"===typeof addEventListener&&"function"===typeof removeEventListener,Cs=[];_s&&addEventListener("offline",(()=>{Cs.forEach((e=>e()))}),!1);class zs extends es{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"===typeof e&&(t=e,e=null),e){const n=Ss(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=Ss(t.host).host);ss(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let r=0,a=n.length;r<a;r++){let e=n[r].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),_s&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Cs.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);const e=this.opts.rememberUpgrade&&zs.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){this.readyState="open",zs.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(e+="string"===typeof(t=r)?function(e){let t=0,n=0;for(let r=0,a=e.length;r<a;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,ts((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const a={type:e,data:t,options:n};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if(zs.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),_s&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=Cs.indexOf(this._offlineEventListener);-1!==e&&Cs.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}zs.protocol=4;class Ts extends zs{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;zs.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;zs.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function a(){n||(n=!0,c(),t.close(),t=null)}const i=e=>{const n=new Error("probe error: "+e);n.transport=t.name,a(),this.emitReserved("upgradeError",n)};function s(){i("transport closed")}function l(){i("socket closed")}function o(e){t&&e.name!==t.name&&a()}const c=()=>{t.removeListener("open",r),t.removeListener("error",i),t.removeListener("close",s),this.off("close",l),this.off("upgrading",o)};t.once("open",r),t.once("error",i),t.once("close",s),this.once("close",l),this.once("upgrading",o),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{n||t.open()}),200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class As extends Ts{constructor(e){const t="object"===typeof e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t.transports||t.transports&&"string"===typeof t.transports[0])&&(t.transports=(t.transports||["polling","websocket","webtransport"]).map((e=>ks[e])).filter((e=>!!e))),super(e,t)}}const Es="function"===typeof ArrayBuffer,Ds=Object.prototype.toString,Bs="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Ds.call(Blob),Rs="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===Ds.call(File);function Fs(e){return Es&&(e instanceof ArrayBuffer||(e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||Bs&&e instanceof Blob||Rs&&e instanceof File}function Ls(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(Ls(e[t]))return!0;return!1}if(Fs(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return Ls(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Ls(e[n]))return!0;return!1}function Ps(e){const t=[],n=e.data,r=e;return r.data=Os(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Os(e,t){if(!e)return e;if(Fs(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=Os(e[r],t);return n}if("object"===typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=Os(e[r],t));return n}return e}function Is(e,t){return e.data=$s(e.data,t),delete e.attachments,e}function $s(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=$s(e[n],t);else if("object"===typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=$s(e[n],t));return e}const Ws=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ms=5;var Ks;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Ks||(Ks={}));class Us{constructor(e){this.replacer=e}encode(e){return e.type!==Ks.EVENT&&e.type!==Ks.ACK||!Ls(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Ks.EVENT?Ks.BINARY_EVENT:Ks.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==Ks.BINARY_EVENT&&e.type!==Ks.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Ps(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}function Vs(e){return"[object Object]"===Object.prototype.toString.call(e)}class qs extends es{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Ks.BINARY_EVENT;n||t.type===Ks.BINARY_ACK?(t.type=n?Ks.EVENT:Ks.ACK,this.reconstructor=new Gs(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!Fs(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===Ks[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Ks.BINARY_EVENT||n.type===Ks.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const a=e.substring(r,t);if(a!=Number(a)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(a)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!qs.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}static isPayloadValid(e,t){switch(e){case Ks.CONNECT:return Vs(t);case Ks.DISCONNECT:return void 0===t;case Ks.CONNECT_ERROR:return"string"===typeof t||Vs(t);case Ks.EVENT:case Ks.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===Ws.indexOf(t[0]));case Ks.ACK:case Ks.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Gs{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=Is(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Hs(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Js=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Zs extends es{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Hs(e,"open",this.onopen.bind(this)),Hs(e,"packet",this.onpacket.bind(this)),Hs(e,"error",this.onerror.bind(this)),Hs(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){var t,n,r;if(Js.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];if(i.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(i),this;const l={type:Ks.EVENT,data:i,options:{}};if(l.options.compress=!1!==this.flags.compress,"function"===typeof i[i.length-1]){const e=this.ids++,t=i.pop();this._registerAckCallback(e,t),l.id=e}const o=null===(n=null===(t=this.io.engine)||void 0===t?void 0:t.transport)||void 0===n?void 0:n.writable,c=this.connected&&!(null===(r=this.io.engine)||void 0===r?void 0:r._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(e,t){var n,r=this;const a=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===a)return void(this.acks[e]=t);const i=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),a),s=function(){r.io.clearTimeoutFn(i);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];t.apply(r,n)};s.withError=!0,this.acks[e]=s}emitWithAck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Promise(((t,r)=>{const a=(e,n)=>e?r(e):t(n);a.withError=!0,n.push(a),this.emit(e,...n)}))}_addToQueue(e){var t=this;let n;"function"===typeof e[e.length-1]&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((function(e){if(r!==t._queue[0])return;if(null!==e)r.tryCount>t._opts.retries&&(t._queue.shift(),n&&n(e));else if(t._queue.shift(),n){for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];n(null,...i)}return r.pending=!1,t._drainQueue()})),this._queue.push(r),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ks.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>String(t.id)===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ks.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ks.EVENT:case Ks.BINARY_EVENT:this.onevent(e);break;case Ks.ACK:case Ks.BINARY_ACK:this.onack(e);break;case Ks.DISCONNECT:this.ondisconnect();break;case Ks.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];t.packet({type:Ks.ACK,id:e,data:a})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ks.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Ys(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Ys.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Ys.prototype.reset=function(){this.attempts=0},Ys.prototype.setMin=function(e){this.ms=e},Ys.prototype.setMax=function(e){this.max=e},Ys.prototype.setJitter=function(e){this.jitter=e};class Qs extends es{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"===typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,ss(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new Ys({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||a;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new As(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=Hs(t,"open",(function(){n.onopen(),e&&e()})),a=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},i=Hs(t,"error",a);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{r(),a(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(r),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Hs(e,"ping",this.onping.bind(this)),Hs(e,"data",this.ondata.bind(this)),Hs(e,"error",this.onerror.bind(this)),Hs(e,"close",this.onclose.bind(this)),Hs(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){ts((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Zs(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Xs={};function el(e,t){"object"===typeof e&&(t=e,e=void 0);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=Ss(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const a=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port+t,r.href=r.protocol+"://"+a+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,a=n.id,i=n.path,s=Xs[a]&&i in Xs[a].nsps;let l;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?l=new Qs(r,t):(Xs[a]||(Xs[a]=new Qs(r,t)),l=Xs[a]),n.query&&!t.query&&(t.query=n.queryKey),l.socket(n.path,t)}Object.assign(el,{Manager:Qs,Socket:Zs,io:el,connect:el});const tl=function(e){let{turnierId:t}=e;const[n,r]=(0,s.useState)([]),[a,i]=(0,s.useState)([]),[l,o]=(0,s.useState)(null),[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(0),[m,p]=(0,s.useState)([]),[f,g]=(0,s.useState)(""),[x,v]=(0,s.useState)({quality:"720p",bitrate:2e3,framerate:30,audioEnabled:!0,chatEnabled:!0}),b=(0,s.useRef)(null),j=(0,s.useRef)(null),y=(0,s.useRef)(null),k=(0,s.useRef)(null),w=(0,s.useRef)(null);(0,s.useEffect)((()=>{b.current=el("https://events.tda-intl.org",{transports:["websocket","polling"]});const e=b.current;return e.on("connect",(()=>{console.log("\u2705 Mit Streaming-Server verbunden")})),e.on("stream_started",(e=>{console.log("\ud83c\udfac Stream gestartet:",e),d(!0)})),e.on("stream_ended",(e=>{console.log("\ud83d\uded1 Stream beendet:",e),d(!1),h(0),p([])})),e.on("viewer_joined",(e=>{h(e.current_viewers)})),e.on("viewer_left",(e=>{h(e.current_viewers)})),e.on("chat_message",(e=>{p((t=>[...t,e]))})),e.on("webrtc_offer",(async e=>{await _(e)})),e.on("webrtc_answer",(async e=>{await C(e)})),e.on("webrtc_ice_candidate",(async e=>{await z(e)})),()=>{w.current&&w.current.getTracks().forEach((e=>e.stop())),e.disconnect()}}),[]),(0,s.useEffect)((()=>{N()}),[t]);const N=async()=>{try{const e=localStorage.getItem("token"),n=await fetch(`https://events.tda-intl.org/api/streaming/tournament/${t}/channels`,{headers:{Authorization:`Bearer ${e}`}});if(n.ok){const e=await n.json();r(e)}}catch(e){console.error("Fehler beim Laden der Streaming-Kan\xe4le:",e)}},S=async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:x.framerate}},audio:x.audioEnabled});w.current=e,j.current&&(j.current.srcObject=e);const t=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]});return k.current=t,e.getTracks().forEach((n=>{t.addTrack(n,e)})),t.onicecandidate=e=>{e.candidate&&b.current&&b.current.emit("webrtc_ice_candidate",{channel_id:null===l||void 0===l?void 0:l.channel_id,candidate:e.candidate})},t.ontrack=e=>{y.current&&(y.current.srcObject=e.streams[0])},t}catch(e){throw console.error("Fehler beim Setup von WebRTC:",e),e}},_=async e=>{try{const t=k.current||await S();await t.setRemoteDescription(new RTCSessionDescription(e.offer));const n=await t.createAnswer();await t.setLocalDescription(n),b.current.emit("webrtc_answer",{channel_id:e.channel_id,answer:n,target_socket_id:e.from_socket_id})}catch(t){console.error("Fehler beim Verarbeiten des WebRTC Offers:",t)}},C=async e=>{try{const t=k.current;t&&await t.setRemoteDescription(new RTCSessionDescription(e.answer))}catch(t){console.error("Fehler beim Verarbeiten der WebRTC Answer:",t)}},z=async e=>{try{const t=k.current;t&&await t.addIceCandidate(new RTCIceCandidate(e.candidate))}catch(t){console.error("Fehler beim Hinzuf\xfcgen des ICE Candidates:",t)}},T=()=>{f.trim()&&b.current&&l&&(b.current.emit("send_chat_message",{channel_id:l.channel_id,message:f.trim(),user_id:1,username:"Streamer"}),g(""))};return(0,we.jsxs)("div",{className:"live-streaming-manager",children:[(0,we.jsxs)("div",{className:"streaming-header",children:[(0,we.jsx)("h2",{children:"Live-Streaming Verwaltung"}),c&&(0,we.jsxs)("div",{className:"live-indicator",children:[(0,we.jsx)("span",{className:"live-dot"}),"LIVE - ",u," Zuschauer"]})]}),(0,we.jsxs)("div",{className:"streaming-content",children:[(0,we.jsxs)("div",{className:"channel-selection",children:[(0,we.jsx)("h3",{children:"Streaming-Kan\xe4le"}),(0,we.jsx)("div",{className:"channels-grid",children:n.map((e=>(0,we.jsxs)("div",{className:"channel-card "+((null===l||void 0===l?void 0:l.channel_id)===e.channel_id?"selected":""),onClick:()=>o(e),children:[(0,we.jsx)("h4",{children:e.channel_name}),(0,we.jsxs)("p",{children:["Ring ",e.ring_number||"Allgemein"]}),(0,we.jsxs)("div",{className:"channel-stats",children:[(0,we.jsxs)("span",{children:["\ud83d\udc65 ",e.current_viewers||0]}),(0,we.jsx)("span",{className:e.is_live?"live":"offline",children:e.is_live?"\ud83d\udd34 LIVE":"\u26ab OFFLINE"})]}),e.is_live&&!c&&(0,we.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:t=>{t.stopPropagation(),(e=>{b.current&&(b.current.emit("join_stream",{channel_id:e.channel_id,user_id:1,viewer_info:{device_type:"desktop",browser_type:navigator.userAgent.split(" ")[0]}}),o(e))})(e)},children:"Als Zuschauer beitreten"})]},e.channel_id)))})]}),l&&(0,we.jsxs)("div",{className:"streaming-controls",children:[(0,we.jsxs)("div",{className:"video-section",children:[(0,we.jsxs)("div",{className:"video-container",children:[(0,we.jsx)("h4",{children:"Ihre Kamera"}),(0,we.jsx)("video",{ref:j,autoPlay:!0,muted:!0,playsInline:!0,className:"video-preview"}),(0,we.jsx)("div",{className:"video-controls",children:c?(0,we.jsx)("button",{className:"btn btn-danger",onClick:()=>{l&&b.current&&b.current.emit("stop_stream",{channel_id:l.channel_id}),w.current&&(w.current.getTracks().forEach((e=>e.stop())),w.current=null),k.current&&(k.current.close(),k.current=null),d(!1)},children:"\ud83d\uded1 Stream beenden"}):(0,we.jsx)("button",{className:"btn btn-success",onClick:async()=>{if(l)try{await S();const e=k.current,t=await e.createOffer();await e.setLocalDescription(t),b.current.emit("start_stream",{channel_id:l.channel_id,session_name:`Live Stream - ${l.channel_name}`,user_id:1}),b.current.emit("webrtc_offer",{channel_id:l.channel_id,offer:t}),setTimeout((()=>{b.current.emit("update_stream_status",{channel_id:l.channel_id,status:"live"})}),2e3)}catch(e){console.error("Fehler beim Starten des Streams:",e),alert("Fehler beim Starten des Streams: "+e.message)}else alert("Bitte w\xe4hlen Sie einen Streaming-Kanal aus")},children:"\ud83c\udfac Stream starten"})})]}),(0,we.jsxs)("div",{className:"video-container",children:[(0,we.jsx)("h4",{children:"Live Stream"}),(0,we.jsx)("video",{ref:y,autoPlay:!0,playsInline:!0,className:"video-preview"})]})]}),(0,we.jsxs)("div",{className:"stream-settings",children:[(0,we.jsx)("h4",{children:"Stream-Einstellungen"}),(0,we.jsxs)("div",{className:"settings-grid",children:[(0,we.jsxs)("div",{className:"setting-item",children:[(0,we.jsx)("label",{children:"Qualit\xe4t:"}),(0,we.jsxs)("select",{value:x.quality,onChange:e=>v((t=>({...t,quality:e.target.value}))),children:[(0,we.jsx)("option",{value:"480p",children:"480p"}),(0,we.jsx)("option",{value:"720p",children:"720p"}),(0,we.jsx)("option",{value:"1080p",children:"1080p"})]})]}),(0,we.jsxs)("div",{className:"setting-item",children:[(0,we.jsx)("label",{children:"Framerate:"}),(0,we.jsxs)("select",{value:x.framerate,onChange:e=>v((t=>({...t,framerate:parseInt(e.target.value)}))),children:[(0,we.jsx)("option",{value:24,children:"24 FPS"}),(0,we.jsx)("option",{value:30,children:"30 FPS"}),(0,we.jsx)("option",{value:60,children:"60 FPS"})]})]}),(0,we.jsx)("div",{className:"setting-item",children:(0,we.jsxs)("label",{children:[(0,we.jsx)("input",{type:"checkbox",checked:x.audioEnabled,onChange:e=>v((t=>({...t,audioEnabled:e.target.checked})))}),"Audio aktiviert"]})}),(0,we.jsx)("div",{className:"setting-item",children:(0,we.jsxs)("label",{children:[(0,we.jsx)("input",{type:"checkbox",checked:x.chatEnabled,onChange:e=>v((t=>({...t,chatEnabled:e.target.checked})))}),"Chat aktiviert"]})})]})]}),x.chatEnabled&&(0,we.jsxs)("div",{className:"live-chat",children:[(0,we.jsx)("h4",{children:"Live Chat"}),(0,we.jsx)("div",{className:"chat-messages",children:m.map(((e,t)=>(0,we.jsxs)("div",{className:"chat-message",children:[(0,we.jsxs)("span",{className:"username",children:[e.username,":"]}),(0,we.jsx)("span",{className:"message",children:e.message}),(0,we.jsx)("span",{className:"timestamp",children:new Date(e.timestamp).toLocaleTimeString()})]},t)))}),(0,we.jsxs)("div",{className:"chat-input",children:[(0,we.jsx)("input",{type:"text",value:f,onChange:e=>g(e.target.value),onKeyPress:e=>"Enter"===e.key&&T(),placeholder:"Nachricht eingeben..."}),(0,we.jsx)("button",{onClick:T,children:"Senden"})]})]})]})]})]})};const nl={padding:"20px",maxWidth:"1200px",margin:"0 auto"},rl={textAlign:"center",marginBottom:"20px",color:"#000000",fontSize:"2em",fontWeight:"bold"},al={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px"},il={backgroundColor:"#fff",padding:"15px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",transition:"transform 0.2s ease-in-out",cursor:"pointer"},sl={textAlign:"center",margin:"0 0 10px 0",fontSize:"1.5em",color:"#8B0000"},ll={margin:"5px 0",color:"#666"},ol={backgroundColor:"#007bff",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",marginTop:"10px"},cl={display:"flex",alignItems:"center",marginBottom:"20px",gap:"15px"},dl={backgroundColor:"#6c757d",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"},ul={display:"flex",borderBottom:"2px solid #e9ecef",marginBottom:"20px",gap:"5px"},hl={backgroundColor:"transparent",border:"none",padding:"12px 20px",cursor:"pointer",borderBottom:"2px solid transparent",color:"#666",fontSize:"14px",fontWeight:"500"},ml={...hl,color:"#007bff",borderBottom:"2px solid #007bff",fontWeight:"600"},pl={backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px",minHeight:"400px"},fl=function(){const[e,t]=(0,s.useState)([]),[n,r]=(0,s.useState)(!0),[a,i]=(0,s.useState)(null),[l,o]=(0,s.useState)(null),[c,d]=(0,s.useState)("overview");return(0,s.useEffect)((()=>{!async function(){try{console.log("\ud83d\udce1 API-Aufruf f\xfcr Turniere...");const e=localStorage.getItem("token");if(!e)throw new Error("Bitte einloggen, um Turniere zu sehen.");const n=await fetch("/api/turniere",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!n.ok)throw new Error("Fehler beim Abrufen der Turniere");const a=await n.json();console.log("\u2705 Turniere API Response:",a),a.success&&a.data?t(Array.isArray(a.data)?a.data:[]):Array.isArray(a)?t(a):(console.warn("Unerwartetes API-Format:",a),t([])),r(!1)}catch(Zo){console.error("\u274c Fehler beim Abrufen der Turniere:",Zo),i(Zo),r(!1)}}()}),[]),n?(0,we.jsx)("p",{children:"\u23f3 Lade Turniere..."}):a?(0,we.jsxs)("p",{style:{color:"red"},children:["\u274c Fehler: ",a.message]}):l?(0,we.jsxs)("div",{style:nl,children:[(0,we.jsxs)("div",{style:cl,children:[(0,we.jsx)("button",{style:dl,onClick:()=>o(null),children:"\u2190 Zur\xfcck zu Turnieren"}),(0,we.jsxs)("h2",{style:rl,children:[l.name," - Verwaltung"]})]}),(0,we.jsxs)("div",{style:ul,children:[(0,we.jsx)("button",{style:"overview"===c?ml:hl,onClick:()=>d("overview"),children:"\xdcbersicht"}),(0,we.jsx)("button",{style:"weightclasses"===c?ml:hl,onClick:()=>d("weightclasses"),children:"Gewichtsklassen"}),(0,we.jsx)("button",{style:"seeding"===c?ml:hl,onClick:()=>d("seeding"),children:"Setzungen"}),(0,we.jsx)("button",{style:"schedule"===c?ml:hl,onClick:()=>d("schedule"),children:"Zeitplanung"}),(0,we.jsx)("button",{style:"referees"===c?ml:hl,onClick:()=>d("referees"),children:"Kampfrichter"}),(0,we.jsx)("button",{style:"analytics"===c?ml:hl,onClick:()=>d("analytics"),children:"Statistiken"}),(0,we.jsx)("button",{style:"sports"===c?ml:hl,onClick:()=>d("sports"),children:"Multi-Sport"}),(0,we.jsx)("button",{style:"multi-tournaments"===c?ml:hl,onClick:()=>d("multi-tournaments"),children:"Multi-Turniere"}),(0,we.jsx)("button",{style:"streaming"===c?ml:hl,onClick:()=>d("streaming"),children:"Live-Streaming"})]}),(0,we.jsxs)("div",{style:pl,children:["overview"===c&&(0,we.jsxs)("div",{children:[(0,we.jsx)("h3",{children:"Turnier-\xdcbersicht"}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Datum:"})," ",new Date(l.datum).toLocaleDateString()]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Ort:"})," ",l.ort]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Disziplin:"})," ",l.disziplin]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Status:"})," ",l.status||"Geplant"]})]}),"weightclasses"===c&&(0,we.jsx)(na,{turnierId:l.turnier_id}),"seeding"===c&&(0,we.jsx)(Ka,{turnierId:l.turnier_id}),"schedule"===c&&(0,we.jsx)(pr,{turnierId:l.turnier_id}),"referees"===c&&(0,we.jsx)(fr,{turnierId:l.turnier_id}),"analytics"===c&&(0,we.jsx)(Ai,{turnierId:l.turnier_id}),"sports"===c&&(0,we.jsx)(Ei,{}),"multi-tournaments"===c&&(0,we.jsx)(Di,{}),"streaming"===c&&(0,we.jsx)(tl,{turnierId:l.turnier_id})]})]}):(0,we.jsxs)("div",{style:nl,children:[(0,we.jsx)("h2",{style:rl,children:"Turniere"}),(0,we.jsx)("div",{style:al,children:e.length>0?e.map((e=>(0,we.jsxs)("div",{style:il,onClick:()=>o(e),children:[(0,we.jsx)("h3",{style:sl,children:e.name}),(0,we.jsx)("p",{style:ll,children:new Date(e.datum).toLocaleDateString()}),(0,we.jsx)("p",{style:ll,children:e.ort}),(0,we.jsxs)("p",{style:ll,children:["Disziplin: ",e.disziplin]}),(0,we.jsx)("button",{style:ol,children:"Verwalten"})]},e.turnier_id))):(0,we.jsx)("p",{children:"\u26a0\ufe0f Keine Turniere gefunden."})})]})},gl={meineSchuleContainerStyle:{padding:"20px",fontFamily:"Arial, sans-serif"},flexContainerStyle:{display:"flex",gap:"20px",marginTop:"20px"},leftPaneStyle:{flex:"1",backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px"},middlePaneStyle:{flex:"2",backgroundColor:"#fff",padding:"20px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},rightPaneStyle:{flex:"1",backgroundColor:"#fff",padding:"20px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},clubDataStyle:{marginBottom:"30px",padding:"15px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},wettkaempferContainerStyle:{padding:"15px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},buttonColumnStyle:{display:"flex",flexDirection:"column",gap:"10px",marginTop:"15px"},editButtonStyle:{padding:"10px 15px",backgroundColor:"#8B0000",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginTop:"15px"},addButtonStyle:{padding:"10px 15px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},deleteButtonStyle:{padding:"10px 15px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},registerFighterButtonStyle:{padding:"10px 15px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},turnierListStyle:{listStyle:"none",padding:0},turnierItemStyle:{padding:"10px",marginBottom:"10px",backgroundColor:"#f8f9fa",borderRadius:"5px",border:"1px solid #dee2e6"},registerButtonStyle:{padding:"5px 10px",backgroundColor:"#8B0000",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",marginLeft:"10px",fontSize:"12px"}};const xl=function(e){let{vereins_id:t}=e;const[n,r]=(0,s.useState)(t||localStorage.getItem("vereins_id")),[a,i]=(0,s.useState)(null),[l,o]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[u,h]=(0,s.useState)(!0),[m,p]=(0,s.useState)(null),[f,g]=(0,s.useState)(!1),[x,v]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{const e=localStorage.getItem("vereins_id");!n&&e?r(e):n||(p({message:"Fehler: Vereins-ID fehlt! Speichern nicht m\xf6glich."}),h(!1))}),[n]),(0,s.useEffect)((()=>{if(!n)return;Promise.all([(async()=>{try{const e=await fetch(`/api/vereine/${n}`);if(!e.ok)throw new Error("Fehler beim Abrufen der Vereinsdaten");const t=await e.json();i(t)}catch(Zo){console.error("Fehler beim Laden der Vereinsdaten:",Zo)}})(),(async()=>{try{const e=await fetch(`/api/wettkaempfer/verein/${n}`);if(!e.ok)throw new Error("Fehler beim Abrufen der Wettk\xe4mpfer");const t=await e.json();o(t)}catch(Zo){console.error("Fehler beim Laden der Wettk\xe4mpfer-Daten:",Zo)}})(),(async()=>{try{const e=await fetch("/api/turniere");if(!e.ok)throw new Error("Fehler beim Abrufen der Turniere");const t=await e.json();d(t)}catch(Zo){console.error("Fehler beim Laden der Turnier-Daten:",Zo)}})()]).then((()=>h(!1))).catch((()=>h(!1)))}),[n]),u?(0,we.jsx)("p",{children:"\u23f3 Lade Daten..."}):m?(0,we.jsxs)("p",{style:{color:"red"},children:["\u274c Fehler: ",m.message]}):(0,we.jsxs)("div",{style:gl.meineSchuleContainerStyle,children:[(0,we.jsxs)("div",{style:gl.flexContainerStyle,children:[(0,we.jsxs)("div",{style:gl.leftPaneStyle,children:[a&&(0,we.jsxs)("div",{style:gl.clubDataStyle,children:[(0,we.jsx)("h3",{children:"Vereinsdaten"}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Name:"})," ",a.name]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Email:"})," ",a.email]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Ansprechpartner:"})," ",a.ansprechpartner||"Nicht angegeben"]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Telefon:"})," ",a.telefon||"Nicht angegeben"]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Adresse:"})," ",a.strasse," ",a.hausnummer,", ",a.plz," ",a.ort]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Homepage:"})," ",a.homepage?(0,we.jsx)("a",{href:a.homepage,target:"_blank",rel:"noopener noreferrer",children:a.homepage}):"Nicht angegeben"]}),a.logo&&(0,we.jsx)("img",{src:a.logo,alt:"Vereinslogo",style:{maxWidth:"150px"}}),(0,we.jsx)("button",{style:gl.editButtonStyle,onClick:()=>g(!0),children:"Vereinsdaten bearbeiten"})]}),(0,we.jsxs)("div",{style:gl.wettkaempferContainerStyle,children:[(0,we.jsx)("h3",{children:"Wettk\xe4mpferdaten"}),(0,we.jsxs)("div",{style:gl.buttonColumnStyle,children:[(0,we.jsx)("button",{style:gl.addButtonStyle,onClick:()=>v(!0),children:"Wettk\xe4mpfer hinzuf\xfcgen"}),(0,we.jsx)("button",{style:gl.deleteButtonStyle,onClick:()=>alert("L\xf6schen-Funktion kommt sp\xe4ter!"),children:"Wettk\xe4mpfer l\xf6schen"}),(0,we.jsx)("button",{style:gl.registerFighterButtonStyle,onClick:()=>console.log("Wettk\xe4mpfer f\xfcr Turniere anmelden"),children:"Turnieranmeldung"})]})]})]}),(0,we.jsx)("div",{style:gl.middlePaneStyle,children:(0,we.jsx)(or,{wettkaempfer:l,onMemberUpdate:()=>{}})}),(0,we.jsxs)("div",{style:gl.rightPaneStyle,children:[(0,we.jsx)("h3",{children:"Kommende Turniere"}),c.length>0?(0,we.jsx)("ul",{style:gl.turnierListStyle,children:c.map((e=>(0,we.jsxs)("li",{style:gl.turnierItemStyle,children:[(0,we.jsx)("strong",{children:e.name})," - ",new Date(e.datum).toLocaleDateString(),(0,we.jsx)("button",{style:gl.registerButtonStyle,onClick:()=>console.log(`Anmeldung f\xfcr Turnier ${e.turnier_id}`),children:"Jetzt anmelden"})]},e.turnier_id)))}):(0,we.jsx)("p",{children:"Keine kommenden Turniere"})]})]}),x&&(0,we.jsx)(mr,{setIsAdding:v,setWettkaempfer:o}),f&&a&&(0,we.jsx)(De,{isOpen:f,onClose:()=>g(!1),clubData:a,onUpdate:e=>{e.vereins_id?i(e):console.error("Fehler: Keine Vereins-ID im Update erhalten!")}})]})};const vl=function(e){let{title:t,subtitle:n,meta:r=[],actions:a=[],size:i="medium",variant:s="default",empty:l=!1,emptyText:o="Keine Daten verf\xfcgbar",onClick:c,children:d}=e;const u=()=>{switch(i){case"small":return"tda-card-small";case"large":return"tda-card-large";default:return"tda-card-medium"}};return l?(0,we.jsx)("div",{className:`tda-card tda-card-empty ${u()}`,children:(0,we.jsxs)("div",{className:"tda-card-empty-content",children:[(0,we.jsx)("div",{className:"tda-card-empty-icon",children:"\ud83d\udccb"}),(0,we.jsx)("p",{children:o})]})}):(0,we.jsxs)("div",{className:`tda-card ${(()=>{switch(s){case"success":return"tda-card-success";case"warning":return"tda-card-warning";case"error":return"tda-card-error";case"primary":return"tda-card-primary";case"secondary":return"tda-card-secondary";case"edit":return"tda-card-edit";case"delete":return"tda-card-delete";default:return"tda-card-default"}})()} ${u()}`,onClick:c,style:{cursor:c?"pointer":"default"},children:[(0,we.jsxs)("div",{className:"tda-card-header",children:[(0,we.jsx)("h3",{className:"tda-card-title",children:t}),n&&(0,we.jsx)("p",{className:"tda-card-subtitle",children:n})]}),r.length>0&&(0,we.jsx)("div",{className:"tda-card-meta",children:r.map(((e,t)=>(0,we.jsxs)("div",{className:"tda-card-meta-item",children:[(0,we.jsx)("span",{className:"tda-card-meta-icon",children:e.icon}),(0,we.jsx)("span",{className:"tda-card-meta-text",children:e.text})]},t)))}),d&&(0,we.jsx)("div",{className:"tda-card-content",children:d}),a.length>0&&(0,we.jsx)("div",{className:"tda-card-actions",children:a.map(((e,t)=>(0,we.jsxs)("button",{className:`tda-card-action tda-card-action-${e.variant||"default"}`,onClick:t=>{t.stopPropagation(),e.onClick&&e.onClick()},title:e.title,children:[(0,we.jsx)("span",{className:"tda-card-action-icon",children:e.icon}),e.text&&(0,we.jsx)("span",{className:"tda-card-action-text",children:e.text})]},t)))})]})};function bl(e){let{wettkaempfer:t,onEdit:n,onDelete:r}=e;const a=[{icon:(e=>{switch(e){case"male":case"m\xe4nnlich":return"\ud83d\udc68";case"female":case"weiblich":return"\ud83d\udc69";case"divers":return"\u26a7";default:return"\ud83d\udc64"}})(t.geschlecht),text:`${(e=>{const t=new Date,n=new Date(e);let r=t.getFullYear()-n.getFullYear();const a=t.getMonth()-n.getMonth();return(a<0||0===a&&t.getDate()<n.getDate())&&r--,r})(t.geburtsdatum)} Jahre`},{icon:(e=>{switch(e){case"anfaenger":return"\ud83d\udfe2";case"fortgeschritten":return"\ud83d\udfe1";case"experte":return"\ud83d\udd34";default:return"\u26aa"}})(t.skill_level),text:t.skill_level}],i=[{icon:"\u270f\ufe0f",onClick:()=>n(t),title:"Bearbeiten",variant:"edit"},{icon:"\ud83d\uddd1\ufe0f",onClick:()=>r(t.wettkaempfer_id),title:"L\xf6schen",variant:"delete"}];return(0,we.jsx)(vl,{title:`${t.vorname} ${t.nachname}`,subtitle:t.vereins_name||"Unbekannt",meta:a,actions:i,size:"medium"})}function jl(e){var t;let{title:n,wettkaempfer:r=null,onSave:a,onClose:i}=e;const[l,o]=(0,s.useState)({vorname:(null===r||void 0===r?void 0:r.vorname)||"",nachname:(null===r||void 0===r?void 0:r.nachname)||"",geburtsdatum:(null===r||void 0===r||null===(t=r.geburtsdatum)||void 0===t?void 0:t.split("T")[0])||"",geschlecht:(null===r||void 0===r?void 0:r.geschlecht)||"male",skill_level:(null===r||void 0===r?void 0:r.skill_level)||"anfaenger",gewicht:(null===r||void 0===r?void 0:r.gewicht)||"",email:(null===r||void 0===r?void 0:r.email)||"",vereins_id:(null===r||void 0===r?void 0:r.vereins_id)||""}),c=e=>{o({...l,[e.target.name]:e.target.value})};return(0,we.jsx)("div",{className:"modal-overlay",children:(0,we.jsxs)("div",{className:"modal-content",children:[(0,we.jsxs)("div",{className:"modal-header",children:[(0,we.jsx)("h3",{children:n}),(0,we.jsx)("button",{className:"close-btn",onClick:i,children:"\u2715"})]}),(0,we.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l.vorname.trim()&&l.nachname.trim()&&l.geburtsdatum?a(l):alert("Bitte f\xfcllen Sie alle Pflichtfelder aus.")},className:"wettkaempfer-form",children:[(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Vorname *"}),(0,we.jsx)("input",{type:"text",name:"vorname",value:l.vorname,onChange:c,required:!0})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Nachname *"}),(0,we.jsx)("input",{type:"text",name:"nachname",value:l.nachname,onChange:c,required:!0})]})]}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Geburtsdatum *"}),(0,we.jsx)("input",{type:"date",name:"geburtsdatum",value:l.geburtsdatum,onChange:c,required:!0})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Geschlecht"}),(0,we.jsxs)("select",{name:"geschlecht",value:l.geschlecht,onChange:c,children:[(0,we.jsx)("option",{value:"male",children:"M\xe4nnlich"}),(0,we.jsx)("option",{value:"female",children:"Weiblich"}),(0,we.jsx)("option",{value:"divers",children:"Divers"})]})]})]}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Skill Level"}),(0,we.jsxs)("select",{name:"skill_level",value:l.skill_level,onChange:c,children:[(0,we.jsx)("option",{value:"anfaenger",children:"Anf\xe4nger"}),(0,we.jsx)("option",{value:"fortgeschritten",children:"Fortgeschritten"}),(0,we.jsx)("option",{value:"experte",children:"Experte"})]})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Gewicht (kg)"}),(0,we.jsx)("input",{type:"number",name:"gewicht",value:l.gewicht,onChange:c,min:"20",max:"200"})]})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"E-Mail"}),(0,we.jsx)("input",{type:"email",name:"email",value:l.email,onChange:c})]}),(0,we.jsxs)("div",{className:"form-actions",children:[(0,we.jsx)("button",{type:"button",onClick:i,children:"Abbrechen"}),(0,we.jsx)("button",{type:"submit",className:"save-btn",children:"Speichern"})]})]})]})})}const yl=function(){const[e,t]=(0,s.useState)([]),[n,r]=(0,s.useState)(!0),[a,i]=(0,s.useState)(null),[l,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(null),[u,h]=(0,s.useState)(""),[m,p]=(0,s.useState)(""),[f,g]=(0,s.useState)(""),[x,v]=(0,s.useState)({total:0,male:0,female:0,anfaenger:0,fortgeschritten:0,experte:0});(0,s.useEffect)((()=>{b()}),[]),(0,s.useEffect)((()=>{j()}),[e]);const b=async()=>{try{const e=localStorage.getItem("token"),n=await fetch("/api/wettkaempfer",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!n.ok)throw new Error("Fehler beim Abrufen der Wettk\xe4mpfer");const a=await n.json();console.log("\ud83c\udfaf Wettk\xe4mpfer API Response:",a),a.success&&a.data?t(Array.isArray(a.data)?a.data:[]):Array.isArray(a)?t(a):(console.warn("Unerwartetes API-Format:",a),t([])),r(!1)}catch(Zo){console.error("Fehler:",Zo),i(Zo.message),r(!1)}},j=()=>{if(!e.length)return;const t={total:e.length,male:e.filter((e=>"m\xe4nnlich"===e.geschlecht||"male"===e.geschlecht)).length,female:e.filter((e=>"weiblich"===e.geschlecht||"female"===e.geschlecht)).length,anfaenger:e.filter((e=>"anfaenger"===e.skill_level)).length,fortgeschritten:e.filter((e=>"fortgeschritten"===e.skill_level)).length,experte:e.filter((e=>"experte"===e.skill_level)).length};v(t)},y=async e=>{if(window.confirm("Sind Sie sicher, dass Sie diesen Wettk\xe4mpfer l\xf6schen m\xf6chten?"))try{const t=localStorage.getItem("token");if(!(await fetch(`/api/wettkaempfer/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok)throw new Error("Fehler beim L\xf6schen des Wettk\xe4mpfers");await b()}catch(Zo){console.error("Fehler:",Zo),i(Zo.message)}};return n?(0,we.jsxs)("div",{className:"wettkaempfer-loading",children:[(0,we.jsx)("div",{className:"loading-spinner",children:"\u23f3"}),(0,we.jsx)("p",{children:"Wettk\xe4mpfer werden geladen..."})]}):a?(0,we.jsxs)("div",{className:"wettkaempfer-error",children:[(0,we.jsx)("h3",{children:"\u274c Fehler"}),(0,we.jsx)("p",{children:a}),(0,we.jsx)("button",{onClick:b,children:"Erneut versuchen"})]}):(0,we.jsxs)("div",{className:"wettkaempfer-dashboard",children:[(0,we.jsx)("div",{className:"action-header",children:(0,we.jsx)("button",{className:"add-btn",onClick:()=>o(!0),children:"\u2795 Neuer Wettk\xe4mpfer"})}),(0,we.jsxs)("div",{className:"stats-overview",children:[(0,we.jsxs)("div",{className:"stat-card total",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\ud83d\udc65"}),(0,we.jsxs)("div",{className:"stat-content",children:[(0,we.jsx)("h3",{children:x.total}),(0,we.jsx)("p",{children:"Wettk\xe4mpfer gesamt"})]})]}),(0,we.jsxs)("div",{className:"stat-card male",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\ud83d\udc68"}),(0,we.jsxs)("div",{className:"stat-content",children:[(0,we.jsx)("h3",{children:x.male}),(0,we.jsx)("p",{children:"M\xe4nnlich"})]})]}),(0,we.jsxs)("div",{className:"stat-card female",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\ud83d\udc69"}),(0,we.jsxs)("div",{className:"stat-content",children:[(0,we.jsx)("h3",{children:x.female}),(0,we.jsx)("p",{children:"Weiblich"})]})]}),(0,we.jsxs)("div",{className:"stat-card skill",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\ud83e\udd4b"}),(0,we.jsxs)("div",{className:"stat-content",children:[(0,we.jsx)("h3",{children:x.experte}),(0,we.jsx)("p",{children:"Experten"})]})]})]}),(0,we.jsxs)("div",{className:"filters-section",children:[(0,we.jsx)("div",{className:"search-box",children:(0,we.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d Name suchen...",value:u,onChange:e=>h(e.target.value)})}),(0,we.jsxs)("select",{value:m,onChange:e=>p(e.target.value),children:[(0,we.jsx)("option",{value:"",children:"Alle Geschlechter"}),(0,we.jsx)("option",{value:"male",children:"M\xe4nnlich"}),(0,we.jsx)("option",{value:"female",children:"Weiblich"}),(0,we.jsx)("option",{value:"divers",children:"Divers"})]}),(0,we.jsxs)("select",{value:f,onChange:e=>g(e.target.value),children:[(0,we.jsx)("option",{value:"",children:"Alle Skill Level"}),(0,we.jsx)("option",{value:"anfaenger",children:"Anf\xe4nger"}),(0,we.jsx)("option",{value:"fortgeschritten",children:"Fortgeschritten"}),(0,we.jsx)("option",{value:"experte",children:"Experte"})]})]}),(0,we.jsx)("div",{className:"tda-card-grid tda-card-grid-6",children:e.filter((e=>{const t=`${e.vorname} ${e.nachname}`.toLowerCase().includes(u.toLowerCase()),n=!m||"male"===m&&("m\xe4nnlich"===e.geschlecht||"male"===e.geschlecht)||"female"===m&&("weiblich"===e.geschlecht||"female"===e.geschlecht)||"divers"===m&&"divers"===e.geschlecht,r=!f||e.skill_level===f;return t&&n&&r})).map((e=>(0,we.jsx)(bl,{wettkaempfer:e,onEdit:d,onDelete:y},e.wettkaempfer_id)))}),l&&(0,we.jsx)(jl,{title:"Neuer Wettk\xe4mpfer",onSave:async e=>{try{const t=localStorage.getItem("token");if(!(await fetch("/api/wettkaempfer",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw new Error("Fehler beim Hinzuf\xfcgen des Wettk\xe4mpfers");await b(),o(!1)}catch(Zo){console.error("Fehler:",Zo),i(Zo.message)}},onClose:()=>o(!1)}),c&&(0,we.jsx)(jl,{title:"Wettk\xe4mpfer bearbeiten",wettkaempfer:c,onSave:e=>(async(e,t)=>{try{const n=localStorage.getItem("token");if(!(await fetch(`/api/wettkaempfer/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw new Error("Fehler beim Bearbeiten des Wettk\xe4mpfers");await b(),d(null)}catch(Zo){console.error("Fehler:",Zo),i(Zo.message)}})(c.wettkaempfer_id,e),onClose:()=>d(null)})]})};var kl=n(950),wl=n.t(kl,2);function Nl(e){let{bracket:t,onSelect:n}=e;const[r,a]=(0,s.useState)(!1),[i,l]=(0,s.useState)([]),[o,c]=(0,s.useState)(!1),d=e=>{if(!e)return"-";const t=new Date(e),n=new Date;let r=n.getFullYear()-t.getFullYear();const a=n.getMonth()-t.getMonth();return(a<0||0===a&&n.getDate()<t.getDate())&&r--,r},u=e=>{if(!e)return"-";return new Date(e).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})},h=t.bracket_status||t.status;return(0,we.jsxs)("div",{className:"bracket-card-expandable "+(r?"expanded":""),children:[(0,we.jsxs)("div",{className:"bracket-card-header",onClick:async()=>{if(!r&&0===i.length){c(!0);try{const e=localStorage.getItem("token"),n=await fetch(`/api/brackets/${t.bracket_id}`,{headers:{Authorization:`Bearer ${e}`}});if(n.ok){const e=await n.json(),t=e.data||e;l(t.teilnehmer||[])}}catch(Zo){console.error("Fehler beim Laden der Teilnehmer:",Zo)}finally{c(!1)}}a(!r)},children:[(0,we.jsxs)("div",{className:"bracket-card-main",children:[(0,we.jsxs)("div",{className:"bracket-card-title",children:[(0,we.jsx)("span",{className:"expand-icon",children:r?"\u25bc":"\u25b6"}),(0,we.jsx)("h4",{children:t.bracket_name})]}),(0,we.jsxs)("div",{className:"bracket-card-meta",children:[(0,we.jsxs)("span",{className:"meta-item",children:[(e=>{switch(e){case"draft":case"open":return"\ud83d\udcdd";case"active":case"ready":return"\u2705";case"running":return"\u26a1";case"completed":case"finished":return"\ud83c\udfc6";case"cancelled":return"\u274c";default:return"\ud83d\udccb"}})(h)," ",(e=>{switch(e){case"draft":case"open":return"Offen";case"active":case"ready":return"Bereit";case"running":return"L\xe4uft";case"completed":case"finished":return"Abgeschlossen";case"cancelled":return"Abgebrochen";default:return e||"Unbekannt"}})(h)]}),(0,we.jsxs)("span",{className:"meta-item",children:["\ud83c\udfaf ",t.division_code]}),(0,we.jsxs)("span",{className:"meta-item",children:["\ud83d\udc65 ",t.current_participants||0,"/",t.max_participants]})]})]}),(0,we.jsx)("div",{className:"bracket-card-actions",children:(0,we.jsx)("button",{className:"btn-view",onClick:e=>{e.stopPropagation(),n()},children:"\ud83d\udc41\ufe0f Details"})})]}),r&&(0,we.jsx)("div",{className:"bracket-card-body",children:o?(0,we.jsx)("div",{className:"loading-teilnehmer",children:"\u23f3 Lade Teilnehmer..."}):i.length>0?(0,we.jsxs)("table",{className:"teilnehmer-table",children:[(0,we.jsx)("thead",{children:(0,we.jsxs)("tr",{children:[(0,we.jsx)("th",{children:"#"}),(0,we.jsx)("th",{children:"Name"}),(0,we.jsx)("th",{children:"Alter"}),(0,we.jsx)("th",{children:"Geburtsdatum"}),(0,we.jsx)("th",{children:"Gewicht"}),(0,we.jsx)("th",{children:"Verein"})]})}),(0,we.jsx)("tbody",{children:i.map(((e,t)=>(0,we.jsxs)("tr",{children:[(0,we.jsx)("td",{className:"seed-col",children:e.seed_position||t+1}),(0,we.jsxs)("td",{className:"name-col",children:[e.vorname," ",e.nachname]}),(0,we.jsxs)("td",{className:"age-col",children:[d(e.geburtsdatum)," Jahre"]}),(0,we.jsx)("td",{className:"date-col",children:u(e.geburtsdatum)}),(0,we.jsx)("td",{className:"weight-col",children:e.gewicht?`${e.gewicht} kg`:"-"}),(0,we.jsx)("td",{className:"verein-col",children:e.verein_name||"-"})]},e.wettkaempfer_id)))})]}):(0,we.jsx)("div",{className:"no-teilnehmer",children:"Keine Teilnehmer vorhanden"})})]})}function Sl(e){let{brackets:t,turniere:n,selectedTurnier:r,onSelectTurnier:a,onSelectBracket:i,onCreateBracket:s,onAutoGenerate:l,generating:o}=e;return(0,we.jsxs)("div",{className:"bracket-overview",children:[(0,we.jsxs)("div",{className:"overview-header",children:[(0,we.jsx)("h2",{children:"\ud83c\udfc6 Bracket-Verwaltung"}),(0,we.jsxs)("div",{className:"header-controls",children:[n&&n.length>0&&(0,we.jsx)("select",{className:"turnier-select",value:(null===r||void 0===r?void 0:r.turnier_id)||"",onChange:e=>{const t=n.find((t=>t.turnier_id===parseInt(e.target.value)));a(t)},style:{padding:"8px 12px",marginRight:"10px",borderRadius:"4px"},children:n.map((e=>(0,we.jsx)("option",{value:e.turnier_id,children:e.name},e.turnier_id)))}),(0,we.jsx)("button",{className:"auto-generate-btn",onClick:l,disabled:o||!r,style:{padding:"8px 16px",marginRight:"10px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"4px",cursor:o?"wait":"pointer"},children:o?"\u23f3 Generiere...":"\u26a1 Brackets automatisch erstellen"}),(0,we.jsx)("button",{className:"create-bracket-btn",onClick:s,children:"\u2795 Neues Bracket"})]})]}),(0,we.jsxs)("div",{className:"tda-card-grid tda-card-grid-3",children:[(0,we.jsx)(vl,{title:t.length,subtitle:"Brackets gesamt",meta:[{icon:"\ud83c\udfc6",text:"Gesamt"}],size:"small"}),(0,we.jsx)(vl,{title:t.filter((e=>"in_progress"===e.status||"active"===e.status)).length,subtitle:"Aktive Brackets",meta:[{icon:"\ud83d\udd04",text:"Laufend"}],size:"small",variant:"success"}),(0,we.jsx)(vl,{title:t.filter((e=>"completed"===e.status)).length,subtitle:"Abgeschlossen",meta:[{icon:"\u2705",text:"Fertig"}],size:"small"})]}),(0,we.jsx)("div",{className:"brackets-list",children:t.map((e=>(0,we.jsx)(Nl,{bracket:e,onSelect:()=>i(e)},e.bracket_id)))}),0===t.length&&(0,we.jsxs)("div",{className:"empty-state",children:[(0,we.jsx)("div",{className:"empty-icon",children:"\ud83c\udfc6"}),(0,we.jsx)("h3",{children:"Noch keine Brackets vorhanden"}),(0,we.jsx)("p",{children:"Erstellen Sie Ihr erstes Turnier-Bracket"}),(0,we.jsx)("button",{className:"create-first-bracket",onClick:s,children:"\u2795 Erstes Bracket erstellen"})]})]})}function _l(e){var t,n;let{bracket:r,details:a,availableFighters:i,allBrackets:l=[],onBack:o,onAddParticipants:c,onGenerateBracket:d,onUpdateFightResult:u,onSplitBracket:h,onMergeBrackets:m,onMoveParticipant:p,onUpdateTournamentMode:f,onResetBracket:g}=e;const[x,v]=(0,s.useState)(!1),[b,j]=(0,s.useState)(null),[y,k]=(0,s.useState)(!1),[w,N]=(0,s.useState)(!1),[S,_]=(0,s.useState)(null),[C,z]=(0,s.useState)(!1),[T,A]=(0,s.useState)(!1),[E,D]=(0,s.useState)(!1),[B,R]=(0,s.useState)(!1),[F,L]=(0,s.useState)(null),[P,O]=(0,s.useState)(""),[I,$]=(0,s.useState)((null===a||void 0===a||null===(t=a.bracket)||void 0===t?void 0:t.tournament_mode)||(null===r||void 0===r?void 0:r.tournament_mode)||"single_elimination_bronze"),[W,M]=(0,s.useState)(!1);s.useEffect((()=>{var e;null!==a&&void 0!==a&&null!==(e=a.bracket)&&void 0!==e&&e.tournament_mode&&$(a.bracket.tournament_mode)}),[null===a||void 0===a||null===(n=a.bracket)||void 0===n?void 0:n.tournament_mode]),s.useEffect((()=>{null!==r&&void 0!==r&&r.tournament_mode&&$(r.tournament_mode)}),[null===r||void 0===r?void 0:r.tournament_mode]);const K=[{value:"single_elimination",label:"Single Elimination (KO)",description:"Klassisches K.O.-System: Wer verliert, scheidet sofort aus.",details:"Schnellster Modus. 1 Sieger, alle anderen ohne Platzierung. Ideal f\xfcr gro\xdfe Teilnehmerfelder mit wenig Zeit."},{value:"single_elimination_bronze",label:"KO + Bronze-Kampf",description:"K.O.-System mit zus\xe4tzlichem Kampf um Platz 3 zwischen den Halbfinal-Verlierern.",details:"Standard bei vielen Verb\xe4nden (WAKO, WKF). Vergibt Platz 1, 2, 3 und 4."},{value:"single_elimination_double_bronze",label:"KO + Doppel-Bronze",description:"K.O.-System ohne kleines Finale - beide Halbfinal-Verlierer erhalten Bronze.",details:"Zeitsparend, da kein Bronze-Kampf n\xf6tig. Zwei 3. Pl\xe4tze werden vergeben."},{value:"consolation_bracket",label:"Trostrunden-Bracket",description:"Alle Verlierer k\xe4mpfen in einem separaten Bracket weiter um Platz 3.",details:"Verlierer aus jeder Runde kommen in ein eigenes Trostrunden-Bracket. Der Sieger dort erh\xe4lt Bronze."},{value:"double_elimination",label:"Double Elimination",description:"Erst nach zwei Niederlagen ausgeschieden. Verlierer k\xe4mpfen im Losers-Bracket weiter.",details:"Fairster Modus - eine schlechte Tagesform kostet nicht sofort das Turnier. Zwei 3. Pl\xe4tze."},{value:"repechage",label:"Repechage (Olympisch)",description:"Verlierer gegen Finalisten bekommen eine zweite Chance auf Bronze.",details:"Olympischer Standard (Judo, Taekwondo, Ringen). Wer gegen einen Finalisten verlor, k\xe4mpft im Trostrunden-Bracket."},{value:"round_robin",label:"Round Robin",description:"Jeder k\xe4mpft gegen jeden. Platzierung nach Punkten.",details:"Ideal f\xfcr kleine Gruppen (3-6 Teilnehmer). Fairste Bewertung, aber zeitintensiv."}],U=l.filter((e=>e.bracket_id!==r.bracket_id&&e.turnier_id===r.turnier_id));if(!a)return(0,we.jsxs)("div",{className:"loading-details",children:[(0,we.jsx)("div",{className:"loading-spinner",children:"\u23f3"}),(0,we.jsx)("p",{children:"Bracket-Details werden geladen..."})]});const V=a.teilnehmer||[],q=a.kaempfe||[];return(0,we.jsxs)("div",{className:"bracket-details",style:{padding:0},children:[(0,we.jsx)("div",{style:{background:"linear-gradient(180deg, #1a1510 0%, #0d0a07 100%)",border:"2px solid #3d2d1f",borderRadius:"4px",padding:"12px 16px",marginBottom:"8px"},children:(0,we.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},children:[(0,we.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,we.jsx)("button",{onClick:o,style:{background:"transparent",border:"1px solid #3d2d1f",color:"#c4b89a",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"0.85rem"},children:"\u2190 Zur\xfcck"}),(0,we.jsxs)("div",{children:[(0,we.jsx)("h2",{style:{margin:0,fontSize:"1.1rem",color:"#d4af37",fontWeight:600},children:r.bracket_name}),(0,we.jsxs)("span",{style:{fontSize:"0.75rem",color:"#ff6b35",background:"rgba(255,107,53,0.15)",padding:"2px 8px",borderRadius:"3px",textTransform:"uppercase",fontWeight:600},children:[V.length," Teilnehmer"]})]}),(0,we.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,we.jsx)("label",{style:{color:"#888",fontSize:"0.8rem"},children:"Modus:"}),(0,we.jsx)("select",{value:I,onChange:e=>{const t=e.target.value;$(t),f&&f(r.bracket_id,t)},style:{background:"#1a1510",color:"#d4af37",border:"1px solid #3d2d1f",padding:"6px 10px",borderRadius:"4px",fontSize:"0.8rem",cursor:"pointer"},children:K.map((e=>(0,we.jsx)("option",{value:e.value,children:e.label},e.value)))}),(0,we.jsx)("button",{onClick:()=>M(!0),title:"Hilfe zu Turniermodi",style:{background:"transparent",border:"1px solid #3d2d1f",color:"#d4af37",width:"24px",height:"24px",borderRadius:"50%",cursor:"pointer",fontSize:"0.8rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center"},children:"?"})]})]}),(0,we.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",flexWrap:"wrap"},children:[(0,we.jsx)("button",{onClick:()=>v(!0),style:{background:"rgba(42,90,42,0.3)",color:"#6adb6a",border:"1px solid #3a7a3a",padding:"6px 10px",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem"},children:"+ Teilnehmer"}),V.length>=4&&(0,we.jsx)("button",{onClick:()=>k(!0),style:{background:"rgba(139,69,19,0.3)",color:"#cd7f32",border:"1px solid #8B4513",padding:"6px 10px",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem"},children:"Splitten"}),U.length>0&&(0,we.jsx)("button",{onClick:()=>N(!0),style:{background:"rgba(74,85,104,0.3)",color:"#a0aec0",border:"1px solid #4a5568",padding:"6px 10px",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem"},children:"Zusammenf\xfchren"}),V.length>0&&0===q.length&&(0,we.jsx)("button",{onClick:()=>d(r.bracket_id),style:{background:"linear-gradient(180deg, #8B0000 0%, #5c0000 100%)",color:"#fff",border:"1px solid #d4af37",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem",fontWeight:600},children:"K\xe4mpfe generieren"}),q.length>0&&(0,we.jsx)("button",{onClick:()=>z(!0),style:{background:"rgba(139,0,0,0.3)",color:"#ff6b6b",border:"1px solid #8B0000",padding:"6px 10px",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem"},title:"Alle K\xe4mpfe l\xf6schen und Bracket zur\xfccksetzen",children:"Reset"})]})]})}),q.length>0&&(0,we.jsx)(Cl,{kaempfe:q,teilnehmer:V,onFightClick:e=>j(e),tournamentMode:I}),V.length>0&&0===q.length&&(0,we.jsxs)("div",{className:"participants-section",children:[(0,we.jsxs)("h3",{children:["\ud83d\udc65 Teilnehmer (",V.length,")"]}),(0,we.jsx)("div",{className:"participants-list",children:V.map(((e,t)=>(0,we.jsxs)("div",{className:"participant-item",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,we.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,we.jsxs)("span",{className:"seed-number",children:["#",e.seed_position||t+1]}),(0,we.jsxs)("span",{className:"participant-name",children:[e.vorname," ",e.nachname]}),(0,we.jsxs)("span",{className:"participant-info",children:[e.skill_level," \u2022 ",e.gewicht,"kg"]})]}),U.length>0&&(0,we.jsx)("button",{onClick:()=>_(e),style:{background:"transparent",border:"1px solid rgba(255,215,0,0.3)",color:"rgba(255,255,255,0.7)",padding:"4px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem"},children:"\u2194 Verschieben"})]},e.wettkaempfer_id)))})]}),x&&(0,we.jsx)(Tl,{availableFighters:i,bracket:r,existingParticipants:V,maxParticipants:r.max_participants,onSave:e=>{c(r.bracket_id,e),v(!1)},onClose:()=>v(!1)}),b&&(0,we.jsx)(Al,{fight:b,participants:V,bracket:r,allFights:q,onSave:e=>{u(b.kampf_id,e),j(null)},onClose:()=>j(null),onSwapFighters:async(e,t)=>{try{const t=localStorage.getItem("token");await fetch(`/api/brackets/kampf/${e}/swap`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})}catch(Zo){console.error("Fehler beim Tauschen:",Zo)}},onScheduleTime:async(e,t)=>{try{const n=localStorage.getItem("token");await fetch(`/api/brackets/kampf/${e}/schedule`,{method:"PUT",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({geplante_zeit:t})})}catch(Zo){console.error("Fehler beim Planen:",Zo)}}}),y&&(0,we.jsx)("div",{className:"modal-overlay",children:(0,we.jsxs)("div",{className:"modal-content",style:{maxWidth:"450px"},children:[(0,we.jsxs)("div",{className:"modal-header",children:[(0,we.jsx)("h3",{children:"Division splitten"}),(0,we.jsx)("button",{className:"close-btn",onClick:()=>k(!1),children:"\u2715"})]}),(0,we.jsxs)("div",{style:{padding:"1.5rem"},children:[(0,we.jsxs)("p",{style:{color:"rgba(255,255,255,0.7)",marginBottom:"20px",textAlign:"center"},children:[V.length," Teilnehmer in 2 Gruppen aufteilen:"]}),(0,we.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,we.jsxs)("button",{onClick:async()=>{D(!0),await h(r.bracket_id,"half"),D(!1),k(!1)},disabled:E,className:"split-option-btn",style:{padding:"14px",background:"rgba(139,0,0,0.2)",border:"1px solid rgba(255,215,0,0.3)",color:"rgba(255,255,255,0.9)",borderRadius:"8px",cursor:"pointer",textAlign:"left"},children:[(0,we.jsx)("strong",{children:"Halb / Halb"}),(0,we.jsx)("br",{}),(0,we.jsx)("small",{style:{color:"rgba(255,255,255,0.6)"},children:"50/50 nach Seeding-Position"})]}),(0,we.jsxs)("button",{onClick:async()=>{D(!0),await h(r.bracket_id,"gender"),D(!1),k(!1)},disabled:E,className:"split-option-btn",style:{padding:"14px",background:"rgba(139,0,0,0.2)",border:"1px solid rgba(255,215,0,0.3)",color:"rgba(255,255,255,0.9)",borderRadius:"8px",cursor:"pointer",textAlign:"left"},children:[(0,we.jsx)("strong",{children:"Nach Geschlecht"}),(0,we.jsx)("br",{}),(0,we.jsx)("small",{style:{color:"rgba(255,255,255,0.6)"},children:"M\xe4nnlich vs Weiblich"})]}),(0,we.jsxs)("button",{onClick:async()=>{D(!0),await h(r.bracket_id,"weight"),D(!1),k(!1)},disabled:E,className:"split-option-btn",style:{padding:"14px",background:"rgba(139,0,0,0.2)",border:"1px solid rgba(255,215,0,0.3)",color:"rgba(255,255,255,0.9)",borderRadius:"8px",cursor:"pointer",textAlign:"left"},children:[(0,we.jsx)("strong",{children:"Nach Gewicht"}),(0,we.jsx)("br",{}),(0,we.jsx)("small",{style:{color:"rgba(255,255,255,0.6)"},children:"Leichtere vs Schwerere"})]}),(0,we.jsxs)("button",{onClick:async()=>{D(!0),await h(r.bracket_id,"height"),D(!1),k(!1)},disabled:E,className:"split-option-btn",style:{padding:"14px",background:"rgba(139,0,0,0.2)",border:"1px solid rgba(255,215,0,0.3)",color:"rgba(255,255,255,0.9)",borderRadius:"8px",cursor:"pointer",textAlign:"left"},children:[(0,we.jsx)("strong",{children:"Nach Gr\xf6\xdfe"}),(0,we.jsx)("br",{}),(0,we.jsx)("small",{style:{color:"rgba(255,255,255,0.6)"},children:"Kleinere vs Gr\xf6\xdfere"})]})]})]})]})}),w&&(0,we.jsx)("div",{className:"modal-overlay",children:(0,we.jsxs)("div",{className:"modal-content",style:{maxWidth:"500px"},children:[(0,we.jsxs)("div",{className:"modal-header",children:[(0,we.jsx)("h3",{children:"Brackets zusammenf\xfchren"}),(0,we.jsx)("button",{className:"close-btn",onClick:()=>{N(!1),L(null),O("")},children:"\u2715"})]}),(0,we.jsx)("div",{style:{padding:"1.5rem"},children:F?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("p",{style:{color:"rgba(255,255,255,0.7)",marginBottom:"15px"},children:[(0,we.jsx)("strong",{style:{color:"#d4af37"},children:F.bracket_name})," (",F.current_participants||0," Teilnehmer) wird mit diesem Bracket zusammengef\xfchrt."]}),(0,we.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,we.jsx)("label",{style:{display:"block",color:"rgba(255,255,255,0.8)",marginBottom:"8px",fontSize:"0.9rem"},children:"Neuer Name f\xfcr das zusammengef\xfchrte Bracket (turnierspezifisch):"}),(0,we.jsx)("input",{type:"text",value:P,onChange:e=>O(e.target.value),placeholder:"z.B. Continuous Fighting 6-12 Jahre",style:{width:"100%",padding:"10px 12px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,215,0,0.3)",borderRadius:"6px",color:"#fff",fontSize:"0.95rem"}}),(0,we.jsx)("small",{style:{color:"rgba(255,255,255,0.5)",display:"block",marginTop:"6px"},children:"Dieser Name gilt nur f\xfcr dieses Turnier."})]}),(0,we.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,we.jsx)("button",{onClick:()=>{L(null),O("")},style:{flex:1,padding:"12px",background:"transparent",border:"1px solid rgba(255,255,255,0.3)",color:"rgba(255,255,255,0.7)",borderRadius:"6px",cursor:"pointer"},children:"Zur\xfcck"}),(0,we.jsx)("button",{onClick:async()=>{R(!0),await m(F.bracket_id,r.bracket_id,P||null),R(!1),N(!1),L(null),O("")},disabled:B,style:{flex:2,padding:"12px",background:"linear-gradient(180deg, #8B0000 0%, #5c0000 100%)",border:"1px solid #d4af37",color:"#fff",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:B?"Wird zusammengef\xfchrt...":"Zusammenf\xfchren"})]})]}):(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("p",{style:{color:"rgba(255,255,255,0.7)",marginBottom:"20px"},children:["W\xe4hlen Sie ein Bracket, dessen Teilnehmer in ",(0,we.jsx)("strong",{style:{color:"#d4af37"},children:r.bracket_name})," \xfcbernommen werden sollen:"]}),(0,we.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:U.map((e=>(0,we.jsxs)("button",{onClick:()=>{L(e);const t=r.bracket_name.replace(/\s*\([AB]\s*-\s*(Halb\/Halb|Nach Geschlecht|Nach Gewicht|Nach Gr\xf6\xdfe)\)\s*$/i,"").trim();O(t)},style:{padding:"14px",background:"rgba(74,85,104,0.3)",border:"1px solid rgba(255,215,0,0.3)",color:"rgba(255,255,255,0.9)",borderRadius:"8px",cursor:"pointer",textAlign:"left"},children:[(0,we.jsx)("strong",{children:e.bracket_name}),(0,we.jsxs)("div",{style:{fontSize:"0.85rem",color:"rgba(255,255,255,0.6)",marginTop:"4px"},children:[e.current_participants||0," Teilnehmer \u2022 ",e.division_code||"Keine Kategorie"]})]},e.bracket_id)))}),0===U.length&&(0,we.jsx)("p",{style:{color:"rgba(255,255,255,0.5)",textAlign:"center"},children:"Keine anderen Brackets im selben Turnier vorhanden."})]})})]})}),S&&(0,we.jsx)("div",{className:"modal-overlay",children:(0,we.jsxs)("div",{className:"modal-content",style:{maxWidth:"500px"},children:[(0,we.jsxs)("div",{className:"modal-header",children:[(0,we.jsx)("h3",{children:"Teilnehmer verschieben"}),(0,we.jsx)("button",{className:"close-btn",onClick:()=>_(null),children:"\u2715"})]}),(0,we.jsxs)("div",{style:{padding:"1.5rem"},children:[(0,we.jsxs)("p",{style:{color:"rgba(255,255,255,0.7)",marginBottom:"20px"},children:[(0,we.jsxs)("strong",{style:{color:"#d4af37"},children:[S.vorname," ",S.nachname]})," verschieben nach:"]}),(0,we.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:U.map((e=>(0,we.jsxs)("button",{onClick:async()=>{await p(S.wettkaempfer_id,r.bracket_id,e.bracket_id),_(null)},style:{padding:"14px",background:"rgba(74,85,104,0.3)",border:"1px solid rgba(255,215,0,0.3)",color:"rgba(255,255,255,0.9)",borderRadius:"8px",cursor:"pointer",textAlign:"left"},children:[(0,we.jsx)("strong",{children:e.bracket_name}),(0,we.jsxs)("div",{style:{fontSize:"0.85rem",color:"rgba(255,255,255,0.6)",marginTop:"4px"},children:[e.current_participants||0," Teilnehmer \u2022 ",e.division_code||"Keine Kategorie"]})]},e.bracket_id)))}),0===U.length&&(0,we.jsx)("p",{style:{color:"rgba(255,255,255,0.5)",textAlign:"center"},children:"Keine anderen Brackets im selben Turnier vorhanden."})]})]})}),W&&(0,we.jsx)("div",{className:"modal-overlay",children:(0,we.jsxs)("div",{className:"modal-content",style:{maxWidth:"600px"},children:[(0,we.jsxs)("div",{className:"modal-header",children:[(0,we.jsx)("h3",{children:"Turniermodi erkl\xe4rt"}),(0,we.jsx)("button",{className:"close-btn",onClick:()=>M(!1),children:"\u2715"})]}),(0,we.jsxs)("div",{style:{padding:"1.5rem"},children:[(0,we.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:K.map((e=>(0,we.jsxs)("div",{style:{background:I===e.value?"rgba(139,0,0,0.2)":"rgba(0,0,0,0.2)",border:I===e.value?"1px solid #d4af37":"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",padding:"14px"},children:[(0,we.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[(0,we.jsx)("strong",{style:{color:"#d4af37",fontSize:"0.95rem"},children:e.label}),I===e.value&&(0,we.jsx)("span",{style:{background:"#8B0000",color:"#fff",fontSize:"0.65rem",padding:"2px 6px",borderRadius:"3px"},children:"AKTUELL"})]}),(0,we.jsx)("p",{style:{color:"rgba(255,255,255,0.7)",margin:0,fontSize:"0.85rem",lineHeight:1.5},children:e.description}),e.details&&(0,we.jsx)("p",{style:{color:"rgba(255,255,255,0.5)",margin:"8px 0 0 0",fontSize:"0.8rem",fontStyle:"italic"},children:e.details})]},e.value)))}),(0,we.jsx)("div",{style:{marginTop:"20px",padding:"12px",background:"rgba(212,175,55,0.1)",borderRadius:"6px",border:"1px solid rgba(212,175,55,0.3)"},children:(0,we.jsxs)("p",{style:{color:"#d4af37",margin:0,fontSize:"0.85rem"},children:[(0,we.jsx)("strong",{children:"Hinweis:"})," Der Standard-Turniermodus kann in den Turniereinstellungen festgelegt werden. Hier kann er f\xfcr diese Kategorie individuell angepasst werden."]})})]})]})}),C&&(0,we.jsx)("div",{className:"modal-overlay",children:(0,we.jsxs)("div",{className:"modal-content",style:{maxWidth:"450px"},children:[(0,we.jsxs)("div",{className:"modal-header",style:{background:"linear-gradient(180deg, #8B0000 0%, #5c0000 100%)"},children:[(0,we.jsx)("h3",{style:{color:"#fff"},children:"Bracket zur\xfccksetzen"}),(0,we.jsx)("button",{className:"close-btn",onClick:()=>z(!1),children:"\u2715"})]}),(0,we.jsxs)("div",{style:{padding:"1.5rem"},children:[(0,we.jsx)("div",{style:{background:"rgba(139,0,0,0.2)",border:"1px solid #8B0000",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:(0,we.jsx)("p",{style:{color:"#ff6b6b",margin:0,fontSize:"0.95rem",fontWeight:600},children:"\u26a0\ufe0f WARNUNG: Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden!"})}),(0,we.jsxs)("p",{style:{color:"rgba(255,255,255,0.8)",marginBottom:"16px"},children:["M\xf6chten Sie das Bracket ",(0,we.jsxs)("strong",{style:{color:"#d4af37"},children:['"',r.bracket_name,'"']})," wirklich zur\xfccksetzen?"]}),(0,we.jsx)("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"0.9rem",marginBottom:"20px"},children:"Folgendes wird gel\xf6scht:"}),(0,we.jsxs)("ul",{style:{color:"rgba(255,255,255,0.6)",fontSize:"0.85rem",paddingLeft:"20px",margin:"0 0 20px 0"},children:[(0,we.jsxs)("li",{children:["Alle ",q.length," K\xe4mpfe"]}),(0,we.jsx)("li",{children:"Alle Ergebnisse und Punkte"}),(0,we.jsx)("li",{children:"Alle Backup-Daten"})]}),(0,we.jsxs)("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"0.85rem"},children:[(0,we.jsx)("strong",{style:{color:"#6adb6a"},children:"\u2713 Teilnehmer bleiben erhalten"})," und k\xf6nnen neu zugewiesen werden."]}),(0,we.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"24px",justifyContent:"flex-end"},children:[(0,we.jsx)("button",{onClick:()=>z(!1),style:{background:"rgba(100,100,100,0.3)",color:"#ccc",border:"1px solid #555",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem"},children:"Abbrechen"}),(0,we.jsx)("button",{onClick:async()=>{A(!0),await g(r.bracket_id,r.bracket_name),A(!1),z(!1)},disabled:T,style:{background:T?"#555":"linear-gradient(180deg, #8B0000 0%, #5c0000 100%)",color:"#fff",border:"1px solid #8B0000",padding:"10px 20px",borderRadius:"4px",cursor:T?"wait":"pointer",fontSize:"0.9rem",fontWeight:600},children:T?"Wird zur\xfcckgesetzt...":"Ja, zur\xfccksetzen"})]})]})]})})]})}function Cl(e){var t,n,r;let{kaempfe:a,teilnehmer:i,onFightClick:s,showLosersBracket:l=!0,tournamentMode:o="single_elimination_bronze"}=e;const c=e=>{if(!e)return"\u2014";const t=i.find((t=>t.wettkaempfer_id===e));return t?`${t.vorname} ${t.nachname}`:"\u2014"},d=a.filter((e=>"winners"===e.bracket_typ||!e.bracket_typ)),u=a.filter((e=>"losers"===e.bracket_typ)),h=u.find((e=>e.ist_trostrunde)),m=e=>{const t={};return e.forEach((e=>{const n=e.runde||1;t[n]||(t[n]=[]),t[n].push(e)})),t},p=m(d),f=m(u.filter((e=>!e.ist_trostrunde))),g=m(u.filter((e=>e.ist_trostrunde&&99!==e.kampf_nummer))),x=Object.keys(g).map(Number).sort(((e,t)=>e-t)),v=Object.keys(p).map(Number).sort(((e,t)=>e-t)),b=Object.keys(f).map(Number).sort(((e,t)=>e-t)),j=v.length>1&&(null===(t=p[v[0]])||void 0===t?void 0:t.length)<(null===(n=p[v[1]])||void 0===n?void 0:n.length),y=(j&&p[v[0]],j?v.slice(1):v),k=y.length,w=j?v[1]:v[0],N=p[w]||[],S=v[v.length-1],_=d.find((e=>e.runde===S)),C=null!==_&&void 0!==_&&_.gewinner_id?c(_.gewinner_id):null,z=new Set;N.forEach(((e,t)=>{e.kaempfer1_id&&e.kaempfer2_id||z.add(t)}));const T=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=y.indexOf(e),r=k-n;return 1===r?"\u6c7a\u52dd FINALE":2===r?"\u6e96\u6c7a\u52dd HALBFINALE":3===r?"\u6e96\u3005\u6c7a\u52dd":t&&j?"1\u56de\u6226 + \u4e88\u9078":4===r?"1\u56de\u6226":`\u7b2c${n+1}\u56de\u6226`},A=70;return(0,we.jsxs)("div",{style:{background:"linear-gradient(180deg, #1a1510 0%, #0d0a07 100%)",borderRadius:"4px",border:"2px solid #3d2d1f",boxShadow:"inset 0 0 60px rgba(0,0,0,0.5)"},children:[(0,we.jsxs)("div",{style:{background:"linear-gradient(180deg, #8B0000 0%, #5c0000 100%)",padding:"0.6rem 1.5rem",textAlign:"center",borderBottom:"2px solid #d4af37",position:"relative"},children:[(0,we.jsx)("div",{style:{position:"absolute",top:"4px",left:"4px",width:"12px",height:"12px",borderTop:"2px solid #d4af37",borderLeft:"2px solid #d4af37"}}),(0,we.jsx)("div",{style:{position:"absolute",top:"4px",right:"4px",width:"12px",height:"12px",borderTop:"2px solid #d4af37",borderRight:"2px solid #d4af37"}}),(0,we.jsx)("div",{style:{position:"absolute",bottom:"4px",left:"4px",width:"12px",height:"12px",borderBottom:"2px solid #d4af37",borderLeft:"2px solid #d4af37"}}),(0,we.jsx)("div",{style:{position:"absolute",bottom:"4px",right:"4px",width:"12px",height:"12px",borderBottom:"2px solid #d4af37",borderRight:"2px solid #d4af37"}}),(0,we.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:[(0,we.jsx)("span",{style:{fontSize:"0.6rem",letterSpacing:"4px",color:"#d4af37",fontWeight:500},children:"TOURNAMENT"}),(0,we.jsx)("h1",{style:{margin:0,fontSize:"1.2rem",fontWeight:700,color:"#fff",letterSpacing:"3px"},children:"\u7d44\u307f\u5408\u308f\u305b\u8868"}),(0,we.jsx)("span",{style:{fontSize:"0.6rem",color:"rgba(255,255,255,0.7)",letterSpacing:"2px"},children:"TURNIERBAUM"})]})]}),(0,we.jsx)("div",{style:{padding:"1rem",overflow:"auto",position:"relative"},children:(()=>{const e=j?y:v,t=e[0],n=(t&&p[t]||[]).length||1,r=45*Math.pow(2,1),a=(r-A)/2+(n-1)*r+40+A,l=Math.ceil(i.length/2),o=l*r+300,d=Math.max(1.2*(a+200),n*r*1.5+300,1.3*o,120*l+300,1e3);return console.log("SVG Height Debug:",{firstRoundMatchCount:n,maxFirstRoundMatches:l,baseSpacing:r,lastMatchY:a,calculatedHeight:o,svgHeight:d,teilnehmerCount:i.length}),(0,we.jsxs)("svg",{width:220*e.length+180,height:d,style:{display:"block",margin:"0 auto"},children:[e.map(((t,n)=>{const r=p[t].sort(((e,t)=>e.kampf_nummer-t.kampf_nummer)),a=(r.length,45*Math.pow(2,n+1)),i=(a-A)/2,l=220*n;return(0,we.jsxs)("g",{children:[(0,we.jsx)("text",{x:l+90,y:20,fill:"#d4af37",fontSize:"12",fontWeight:"600",textAnchor:"middle",children:T(t,0===n)}),r.map(((t,r)=>{const o=t.kampf_nummer-1,d=i+o*a+40,u=t.gewinner_id===t.kaempfer1_id,h=t.gewinner_id===t.kaempfer2_id,m=t.gewinner_id&&!u&&t.kaempfer1_id,p=t.gewinner_id&&!h&&t.kaempfer2_id,f=null!=t.gewinner_id;return(0,we.jsxs)("g",{onClick:()=>s(t),style:{cursor:"pointer"},children:[(0,we.jsx)("rect",{x:l,y:d,width:180,height:A,fill:"#1a1510",stroke:"#3d2d1f",strokeWidth:"1",rx:"2"}),(0,we.jsx)("rect",{x:l+1,y:d+1,width:178,height:34,fill:u?"rgba(76, 175, 80, 0.35)":m?"rgba(139, 0, 0, 0.3)":"transparent",rx:"2"}),(0,we.jsx)("rect",{x:l+1,y:d+35,width:178,height:34,fill:h?"rgba(76, 175, 80, 0.35)":p?"rgba(139, 0, 0, 0.3)":"transparent",rx:"2"}),(0,we.jsx)("line",{x1:l+5,y1:d+35,x2:l+175,y2:d+35,stroke:"#3d2d1f",strokeWidth:"1"}),(0,we.jsx)("text",{x:l+12,y:d+17.5+5,fill:u?"#4CAF50":m?"#d4af37":t.kaempfer1_id?"#c4b89a":"#555",fontSize:"13",fontWeight:u?"700":"500",children:c(t.kaempfer1_id)}),(0,we.jsx)("text",{x:l+12,y:d+52.5+5,fill:h?"#4CAF50":p?"#d4af37":t.kaempfer2_id?"#c4b89a":"#555",fontSize:"13",fontWeight:h?"700":"500",children:c(t.kaempfer2_id)}),f&&(0,we.jsxs)("g",{children:[(0,we.jsx)("circle",{cx:l+168,cy:u?d+17.5:d+52.5,r:"10",fill:"none",stroke:"#4CAF50",strokeWidth:"1.5"}),(0,we.jsx)("text",{x:l+168,y:(u?d+17.5:d+52.5)+4,fill:"#4CAF50",fontSize:"11",fontWeight:"700",textAnchor:"middle",children:"\u52dd"})]}),n<e.length-1&&(0,we.jsxs)(we.Fragment,{children:[(0,we.jsx)("line",{x1:l+180,y1:d+35,x2:l+200,y2:d+35,stroke:"#5c4033",strokeWidth:"2"}),o%2===0&&(0,we.jsxs)(we.Fragment,{children:[(0,we.jsx)("line",{x1:l+200,y1:d+35,x2:l+200,y2:d+a+35,stroke:"#5c4033",strokeWidth:"2"}),(0,we.jsx)("line",{x1:l+200,y1:d+35+a/2,x2:l+220,y2:d+35+a/2,stroke:"#5c4033",strokeWidth:"2"})]})]})]},t.kampf_id)}))]},t)})),(()=>{const t=220*e.length,n=p[e[e.length-1]]||[],r=45*Math.pow(2,e.length),a=n.length>0?(r-A)/2+40+35:100;return(0,we.jsxs)("g",{children:[(0,we.jsx)("line",{x1:t-20,y1:a,x2:t,y2:a,stroke:"#5c4033",strokeWidth:"2"}),(0,we.jsx)("text",{x:t+70,y:a-35,fill:"#d4af37",fontSize:"11",fontWeight:"600",textAnchor:"middle",children:"\u512a\u52dd CHAMPION"}),(0,we.jsx)("rect",{x:t+10,y:a-25,width:120,height:50,fill:"url(#championGradient)",stroke:C?"#d4af37":"#3d2d1f",strokeWidth:C?"2":"1",rx:"3"}),(0,we.jsx)("text",{x:t+70,y:a+5,fill:C?"#d4af37":"#555",fontSize:C?"13":"20",fontWeight:"700",textAnchor:"middle",children:C||"?"})]})})(),(0,we.jsx)("defs",{children:(0,we.jsxs)("linearGradient",{id:"championGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,we.jsx)("stop",{offset:"0%",stopColor:"#8B0000"}),(0,we.jsx)("stop",{offset:"100%",stopColor:"#5c0000"})]})})]})})()}),(()=>{switch(o){case"single_elimination":case"single_elimination_double_bronze":case"round_robin":return!1;default:return!0}})()&&(h||b.length>0)&&(0,we.jsxs)("div",{style:{borderTop:"2px solid #3d2d1f",padding:"1rem 1.5rem",background:"linear-gradient(180deg, #0d0a07 0%, #1a1510 100%)"},children:[(0,we.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"1rem",gap:"1rem"},children:[(0,we.jsx)("div",{style:{flex:1,height:"1px",background:"linear-gradient(90deg, transparent, #5c4033, transparent)"}}),(0,we.jsxs)("div",{style:{color:"#cd7f32",fontSize:"0.85rem",fontWeight:700,letterSpacing:"2px",textAlign:"center"},children:[(()=>{switch(o){case"single_elimination_bronze":return"\u4e09\u4f4d\u6c7a\u5b9a\u6226 \u2022 KAMPF UM PLATZ 3";case"consolation_bracket":return"\u6557\u8005\u5fa9\u6d3b\u6226 \u2022 TROSTRUNDEN-BRACKET";case"double_elimination":default:return"\u6557\u8005\u5fa9\u6d3b\u6226 \u2022 VERLIERER-BRACKET";case"repechage":return"\u6557\u8005\u5fa9\u6d3b\u6226 \u2022 REPECHAGE"}})(),u.length>1&&(0,we.jsxs)("div",{style:{fontSize:"0.65rem",color:"#888",marginTop:"0.2rem",letterSpacing:"1px"},children:[u.length," K\xc4MPFE"]})]}),(0,we.jsx)("div",{style:{flex:1,height:"1px",background:"linear-gradient(90deg, transparent, #5c4033, transparent)"}})]}),b.length>0&&"single_elimination_bronze"!==o&&"consolation_bracket"!==o&&(0,we.jsx)("div",{style:{overflowX:"auto"},children:(0,we.jsx)("svg",{width:220*b.length+200,height:90*Math.max((null===(r=f[b[0]])||void 0===r?void 0:r.length)||1,2)+100,style:{display:"block"},children:b.map(((e,t)=>{const n=(f[e]||[]).sort(((e,t)=>e.kampf_nummer-t.kampf_nummer)),r=(n.length,90*Math.pow(2,t)),a=(r-A)/2,i=220*t;return(0,we.jsxs)("g",{children:[(0,we.jsx)("text",{x:i+90,y:20,fill:"#cd7f32",fontSize:"11",fontWeight:"600",textAnchor:"middle",style:{letterSpacing:"1px"},children:`\u6557\u8005${e}\u56de\u6226`}),n.map(((e,n)=>{const l=a+n*r+40,o=e.gewinner_id===e.kaempfer1_id,d=e.gewinner_id===e.kaempfer2_id,u=e.gewinner_id&&!o&&e.kaempfer1_id,h=e.gewinner_id&&!d&&e.kaempfer2_id;return(0,we.jsxs)("g",{onClick:()=>s(e),style:{cursor:"pointer"},children:[(0,we.jsx)("rect",{x:i,y:l,width:180,height:A,fill:"#1a1510",stroke:"#5c4033",strokeWidth:"1",rx:"2"}),(0,we.jsx)("rect",{x:i+1,y:l+1,width:178,height:34,fill:o?"rgba(76, 175, 80, 0.35)":u?"rgba(139, 0, 0, 0.3)":"transparent",rx:"2"}),(0,we.jsx)("rect",{x:i+1,y:l+35,width:178,height:34,fill:d?"rgba(76, 175, 80, 0.35)":h?"rgba(139, 0, 0, 0.3)":"transparent",rx:"2"}),(0,we.jsx)("line",{x1:i+5,y1:l+35,x2:i+175,y2:l+35,stroke:"#5c4033",strokeWidth:"1"}),(0,we.jsx)("text",{x:i+12,y:l+17.5+5,fill:o?"#cd7f32":e.kaempfer1_id?"#a09080":"#555",fontSize:"12",fontWeight:o?"700":"500",children:c(e.kaempfer1_id)}),(0,we.jsx)("text",{x:i+12,y:l+52.5+5,fill:d?"#cd7f32":e.kaempfer2_id?"#a09080":"#555",fontSize:"12",fontWeight:d?"700":"500",children:c(e.kaempfer2_id)}),t<b.length-1&&(0,we.jsx)("path",{d:`M ${i+180} ${l+35}\n                                  L ${i+200} ${l+35}\n                                  L ${i+200} ${a+Math.floor(n/2)*r*2+35+40}\n                                  L ${i+220} ${a+Math.floor(n/2)*r*2+35+40}`,fill:"none",stroke:"#5c4033",strokeWidth:"1"})]},e.kampf_id)}))]},`losers-${e}`)}))})}),"consolation_bracket"===o&&x.length>0&&(0,we.jsxs)("div",{style:{overflowX:"auto",marginTop:"1rem"},children:[(0,we.jsx)("div",{style:{color:"#888",fontSize:"0.75rem",marginBottom:"0.5rem",textAlign:"center",letterSpacing:"1px"},children:"TROSTRUNDEN \u2022 \u6557\u8005\u5fa9\u6d3b\u6226"}),(0,we.jsx)("svg",{width:220*x.length+200,height:(e=>{const t=(null===(e=g[x[0]])||void 0===e?void 0:e.length)||1;return Math.max(90*t+150,300)})(),style:{display:"block",margin:"0 auto"},children:x.map(((e,t)=>{const n=(g[e]||[]).sort(((e,t)=>e.kampf_nummer-t.kampf_nummer)),r=(n.length,90*Math.pow(2,t)),a=(r-A)/2,i=220*t;return(0,we.jsxs)("g",{children:[(0,we.jsxs)("text",{x:i+90,y:20,fill:"#cd7f32",fontSize:"11",fontWeight:"600",textAnchor:"middle",children:["Trostrunde ",t+1]}),n.map(((e,n)=>{const l=e.kampf_nummer%100-1,o=a+l*r+40,d=e.gewinner_id===e.kaempfer1_id,u=e.gewinner_id===e.kaempfer2_id,h=e.gewinner_id&&!d&&e.kaempfer1_id,m=e.gewinner_id&&!u&&e.kaempfer2_id,p=90*Math.pow(2,t+1),f=(p-A)/2+Math.floor(l/2)*p+35+40;return(0,we.jsxs)("g",{onClick:()=>s(e),style:{cursor:"pointer"},children:[(0,we.jsx)("rect",{x:i,y:o,width:180,height:A,fill:"#1a1510",stroke:"#5c4033",strokeWidth:"1",rx:"2"}),(0,we.jsx)("rect",{x:i+1,y:o+1,width:178,height:34,fill:d?"rgba(76, 175, 80, 0.35)":h?"rgba(139, 0, 0, 0.3)":"transparent",rx:"2"}),(0,we.jsx)("rect",{x:i+1,y:o+35,width:178,height:34,fill:u?"rgba(76, 175, 80, 0.35)":m?"rgba(139, 0, 0, 0.3)":"transparent",rx:"2"}),(0,we.jsx)("line",{x1:i+5,y1:o+35,x2:i+175,y2:o+35,stroke:"#5c4033",strokeWidth:"1"}),(0,we.jsx)("text",{x:i+12,y:o+17.5+5,fill:d?"#4CAF50":h?"#d4af37":e.kaempfer1_id?"#a09080":"#555",fontSize:"12",fontWeight:d?"700":"500",children:c(e.kaempfer1_id)}),(0,we.jsx)("text",{x:i+12,y:o+52.5+5,fill:u?"#4CAF50":m?"#d4af37":e.kaempfer2_id?"#a09080":"#555",fontSize:"12",fontWeight:u?"700":"500",children:c(e.kaempfer2_id)}),t<x.length-1&&(0,we.jsx)("path",{d:`M ${i+180} ${o+35}\n                                  L ${i+200} ${o+35}\n                                  L ${i+200} ${f}\n                                  L ${i+220} ${f}`,fill:"none",stroke:"#5c4033",strokeWidth:"1"})]},e.kampf_id)}))]},`trost-${e}`)}))})]}),h&&(0,we.jsxs)("div",{style:{marginTop:"1.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"2rem"},children:[(0,we.jsx)("div",{style:{background:"#1a1510",border:"1px solid #5c4033",borderRadius:"4px",padding:"12px 20px",minWidth:"160px",textAlign:"center"},children:(0,we.jsx)("div",{style:{color:h.gewinner_id===h.kaempfer1_id?"#cd7f32":"#a09080",fontSize:"0.9rem",fontWeight:h.gewinner_id===h.kaempfer1_id?700:500},children:c(h.kaempfer1_id)})}),(0,we.jsx)("div",{style:{color:"#cd7f32",fontSize:"1.2rem",fontWeight:700},children:"VS"}),(0,we.jsx)("div",{style:{background:"#1a1510",border:"1px solid #5c4033",borderRadius:"4px",padding:"12px 20px",minWidth:"160px",textAlign:"center"},children:(0,we.jsx)("div",{style:{color:h.gewinner_id===h.kaempfer2_id?"#cd7f32":"#a09080",fontSize:"0.9rem",fontWeight:h.gewinner_id===h.kaempfer2_id?700:500},children:c(h.kaempfer2_id)})}),(0,we.jsx)("div",{style:{color:"#5c4033",fontSize:"1.5rem"},children:"\u2192"}),(0,we.jsxs)("div",{style:{background:"linear-gradient(180deg, #654321 0%, #3d2d1f 100%)",border:"2px solid #cd7f32",borderRadius:"4px",padding:"12px 24px",minWidth:"140px",textAlign:"center"},children:[(0,we.jsx)("div",{style:{color:"#cd7f32",fontSize:"0.7rem",fontWeight:700,marginBottom:"4px",letterSpacing:"2px"},children:"3. PLATZ"}),(0,we.jsx)("div",{style:{color:h.gewinner_id?"#fff":"#888",fontSize:"0.95rem",fontWeight:700},children:h.gewinner_id?c(h.gewinner_id):"?"})]})]}),"single_elimination_bronze"!==o&&(0,we.jsxs)("div",{style:{marginTop:"1rem",textAlign:"center",color:"#666",fontSize:"0.75rem",fontStyle:"italic"},children:["consolation_bracket"===o&&"Alle Verlierer k\xe4mpfen im Trostrunden-Bracket um Platz 3","double_elimination"===o&&"Verlierer haben eine zweite Chance im Losers-Bracket","repechage"===o&&"Verlierer gegen Finalisten qualifizieren sich f\xfcr Bronze"]})]})]})}function zl(e){let{onSave:t,onClose:n}=e;const[r,a]=(0,s.useState)({turnier_id:1,division_code:"",bracket_name:"",bracket_type:"knockout",max_participants:8});return(0,we.jsx)("div",{className:"modal-overlay",children:(0,we.jsxs)("div",{className:"modal-content",children:[(0,we.jsxs)("div",{className:"modal-header",children:[(0,we.jsx)("h3",{children:"Neues Bracket erstellen"}),(0,we.jsx)("button",{className:"close-btn",onClick:n,children:"\u2715"})]}),(0,we.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(r)},className:"create-bracket-form",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Bracket-Name"}),(0,we.jsx)("input",{type:"text",value:r.bracket_name,onChange:e=>a({...r,bracket_name:e.target.value}),required:!0})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Division"}),(0,we.jsx)("input",{type:"text",placeholder:"z.B. M-75-ADV",value:r.division_code,onChange:e=>a({...r,division_code:e.target.value}),required:!0})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Bracket-Typ"}),(0,we.jsxs)("select",{value:r.bracket_type,onChange:e=>a({...r,bracket_type:e.target.value}),children:[(0,we.jsx)("option",{value:"knockout",children:"K.O.-System"}),(0,we.jsx)("option",{value:"round_robin",children:"Jeder gegen Jeden"})]})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Max. Teilnehmer"}),(0,we.jsxs)("select",{value:r.max_participants,onChange:e=>a({...r,max_participants:parseInt(e.target.value)}),children:[(0,we.jsx)("option",{value:4,children:"4"}),(0,we.jsx)("option",{value:8,children:"8"}),(0,we.jsx)("option",{value:16,children:"16"}),(0,we.jsx)("option",{value:32,children:"32"})]})]}),(0,we.jsxs)("div",{className:"form-actions",children:[(0,we.jsx)("button",{type:"button",onClick:n,children:"Abbrechen"}),(0,we.jsx)("button",{type:"submit",className:"save-btn",children:"Erstellen"})]})]})]})})}function Tl(e){let{availableFighters:t,bracket:n,existingParticipants:r=[],maxParticipants:a,onSave:i,onClose:l}=e;const[o,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(""),[h,m]=(0,s.useState)(!1),p=new Set(r.map((e=>e.wettkaempfer_id))),f=t.filter((e=>!p.has(e.wettkaempfer_id)&&(!!h||(null===n||void 0===n||!n.division_code||!e.division_code||e.division_code===n.division_code)))).filter((e=>`${e.vorname} ${e.nachname}`.toLowerCase().includes(d.toLowerCase())));return(0,we.jsx)("div",{className:"modal-overlay",children:(0,we.jsxs)("div",{className:"modal-content large",children:[(0,we.jsxs)("div",{className:"modal-header",children:[(0,we.jsxs)("h3",{children:["Teilnehmer hinzuf\xfcgen (",o.length,"/",a,")"]}),(0,we.jsx)("button",{className:"close-btn",onClick:l,children:"\u2715"})]}),(0,we.jsxs)("div",{className:"participants-modal-body",children:[(0,we.jsxs)("div",{className:"search-section",style:{display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"},children:[(0,we.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d Wettk\xe4mpfer suchen...",value:d,onChange:e=>u(e.target.value),style:{flex:1,minWidth:"200px"}}),(0,we.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"5px",color:"#c4b89a",fontSize:"0.9rem"},children:[(0,we.jsx)("input",{type:"checkbox",checked:h,onChange:e=>m(e.target.checked)}),"Alle Wettk\xe4mpfer anzeigen"]})]}),(null===n||void 0===n?void 0:n.division_code)&&!h&&(0,we.jsxs)("div",{style:{color:"#888",fontSize:"0.85rem",marginTop:"5px"},children:["Zeige nur Wettk\xe4mpfer der Kategorie: ",(0,we.jsx)("strong",{style:{color:"#d4af37"},children:n.division_code})]}),(0,we.jsxs)("div",{style:{color:"#666",fontSize:"0.8rem",marginTop:"5px",marginBottom:"10px"},children:[f.length," verf\xfcgbare Wettk\xe4mpfer ",r.length>0&&`(${r.length} bereits im Bracket)`]}),(0,we.jsx)("div",{className:"fighters-grid",children:f.map((e=>(0,we.jsxs)("div",{className:"fighter-item "+(o.find((t=>t.wettkaempfer_id===e.wettkaempfer_id))?"selected":""),onClick:()=>(e=>{o.find((t=>t.wettkaempfer_id===e.wettkaempfer_id))?c(o.filter((t=>t.wettkaempfer_id!==e.wettkaempfer_id))):o.length<a&&c([...o,e])})(e),children:[(0,we.jsxs)("div",{className:"fighter-name",children:[e.vorname," ",e.nachname]}),(0,we.jsxs)("div",{className:"fighter-info",children:[e.skill_level," \u2022 ",e.gewicht,"kg \u2022 ",e.division_code||"Keine Kat."]})]},e.wettkaempfer_id)))})]}),(0,we.jsxs)("div",{className:"form-actions",children:[(0,we.jsx)("button",{type:"button",onClick:l,children:"Abbrechen"}),(0,we.jsxs)("button",{type:"button",className:"save-btn",disabled:0===o.length,onClick:()=>i(o),children:[o.length," Teilnehmer hinzuf\xfcgen"]})]})]})})}function Al(e){var t,n,r,a,i,l;let{fight:o,participants:c,bracket:d,allFights:u=[],onClose:h,onSave:m,onSwapFighters:p,onScheduleTime:f}=e;const[g,x]=(0,s.useState)(!1),[v,b]=(0,s.useState)(o.geplante_zeit||""),[j,y]=(0,s.useState)(!1),[k,w]=(0,s.useState)({gewinner_id:o.gewinner_id||"",punkte_kaempfer1:o.punkte_kaempfer1||0,punkte_kaempfer2:o.punkte_kaempfer2||0}),[N,S]=(0,s.useState)(2),[_,C]=(0,s.useState)(15),[z,T]=(0,s.useState)(3),[A,E]=(0,s.useState)(1),[D,B]=(0,s.useState)(15),[R,F]=(0,s.useState)(!1),[L,P]=(0,s.useState)(!1),[O,I]=(0,s.useState)(!1),[$,W]=((0,s.useRef)(null),(0,s.useState)(!1)),[M,K]=(0,s.useState)("kickboxing"),[U,V]=(0,s.useState)(!1),[q,G]=(0,s.useState)(null),[H,J]=(0,s.useState)(0),[Z,Y]=(0,s.useState)(0),[Q,X]=(0,s.useState)(0),[ee,te]=(0,s.useState)(0),[ne,re]=(0,s.useState)(0),[ae,ie]=(0,s.useState)(0),[se,le]=(0,s.useState)(0),[oe,ce]=(0,s.useState)(0),[de,ue]=(0,s.useState)(null),[he,me]=(0,s.useState)(!1),[pe,fe]=(0,s.useState)(null),ge=(0,s.useRef)(!1),[xe,ve]=(0,s.useState)(!1),[be,je]=(0,s.useState)(!1),ye=(0,s.useRef)(!1),[ke,Ne]=(0,s.useState)(!1),Se=(0,s.useRef)(null),_e=(0,s.useRef)(!1),Ce=(0,s.useCallback)((()=>{if(!_e.current)try{Se.current||(Se.current=new(window.AudioContext||window.webkitAudioContext)),"suspended"===Se.current.state?Se.current.resume().then((()=>{console.log("\ud83d\udd0a Audio unlocked!"),_e.current=!0})):_e.current=!0;const e=Se.current.createOscillator(),t=Se.current.createGain();t.gain.setValueAtTime(0,Se.current.currentTime),e.connect(t),t.connect(Se.current.destination),e.start(),e.stop(Se.current.currentTime+.001)}catch(e){console.error("Audio unlock failed:",e)}}),[]),ze=(0,s.useCallback)((()=>(Se.current||(Se.current=new(window.AudioContext||window.webkitAudioContext)),"suspended"===Se.current.state&&Se.current.resume(),Se.current)),[]),Te=(0,s.useCallback)((()=>{if(ke)console.log("\ud83d\udd07 Beep muted");else{console.log("\ud83d\udd0a playBeep called");try{const e=ze(),t=e.createOscillator(),n=e.createGain();t.frequency.setValueAtTime(880,e.currentTime),t.type="sine",n.gain.setValueAtTime(.5,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.3),t.connect(n),n.connect(e.destination),t.start(e.currentTime),t.stop(e.currentTime+.3),console.log("\ud83d\udd0a Beep sound started")}catch(e){console.error("Error playing beep:",e)}}}),[ze,ke]),Ae=(0,s.useCallback)((()=>{if(ke)console.log("\ud83d\udd07 Gong muted");else{console.log("\ud83d\udd14 playGong called");try{const e=ze(),t=e.createOscillator(),n=e.createGain();t.frequency.setValueAtTime(150,e.currentTime),t.frequency.exponentialRampToValueAtTime(80,e.currentTime+2),t.type="sine";const r=e.createOscillator(),a=e.createGain();r.frequency.setValueAtTime(300,e.currentTime),r.frequency.exponentialRampToValueAtTime(160,e.currentTime+2),r.type="sine";const i=e.createOscillator(),s=e.createGain();i.frequency.setValueAtTime(450,e.currentTime),i.frequency.exponentialRampToValueAtTime(240,e.currentTime+1.5),i.type="sine",n.gain.setValueAtTime(.6,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+2.5),a.gain.setValueAtTime(.3,e.currentTime),a.gain.exponentialRampToValueAtTime(.01,e.currentTime+2),s.gain.setValueAtTime(.15,e.currentTime),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+1.5),t.connect(n),r.connect(a),i.connect(s),n.connect(e.destination),a.connect(e.destination),s.connect(e.destination),t.start(e.currentTime),r.start(e.currentTime),i.start(e.currentTime),t.stop(e.currentTime+3),r.stop(e.currentTime+3),i.stop(e.currentTime+3),console.log("\ud83d\udd14 Gong sound started")}catch(e){console.error("Error playing gong:",e)}}}),[ze,ke]);(0,s.useEffect)((()=>{let e=null;return R&&!L&&(e=setInterval((()=>{B((e=>(console.log(`\u23f1\ufe0f Timer: ${e} -> ${e-1}`),e<=1?0:e-1)))}),1e3)),()=>{e&&clearInterval(e)}}),[R,L]),(0,s.useEffect)((()=>{$&&10===D&&!ge.current&&(console.log("\ud83d\udd0a 10 second beep!"),Te(),ge.current=!0)}),[$,D,Te]);const Ee=(0,s.useRef)(!1);(0,s.useEffect)((()=>{if($&&0===D&&!Ee.current){if(Ee.current=!0,console.log(`\u23f0 Round ${A} ended! Score: ${H} - ${Z}`),console.log("\ud83d\udd14 Playing 3 gongs..."),Ae(),setTimeout((()=>Ae()),800),setTimeout((()=>Ae()),1600),be&&H!==Z)return console.log("\ud83e\udd47 Sudden Death winner!"),void setTimeout((()=>{F(!1),je(!1),fe("points"),me(!0),Ee.current=!1}),2500);A<N?(console.log(`\u27a1\ufe0f Starting round ${A+1}/${N} in ${z}s`),setTimeout((()=>{E((e=>e+1)),ge.current=!1,Ee.current=!1,B(_),console.log(`\u25b6\ufe0f Round ${A+1} started with ${_}s`)}),1e3*z)):(console.log("\ud83c\udfc6 All rounds finished!"),setTimeout((()=>{F(!1),H===Z?(console.log("\u2696\ufe0f TIE! Showing tie-breaker options"),ve(!0),Ee.current=!1):(fe("points"),console.log("\ud83c\udf89 Showing winner screen"),me(!0),Ee.current=!1)}),2500))}}),[$,D,A,N,_,z,Ae,H,Z,be]),(0,s.useEffect)((()=>{R||B(_)}),[_]),(0,s.useEffect)((()=>{$&&!de&&("kumite"===M?ne>=4?(ue({fighter:1,reason:"C1",category:"Kontakt"}),F(!1),P(!0)):ae>=4?(ue({fighter:1,reason:"C2",category:"Verhalten"}),F(!1),P(!0)):se>=4?(ue({fighter:2,reason:"C1",category:"Kontakt"}),F(!1),P(!0)):oe>=4&&(ue({fighter:2,reason:"C2",category:"Verhalten"}),F(!1),P(!0)):"kickboxing"===M&&(Q>=3?(ue({fighter:1,reason:"DQ",category:"3 Verwarnungen"}),F(!1),P(!0)):ee>=3&&(ue({fighter:2,reason:"DQ",category:"3 Verwarnungen"}),F(!1),P(!0))))}),[ne,ae,se,oe,Q,ee,M,$,de]);const De=(0,s.useRef)(!1);(0,s.useEffect)((()=>{const e=ye.current||be;console.log("\ud83d\udd0d Sudden Death Check:",{suddenDeathActive:e,isSuddenDeath:be,refValue:ye.current,fightStarted:$,score1:H,score2:Z,diff:H!==Z,alreadyHandled:De.current}),e&&$&&H!==Z&&!De.current&&(console.log("\u26a1 GOLDEN POINT WINNER! Score:",H,"-",Z),De.current=!0,F(!1),P(!0),Ae(),setTimeout((()=>Ae()),400),setTimeout((()=>Ae()),800),setTimeout((()=>{console.log("\ud83c\udfc6 Showing winner screen now!"),je(!1),ye.current=!1,fe("points"),me(!0),console.log("\u2705 setShowWinner(true) called!")}),1e3))}),[H,Z,be,$,Ae]);const Be=(e,t)=>{ue({fighter:e,reason:t,category:"KO"===t?"Knockout":"Technischer Knockout"}),F(!1),P(!0)},Re=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,Fe=(0,s.useCallback)(((e,t)=>{ye.current&&$&&e!==t&&!De.current&&(console.log("\u26a1 GOLDEN POINT WIN DETECTED! Score:",e,"-",t),De.current=!0,F(!1),P(!0),Ae(),setTimeout((()=>Ae()),400),setTimeout((()=>Ae()),800),setTimeout((()=>{console.log("\ud83c\udfc6 Showing GOLDEN POINT winner screen!"),je(!1),ye.current=!1,fe("points"),me(!0)}),1e3))}),[$,Ae]),Le=(0,s.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Ce(),J((t=>{const n=t+e;return setTimeout((()=>Fe(n,Z)),0),n}))}),[Ce,Fe,Z]),Pe=(0,s.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Ce(),Y((t=>{const n=t+e;return setTimeout((()=>Fe(H,n)),0),n}))}),[Ce,Fe,H]),Oe=(0,s.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Ce(),J((t=>Math.max(0,t-e)))}),[Ce]),Ie=(0,s.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Ce(),Y((t=>Math.max(0,t-e)))}),[Ce]),$e=()=>{F(!1),P(!1),E(1),B(_)},We=e=>c.find((t=>t.wettkaempfer_id===e))||null,Me=We(g?o.kaempfer2_id:o.kaempfer1_id),Ke=We(g?o.kaempfer1_id:o.kaempfer2_id),Ue=(()=>{const e=u.filter((e=>e.kaempfer1_id&&e.kaempfer2_id&&"finished"!==e.status)),t=e.findIndex((e=>e.kampf_id===o.kampf_id));if(t>=0&&t<e.length-1){const n=e[t+1];return{fight:n,fighter1:We(n.kaempfer1_id),fighter2:We(n.kaempfer2_id)}}return null})(),Ve=e=>{if(!e)return"?";const t=new Date,n=new Date(e);let r=t.getFullYear()-n.getFullYear();const a=t.getMonth()-n.getMonth();return(a<0||0===a&&t.getDate()<n.getDate())&&r--,r},qe=(0,s.useCallback)((()=>{if(!m)return;let e=null,t=null;const n=g?o.kaempfer2_id:o.kaempfer1_id,r=g?o.kaempfer1_id:o.kaempfer2_id;H>Z?(e=n,t=r):Z>H&&(e=r,t=n);let a="points";if(de&&("KO"===de.reason?a="ko":"TKO"===de.reason?a="tko":"C1"===de.reason||"C2"===de.reason?a="hansoku":"DQ"===de.reason&&(a="dq")),e){const n={gewinner_id:e,verlierer_id:t,punkte_kaempfer1:H,punkte_kaempfer2:Z,win_method:a,scoring_system:M,warnings_kaempfer1:Q,warnings_kaempfer2:ee,penalties_c1_kaempfer1:ne,penalties_c2_kaempfer1:ae,penalties_c1_kaempfer2:se,penalties_c2_kaempfer2:oe,total_rounds:N,finished_round:A,notizen:`${M.toUpperCase()} - ${a.toUpperCase()} - R${A}/${N}`};m(n),w((e=>({...e,...n})))}}),[m,H,Z,g,o.kaempfer1_id,o.kaempfer2_id,M,Q,ee,ne,ae,se,oe,N,A,de]),Ge=e=>{if(!e||e.closed)return;const t=Me?`${Me.vorname} ${Me.nachname}`:"???",n=Ke?`${Ke.vorname} ${Ke.nachname}`:"???";e.document.body.innerHTML=`\n      <style>\n        * { margin: 0; padding: 0; box-sizing: border-box; }\n        body {\n          font-family: 'Segoe UI', sans-serif;\n          background: linear-gradient(180deg, #0d0a07 0%, #1a1510 50%, #0d0a07 100%);\n          height: 100vh;\n          display: flex;\n          flex-direction: column;\n        }\n        .header {\n          background: linear-gradient(180deg, #8B0000 0%, #5c0000 100%);\n          padding: 1rem;\n          text-align: center;\n          border-bottom: 4px solid #d4af37;\n        }\n        .header h1 { color: #d4af37; font-size: 2rem; letter-spacing: 4px; }\n        .main { flex: 1; display: flex; }\n        .fighter {\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          padding: 2rem;\n        }\n        .fighter.blue { background: linear-gradient(135deg, #0a3d62 0%, #1e5799 50%, #0a3d62 100%); }\n        .fighter.red { background: linear-gradient(135deg, #8B0000 0%, #c62828 50%, #8B0000 100%); }\n        .fighter .name { color: #fff; font-size: 3rem; font-weight: 700; margin-bottom: 1rem; text-shadow: 0 4px 20px rgba(0,0,0,0.5); }\n        .fighter .score { font-size: 12rem; font-weight: 900; color: #d4af37; text-shadow: 0 0 50px rgba(212,175,55,0.5); }\n        .center {\n          width: 200px;\n          background: linear-gradient(180deg, #1a1510 0%, #0d0a07 100%);\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          border-left: 3px solid #d4af37;\n          border-right: 3px solid #d4af37;\n        }\n        .timer { font-size: 4rem; font-weight: 900; color: #d4af37; font-family: monospace; }\n        .round { color: #888; font-size: 1.5rem; margin-bottom: 1rem; }\n        .vs { color: #d4af37; font-size: 3rem; margin: 1rem 0; }\n      </style>\n      <div class="header">\n        <h1>${(null===d||void 0===d?void 0:d.bracket_name)||"MATCH"}</h1>\n      </div>\n      <div class="main">\n        <div class="fighter blue">\n          <div class="name">${t}</div>\n          <div class="score" id="score1">${H}</div>\n        </div>\n        <div class="center">\n          <div class="round" style="${be?"color: #FFD700; text-shadow: 0 0 20px rgba(255,215,0,0.8); font-size: 1.2em;":""}">${be?"\u26a1 GOLDEN POINT \u26a1":`ROUND ${A}/${N}`}</div>\n          <div class="timer" id="timer">${Re(D)}</div>\n          <div class="vs">\u5bfe</div>\n        </div>\n        <div class="fighter red">\n          <div class="name">${n}</div>\n          <div class="score" id="score2">${Z}</div>\n        </div>\n      </div>\n    `};(0,s.useEffect)((()=>{if(q&&!q.closed){const e=q.document.getElementById("score1"),t=q.document.getElementById("score2"),n=q.document.getElementById("timer"),r=q.document.querySelector(".round");e&&(e.textContent=H),t&&(t.textContent=Z),n&&(n.textContent=Re(D)),r&&(r.textContent=be?"\u26a1 GOLDEN POINT \u26a1":`ROUND ${A}/${N}`,r.style.color=be?"#FFD700":"#888",r.style.textShadow=be?"0 0 20px rgba(255,215,0,0.8)":"none",r.style.fontSize=be?"1.8rem":"1.5rem")}}),[H,Z,D,q,be,A,N]),(0,s.useEffect)((()=>{if(q&&!q.closed&&he){const e=Me?`${Me.vorname} ${Me.nachname}`:"AO",t=Ke?`${Ke.vorname} ${Ke.nachname}`:"AKA",n=H>Z?e:Z>H?t:"\u5f15\u304d\u5206\u3051 HIKIWAKE",r=H>Z?"#2196F3":Z>H?"#f44336":"#d4af37",a="ko"===pe?"\ud83d\udca5 K.O.":"tko"===pe?"\ud83d\uded1 T.K.O.":"\u52dd\u8005 WINNER",i=H>Z?"rgba(33,150,243,0.15)":Z>H?"rgba(244,67,54,0.15)":"rgba(212,175,55,0.15)";q.document.body.innerHTML=`\n        <style>\n          * { margin: 0; padding: 0; box-sizing: border-box; }\n          body {\n            font-family: 'Segoe UI', sans-serif;\n            background: linear-gradient(180deg, #0d0a07 0%, #1a1510 50%, #0d0a07 100%);\n            height: 100vh;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            overflow: hidden;\n          }\n          @keyframes floatUp {\n            0% { transform: translateY(0) rotate(0deg); opacity: 0; }\n            10% { opacity: 1; }\n            90% { opacity: 1; }\n            100% { transform: translateY(-120vh) rotate(360deg); opacity: 0; }\n          }\n          @keyframes pulseGlow {\n            0%, 100% { opacity: 0.5; transform: translate(-50%, -50%) scale(1); }\n            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }\n          }\n          @keyframes trophyBounce {\n            0%, 100% { transform: translateY(0) rotate(-5deg); }\n            25% { transform: translateY(-20px) rotate(5deg); }\n            50% { transform: translateY(0) rotate(-5deg); }\n            75% { transform: translateY(-10px) rotate(3deg); }\n          }\n          @keyframes winnerFadeIn {\n            0% { opacity: 0; transform: scale(0.8); }\n            100% { opacity: 1; transform: scale(1); }\n          }\n          @keyframes cornerFadeIn {\n            0% { opacity: 0; transform: scale(0.5); }\n            50% { opacity: 1; transform: scale(1.1); }\n            100% { opacity: 1; transform: scale(1); }\n          }\n          @keyframes winnerNamePop {\n            0% { opacity: 0; transform: scale(0.3); }\n            50% { transform: scale(1.1); }\n            100% { opacity: 1; transform: scale(1); }\n          }\n          @keyframes slideDown {\n            0% { opacity: 0; transform: translateY(-30px); }\n            100% { opacity: 1; transform: translateY(0); }\n          }\n          @keyframes slideUp {\n            0% { opacity: 0; transform: translateY(30px); }\n            100% { opacity: 1; transform: translateY(0); }\n          }\n          .corner {\n            position: absolute;\n            width: 80px;\n            height: 80px;\n            pointer-events: none;\n            animation: cornerFadeIn 1s ease-out;\n          }\n          .corner-h {\n            position: absolute;\n            width: 100%;\n            height: 3px;\n            box-shadow: 0 0 10px rgba(212,175,55,0.5);\n          }\n          .corner-v {\n            position: absolute;\n            width: 3px;\n            height: 100%;\n            box-shadow: 0 0 10px rgba(212,175,55,0.5);\n          }\n          .corner-dot {\n            position: absolute;\n            width: 12px;\n            height: 12px;\n            background: #d4af37;\n            border-radius: 2px;\n            transform: rotate(45deg);\n            box-shadow: 0 0 15px rgba(212,175,55,0.8);\n          }\n          .kanji {\n            position: absolute;\n            color: rgba(212,175,55,0.08);\n            animation: floatUp 10s linear infinite;\n          }\n          .glow {\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            width: 150%;\n            height: 150%;\n            background: radial-gradient(ellipse at center, ${i} 0%, transparent 60%);\n            animation: pulseGlow 3s ease-in-out infinite;\n          }\n          .content {\n            text-align: center;\n            z-index: 1;\n            animation: winnerFadeIn 1s ease-out;\n          }\n          .trophy {\n            width: 200px;\n            height: 200px;\n            border-radius: 50%;\n            margin: 0 auto 1.5rem;\n            background: linear-gradient(135deg, ${r}, ${H>Z?"#0d47a1":Z>H?"#b71c1c":"#8b6914"});\n            border: 6px solid ${r};\n            box-shadow: 0 0 60px ${r}80, 0 0 100px ${r}40;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 5rem;\n            color: rgba(255,255,255,0.3);\n            animation: trophyBounce 2s ease-in-out infinite;\n          }\n          .label {\n            color: #d4af37;\n            font-size: 1.2rem;\n            letter-spacing: 12px;\n            margin-bottom: 0.5rem;\n            text-shadow: 0 0 20px rgba(212,175,55,0.5);\n            animation: slideDown 0.8s ease-out;\n          }\n          .winner-name {\n            font-size: 3.5rem;\n            font-weight: 900;\n            color: ${r};\n            text-shadow: 0 0 60px ${r}80;\n            margin-bottom: 1rem;\n            animation: winnerNamePop 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.3s both;\n          }\n          .scores {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            gap: 3rem;\n            margin-top: 2rem;\n            animation: slideUp 0.8s ease-out 0.5s both;\n          }\n          .score-item { text-align: center; }\n          .score-num {\n            font-size: 6rem;\n            font-weight: 900;\n            line-height: 1;\n          }\n          .score-num.blue { color: #2196F3; text-shadow: 0 0 40px rgba(33,150,243,0.6); }\n          .score-num.red { color: #f44336; text-shadow: 0 0 40px rgba(244,67,54,0.6); }\n          .score-label { color: rgba(255,255,255,0.6); font-size: 1rem; margin-top: 0.5rem; }\n          .vs { color: #d4af37; font-size: 2rem; font-weight: 700; }\n        </style>\n\n        \x3c!-- Japanese Style Corners --\x3e\n        <div class="corner" style="top: 20px; left: 20px;">\n          <div class="corner-h" style="top: 0; left: 0; background: linear-gradient(90deg, #d4af37, transparent);"></div>\n          <div class="corner-v" style="top: 0; left: 0; background: linear-gradient(180deg, #d4af37, transparent);"></div>\n          <div class="corner-dot" style="top: -4px; left: -4px;"></div>\n        </div>\n        <div class="corner" style="top: 20px; right: 20px;">\n          <div class="corner-h" style="top: 0; right: 0; background: linear-gradient(270deg, #d4af37, transparent);"></div>\n          <div class="corner-v" style="top: 0; right: 0; background: linear-gradient(180deg, #d4af37, transparent);"></div>\n          <div class="corner-dot" style="top: -4px; right: -4px;"></div>\n        </div>\n        <div class="corner" style="bottom: 20px; left: 20px;">\n          <div class="corner-h" style="bottom: 0; left: 0; background: linear-gradient(90deg, #d4af37, transparent);"></div>\n          <div class="corner-v" style="bottom: 0; left: 0; background: linear-gradient(0deg, #d4af37, transparent);"></div>\n          <div class="corner-dot" style="bottom: -4px; left: -4px;"></div>\n        </div>\n        <div class="corner" style="bottom: 20px; right: 20px;">\n          <div class="corner-h" style="bottom: 0; right: 0; background: linear-gradient(270deg, #d4af37, transparent);"></div>\n          <div class="corner-v" style="bottom: 0; right: 0; background: linear-gradient(0deg, #d4af37, transparent);"></div>\n          <div class="corner-dot" style="bottom: -4px; right: -4px;"></div>\n        </div>\n\n        \x3c!-- Floating Kanji --\x3e\n        <div class="kanji" style="font-size: 4rem; left: 10%; top: 100%; animation-delay: 0s;">\u52dd</div>\n        <div class="kanji" style="font-size: 5rem; left: 25%; top: 100%; animation-delay: 1.5s;">\u6b66</div>\n        <div class="kanji" style="font-size: 3.5rem; left: 40%; top: 100%; animation-delay: 3s;">\u9053</div>\n        <div class="kanji" style="font-size: 6rem; left: 55%; top: 100%; animation-delay: 4.5s;">\u529b</div>\n        <div class="kanji" style="font-size: 4.5rem; left: 70%; top: 100%; animation-delay: 6s;">\u5fc3</div>\n        <div class="kanji" style="font-size: 5.5rem; left: 85%; top: 100%; animation-delay: 7.5s;">\u6280</div>\n\n        \x3c!-- Radial Glow --\x3e\n        <div class="glow"></div>\n\n        \x3c!-- Content --\x3e\n        <div class="content">\n          <div class="trophy">\u52dd</div>\n          <div class="label">${a}</div>\n          <div class="winner-name">${n}</div>\n          <div class="scores">\n            <div class="score-item">\n              <div class="score-num blue">${H}</div>\n              <div class="score-label">${e.split(" ")[0]}</div>\n            </div>\n            <div class="vs">\u5bfe</div>\n            <div class="score-item">\n              <div class="score-num red">${Z}</div>\n              <div class="score-label">${t.split(" ")[0]}</div>\n            </div>\n          </div>\n        </div>\n      `}}),[he,q,H,Z,Me,Ke,pe]),(0,s.useEffect)((()=>{!q||q.closed||he||$||Ge(q)}),[he,$,q]);const He=(0,we.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,width:"100vw",height:"100vh",background:"linear-gradient(180deg, #0d0a07 0%, #1a1510 50%, #0d0a07 100%)",zIndex:999999,display:"flex",flexDirection:"column",overflow:"hidden",fontFamily:"'Segoe UI', sans-serif"},children:[(0,we.jsxs)("div",{style:{background:"linear-gradient(180deg, #8B0000 0%, #5c0000 100%)",padding:"0.8rem 2rem",borderBottom:"3px solid #d4af37",display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative"},children:[(0,we.jsx)("div",{style:{position:"absolute",top:4,left:4,width:15,height:15,borderTop:"2px solid #d4af37",borderLeft:"2px solid #d4af37"}}),(0,we.jsx)("div",{style:{position:"absolute",top:4,right:4,width:15,height:15,borderTop:"2px solid #d4af37",borderRight:"2px solid #d4af37"}}),(0,we.jsx)("div",{style:{position:"absolute",bottom:4,left:4,width:15,height:15,borderBottom:"2px solid #d4af37",borderLeft:"2px solid #d4af37"}}),(0,we.jsx)("div",{style:{position:"absolute",bottom:4,right:4,width:15,height:15,borderBottom:"2px solid #d4af37",borderRight:"2px solid #d4af37"}}),(0,we.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[(0,we.jsx)("button",{onClick:h,style:{background:"rgba(0,0,0,0.3)",border:"1px solid #d4af37",color:"#d4af37",padding:"8px 20px",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",gap:"8px"},children:"\u2190 \u623b\u308b ZUR\xdcCK"}),(0,we.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(212,175,55,0.2), rgba(92,64,51,0.3))",border:"2px solid #d4af37",padding:"6px 16px",borderRadius:"4px"},children:[(0,we.jsx)("span",{style:{color:"#888",fontSize:"0.7rem",marginRight:"8px"},children:"\u90e8\u9580"}),(0,we.jsx)("span",{style:{color:"#d4af37",fontWeight:700,fontSize:"0.95rem"},children:(null===d||void 0===d?void 0:d.bracket_name)||"Kategorie"})]})]}),(0,we.jsxs)("div",{style:{textAlign:"center"},children:[(0,we.jsx)("div",{style:{color:"#d4af37",fontSize:"0.7rem",letterSpacing:"3px",marginBottom:"2px"},children:"\u5bfe\u6226 MATCH"}),(0,we.jsxs)("div",{style:{color:"#fff",fontSize:"1.3rem",fontWeight:700,letterSpacing:"2px"},children:["\u8a66\u5408 #",o.kampf_nummer," \u2022 \u7b2c",o.runde,"\u56de\u6226"]})]}),(0,we.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,we.jsxs)("button",{onClick:()=>{Ce(),$?(console.log("\ud83d\uded1 Stopping fight"),W(!1),$e()):(console.log("\ud83e\udd4a Starting fight!"),ye.current=!1,De.current=!1,J(0),Y(0),X(0),te(0),re(0),ie(0),le(0),ce(0),ge.current=!1,Ee.current=!1,ue(null),fe(null),me(!1),E(1),B(_),W(!0),F(!0),P(!1),console.log(`\u23f1\ufe0f Timer set to ${_}s, fight started`))},style:{background:$?"linear-gradient(180deg, rgba(244,67,54,0.3), rgba(183,28,28,0.4))":"linear-gradient(180deg, rgba(76,175,80,0.3), rgba(46,125,50,0.4))",border:"2px solid "+($?"#f44336":"#4CAF50"),borderRadius:"8px",padding:"10px 18px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[(0,we.jsx)("span",{style:{fontSize:"1.6rem"},children:$?"\u23f9":"\u25b6"}),(0,we.jsx)("span",{style:{color:$?"#f44336":"#4CAF50",fontSize:"0.65rem",fontWeight:600,letterSpacing:"1px"},children:$?"STOP":"START"})]}),(0,we.jsxs)("button",{onClick:()=>I(!0),style:{background:"linear-gradient(180deg, rgba(212,175,55,0.15), rgba(92,64,51,0.3))",border:"2px solid #d4af37",borderRadius:"8px",padding:"10px 18px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[(0,we.jsx)("span",{style:{fontSize:"1.6rem"},children:"\u23f1"}),(0,we.jsx)("span",{style:{color:"#d4af37",fontSize:"0.65rem",fontWeight:600,letterSpacing:"1px"},children:"TIMER"})]}),(0,we.jsxs)("button",{onClick:()=>V(!0),style:{background:"linear-gradient(180deg, rgba(33,150,243,0.15), rgba(21,101,192,0.3))",border:"2px solid #2196F3",borderRadius:"8px",padding:"10px 18px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[(0,we.jsx)("span",{style:{fontSize:"1.6rem"},children:"\ud83d\udcca"}),(0,we.jsx)("span",{style:{color:"#2196F3",fontSize:"0.65rem",fontWeight:600,letterSpacing:"1px"},children:"kumite"===M?"KUMITE":"KICKBOX"})]}),(0,we.jsxs)("button",{onClick:()=>{if(q&&!q.closed)return void q.focus();const e=window.open("","SpectatorView","width=1920,height=1080");G(e),Ge(e)},style:{background:"linear-gradient(180deg, rgba(156,39,176,0.15), rgba(123,31,162,0.3))",border:"2px solid #9C27B0",borderRadius:"8px",padding:"10px 18px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[(0,we.jsx)("span",{style:{fontSize:"1.6rem"},children:"\ud83d\udcfa"}),(0,we.jsx)("span",{style:{color:"#9C27B0",fontSize:"0.65rem",fontWeight:600,letterSpacing:"1px"},children:"TV"})]})]})]}),O&&(0,we.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e6},onClick:()=>I(!1),children:(0,we.jsxs)("div",{style:{background:"linear-gradient(180deg, #1a1510 0%, #0d0a07 100%)",border:"2px solid #d4af37",borderRadius:"12px",padding:"1.5rem 2rem",minWidth:"320px",boxShadow:"0 10px 40px rgba(0,0,0,0.5)"},onClick:e=>e.stopPropagation(),children:[(0,we.jsxs)("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[(0,we.jsx)("span",{style:{fontSize:"2rem"},children:"\u23f1"}),(0,we.jsx)("h3",{style:{color:"#d4af37",margin:"0.5rem 0 0",fontSize:"1.2rem",letterSpacing:"2px"},children:"TIMER SETTINGS"})]}),(0,we.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,we.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,we.jsx)("label",{style:{color:"#c4b89a",fontSize:"1rem"},children:"Runden"}),(0,we.jsx)("input",{type:"number",min:"1",max:"10",value:N,onChange:e=>S(parseInt(e.target.value)||1),style:{width:"70px",background:"rgba(0,0,0,0.4)",border:"1px solid #5c4033",color:"#d4af37",padding:"10px",borderRadius:"6px",fontSize:"1.1rem",textAlign:"center"}})]}),(0,we.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,we.jsx)("label",{style:{color:"#c4b89a",fontSize:"1rem"},children:"Rundenzeit"}),(0,we.jsxs)("select",{value:_,onChange:e=>C(parseInt(e.target.value)),style:{width:"100px",background:"rgba(0,0,0,0.4)",border:"1px solid #5c4033",color:"#d4af37",padding:"10px",borderRadius:"6px",fontSize:"1rem"},children:[(0,we.jsx)("option",{value:60,children:"1:00"}),(0,we.jsx)("option",{value:90,children:"1:30"}),(0,we.jsx)("option",{value:120,children:"2:00"}),(0,we.jsx)("option",{value:150,children:"2:30"}),(0,we.jsx)("option",{value:180,children:"3:00"}),(0,we.jsx)("option",{value:240,children:"4:00"}),(0,we.jsx)("option",{value:300,children:"5:00"})]})]}),(0,we.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,we.jsx)("label",{style:{color:"#c4b89a",fontSize:"1rem"},children:"Pause"}),(0,we.jsxs)("select",{value:z,onChange:e=>T(parseInt(e.target.value)),style:{width:"100px",background:"rgba(0,0,0,0.4)",border:"1px solid #5c4033",color:"#d4af37",padding:"10px",borderRadius:"6px",fontSize:"1rem"},children:[(0,we.jsx)("option",{value:30,children:"0:30"}),(0,we.jsx)("option",{value:45,children:"0:45"}),(0,we.jsx)("option",{value:60,children:"1:00"}),(0,we.jsx)("option",{value:90,children:"1:30"}),(0,we.jsx)("option",{value:120,children:"2:00"})]})]})]}),(0,we.jsx)("button",{onClick:()=>I(!1),style:{marginTop:"1.5rem",width:"100%",background:"rgba(212, 175, 55, 0.15)",border:"1px solid #d4af37",color:"#d4af37",padding:"12px",borderRadius:"6px",cursor:"pointer",fontWeight:600,fontSize:"1rem"},children:"OK"})]})}),U&&(0,we.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e6},onClick:()=>V(!1),children:(0,we.jsxs)("div",{style:{background:"linear-gradient(180deg, #1a1510 0%, #0d0a07 100%)",border:"2px solid #2196F3",borderRadius:"12px",padding:"1.5rem 2rem",minWidth:"320px",boxShadow:"0 10px 40px rgba(0,0,0,0.5)"},onClick:e=>e.stopPropagation(),children:[(0,we.jsxs)("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[(0,we.jsx)("span",{style:{fontSize:"2rem"},children:"\ud83d\udcca"}),(0,we.jsx)("h3",{style:{color:"#2196F3",margin:"0.5rem 0 0",fontSize:"1.2rem",letterSpacing:"2px"},children:"SCORING SYSTEM"})]}),(0,we.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:[(0,we.jsxs)("button",{onClick:()=>{K("kickboxing"),V(!1)},style:{background:"kickboxing"===M?"rgba(33,150,243,0.3)":"rgba(0,0,0,0.3)",border:"2px solid "+("kickboxing"===M?"#2196F3":"#5c4033"),color:"kickboxing"===M?"#2196F3":"#c4b89a",padding:"14px 20px",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"1rem",textAlign:"left"},children:[(0,we.jsx)("div",{style:{fontSize:"1.1rem",marginBottom:"4px"},children:"\ud83e\udd4a Kickboxing"}),(0,we.jsx)("div",{style:{fontSize:"0.75rem",opacity:.7},children:"1, 2, 3 Punkte \u2022 3 Verwarnungsstufen"})]}),(0,we.jsxs)("button",{onClick:()=>{K("kumite"),V(!1)},style:{background:"kumite"===M?"rgba(33,150,243,0.3)":"rgba(0,0,0,0.3)",border:"2px solid "+("kumite"===M?"#2196F3":"#5c4033"),color:"kumite"===M?"#2196F3":"#c4b89a",padding:"14px 20px",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"1rem",textAlign:"left"},children:[(0,we.jsx)("div",{style:{fontSize:"1.1rem",marginBottom:"4px"},children:"\ud83e\udd4b Kumite (WKF)"}),(0,we.jsx)("div",{style:{fontSize:"0.75rem",opacity:.7},children:"Yuko, Waza-ari, Ippon \u2022 C1/C2 Strafen"})]})]}),(0,we.jsx)("button",{onClick:()=>V(!1),style:{marginTop:"1.5rem",width:"100%",background:"rgba(33, 150, 243, 0.15)",border:"1px solid #2196F3",color:"#2196F3",padding:"12px",borderRadius:"6px",cursor:"pointer",fontWeight:600,fontSize:"1rem"},children:"OK"})]})}),de&&!he&&(0,we.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1000001},children:(0,we.jsxs)("div",{style:{background:"linear-gradient(180deg, #1a1510 0%, #0d0a07 100%)",border:"4px solid "+("KO"===de.reason?"#f44336":"TKO"===de.reason?"#ff9800":"#f44336"),borderRadius:"16px",padding:"2.5rem 3rem",textAlign:"center",boxShadow:`0 0 60px ${"KO"===de.reason?"rgba(244,67,54,0.5)":"TKO"===de.reason?"rgba(255,152,0,0.5)":"rgba(244,67,54,0.5)"}, 0 20px 60px rgba(0,0,0,0.7)`,animation:"pulse 1s infinite"},children:[(0,we.jsx)("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"KO"===de.reason?"\ud83d\udca5":"TKO"===de.reason?"\ud83d\uded1":"\ud83d\udeab"}),(0,we.jsx)("h2",{style:{color:"KO"===de.reason?"#f44336":"TKO"===de.reason?"#ff9800":"#f44336",fontSize:"3rem",fontWeight:900,margin:"0 0 1rem",letterSpacing:"6px",textShadow:"0 0 30px "+("KO"===de.reason?"rgba(244,67,54,0.8)":"TKO"===de.reason?"rgba(255,152,0,0.8)":"rgba(244,67,54,0.8)")},children:"KO"===de.reason?"K.O. KNOCKOUT":"TKO"===de.reason?"T.K.O.":"\u53cd\u5247 HANSOKU"}),(0,we.jsx)("p",{style:{color:"#888",fontSize:"1rem",marginBottom:"1rem"},children:de.category}),(0,we.jsxs)("div",{style:{background:1===de.fighter?"rgba(244,67,54,0.2)":"rgba(33,150,243,0.2)",border:"2px solid "+(1===de.fighter?"#f44336":"#2196F3"),borderRadius:"8px",padding:"1.5rem 2rem",marginBottom:"1.5rem"},children:[(0,we.jsx)("p",{style:{color:"#d4af37",fontSize:"0.9rem",margin:"0 0 0.5rem",letterSpacing:"4px"},children:"\u52dd\u8005 SIEGER"}),(0,we.jsx)("p",{style:{color:1===de.fighter?"#f44336":"#2196F3",fontSize:"2.2rem",fontWeight:700,margin:0},children:1===de.fighter?Ke?`${Ke.vorname} ${Ke.nachname}`:"AKA":Me?`${Me.vorname} ${Me.nachname}`:"AO"})]}),(0,we.jsx)("button",{onClick:()=>{1===de.fighter?Z<=H&&Y(H+1):H<=Z&&J(Z+1),fe(de.reason.toLowerCase()),me(!0)},style:{background:"linear-gradient(180deg, rgba(76,175,80,0.3), rgba(46,125,50,0.4))",border:"2px solid #4CAF50",color:"#4CAF50",padding:"14px 40px",borderRadius:"8px",cursor:"pointer",fontWeight:700,fontSize:"1.1rem"},children:"WEITER ZUM ERGEBNIS"})]})}),he&&(0,we.jsxs)("div",{onClick:()=>{qe(),me(!1),ue(null),W(!1),$e()},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"linear-gradient(180deg, #0d0a07 0%, #1a1510 50%, #0d0a07 100%)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1000002,overflow:"hidden",cursor:"pointer"},children:[["topLeft","topRight","bottomLeft","bottomRight"].map((e=>(0,we.jsxs)("div",{style:{position:"absolute",[e.includes("top")?"top":"bottom"]:"20px",[e.includes("Left")?"left":"right"]:"20px",width:"80px",height:"80px",pointerEvents:"none",animation:"cornerFadeIn 1s ease-out"},children:[(0,we.jsx)("div",{style:{position:"absolute",[e.includes("top")?"top":"bottom"]:"0",[e.includes("Left")?"left":"right"]:"0",width:"100%",height:"3px",background:"linear-gradient("+(e.includes("Left")?"90deg":"270deg")+", #d4af37, transparent)",boxShadow:"0 0 10px rgba(212,175,55,0.5)"}}),(0,we.jsx)("div",{style:{position:"absolute",[e.includes("top")?"top":"bottom"]:"0",[e.includes("Left")?"left":"right"]:"0",width:"3px",height:"100%",background:"linear-gradient("+(e.includes("top")?"180deg":"0deg")+", #d4af37, transparent)",boxShadow:"0 0 10px rgba(212,175,55,0.5)"}}),(0,we.jsx)("div",{style:{position:"absolute",[e.includes("top")?"top":"bottom"]:"-4px",[e.includes("Left")?"left":"right"]:"-4px",width:"12px",height:"12px",background:"#d4af37",borderRadius:"2px",transform:"rotate(45deg)",boxShadow:"0 0 15px rgba(212,175,55,0.8)"}})]},e))),(0,we.jsxs)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"hidden",pointerEvents:"none"},children:[["\u52dd","\u6b66","\u9053","\u529b","\u5fc3","\u6280"].map(((e,t)=>(0,we.jsx)("div",{style:{position:"absolute",fontSize:3+4*Math.random()+"rem",color:"rgba(212,175,55,0.08)",left:10+15*t+"%",animation:`floatUp ${8+2*t}s linear infinite`,animationDelay:1.5*t+"s",top:"100%"},children:e},t))),(0,we.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"150%",height:"150%",background:`radial-gradient(ellipse at center,\n                ${H>Z?"rgba(33,150,243,0.15)":Z>H?"rgba(244,67,54,0.15)":"rgba(212,175,55,0.15)"} 0%,\n                transparent 60%)`,animation:"pulseGlow 3s ease-in-out infinite"}})]}),(0,we.jsxs)("div",{style:{textAlign:"center",zIndex:1,animation:"winnerFadeIn 1s ease-out"},children:[(()=>{const e=H>Z?Me:Z>H?Ke:null,t=H>Z?"#2196F3":Z>H?"#f44336":"#d4af37";return(0,we.jsx)("div",{style:{width:"200px",height:"200px",borderRadius:"50%",margin:"0 auto 1.5rem",background:null!==e&&void 0!==e&&e.foto_url?`url(${e.foto_url}) center/cover`:`linear-gradient(135deg, ${t}, ${H>Z?"#0d47a1":Z>H?"#b71c1c":"#8b6914"})`,border:`6px solid ${t}`,boxShadow:`0 0 60px ${t}80, 0 0 100px ${t}40`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"5rem",color:"rgba(255,255,255,0.3)",animation:"trophyBounce 2s ease-in-out infinite"},children:!(null!==e&&void 0!==e&&e.foto_url)&&(e?"\u52dd":"?")})})(),(0,we.jsx)("div",{style:{color:"#d4af37",fontSize:"1.2rem",letterSpacing:"12px",marginBottom:"0.5rem",textShadow:"0 0 20px rgba(212,175,55,0.5)",animation:"slideDown 0.8s ease-out"},children:"ko"===pe?"\ud83d\udca5 K.O.":"tko"===pe?"\ud83d\uded1 T.K.O.":"\u52dd\u8005 WINNER"}),(0,we.jsx)("div",{style:{fontSize:"3.5rem",fontWeight:900,color:H>Z?"#2196F3":Z>H?"#f44336":"#d4af37",textShadow:"0 0 60px "+(H>Z?"rgba(33,150,243,0.8)":Z>H?"rgba(244,67,54,0.8)":"rgba(212,175,55,0.8)"),marginBottom:"1rem",animation:"winnerNamePop 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.3s both"},children:H>Z?Me?`${Me.vorname} ${Me.nachname}`:"AO":Z>H?Ke?`${Ke.vorname} ${Ke.nachname}`:"AKA":"\u5f15\u304d\u5206\u3051 HIKIWAKE"}),(0,we.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3rem",marginTop:"2rem",animation:"slideUp 0.8s ease-out 0.5s both"},children:[(0,we.jsxs)("div",{style:{textAlign:"center"},children:[(0,we.jsx)("div",{style:{color:"#2196F3",fontSize:"6rem",fontWeight:900,textShadow:"0 0 40px rgba(33,150,243,0.6)",lineHeight:1},children:H}),(0,we.jsx)("div",{style:{color:"rgba(255,255,255,0.6)",fontSize:"1rem",marginTop:"0.5rem"},children:Me?`${Me.vorname}`:"AO"})]}),(0,we.jsx)("div",{style:{color:"#d4af37",fontSize:"2rem",fontWeight:700},children:"\u5bfe"}),(0,we.jsxs)("div",{style:{textAlign:"center"},children:[(0,we.jsx)("div",{style:{color:"#f44336",fontSize:"6rem",fontWeight:900,textShadow:"0 0 40px rgba(244,67,54,0.6)",lineHeight:1},children:Z}),(0,we.jsx)("div",{style:{color:"rgba(255,255,255,0.6)",fontSize:"1rem",marginTop:"0.5rem"},children:Ke?`${Ke.vorname}`:"AKA"})]})]}),(0,we.jsx)("div",{style:{marginTop:"3rem",color:"rgba(255,255,255,0.4)",fontSize:"0.9rem",letterSpacing:"2px",animation:"fadeIn 1s ease-out 2s both"},children:"Klicken zum Schlie\xdfen"})]}),(0,we.jsx)("style",{children:"\n            @keyframes floatUp {\n              0% { transform: translateY(0) rotate(0deg); opacity: 0; }\n              10% { opacity: 1; }\n              90% { opacity: 1; }\n              100% { transform: translateY(-120vh) rotate(360deg); opacity: 0; }\n            }\n            @keyframes pulseGlow {\n              0%, 100% { opacity: 0.5; transform: translate(-50%, -50%) scale(1); }\n              50% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }\n            }\n            @keyframes trophyBounce {\n              0%, 100% { transform: translateY(0) rotate(-5deg); }\n              25% { transform: translateY(-20px) rotate(5deg); }\n              50% { transform: translateY(0) rotate(-5deg); }\n              75% { transform: translateY(-10px) rotate(3deg); }\n            }\n            @keyframes winnerFadeIn {\n              0% { opacity: 0; transform: scale(0.8); }\n              100% { opacity: 1; transform: scale(1); }\n            }\n            @keyframes cornerFadeIn {\n              0% { opacity: 0; transform: scale(0.5); }\n              50% { opacity: 1; transform: scale(1.1); }\n              100% { opacity: 1; transform: scale(1); }\n            }\n            @keyframes winnerNamePop {\n              0% { opacity: 0; transform: scale(0.3); }\n              50% { transform: scale(1.1); }\n              100% { opacity: 1; transform: scale(1); }\n            }\n            @keyframes slideDown {\n              0% { opacity: 0; transform: translateY(-30px); }\n              100% { opacity: 1; transform: translateY(0); }\n            }\n            @keyframes slideUp {\n              0% { opacity: 0; transform: translateY(30px); }\n              100% { opacity: 1; transform: translateY(0); }\n            }\n            @keyframes fadeIn {\n              0% { opacity: 0; }\n              100% { opacity: 1; }\n            }\n            @keyframes gongPulse {\n              0% { transform: scale(0.5); opacity: 0; }\n              50% { transform: scale(1.1); }\n              100% { transform: scale(1); opacity: 1; }\n            }\n            @keyframes gongShake {\n              0%, 100% { transform: rotate(0deg); }\n              25% { transform: rotate(-10deg); }\n              75% { transform: rotate(10deg); }\n            }\n          "})]}),xe&&(0,we.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1000003,animation:"fadeIn 0.5s ease-out"},children:(0,we.jsxs)("div",{style:{background:"linear-gradient(180deg, #1a1510 0%, #0d0a07 100%)",border:"4px solid #d4af37",borderRadius:"20px",padding:"3rem 4rem",textAlign:"center",boxShadow:"0 0 80px rgba(212,175,55,0.4), 0 20px 60px rgba(0,0,0,0.7)",maxWidth:"600px",animation:"winnerFadeIn 0.5s ease-out"},children:[(0,we.jsx)("div",{style:{fontSize:"1.2rem",color:"#d4af37",letterSpacing:"8px",marginBottom:"0.5rem",textShadow:"0 0 20px rgba(212,175,55,0.5)"},children:"\u5f15\u304d\u5206\u3051"}),(0,we.jsx)("h2",{style:{color:"#fff",fontSize:"2.5rem",fontWeight:800,margin:"0 0 1rem",letterSpacing:"4px"},children:"UNENTSCHIEDEN"}),(0,we.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"2rem",marginBottom:"2rem",padding:"1.5rem",background:"rgba(0,0,0,0.3)",borderRadius:"12px"},children:[(0,we.jsxs)("div",{style:{textAlign:"center"},children:[(0,we.jsx)("div",{style:{color:"#2196F3",fontSize:"4rem",fontWeight:900,textShadow:"0 0 30px rgba(33,150,243,0.6)"},children:H}),(0,we.jsx)("div",{style:{color:"rgba(255,255,255,0.6)",fontSize:"0.9rem"},children:Me?Me.vorname:"AO"})]}),(0,we.jsx)("div",{style:{color:"#d4af37",fontSize:"2rem",fontWeight:700},children:":"}),(0,we.jsxs)("div",{style:{textAlign:"center"},children:[(0,we.jsx)("div",{style:{color:"#f44336",fontSize:"4rem",fontWeight:900,textShadow:"0 0 30px rgba(244,67,54,0.6)"},children:Z}),(0,we.jsx)("div",{style:{color:"rgba(255,255,255,0.6)",fontSize:"0.9rem"},children:Ke?Ke.vorname:"AKA"})]})]}),(0,we.jsx)("p",{style:{color:"rgba(255,255,255,0.8)",fontSize:"1.1rem",marginBottom:"2rem"},children:"Wie soll die Verl\xe4ngerung entschieden werden?"}),(0,we.jsxs)("div",{style:{display:"flex",gap:"1.5rem",justifyContent:"center"},children:[(0,we.jsxs)("button",{onClick:()=>{console.log("\u26a1 Starting GOLDEN POINT mode"),Ce(),ve(!1),je(!0),ye.current=!0,De.current=!1,W(!0),E(N+1),B(_),ge.current=!1,Ee.current=!1,F(!0)},style:{background:"linear-gradient(135deg, #d4af37 0%, #8b6914 100%)",border:"none",borderRadius:"12px",padding:"1.5rem 2rem",cursor:"pointer",transition:"all 0.3s ease",minWidth:"200px",boxShadow:"0 4px 20px rgba(212,175,55,0.4)"},onMouseOver:e=>{e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.boxShadow="0 8px 30px rgba(212,175,55,0.6)"},onMouseOut:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0 4px 20px rgba(212,175,55,0.4)"},children:[(0,we.jsx)("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"\u26a1"}),(0,we.jsx)("div",{style:{color:"#0d0a07",fontSize:"1.1rem",fontWeight:700,marginBottom:"0.3rem"},children:"GOLDEN POINT"}),(0,we.jsx)("div",{style:{color:"rgba(13,10,7,0.7)",fontSize:"0.85rem"},children:"Erster Punkt gewinnt"})]}),(0,we.jsxs)("button",{onClick:()=>{console.log("\ud83d\udd04 Starting NEW ROUND"),ve(!1),W(!0),S(N+1),E(N+1),B(_),ge.current=!1,Ee.current=!1,F(!0)},style:{background:"linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%)",border:"none",borderRadius:"12px",padding:"1.5rem 2rem",cursor:"pointer",transition:"all 0.3s ease",minWidth:"200px",boxShadow:"0 4px 20px rgba(76,175,80,0.4)"},onMouseOver:e=>{e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.boxShadow="0 8px 30px rgba(76,175,80,0.6)"},onMouseOut:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0 4px 20px rgba(76,175,80,0.4)"},children:[(0,we.jsx)("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"\ud83d\udd04"}),(0,we.jsx)("div",{style:{color:"#fff",fontSize:"1.1rem",fontWeight:700,marginBottom:"0.3rem"},children:"NEUE RUNDE"}),(0,we.jsx)("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"0.85rem"},children:"Volle Zusatzrunde"})]})]})]})}),(0,we.jsxs)("div",{style:{flex:1,display:"flex",overflow:"auto"},children:[(0,we.jsxs)("div",{style:{flex:"1 1 27%",minWidth:"280px",background:"linear-gradient(135deg, #0a3d62 0%, #1e5799 50%, #0a3d62 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative",borderRight:"2px solid #1a1510"},children:[(0,we.jsx)("div",{style:{position:"absolute",top:15,left:15,background:"linear-gradient(135deg, #2196F3, #1565C0)",color:"#fff",padding:"8px 20px",fontWeight:700,fontSize:"1rem",letterSpacing:"3px",boxShadow:"0 4px 15px rgba(33, 150, 243, 0.4)",border:"2px solid rgba(255,255,255,0.3)"},children:"\u9752 AO"}),(0,we.jsx)("div",{style:{width:"220px",height:"220px",borderRadius:"50%",background:null!==Me&&void 0!==Me&&Me.foto_url?`url(${Me.foto_url}) center/cover`:"linear-gradient(135deg, #2196F3, #0d47a1)",border:"5px solid #d4af37",boxShadow:"0 0 50px rgba(33, 150, 243, 0.5), inset 0 0 30px rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"6rem",color:"rgba(255,255,255,0.2)",marginBottom:"1rem"},children:!(null!==Me&&void 0!==Me&&Me.foto_url)&&"\u6b66"}),(0,we.jsx)("h2",{style:{color:"#fff",fontSize:"1.6rem",fontWeight:700,textAlign:"center",margin:0,textShadow:"0 2px 10px rgba(0,0,0,0.5)",letterSpacing:"1px"},children:Me?`${Me.vorname} ${Me.nachname}`:"\u672a\u5b9a"}),(0,we.jsx)("p",{style:{color:"rgba(255,255,255,0.7)",fontSize:"0.95rem",marginTop:"0.4rem"},children:(null===Me||void 0===Me?void 0:Me.verein_name)||"\u2014"}),$&&(0,we.jsxs)("div",{style:{marginTop:"1.5rem",textAlign:"center"},children:[(0,we.jsx)("div",{style:{fontSize:"6rem",fontWeight:900,color:"#fff",textShadow:"0 0 40px rgba(33,150,243,0.8), 0 4px 20px rgba(0,0,0,0.5)",lineHeight:1},children:H}),(0,we.jsx)("div",{style:{display:"flex",justifyContent:"center",gap:"8px",marginTop:"1rem"},children:"kickboxing"===M?[1,2,3].map((e=>(0,we.jsx)("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:Q>=e?"#ffeb3b":"rgba(255,235,59,0.2)",border:"2px solid #ffeb3b",boxShadow:Q>=e?"0 0 10px rgba(255,235,59,0.6)":"none"}},e))):(0,we.jsxs)(we.Fragment,{children:[[1,2,3,4].map((e=>(0,we.jsx)("div",{style:{width:"18px",height:"18px",borderRadius:"3px",background:ne>=e?"#ff9800":"rgba(255,152,0,0.2)",border:"2px solid #ff9800"}},`c1-${e}`))),(0,we.jsx)("div",{style:{width:"8px"}}),[1,2,3,4].map((e=>(0,we.jsx)("div",{style:{width:"18px",height:"18px",borderRadius:"3px",background:ae>=e?"#9c27b0":"rgba(156,39,176,0.2)",border:"2px solid #9c27b0"}},`c2-${e}`)))]})})]})]}),(0,we.jsx)("div",{style:{flex:"1 1 46%",minWidth:"450px",background:"linear-gradient(180deg, #1a1510 0%, #0d0a07 100%)",display:"flex",flexDirection:"column",justifyContent:"center",padding:"1.5rem 2rem",gap:"0.6rem",borderLeft:"2px solid #3d2d1f",borderRight:"2px solid #3d2d1f",overflowY:"auto"},children:$?(0,we.jsxs)("div",{onClickCapture:Ce,style:{width:"100%"},children:[(0,we.jsxs)("div",{style:{textAlign:"center",background:be?"rgba(212,175,55,0.15)":"rgba(0,0,0,0.4)",border:be?"3px solid #d4af37":"2px solid #d4af37",borderRadius:"8px",padding:"0.8rem 1rem",marginBottom:"0.8rem",animation:be?"pulse 1.5s infinite":"none"},children:[(0,we.jsx)("div",{style:{color:be?"#FFD700":"#d4af37",fontSize:be?"1rem":"0.9rem",letterSpacing:be?"4px":"3px",marginBottom:"4px",fontWeight:be?800:600,textShadow:be?"0 0 20px rgba(255,215,0,0.8)":"none"},children:be?"\u26a1 GOLDEN POINT \u26a1":`ROUND ${A} / ${N}`}),(0,we.jsx)("div",{style:{fontSize:"3rem",fontWeight:900,fontFamily:"monospace",color:D<=10?"#ff4444":"#d4af37",textShadow:D<=10?"0 0 20px rgba(255,68,68,0.8)":"0 0 15px rgba(212,175,55,0.5)",marginBottom:"6px"},children:Re(D)}),(0,we.jsx)("button",{onClick:()=>{Ce(),P(!L)},style:{background:L?"rgba(76,175,80,0.3)":"rgba(255,152,0,0.3)",border:"1px solid "+(L?"#4CAF50":"#ff9800"),color:L?"#4CAF50":"#ff9800",padding:"8px 24px",borderRadius:"4px",cursor:"pointer",fontWeight:600,fontSize:"0.9rem"},children:L?"\u25b6 WEITER":"\u23f8 PAUSE"})]}),"kickboxing"===M?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("div",{style:{display:"flex",gap:"1rem",marginBottom:"0.8rem"},children:[(0,we.jsxs)("div",{style:{flex:1},children:[(0,we.jsx)("div",{style:{color:"#2196F3",fontSize:"0.95rem",textAlign:"center",fontWeight:700,marginBottom:"8px"},children:"AO PUNKTE"}),(0,we.jsx)("div",{style:{display:"flex",gap:"6px",marginBottom:"6px"},children:[1,2,3].map((e=>(0,we.jsxs)("button",{onClick:()=>Le(e),style:{flex:1,padding:"16px 8px",background:"rgba(33,150,243,0.25)",border:"2px solid #2196F3",color:"#2196F3",borderRadius:"6px",cursor:"pointer",fontWeight:800,fontSize:"1.4rem"},children:["+",e]},e)))}),(0,we.jsx)("div",{style:{display:"flex",gap:"5px"},children:[1,2,3].map((e=>(0,we.jsxs)("button",{onClick:()=>Oe(e),style:{flex:1,padding:"12px 8px",background:"rgba(255,235,59,0.15)",border:"2px solid #ffeb3b",color:"#ffeb3b",borderRadius:"5px",cursor:"pointer",fontWeight:700,fontSize:"1.2rem"},children:["\u2212",e]},e)))})]}),(0,we.jsxs)("div",{style:{flex:1},children:[(0,we.jsx)("div",{style:{color:"#f44336",fontSize:"0.95rem",textAlign:"center",fontWeight:700,marginBottom:"8px"},children:"AKA PUNKTE"}),(0,we.jsx)("div",{style:{display:"flex",gap:"6px",marginBottom:"6px"},children:[1,2,3].map((e=>(0,we.jsxs)("button",{onClick:()=>Pe(e),style:{flex:1,padding:"16px 8px",background:"rgba(244,67,54,0.25)",border:"2px solid #f44336",color:"#f44336",borderRadius:"6px",cursor:"pointer",fontWeight:800,fontSize:"1.4rem"},children:["+",e]},e)))}),(0,we.jsx)("div",{style:{display:"flex",gap:"6px"},children:[1,2,3].map((e=>(0,we.jsxs)("button",{onClick:()=>Ie(e),style:{flex:1,padding:"12px 8px",background:"rgba(255,235,59,0.15)",border:"2px solid #ffeb3b",color:"#ffeb3b",borderRadius:"5px",cursor:"pointer",fontWeight:700,fontSize:"1.2rem"},children:["\u2212",e]},e)))})]})]}),(0,we.jsxs)("div",{style:{display:"flex",gap:"1rem",background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:"0.8rem",border:"1px solid #3d2d1f"},children:[(0,we.jsxs)("div",{style:{flex:1},children:[(0,we.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"10px"},children:[(0,we.jsx)("span",{style:{color:"#888",fontSize:"0.8rem",fontWeight:600},children:"WARN"}),(0,we.jsx)("div",{style:{display:"flex",gap:"8px"},children:[1,2,3].map((e=>(0,we.jsx)("div",{onClick:()=>X(e===Q?e-1:e),style:{width:"28px",height:"28px",borderRadius:"50%",cursor:"pointer",background:Q>=e?"#ffeb3b":"rgba(255,235,59,0.2)",border:"2px solid #ffeb3b",boxShadow:Q>=e?"0 0 10px rgba(255,235,59,0.6)":"none"}},e)))})]}),(0,we.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,we.jsx)("button",{onClick:()=>Be(2,"KO"),style:{flex:1,padding:"12px 8px",background:"rgba(244,67,54,0.2)",border:"2px solid #f44336",color:"#f44336",borderRadius:"6px",cursor:"pointer",fontWeight:700,fontSize:"0.9rem"},children:"\ud83d\udca5 KO"}),(0,we.jsx)("button",{onClick:()=>Be(2,"TKO"),style:{flex:1,padding:"12px 8px",background:"rgba(255,152,0,0.2)",border:"2px solid #ff9800",color:"#ff9800",borderRadius:"6px",cursor:"pointer",fontWeight:600,fontSize:"0.9rem"},children:"\ud83d\uded1 TKO"})]})]}),(0,we.jsx)("div",{style:{width:"2px",background:"#3d2d1f"}}),(0,we.jsxs)("div",{style:{flex:1},children:[(0,we.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"10px"},children:[(0,we.jsx)("div",{style:{display:"flex",gap:"8px"},children:[1,2,3].map((e=>(0,we.jsx)("div",{onClick:()=>te(e===ee?e-1:e),style:{width:"28px",height:"28px",borderRadius:"50%",cursor:"pointer",background:ee>=e?"#ffeb3b":"rgba(255,235,59,0.2)",border:"2px solid #ffeb3b",boxShadow:ee>=e?"0 0 10px rgba(255,235,59,0.6)":"none"}},e)))}),(0,we.jsx)("span",{style:{color:"#888",fontSize:"0.8rem",fontWeight:600},children:"WARN"})]}),(0,we.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,we.jsx)("button",{onClick:()=>Be(1,"KO"),style:{flex:1,padding:"12px 8px",background:"rgba(244,67,54,0.2)",border:"2px solid #f44336",color:"#f44336",borderRadius:"6px",cursor:"pointer",fontWeight:700,fontSize:"0.9rem"},children:"\ud83d\udca5 KO"}),(0,we.jsx)("button",{onClick:()=>Be(1,"TKO"),style:{flex:1,padding:"12px 8px",background:"rgba(255,152,0,0.2)",border:"2px solid #ff9800",color:"#ff9800",borderRadius:"6px",cursor:"pointer",fontWeight:600,fontSize:"0.9rem"},children:"\ud83d\uded1 TKO"})]})]})]})]}):(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("div",{style:{display:"flex",gap:"1.5rem"},children:[(0,we.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"10px"},children:[(0,we.jsx)("div",{style:{color:"#2196F3",fontSize:"1.1rem",textAlign:"center",fontWeight:700,marginBottom:"4px"},children:"AO"}),(0,we.jsxs)("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[(0,we.jsx)("button",{onClick:()=>Oe(1),style:{width:"40px",padding:"10px",background:"rgba(0,0,0,0.3)",border:"1px solid #555",color:"#888",borderRadius:"6px",cursor:"pointer",fontWeight:700,fontSize:"1.2rem"},children:"\u2212"}),(0,we.jsx)("button",{onClick:()=>Le(1),style:{flex:1,padding:"14px",background:"rgba(33,150,243,0.2)",border:"2px solid #2196F3",color:"#2196F3",borderRadius:"8px",cursor:"pointer",fontWeight:700,fontSize:"1.1rem"},children:"YUKO +1"})]}),(0,we.jsxs)("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[(0,we.jsx)("button",{onClick:()=>Oe(2),style:{width:"40px",padding:"10px",background:"rgba(0,0,0,0.3)",border:"1px solid #555",color:"#888",borderRadius:"6px",cursor:"pointer",fontWeight:700,fontSize:"1.2rem"},children:"\u2212"}),(0,we.jsx)("button",{onClick:()=>Le(2),style:{flex:1,padding:"14px",background:"rgba(33,150,243,0.3)",border:"2px solid #2196F3",color:"#2196F3",borderRadius:"8px",cursor:"pointer",fontWeight:700,fontSize:"1.1rem"},children:"WAZA-ARI +2"})]}),(0,we.jsxs)("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[(0,we.jsx)("button",{onClick:()=>Oe(3),style:{width:"40px",padding:"10px",background:"rgba(0,0,0,0.3)",border:"1px solid #555",color:"#888",borderRadius:"6px",cursor:"pointer",fontWeight:700,fontSize:"1.2rem"},children:"\u2212"}),(0,we.jsx)("button",{onClick:()=>Le(3),style:{flex:1,padding:"14px",background:"rgba(33,150,243,0.4)",border:"3px solid #2196F3",color:"#2196F3",borderRadius:"8px",cursor:"pointer",fontWeight:800,fontSize:"1.2rem"},children:"IPPON +3"})]})]}),(0,we.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"10px"},children:[(0,we.jsx)("div",{style:{color:"#f44336",fontSize:"1.1rem",textAlign:"center",fontWeight:700,marginBottom:"4px"},children:"AKA"}),(0,we.jsxs)("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[(0,we.jsx)("button",{onClick:()=>Pe(1),style:{flex:1,padding:"14px",background:"rgba(244,67,54,0.2)",border:"2px solid #f44336",color:"#f44336",borderRadius:"8px",cursor:"pointer",fontWeight:700,fontSize:"1.1rem"},children:"YUKO +1"}),(0,we.jsx)("button",{onClick:()=>Ie(1),style:{width:"40px",padding:"10px",background:"rgba(0,0,0,0.3)",border:"1px solid #555",color:"#888",borderRadius:"6px",cursor:"pointer",fontWeight:700,fontSize:"1.2rem"},children:"\u2212"})]}),(0,we.jsxs)("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[(0,we.jsx)("button",{onClick:()=>Pe(2),style:{flex:1,padding:"14px",background:"rgba(244,67,54,0.3)",border:"2px solid #f44336",color:"#f44336",borderRadius:"8px",cursor:"pointer",fontWeight:700,fontSize:"1.1rem"},children:"WAZA-ARI +2"}),(0,we.jsx)("button",{onClick:()=>Ie(2),style:{width:"40px",padding:"10px",background:"rgba(0,0,0,0.3)",border:"1px solid #555",color:"#888",borderRadius:"6px",cursor:"pointer",fontWeight:700,fontSize:"1.2rem"},children:"\u2212"})]}),(0,we.jsxs)("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[(0,we.jsx)("button",{onClick:()=>Pe(3),style:{flex:1,padding:"14px",background:"rgba(244,67,54,0.4)",border:"3px solid #f44336",color:"#f44336",borderRadius:"8px",cursor:"pointer",fontWeight:800,fontSize:"1.2rem"},children:"IPPON +3"}),(0,we.jsx)("button",{onClick:()=>Ie(3),style:{width:"40px",padding:"10px",background:"rgba(0,0,0,0.3)",border:"1px solid #555",color:"#888",borderRadius:"6px",cursor:"pointer",fontWeight:700,fontSize:"1.2rem"},children:"\u2212"})]})]})]}),(0,we.jsxs)("div",{style:{display:"flex",gap:"1.5rem",marginTop:"1.2rem"},children:[(0,we.jsxs)("div",{style:{flex:1},children:[(0,we.jsx)("div",{style:{color:"#2196F3",fontSize:"0.9rem",textAlign:"center",marginBottom:"8px",fontWeight:600},children:"STRAFEN AO"}),(0,we.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,we.jsxs)("div",{style:{flex:1,textAlign:"center"},children:[(0,we.jsx)("div",{style:{color:"#ff9800",fontSize:"0.8rem",marginBottom:"6px",fontWeight:600},children:"C1 Kontakt"}),(0,we.jsx)("div",{style:{display:"flex",justifyContent:"center",gap:"5px"},children:[1,2,3,4].map((e=>(0,we.jsx)("div",{onClick:()=>{re(e===ne?e-1:e),e>ne&&Pe(1)},style:{width:"24px",height:"24px",borderRadius:"4px",cursor:"pointer",background:ne>=e?"#ff9800":"rgba(255,152,0,0.2)",border:"2px solid #ff9800",boxShadow:ne>=e?"0 0 8px rgba(255,152,0,0.5)":"none"}},e)))})]}),(0,we.jsxs)("div",{style:{flex:1,textAlign:"center"},children:[(0,we.jsx)("div",{style:{color:"#9c27b0",fontSize:"0.8rem",marginBottom:"6px",fontWeight:600},children:"C2 Verhalten"}),(0,we.jsx)("div",{style:{display:"flex",justifyContent:"center",gap:"5px"},children:[1,2,3,4].map((e=>(0,we.jsx)("div",{onClick:()=>{ie(e===ae?e-1:e),e>ae&&Pe(1)},style:{width:"24px",height:"24px",borderRadius:"4px",cursor:"pointer",background:ae>=e?"#9c27b0":"rgba(156,39,176,0.2)",border:"2px solid #9c27b0",boxShadow:ae>=e?"0 0 8px rgba(156,39,176,0.5)":"none"}},e)))})]})]})]}),(0,we.jsxs)("div",{style:{flex:1},children:[(0,we.jsx)("div",{style:{color:"#f44336",fontSize:"0.9rem",textAlign:"center",marginBottom:"8px",fontWeight:600},children:"STRAFEN AKA"}),(0,we.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,we.jsxs)("div",{style:{flex:1,textAlign:"center"},children:[(0,we.jsx)("div",{style:{color:"#ff9800",fontSize:"0.8rem",marginBottom:"6px",fontWeight:600},children:"C1 Kontakt"}),(0,we.jsx)("div",{style:{display:"flex",justifyContent:"center",gap:"5px"},children:[1,2,3,4].map((e=>(0,we.jsx)("div",{onClick:()=>{le(e===se?e-1:e),e>se&&Le(1)},style:{width:"24px",height:"24px",borderRadius:"4px",cursor:"pointer",background:se>=e?"#ff9800":"rgba(255,152,0,0.2)",border:"2px solid #ff9800",boxShadow:se>=e?"0 0 8px rgba(255,152,0,0.5)":"none"}},e)))})]}),(0,we.jsxs)("div",{style:{flex:1,textAlign:"center"},children:[(0,we.jsx)("div",{style:{color:"#9c27b0",fontSize:"0.8rem",marginBottom:"6px",fontWeight:600},children:"C2 Verhalten"}),(0,we.jsx)("div",{style:{display:"flex",justifyContent:"center",gap:"5px"},children:[1,2,3,4].map((e=>(0,we.jsx)("div",{onClick:()=>{ce(e===oe?e-1:e),e>oe&&Le(1)},style:{width:"24px",height:"24px",borderRadius:"4px",cursor:"pointer",background:oe>=e?"#9c27b0":"rgba(156,39,176,0.2)",border:"2px solid #9c27b0",boxShadow:oe>=e?"0 0 8px rgba(156,39,176,0.5)":"none"}},e)))})]})]})]})]}),(0,we.jsx)("div",{style:{color:"#888",fontSize:"0.75rem",textAlign:"center",marginTop:"10px"},children:"4 Strafen einer Kategorie = HANSOKU (Disqualifikation)"})]})]}):(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("div",{style:{textAlign:"center",marginBottom:"0.8rem"},children:[(0,we.jsx)("div",{style:{color:"#d4af37",fontSize:"0.8rem",letterSpacing:"4px",marginBottom:"4px"},children:"VERSUS"}),(0,we.jsxs)("div",{children:[(0,we.jsx)("span",{style:{color:"#2196F3",fontSize:"1.8rem",fontWeight:700,textShadow:"0 2px 10px rgba(33, 150, 243, 0.3)"},children:Me?`${Me.vorname} ${Me.nachname}`:"???"}),(0,we.jsx)("span",{style:{color:"#d4af37",fontSize:"2.2rem",margin:"0 1rem",fontWeight:900},children:"\u5bfe"}),(0,we.jsx)("span",{style:{color:"#f44336",fontSize:"1.8rem",fontWeight:700,textShadow:"0 2px 10px rgba(244, 67, 54, 0.3)"},children:Ke?`${Ke.vorname} ${Ke.nachname}`:"???"})]})]}),[{label:"AGE",v1:Me?Ve(Me.geburtsdatum):"?",v2:Ke?Ve(Ke.geburtsdatum):"?"},{label:"WEIGHT",v1:null!==Me&&void 0!==Me&&Me.gewicht?`${Me.gewicht}kg`:"?",v2:null!==Ke&&void 0!==Ke&&Ke.gewicht?`${Ke.gewicht}kg`:"?"},{label:"HEIGHT",v1:null!==Me&&void 0!==Me&&Me.groesse?`${Me.groesse}cm`:"?",v2:null!==Ke&&void 0!==Ke&&Ke.groesse?`${Ke.groesse}cm`:"?"},{label:"DOJO",v1:(null===Me||void 0===Me||null===(t=Me.verein_name)||void 0===t?void 0:t.substring(0,15))||"\u2014",v2:(null===Ke||void 0===Ke||null===(n=Ke.verein_name)||void 0===n?void 0:n.substring(0,15))||"\u2014"}].map(((e,t)=>(0,we.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.7rem 1.2rem",background:"rgba(61, 45, 31, 0.3)",borderRadius:"6px",border:"1px solid #3d2d1f"},children:[(0,we.jsx)("span",{style:{color:"#2196F3",fontSize:"1.3rem",fontWeight:700,width:"110px",textAlign:"center"},children:e.v1}),(0,we.jsx)("span",{style:{color:"#c4b89a",fontSize:"1.1rem",letterSpacing:"2px",textAlign:"center",fontWeight:600},children:e.label}),(0,we.jsx)("span",{style:{color:"#f44336",fontSize:"1.3rem",fontWeight:700,width:"110px",textAlign:"center"},children:e.v2})]},t))),(0,we.jsxs)("div",{style:{display:"flex",gap:"0.8rem",marginTop:"0.8rem"},children:[(0,we.jsx)("button",{onClick:()=>{x(!g),p&&p(o.kampf_id,!g)},style:{flex:1,background:"rgba(61, 45, 31, 0.5)",border:"1px solid #5c4033",color:"#c4b89a",padding:"12px 16px",borderRadius:"6px",cursor:"pointer",fontWeight:600,fontSize:"0.95rem"},children:"\u21c4 SWAP"}),Me&&Ke&&(0,we.jsx)("button",{onClick:()=>y(!j),style:{flex:1,background:"finished"===o.status?"rgba(76,175,80,0.15)":"rgba(212, 175, 55, 0.15)",border:"1px solid "+("finished"===o.status?"#4CAF50":"#d4af37"),color:"finished"===o.status?"#4CAF50":"#d4af37",padding:"12px 16px",borderRadius:"6px",cursor:"pointer",fontWeight:600,fontSize:"0.95rem"},children:"finished"===o.status?"\u2713 ERGEBNIS":"\ud83c\udfc6 RESULT"})]}),j&&(0,we.jsxs)("div",{style:{background:"rgba(0,0,0,0.4)",padding:"1.2rem",borderRadius:"8px",border:"1px solid #d4af37"},children:[(0,we.jsx)("div",{style:{color:"#d4af37",fontSize:"0.9rem",textAlign:"center",marginBottom:"1rem",letterSpacing:"2px"},children:"\u7d50\u679c ERGEBNIS"}),(0,we.jsxs)("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem",alignItems:"center"},children:[(0,we.jsxs)("div",{style:{flex:1,textAlign:"center"},children:[(0,we.jsx)("div",{style:{color:"#2196F3",fontSize:"0.8rem",marginBottom:"4px"},children:(null===Me||void 0===Me?void 0:Me.vorname)||"AO"}),(0,we.jsx)("input",{type:"number",value:k.punkte_kaempfer1,onChange:e=>w({...k,punkte_kaempfer1:parseInt(e.target.value)||0}),style:{width:"80px",background:"rgba(33,150,243,0.2)",border:"2px solid #2196F3",color:"#2196F3",padding:"12px",borderRadius:"8px",fontSize:"1.5rem",fontWeight:700,textAlign:"center"}})]}),(0,we.jsx)("div",{style:{color:"#d4af37",fontSize:"1.5rem",fontWeight:700},children:":"}),(0,we.jsxs)("div",{style:{flex:1,textAlign:"center"},children:[(0,we.jsx)("div",{style:{color:"#f44336",fontSize:"0.8rem",marginBottom:"4px"},children:(null===Ke||void 0===Ke?void 0:Ke.vorname)||"AKA"}),(0,we.jsx)("input",{type:"number",value:k.punkte_kaempfer2,onChange:e=>w({...k,punkte_kaempfer2:parseInt(e.target.value)||0}),style:{width:"80px",background:"rgba(244,67,54,0.2)",border:"2px solid #f44336",color:"#f44336",padding:"12px",borderRadius:"8px",fontSize:"1.5rem",fontWeight:700,textAlign:"center"}})]})]}),(0,we.jsx)("div",{style:{color:"#888",fontSize:"0.8rem",textAlign:"center",marginBottom:"8px"},children:"SIEGER W\xc4HLEN"}),(0,we.jsxs)("div",{style:{display:"flex",gap:"0.8rem",marginBottom:"1rem"},children:[(0,we.jsxs)("button",{onClick:()=>w({...k,gewinner_id:g?o.kaempfer2_id:o.kaempfer1_id}),style:{flex:1,padding:"14px",background:k.gewinner_id===(g?o.kaempfer2_id:o.kaempfer1_id)?"rgba(33,150,243,0.4)":"rgba(33,150,243,0.1)",border:"2px solid "+(k.gewinner_id===(g?o.kaempfer2_id:o.kaempfer1_id)?"#2196F3":"#555"),color:k.gewinner_id===(g?o.kaempfer2_id:o.kaempfer1_id)?"#2196F3":"#888",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:700},children:["\ud83c\udfc6 ",null===Me||void 0===Me?void 0:Me.vorname," \u52dd"]}),(0,we.jsxs)("button",{onClick:()=>w({...k,gewinner_id:g?o.kaempfer1_id:o.kaempfer2_id}),style:{flex:1,padding:"14px",background:k.gewinner_id===(g?o.kaempfer1_id:o.kaempfer2_id)?"rgba(244,67,54,0.4)":"rgba(244,67,54,0.1)",border:"2px solid "+(k.gewinner_id===(g?o.kaempfer1_id:o.kaempfer2_id)?"#f44336":"#555"),color:k.gewinner_id===(g?o.kaempfer1_id:o.kaempfer2_id)?"#f44336":"#888",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:700},children:["\ud83c\udfc6 ",null===Ke||void 0===Ke?void 0:Ke.vorname," \u52dd"]})]}),(0,we.jsx)("button",{onClick:()=>{m&&k.gewinner_id&&m({...k,gewinner_id:parseInt(k.gewinner_id)})},disabled:!k.gewinner_id,style:{width:"100%",padding:"14px",background:k.gewinner_id?"linear-gradient(180deg, rgba(76,175,80,0.4), rgba(46,125,50,0.5))":"rgba(85,85,85,0.3)",border:"2px solid "+(k.gewinner_id?"#4CAF50":"#555"),color:k.gewinner_id?"#4CAF50":"#888",borderRadius:"8px",cursor:k.gewinner_id?"pointer":"not-allowed",fontWeight:700,fontSize:"1.1rem"},children:"\u4fdd\u5b58 SPEICHERN"})]})]})}),(0,we.jsxs)("div",{style:{flex:"1 1 27%",minWidth:"280px",background:"linear-gradient(135deg, #8B0000 0%, #c62828 50%, #8B0000 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1rem",position:"relative",borderLeft:"2px solid #1a1510"},children:[(0,we.jsx)("div",{style:{position:"absolute",top:15,right:15,background:"linear-gradient(135deg, #f44336, #c62828)",color:"#fff",padding:"8px 20px",fontWeight:700,fontSize:"1rem",letterSpacing:"3px",boxShadow:"0 4px 15px rgba(244, 67, 54, 0.4)",border:"2px solid rgba(255,255,255,0.3)"},children:"\u8d64 AKA"}),(0,we.jsx)("div",{style:{width:"220px",height:"220px",borderRadius:"50%",background:null!==Ke&&void 0!==Ke&&Ke.foto_url?`url(${Ke.foto_url}) center/cover`:"linear-gradient(135deg, #f44336, #b71c1c)",border:"5px solid #d4af37",boxShadow:"0 0 50px rgba(244, 67, 54, 0.5), inset 0 0 30px rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"6rem",color:"rgba(255,255,255,0.2)",marginBottom:"1rem"},children:!(null!==Ke&&void 0!==Ke&&Ke.foto_url)&&"\u58eb"}),(0,we.jsx)("h2",{style:{color:"#fff",fontSize:"1.6rem",fontWeight:700,textAlign:"center",margin:0,textShadow:"0 2px 10px rgba(0,0,0,0.5)",letterSpacing:"1px"},children:Ke?`${Ke.vorname} ${Ke.nachname}`:"\u672a\u5b9a"}),(0,we.jsx)("p",{style:{color:"rgba(255,255,255,0.7)",fontSize:"0.95rem",marginTop:"0.4rem"},children:(null===Ke||void 0===Ke?void 0:Ke.verein_name)||"\u2014"}),$&&(0,we.jsxs)("div",{style:{marginTop:"1.5rem",textAlign:"center"},children:[(0,we.jsx)("div",{style:{fontSize:"6rem",fontWeight:900,color:"#fff",textShadow:"0 0 40px rgba(244,67,54,0.8), 0 4px 20px rgba(0,0,0,0.5)",lineHeight:1},children:Z}),(0,we.jsx)("div",{style:{display:"flex",justifyContent:"center",gap:"8px",marginTop:"1rem"},children:"kickboxing"===M?[1,2,3].map((e=>(0,we.jsx)("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:ee>=e?"#ffeb3b":"rgba(255,235,59,0.2)",border:"2px solid #ffeb3b",boxShadow:ee>=e?"0 0 10px rgba(255,235,59,0.6)":"none"}},e))):(0,we.jsxs)(we.Fragment,{children:[[1,2,3,4].map((e=>(0,we.jsx)("div",{style:{width:"18px",height:"18px",borderRadius:"3px",background:se>=e?"#ff9800":"rgba(255,152,0,0.2)",border:"2px solid #ff9800"}},`c1-${e}`))),(0,we.jsx)("div",{style:{width:"8px"}}),[1,2,3,4].map((e=>(0,we.jsx)("div",{style:{width:"18px",height:"18px",borderRadius:"3px",background:oe>=e?"#9c27b0":"rgba(156,39,176,0.2)",border:"2px solid #9c27b0"}},`c2-${e}`)))]})})]})]})]}),(0,we.jsxs)("div",{style:{background:"linear-gradient(180deg, #1a1510 0%, #0d0a07 100%)",padding:"0.8rem 2rem",borderTop:"3px solid #d4af37",display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative"},children:[(0,we.jsx)("button",{onClick:()=>Ne(!ke),style:{width:"36px",height:"36px",borderRadius:"50%",background:ke?"rgba(244,67,54,0.3)":"rgba(76,175,80,0.3)",border:"2px solid "+(ke?"#f44336":"#4CAF50"),color:ke?"#f44336":"#4CAF50",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.1rem",transition:"all 0.2s ease"},title:ke?"Ton einschalten":"Ton ausschalten",children:ke?"\ud83d\udd07":"\ud83d\udd14"}),(0,we.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,we.jsx)("span",{style:{color:"#888",fontSize:"0.9rem",letterSpacing:"2px"},children:"NEXT:"}),Ue?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("span",{style:{color:"#2196F3",fontWeight:700,fontSize:"1.2rem"},children:[null===(r=Ue.fighter1)||void 0===r?void 0:r.vorname," ",null===(a=Ue.fighter1)||void 0===a?void 0:a.nachname]}),(0,we.jsx)("span",{style:{color:"#d4af37",fontWeight:700,fontSize:"1.2rem"},children:"vs"}),(0,we.jsxs)("span",{style:{color:"#f44336",fontWeight:700,fontSize:"1.2rem"},children:[null===(i=Ue.fighter2)||void 0===i?void 0:i.vorname," ",null===(l=Ue.fighter2)||void 0===l?void 0:l.nachname]})]}):(0,we.jsx)("span",{style:{color:"#666",fontSize:"1rem",fontStyle:"italic"},children:"\u2014 Kein weiterer Kampf \u2014"})]}),(0,we.jsx)("div",{style:{width:"36px"}})]})]});return kl.createPortal(He,document.body)}const El=function(){const[e,t]=(0,s.useState)([]),[n,r]=(0,s.useState)(null),[a,i]=(0,s.useState)(!0),[l,o]=(0,s.useState)(null),[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(null),[m,p]=(0,s.useState)([]),[f,g]=(0,s.useState)([]),[x,v]=(0,s.useState)(null),[b,j]=(0,s.useState)(!1);(0,s.useEffect)((()=>{y(),k(),w()}),[]);const y=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/turniere",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json(),n=e.data||e||[];g(Array.isArray(n)?n:[]),n.length>0&&v(n[0])}}catch(Zo){console.error("Fehler beim Laden der Turniere:",Zo)}},k=async()=>{try{const e=localStorage.getItem("token"),n=await fetch("/api/brackets",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!n.ok)throw new Error("Fehler beim Abrufen der Brackets");const r=await n.json(),a=r.data||r||[];t(Array.isArray(a)?a:[]),i(!1)}catch(Zo){console.error("Fehler:",Zo),o(Zo.message),i(!1)}},w=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/wettkaempfer",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json();p(Array.isArray(e)?e:[])}}catch(Zo){console.error("Fehler beim Laden der Wettk\xe4mpfer:",Zo)}},N=async e=>{try{const t=localStorage.getItem("token"),n=await fetch(`/api/brackets/${e}`,{headers:{Authorization:`Bearer ${t}`}});if(n.ok){const e=await n.json(),t=e.data||e;h({bracket:t.bracket,teilnehmer:t.teilnehmer||[],kaempfe:t.kaempfe||[]})}}catch(Zo){console.error("Fehler beim Laden der Bracket-Details:",Zo)}};return a?(0,we.jsxs)("div",{className:"bracket-loading",children:[(0,we.jsx)("div",{className:"loading-spinner",children:"\u23f3"}),(0,we.jsx)("p",{children:"Brackets werden geladen..."})]}):l?(0,we.jsxs)("div",{className:"bracket-error",children:[(0,we.jsx)("h3",{children:"\u274c Fehler"}),(0,we.jsx)("p",{children:l}),(0,we.jsx)("button",{onClick:k,children:"Erneut versuchen"})]}):(0,we.jsxs)("div",{className:"bracket-dashboard",children:[n?(0,we.jsx)(_l,{bracket:n,details:u,availableFighters:m,allBrackets:e,onBack:()=>{r(null),h(null)},onAddParticipants:async(e,t)=>{try{const n=localStorage.getItem("token");if(!(await fetch(`/api/brackets/${e}/teilnehmer`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({wettkaempfer_ids:t.map((e=>e.wettkaempfer_id)),seed_positions:t.map(((e,t)=>t+1))})})).ok)throw new Error("Fehler beim Hinzuf\xfcgen der Teilnehmer");await N(e)}catch(Zo){console.error("Fehler:",Zo),o(Zo.message)}},onGenerateBracket:async e=>{try{const t=localStorage.getItem("token");if(!(await fetch(`/api/brackets/${e}/generate`,{method:"POST",headers:{Authorization:`Bearer ${t}`}})).ok)throw new Error("Fehler beim Generieren des Brackets");await N(e)}catch(Zo){console.error("Fehler:",Zo),o(Zo.message)}},onUpdateFightResult:async(e,t)=>{try{const r=localStorage.getItem("token");if(!(await fetch(`/api/brackets/kampf/${e}/result`,{method:"PUT",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw new Error("Fehler beim Aktualisieren des Kampfergebnisses");await N(n.bracket_id)}catch(Zo){console.error("Fehler:",Zo),o(Zo.message)}},onSplitBracket:async(e,t)=>{try{const n=localStorage.getItem("token"),a=await fetch(`/api/brackets/${e}/split`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({splitType:t})}),i=await a.json();if(!a.ok||!i.success)throw new Error(i.message||"Fehler beim Splitten");alert(`Division erfolgreich geteilt!\nGruppe A: ${i.data.originalBracket.participants} Teilnehmer\nGruppe B: ${i.data.newBracket.participants} Teilnehmer`),r(null),h(null),await k()}catch(Zo){console.error("Fehler:",Zo),alert("Fehler: "+Zo.message)}},onMergeBrackets:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{const a=localStorage.getItem("token"),i=await fetch("/api/brackets/merge",{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({sourceBracketId:e,targetBracketId:t,newName:n})}),s=await i.json();if(!i.ok||!s.success)throw new Error(s.message||"Fehler beim Zusammenf\xfchren");alert(`Brackets erfolgreich zusammengef\xfchrt!\n${s.data.totalParticipants} Teilnehmer im neuen Bracket`),r(null),h(null),await k()}catch(Zo){console.error("Fehler:",Zo),alert("Fehler: "+Zo.message)}},onMoveParticipant:async(e,t,r)=>{try{const a=localStorage.getItem("token"),i=await fetch("/api/brackets/move-participant",{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({wettkaempferId:e,sourceBracketId:t,targetBracketId:r})}),s=await i.json();if(!i.ok||!s.success)throw new Error(s.message||"Fehler beim Verschieben");alert("Teilnehmer erfolgreich verschoben!"),await N(n.bracket_id),await k()}catch(Zo){console.error("Fehler:",Zo),alert("Fehler: "+Zo.message)}},onUpdateTournamentMode:async(e,t)=>{try{const n=localStorage.getItem("token"),a=await fetch(`/api/brackets/${e}/mode`,{method:"PUT",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({tournament_mode:t})}),i=await a.json();if(!a.ok||!i.success)throw new Error(i.message||"Fehler beim Aktualisieren");await N(e),await k(),r((e=>e?{...e,tournament_mode:t}:e))}catch(Zo){console.error("Fehler:",Zo),alert("Fehler: "+Zo.message)}},onResetBracket:async(e,t)=>{try{const n=localStorage.getItem("token"),r=await fetch(`/api/brackets/${e}/reset`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({confirm:"RESET"})}),a=await r.json();if(!r.ok||!a.success)throw new Error(a.message||"Fehler beim Zur\xfccksetzen");alert(`Bracket "${t}" wurde zur\xfcckgesetzt!\n${a.data.deleted_kaempfe} K\xe4mpfe gel\xf6scht.`),await N(e),await k()}catch(Zo){console.error("Fehler:",Zo),alert("Fehler: "+Zo.message)}}}):(0,we.jsx)(Sl,{brackets:e,turniere:f,selectedTurnier:x,onSelectTurnier:v,onSelectBracket:e=>{r(e),N(e.bracket_id)},onCreateBracket:()=>d(!0),onAutoGenerate:async()=>{if(!x)return void alert("Bitte w\xe4hlen Sie zuerst ein Turnier aus.");const t=e.length>0;if(t){if(!window.confirm("Es existieren bereits Brackets. M\xf6chten Sie alle l\xf6schen und neu generieren?"))return}j(!0);try{const e=localStorage.getItem("token"),n=await fetch(`/api/brackets/turnier/${x.turnier_id}/auto-generate`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({force:t})}),r=await n.json();if(!n.ok||!r.success)throw new Error(r.message||"Fehler bei der Generierung");alert(`${r.data.brackets_erstellt} Brackets erfolgreich generiert!`),await k()}catch(Zo){console.error("Fehler:",Zo),alert("Fehler: "+Zo.message)}finally{j(!1)}},generating:b}),c&&(0,we.jsx)(zl,{onSave:async e=>{try{const t=localStorage.getItem("token");if(!(await fetch("/api/brackets",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw new Error("Fehler beim Erstellen des Brackets");await k(),d(!1)}catch(Zo){console.error("Fehler:",Zo),o(Zo.message)}},onClose:()=>d(!1)})]})};const Dl=function(){const e=ne(),[t,n]=(0,s.useState)([]),[r,a]=(0,s.useState)(!0),[i,l]=(0,s.useState)(null),[o,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[h,m]=(0,s.useState)({total:0,upcoming:0,active:0,completed:0,vereine:0,wettkaempfer:0});(0,s.useEffect)((()=>{f(),p()}),[]);const p=async()=>{try{const e={Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},[t,n]=await Promise.all([fetch("/api/vereine",{headers:e}).catch((()=>null)),fetch("/api/wettkaempfer/admin/stats",{headers:e}).catch((()=>null))]);let r=0,a=0;if(null!==t&&void 0!==t&&t.ok){const e=await t.json();e.success&&Array.isArray(e.data)?r=e.data.length:Array.isArray(e)?r=e.length:void 0!==e.count&&(r=e.count)}if(null!==n&&void 0!==n&&n.ok){const e=await n.json();a=e.totalWettkaempfer||e.total||e.count||0}m((e=>({...e,vereine:r,wettkaempfer:a})))}catch(Zo){console.error("Fehler beim Laden der Extra-Statistiken:",Zo)}};(0,s.useEffect)((()=>{g()}),[t]);const f=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/turniere",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Fehler beim Abrufen der Turniere");const r=await t.json();let i=[];r.success&&r.data?i=Array.isArray(r.data)?r.data:[]:Array.isArray(r)&&(i=r);const s=await Promise.all(i.map((async t=>{try{const n=await fetch(`/api/turniere/${t.turnier_id}/kategorien`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(n.ok){const e=await n.json();return{...t,kategorien:e.data||e||[]}}}catch(n){console.error("Fehler beim Laden der Kategorien f\xfcr Turnier",t.turnier_id,n)}return{...t,kategorien:[]}})));n(s),a(!1)}catch(Zo){console.error("Fehler:",Zo),l(Zo.message),a(!1)}},g=()=>{if(!t.length)return;const e=new Date,n={...h,total:t.length,upcoming:t.filter((t=>new Date(t.start_datum||t.datum)>e)).length,active:t.filter((t=>{const n=new Date(t.start_datum||t.datum),r=new Date(t.end_datum||t.datum);return n<=e&&e<=r})).length,completed:t.filter((t=>new Date(t.end_datum||t.datum)<e)).length};m(n)},x=()=>{e("/dashboard/turnier-bearbeiten/neu")},v=e=>{const t=new Date,n=new Date(e.start_datum||e.datum),r=new Date(e.end_datum||e.datum);return n>t?"upcoming":n<=t&&t<=r?"active":"completed"},b=e=>{if(!e)return"TBD";try{const t=new Date(e);return isNaN(t.getTime())?"TBD":t.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})}catch{return"TBD"}},j=e=>({kumite:"Kumite",kata:"Kata",formen:"Formen",point_fighting:"Point Fighting",kickboxen:"Kickboxen",light_contact:"Light Contact",full_contact:"Full Contact",musical_forms:"Musical Forms",weapons:"Waffen",team:"Team"}[e]||e);if(r)return(0,we.jsx)("div",{className:"turnier-dashboard",children:(0,we.jsxs)("div",{className:"dashboard-loading",children:[(0,we.jsx)("div",{className:"loading-spinner",children:"\u23f3"}),(0,we.jsx)("p",{children:"Turniere werden geladen..."})]})});if(i)return(0,we.jsx)("div",{className:"turnier-dashboard",children:(0,we.jsxs)("div",{className:"dashboard-error",children:[(0,we.jsx)("h3",{children:"Fehler"}),(0,we.jsx)("p",{children:i}),(0,we.jsx)("button",{className:"btn btn-primary",onClick:f,children:"Erneut versuchen"})]})});const y=t.filter((e=>{const t=e.name.toLowerCase().includes(o.toLowerCase()),n=!d||v(e)===d;return t&&n}));return(0,we.jsxs)("div",{className:"turnier-dashboard",children:[(0,we.jsxs)("div",{className:"dashboard-header",children:[(0,we.jsxs)("div",{className:"header-title",children:[(0,we.jsx)("h1",{children:"Turnierverwaltung"}),(0,we.jsx)("p",{children:"Erstellen und verwalten Sie Ihre Turniere"})]}),(0,we.jsxs)("div",{className:"header-actions",children:[(0,we.jsx)("div",{className:"search-box",children:(0,we.jsx)("input",{type:"text",placeholder:"Turnier suchen...",value:o,onChange:e=>c(e.target.value)})}),(0,we.jsxs)("select",{className:"filter-select",value:d,onChange:e=>u(e.target.value),children:[(0,we.jsx)("option",{value:"",children:"Alle Status"}),(0,we.jsx)("option",{value:"upcoming",children:"Geplant"}),(0,we.jsx)("option",{value:"active",children:"Laufend"}),(0,we.jsx)("option",{value:"completed",children:"Abgeschlossen"})]}),(0,we.jsx)("button",{className:"btn btn-primary",onClick:x,children:"+ Neues Turnier"})]})]}),(0,we.jsxs)("div",{className:"stats-grid",children:[(0,we.jsxs)("div",{className:"stat-card",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\ud83c\udfc6"}),(0,we.jsxs)("div",{className:"stat-content",children:[(0,we.jsx)("h3",{children:h.total}),(0,we.jsx)("p",{children:"Turniere gesamt"})]})]}),(0,we.jsxs)("div",{className:"stat-card",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\ud83d\udcc5"}),(0,we.jsxs)("div",{className:"stat-content",children:[(0,we.jsx)("h3",{children:h.upcoming}),(0,we.jsx)("p",{children:"Geplant"})]})]}),(0,we.jsxs)("div",{className:"stat-card",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\u26a1"}),(0,we.jsxs)("div",{className:"stat-content",children:[(0,we.jsx)("h3",{children:h.active}),(0,we.jsx)("p",{children:"Laufend"})]})]}),(0,we.jsxs)("div",{className:"stat-card",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\u2705"}),(0,we.jsxs)("div",{className:"stat-content",children:[(0,we.jsx)("h3",{children:h.completed}),(0,we.jsx)("p",{children:"Abgeschlossen"})]})]}),(0,we.jsxs)("div",{className:"stat-card",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\ud83c\udfdb\ufe0f"}),(0,we.jsxs)("div",{className:"stat-content",children:[(0,we.jsx)("h3",{children:h.vereine}),(0,we.jsx)("p",{children:"Vereine"})]})]}),(0,we.jsxs)("div",{className:"stat-card",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\ud83e\udd4b"}),(0,we.jsxs)("div",{className:"stat-content",children:[(0,we.jsx)("h3",{children:h.wettkaempfer}),(0,we.jsx)("p",{children:"Wettk\xe4mpfer"})]})]})]}),0===y.length?(0,we.jsxs)("div",{className:"empty-state",children:[(0,we.jsx)("div",{className:"empty-icon",children:"\ud83d\udccb"}),(0,we.jsx)("h3",{children:"Keine Turniere gefunden"}),(0,we.jsx)("p",{children:"Erstellen Sie ein neues Turnier, um zu beginnen."}),(0,we.jsx)("button",{className:"btn btn-primary",onClick:x,children:"+ Neues Turnier erstellen"})]}):(0,we.jsx)("div",{className:"turnier-grid",children:y.map((t=>{const r=(e=>{switch(e){case"upcoming":return{text:"Geplant",class:"status-upcoming"};case"active":return{text:"Laufend",class:"status-active"};case"completed":return{text:"Abgeschlossen",class:"status-completed"};default:return{text:"Unbekannt",class:""}}})(v(t));return(0,we.jsxs)("div",{className:"turnier-card",children:[(0,we.jsxs)("div",{className:"card-header",children:[(0,we.jsxs)("div",{className:"card-title",children:[(0,we.jsx)("h3",{children:t.name}),(0,we.jsx)("span",{className:"card-subtitle",children:t.disziplin||t.sportart||"Kampfsport"})]}),(0,we.jsx)("span",{className:`status-badge ${r.class}`,children:r.text})]}),(0,we.jsxs)("div",{className:"card-body",children:[(0,we.jsxs)("div",{className:"info-row",children:[(0,we.jsx)("span",{className:"info-icon",children:"\ud83d\udcc5"}),(0,we.jsx)("span",{className:"info-label",children:"Datum:"}),(0,we.jsxs)("span",{className:"info-value",children:[b(t.datum||t.start_datum),t.end_datum&&t.end_datum!==t.datum&&` - ${b(t.end_datum)}`]})]}),(0,we.jsxs)("div",{className:"info-row",children:[(0,we.jsx)("span",{className:"info-icon",children:"\ud83d\udccd"}),(0,we.jsx)("span",{className:"info-label",children:"Ort:"}),(0,we.jsx)("span",{className:"info-value",children:t.ort||"TBD"})]}),(0,we.jsxs)("div",{className:"info-row",children:[(0,we.jsx)("span",{className:"info-icon",children:"\ud83d\udc65"}),(0,we.jsx)("span",{className:"info-label",children:"Max. Teilnehmer:"}),(0,we.jsx)("span",{className:"info-value",children:t.max_teilnehmer||"\u221e"})]}),(0,we.jsxs)("div",{className:"kategorien-row",children:[(0,we.jsx)("div",{className:"kategorien-label",children:"Kategorien"}),t.kategorien&&t.kategorien.length>0?(0,we.jsx)("div",{className:"kategorien-tags",children:t.kategorien.map(((e,t)=>(0,we.jsx)("span",{className:"kategorie-tag",children:j("string"===typeof e?e:e.kategorie)},t)))}):(0,we.jsx)("span",{className:"no-kategorien",children:"Keine Kategorien definiert"})]})]}),(0,we.jsxs)("div",{className:"card-footer",children:[(0,we.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>(async e=>{if(window.confirm("Sind Sie sicher, dass Sie dieses Turnier l\xf6schen m\xf6chten?"))try{const t=localStorage.getItem("token");if(!(await fetch(`/api/turniere/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok)throw new Error("Fehler beim L\xf6schen des Turniers");await f()}catch(Zo){console.error("Fehler:",Zo),l(Zo.message)}})(t.turnier_id),children:"\ud83d\uddd1\ufe0f L\xf6schen"}),(0,we.jsx)("button",{className:"btn btn-sm "+(t.veroeffentlicht?"btn-success":"btn-warning"),onClick:()=>(async e=>{try{const t=localStorage.getItem("token"),r=!e.veroeffentlicht;if(!(await fetch(`/api/turniere/${e.turnier_id}/veroeffentlichen`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({veroeffentlicht:r})})).ok)throw new Error("Fehler beim \xc4ndern der Sichtbarkeit");n((t=>t.map((t=>t.turnier_id===e.turnier_id?{...t,veroeffentlicht:r?1:0}:t))))}catch(Zo){console.error("Fehler:",Zo),alert("Fehler: "+Zo.message)}})(t),title:t.veroeffentlicht?"Turnier verbergen":"Turnier ver\xf6ffentlichen",children:t.veroeffentlicht?"\ud83c\udf10 Online":"\ud83d\udd12 Privat"}),(0,we.jsx)("button",{className:"btn btn-primary btn-sm",onClick:()=>(t=>{e(`/dashboard/turnier-bearbeiten/${t.turnier_id}`,{state:{turnier:t}})})(t),children:"\u270f\ufe0f Bearbeiten"})]})]},t.turnier_id)}))})]})};function Bl(e){let{stream:t}=e;const n=[{icon:"\ud83d\udcc5",text:(r=t.start_time,new Date(r).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))},{icon:"\u23f1\ufe0f",text:((e,t)=>{if(!t)return"L\xe4uft...";const n=new Date(t)-new Date(e),r=Math.floor(n/36e5),a=Math.floor(n%36e5/6e4);return r>0?`${r}h ${a}m`:`${a}m`})(t.start_time,t.end_time)},{icon:"\ud83d\udc41\ufe0f",text:`${t.max_viewers||0} Peak`}];var r;const a=[{icon:t.is_active?"\ud83d\udd34":"\u23f9\ufe0f",onClick:()=>alert("Stream-Details werden ge\xf6ffnet..."),title:t.is_active?"Live":"Beendet",variant:t.is_active?"success":"secondary"}];return(0,we.jsx)(vl,{title:t.title,subtitle:t.description,meta:n,actions:a,size:"medium",variant:t.is_active?"success":"default"})}const Rl=function(){const[e,t]=(0,s.useState)([]),[n,r]=(0,s.useState)(!0),[a,i]=(0,s.useState)(null),[l,o]=(0,s.useState)({totalStreams:0,activeStreams:0,totalViewers:0,todayViews:0}),[c,d]=(0,s.useState)([]),[u,h]=(0,s.useState)("dashboard"),[m,p]=(0,s.useState)(-1),f=(0,s.useCallback)((async()=>{try{const e=localStorage.getItem("token"),n=await fetch("/api/streaming/channels",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!n.ok){const e=[{session_id:1,title:"Demo Stream 1",description:"Karate Turnier Ring 1",start_time:(new Date).toISOString(),is_active:!0,max_viewers:45},{session_id:2,title:"Demo Stream 2",description:"Judo Turnier Ring 2",start_time:new Date(Date.now()-36e5).toISOString(),end_time:(new Date).toISOString(),is_active:!1,max_viewers:32}];return t(e),void r(!1)}const a=await n.json();t(Array.isArray(a)?a:[]),r(!1)}catch(Zo){console.error("Fehler:",Zo);const n=[{session_id:1,title:"Demo Stream 1",description:"Karate Turnier Ring 1",start_time:(new Date).toISOString(),is_active:!0,max_viewers:45}];t(n),i(null),r(!1)}}),[]),g=(0,s.useCallback)((()=>{const t=e.filter((e=>e.is_active)).length,n=e.reduce(((e,t)=>e+(t.current_viewers||0)),0);o({totalStreams:e.length,activeStreams:t,totalViewers:n,todayViews:e.reduce(((e,t)=>e+(t.today_views||Math.floor(100*Math.random()))),0)})}),[e]),x=(0,s.useCallback)((()=>{t([]),o({totalStreams:0,activeStreams:0,totalViewers:0,todayViews:0}),i(null)}),[]),v=(0,s.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[...c];m<n.length-1&&n.splice(m+1),n.push({view:e,data:t,timestamp:Date.now()}),d(n),p(n.length-1),h(e)}),[c,m]),b=(0,s.useCallback)((()=>{if(m>0){const e=m-1;p(e);const t=c[e];h(t.view),t.data&&console.log("Navigating back to:",t)}}),[m,c]),j=(0,s.useCallback)((()=>{if(m<c.length-1){const e=m+1;p(e);const t=c[e];h(t.view),t.data&&console.log("Navigating forward to:",t)}}),[m,c]),y=(0,s.useCallback)((e=>{3===e.button?(e.preventDefault(),b()):4===e.button&&(e.preventDefault(),j())}),[b,j]),k=(0,s.useCallback)((e=>{if(e.altKey&&("ArrowLeft"===e.key?(e.preventDefault(),b()):"ArrowRight"===e.key&&(e.preventDefault(),j())),e.ctrlKey||e.metaKey)switch(e.key){case"r":e.preventDefault(),x();break;case"f":e.preventDefault(),f()}}),[b,j,x,f]);return(0,s.useEffect)((()=>{f(),v("dashboard")}),[f,v]),(0,s.useEffect)((()=>{g()}),[g]),(0,s.useEffect)((()=>{const e=e=>y(e),t=e=>k(e);return document.addEventListener("mousedown",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",t)}}),[k,y]),n?(0,we.jsxs)("div",{className:"streaming-loading",children:[(0,we.jsx)("div",{className:"loading-spinner",children:"\u23f3"}),(0,we.jsx)("p",{children:"Streaming-Dashboard wird geladen..."})]}):a?(0,we.jsxs)("div",{className:"streaming-error",children:[(0,we.jsx)("h3",{children:"\u274c Fehler"}),(0,we.jsx)("p",{children:a}),(0,we.jsx)("button",{onClick:f,children:"Erneut versuchen"})]}):(0,we.jsxs)("div",{className:"streaming-dashboard",children:[(0,we.jsxs)("div",{className:"action-header",children:[(0,we.jsxs)("div",{className:"navigation-controls",children:[(0,we.jsx)("button",{className:"nav-btn nav-back",onClick:b,disabled:m<=0,title:"Zur\xfcck (Maus-Taste 3 oder Alt + \u2190)",children:"\u2190 Zur\xfcck"}),(0,we.jsx)("button",{className:"nav-btn nav-forward",onClick:j,disabled:m>=c.length-1,title:"Vorw\xe4rts (Maus-Taste 4 oder Alt + \u2192)",children:"Vorw\xe4rts \u2192"}),(0,we.jsxs)("div",{className:"nav-status",children:[u," (",m+1,"/",c.length,")"]})]}),(0,we.jsxs)("div",{className:"action-buttons",children:[(0,we.jsx)("button",{className:"start-stream-btn",onClick:()=>{v("stream-setup"),alert("Stream-Funktionalit\xe4t wird entwickelt...")},children:"\ud83d\udd34 Stream starten"}),(0,we.jsx)("button",{className:"reset-cards-btn",onClick:x,title:"Cards zur\xfccksetzen (Strg + R)",children:"\ud83d\udd04 Cards zur\xfccksetzen"}),(0,we.jsx)("button",{className:"refresh-btn",onClick:()=>{v("dashboard"),f()},title:"Aktualisieren (Strg + F)",children:"\ud83d\udd04 Aktualisieren"})]})]}),(0,we.jsxs)("div",{className:"stats-overview",children:[(0,we.jsxs)("div",{className:"stat-card total",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\ud83d\udcfa"}),(0,we.jsxs)("div",{className:"stat-content",children:[(0,we.jsx)("h3",{children:l.totalStreams}),(0,we.jsx)("p",{children:"Streams gesamt"})]})]}),(0,we.jsxs)("div",{className:"stat-card active",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\ud83d\udd34"}),(0,we.jsxs)("div",{className:"stat-content",children:[(0,we.jsx)("h3",{children:l.activeStreams}),(0,we.jsx)("p",{children:"Live jetzt"})]})]}),(0,we.jsxs)("div",{className:"stat-card viewers",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\ud83d\udc41\ufe0f"}),(0,we.jsxs)("div",{className:"stat-content",children:[(0,we.jsx)("h3",{children:l.totalViewers}),(0,we.jsx)("p",{children:"Aktive Zuschauer"})]})]}),(0,we.jsxs)("div",{className:"stat-card views",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\ud83d\udcca"}),(0,we.jsxs)("div",{className:"stat-content",children:[(0,we.jsx)("h3",{children:l.todayViews}),(0,we.jsx)("p",{children:"Views heute"})]})]})]}),(0,we.jsxs)("div",{className:"stream-setup",children:[(0,we.jsx)("h3",{children:"\ud83c\udfa5 Live-Streaming Features"}),(0,we.jsxs)("div",{className:"tda-card-grid tda-card-grid-4",children:[(0,we.jsx)(vl,{title:"Multi-Camera Support",subtitle:"Mehrere Kameras gleichzeitig f\xfcr verschiedene Ringe",meta:[{icon:"\ud83d\udcf9",text:"Multi-View"}],size:"small"}),(0,we.jsx)(vl,{title:"Live Chat",subtitle:"Echzeit-Chat f\xfcr Zuschauer und Kommentatoren",meta:[{icon:"\ud83d\udcac",text:"Real-time"}],size:"small"}),(0,we.jsx)(vl,{title:"Analytics",subtitle:"Detaillierte Streaming-Statistiken und Viewer-Zahlen",meta:[{icon:"\ud83d\udcca",text:"Daten"}],size:"small"}),(0,we.jsx)(vl,{title:"WebRTC",subtitle:"Niedrige Latenz durch P2P-Verbindungen",meta:[{icon:"\ud83c\udfae",text:"P2P"}],size:"small"})]})]}),(0,we.jsxs)("div",{className:"stream-history",children:[(0,we.jsx)("h3",{children:"\ud83d\udccb Stream-Verlauf"}),(0,we.jsx)("div",{className:"tda-card-grid tda-card-grid-2",children:0===e.length?(0,we.jsx)(vl,{empty:!0,emptyText:"Noch keine Streams vorhanden",size:"medium"}):e.map((e=>(0,we.jsx)(Bl,{stream:e},e.session_id)))})]}),(0,we.jsxs)("div",{className:"navigation-help",children:[(0,we.jsx)("h3",{children:"\ud83c\udfae Navigation & Shortcuts"}),(0,we.jsxs)("div",{className:"tda-card-grid tda-card-grid-3",children:[(0,we.jsx)(vl,{title:"Maus-Navigation",subtitle:"Verwenden Sie die Maus-Tasten f\xfcr Navigation",meta:[{icon:"\ud83d\uddb1\ufe0f",text:"Taste 3: Zur\xfcck"},{icon:"\ud83d\uddb1\ufe0f",text:"Taste 4: Vorw\xe4rts"}],size:"small"}),(0,we.jsx)(vl,{title:"Tastatur-Shortcuts",subtitle:"Schnelle Navigation mit der Tastatur",meta:[{icon:"\u2328\ufe0f",text:"Alt + \u2190: Zur\xfcck"},{icon:"\u2328\ufe0f",text:"Alt + \u2192: Vorw\xe4rts"},{icon:"\u2328\ufe0f",text:"Strg + R: Reset"},{icon:"\u2328\ufe0f",text:"Strg + F: Refresh"}],size:"small"}),(0,we.jsx)(vl,{title:"Navigation Status",subtitle:"Aktuelle Position in der Navigation",meta:[{icon:"\ud83d\udccd",text:`Aktuell: ${u}`},{icon:"\ud83d\udcca",text:`Position: ${m+1}/${c.length}`}],size:"small"})]})]})]})};const Fl=function(e){let{selectedTurnier:t}=e;const[n,r]=(0,s.useState)([]),[a,i]=(0,s.useState)(!0),[l,o]=(0,s.useState)(null),[c,d]=(0,s.useState)(""),[u,h]=(0,s.useState)(""),[m,p]=(0,s.useState)(""),[f,g]=(0,s.useState)("nachname"),[x,v]=(0,s.useState)("asc"),[b,j]=(0,s.useState)(new Set),[y,k]=(0,s.useState)(new Set),w=(0,s.useCallback)((async()=>{if(t)try{const e=localStorage.getItem("token"),n=await fetch(`/api/anmeldungen/admin/all?turnierId=${t.id}`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!n.ok)throw new Error("Fehler beim Abrufen der Anmeldungen");const a=await n.json();a.success&&a.data?r(Array.isArray(a.data)?a.data:[]):Array.isArray(a)?r(a):r([]),i(!1)}catch(Zo){console.error("Fehler:",Zo),o(Zo.message),i(!1)}}),[t]);(0,s.useEffect)((()=>{t&&w()}),[t,w]);const N={total:n.length,pending:n.filter((e=>"Angemeldet"===e.status)).length,confirmed:n.filter((e=>"Best\xe4tigt"===e.status)).length,cancelled:n.filter((e=>"Storniert"===e.status||"Abgemeldet"===e.status)).length},S=[...new Set(n.map((e=>e.verein_name)).filter(Boolean))].sort(),_=new Set(n.map((e=>e.wettkampfer_id||`${e.vorname}-${e.nachname}`))).size,C=e=>{f===e?v("asc"===x?"desc":"asc"):(g(e),v("asc"))},z=async(e,t)=>{try{const n=localStorage.getItem("token"),r=await fetch(`/api/anmeldungen/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({status:t})});if(!r.ok){const e=await r.json();throw new Error(e.message||"Fehler beim Aktualisieren")}await w()}catch(Zo){console.error("Fehler:",Zo),alert("Fehler: "+Zo.message)}},T=async e=>{const t=e.anmeldungen.filter((e=>"Angemeldet"===e.status));for(const n of t)await z(n.anmeldung_id,"Best\xe4tigt")},A=(()=>{const e=(e=>{const t={};return e.forEach((e=>{const n=e.wettkampfer_id||`${e.vorname}-${e.nachname}`;t[n]||(t[n]={wettkampfer_id:e.wettkampfer_id,vorname:e.vorname,nachname:e.nachname,verein_name:e.verein_name,gewicht:e.gewicht,skill_level:e.skill_level,anmeldungen:[]}),t[n].anmeldungen.push({anmeldung_id:e.anmeldung_id,division_code:e.division_code,status:e.status,kampfstil:e.kampfstil})})),Object.values(t)})(n.filter((e=>{var t,n;const r=`${e.vorname||""} ${e.nachname||""}`.toLowerCase().includes(c.toLowerCase())||(null===(t=e.verein_name)||void 0===t?void 0:t.toLowerCase().includes(c.toLowerCase()))||(null===(n=e.division_code)||void 0===n?void 0:n.toLowerCase().includes(c.toLowerCase())),a=!u||e.status===u,i=!m||e.verein_name===m;return r&&a&&i})));return e.sort(((e,t)=>{let n,r;switch(f){case"nachname":n=`${e.nachname||""} ${e.vorname||""}`.toLowerCase(),r=`${t.nachname||""} ${t.vorname||""}`.toLowerCase();break;case"verein":n=(e.verein_name||"").toLowerCase(),r=(t.verein_name||"").toLowerCase();break;case"gewicht":n=parseFloat(e.gewicht)||0,r=parseFloat(t.gewicht)||0;break;case"kategorien":n=e.anmeldungen.length,r=t.anmeldungen.length;break;default:n=`${e.nachname||""}`.toLowerCase(),r=`${t.nachname||""}`.toLowerCase()}return n<r?"asc"===x?-1:1:n>r?"asc"===x?1:-1:0})),e})(),E=e=>{const t={confirmed:{class:"status-confirmed",label:"Best\xe4tigt"},pending:{class:"status-pending",label:"Ausstehend"},cancelled:{class:"status-cancelled",label:"Storniert"},mixed:{class:"status-mixed",label:"Gemischt"}},n=t[e]||t.pending;return(0,we.jsx)("span",{className:`status-badge ${n.class}`,children:n.label})};return a?(0,we.jsx)("div",{className:"anmelde-dashboard",children:(0,we.jsx)("div",{className:"loading-state",children:"Anmeldungen werden geladen..."})}):l?(0,we.jsx)("div",{className:"anmelde-dashboard",children:(0,we.jsxs)("div",{className:"error-state",children:[(0,we.jsxs)("p",{children:["Fehler: ",l]}),(0,we.jsx)("button",{onClick:w,children:"Erneut versuchen"})]})}):(0,we.jsxs)("div",{className:"anmelde-dashboard",children:[(0,we.jsxs)("div",{className:"stats-row",children:[(0,we.jsxs)("div",{className:"stat-item",children:[(0,we.jsx)("span",{className:"stat-value",children:_}),(0,we.jsx)("span",{className:"stat-label",children:"Personen"})]}),(0,we.jsxs)("div",{className:"stat-item",children:[(0,we.jsx)("span",{className:"stat-value",children:N.total}),(0,we.jsx)("span",{className:"stat-label",children:"Starts"})]}),(0,we.jsxs)("div",{className:"stat-item stat-pending",children:[(0,we.jsx)("span",{className:"stat-value",children:N.pending}),(0,we.jsx)("span",{className:"stat-label",children:"Ausstehend"})]}),(0,we.jsxs)("div",{className:"stat-item stat-confirmed",children:[(0,we.jsx)("span",{className:"stat-value",children:N.confirmed}),(0,we.jsx)("span",{className:"stat-label",children:"Best\xe4tigt"})]})]}),(0,we.jsxs)("div",{className:"filter-bar",children:[(0,we.jsx)("input",{type:"text",className:"search-input",placeholder:"Suchen...",value:c,onChange:e=>d(e.target.value)}),(0,we.jsxs)("select",{className:"filter-select",value:u,onChange:e=>h(e.target.value),children:[(0,we.jsx)("option",{value:"",children:"Alle Status"}),(0,we.jsx)("option",{value:"Angemeldet",children:"Angemeldet"}),(0,we.jsx)("option",{value:"Best\xe4tigt",children:"Best\xe4tigt"}),(0,we.jsx)("option",{value:"Storniert",children:"Storniert"})]}),(0,we.jsxs)("select",{className:"filter-select",value:m,onChange:e=>p(e.target.value),children:[(0,we.jsx)("option",{value:"",children:"Alle Vereine"}),S.map((e=>(0,we.jsx)("option",{value:e,children:e},e)))]}),b.size>0&&(0,we.jsxs)("button",{className:"batch-btn",onClick:async()=>{if(0!==b.size){for(const e of A)b.has(e.wettkampfer_id)&&await T(e);j(new Set)}},children:[b.size," best\xe4tigen"]}),(0,we.jsxs)("span",{className:"result-count",children:[A.length," Personen"]})]}),(0,we.jsx)("div",{className:"table-container",children:(0,we.jsxs)("table",{className:"anmeldungen-table",children:[(0,we.jsx)("thead",{children:(0,we.jsxs)("tr",{children:[(0,we.jsx)("th",{className:"col-checkbox",children:(0,we.jsx)("input",{type:"checkbox",checked:b.size===A.length&&A.length>0,onChange:()=>{b.size===A.length?j(new Set):j(new Set(A.map((e=>e.wettkampfer_id))))}})}),(0,we.jsx)("th",{className:"col-expand"}),(0,we.jsxs)("th",{className:"col-name sortable",onClick:()=>C("nachname"),children:["Name ","nachname"===f&&("asc"===x?"\u2191":"\u2193")]}),(0,we.jsxs)("th",{className:"col-verein sortable",onClick:()=>C("verein"),children:["Verein ","verein"===f&&("asc"===x?"\u2191":"\u2193")]}),(0,we.jsxs)("th",{className:"col-kategorien sortable",onClick:()=>C("kategorien"),children:["Kategorien ","kategorien"===f&&("asc"===x?"\u2191":"\u2193")]}),(0,we.jsxs)("th",{className:"col-gewicht sortable",onClick:()=>C("gewicht"),children:["Gewicht ","gewicht"===f&&("asc"===x?"\u2191":"\u2193")]}),(0,we.jsx)("th",{className:"col-level",children:"Level"}),(0,we.jsx)("th",{className:"col-status",children:"Status"}),(0,we.jsx)("th",{className:"col-actions",children:"Aktionen"})]})}),(0,we.jsx)("tbody",{children:0===A.length?(0,we.jsx)("tr",{children:(0,we.jsx)("td",{colSpan:"9",className:"empty-row",children:"Keine Anmeldungen gefunden"})}):A.map((e=>{const t=y.has(e.wettkampfer_id),n=(e=>{const t=e.map((e=>e.status));return t.every((e=>"Best\xe4tigt"===e))?"confirmed":t.every((e=>"Storniert"===e||"Abgemeldet"===e))?"cancelled":t.some((e=>"Angemeldet"===e))?"pending":"mixed"})(e.anmeldungen),r=e.anmeldungen.some((e=>"Angemeldet"===e.status));return(0,we.jsxs)(s.Fragment,{children:[(0,we.jsxs)("tr",{className:`${b.has(e.wettkampfer_id)?"selected":""} ${t?"expanded":""}`,children:[(0,we.jsx)("td",{className:"col-checkbox",children:(0,we.jsx)("input",{type:"checkbox",checked:b.has(e.wettkampfer_id),onChange:()=>{return t=e.wettkampfer_id,void j((e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n}));var t}})}),(0,we.jsx)("td",{className:"col-expand",children:e.anmeldungen.length>1&&(0,we.jsx)("button",{className:"expand-btn",onClick:()=>{return t=e.wettkampfer_id,void k((e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n}));var t},children:t?"\u25bc":"\u25b6"})}),(0,we.jsxs)("td",{className:"col-name",children:[(0,we.jsx)("strong",{children:e.nachname}),", ",e.vorname]}),(0,we.jsx)("td",{className:"col-verein",children:e.verein_name||"-"}),(0,we.jsxs)("td",{className:"col-kategorien",children:[(0,we.jsx)("span",{className:"kategorie-count",children:e.anmeldungen.length}),!t&&e.anmeldungen.length<=2&&(0,we.jsx)("span",{className:"kategorie-preview",children:e.anmeldungen.map((e=>e.division_code)).join(", ")})]}),(0,we.jsx)("td",{className:"col-gewicht",children:e.gewicht?`${e.gewicht} kg`:"-"}),(0,we.jsx)("td",{className:"col-level",children:e.skill_level||"-"}),(0,we.jsx)("td",{className:"col-status",children:E(n)}),(0,we.jsx)("td",{className:"col-actions",children:(0,we.jsx)("div",{className:"action-buttons",children:r&&(0,we.jsx)("button",{className:"action-btn confirm",onClick:()=>T(e),title:"Alle best\xe4tigen",children:"\u2713"})})})]}),t&&e.anmeldungen.map((e=>(0,we.jsxs)("tr",{className:"sub-row",children:[(0,we.jsx)("td",{}),(0,we.jsx)("td",{}),(0,we.jsxs)("td",{colSpan:"2",className:"sub-division",children:[(0,we.jsx)("span",{className:"division-badge",children:e.division_code}),e.kampfstil&&(0,we.jsx)("span",{className:"kampfstil",children:e.kampfstil})]}),(0,we.jsx)("td",{colSpan:"2"}),(0,we.jsx)("td",{children:(0,we.jsx)("span",{className:"status-badge status-"+("Best\xe4tigt"===e.status?"confirmed":"Angemeldet"===e.status?"pending":"cancelled"),children:e.status})}),(0,we.jsx)("td",{children:(0,we.jsxs)("div",{className:"action-buttons",children:["Angemeldet"===e.status&&(0,we.jsx)("button",{className:"action-btn confirm small",onClick:()=>z(e.anmeldung_id,"Best\xe4tigt"),title:"Best\xe4tigen",children:"\u2713"}),(0,we.jsx)("button",{className:"action-btn delete small",onClick:()=>(async e=>{if(window.confirm("Anmeldung wirklich l\xf6schen?"))try{const t=localStorage.getItem("token");await fetch(`/api/anmeldungen/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),await w()}catch(Zo){console.error("Fehler:",Zo)}})(e.anmeldung_id),title:"L\xf6schen",children:"\xd7"})]})})]},e.anmeldung_id)))]},e.wettkampfer_id)}))})]})})]})};const Ll=function(){const[e,t]=(0,s.useState)({overview:{totalTurniere:0,totalWettkaempfer:0,totalAnmeldungen:0,totalRevenue:0,activeStreams:0},turnierStats:[],wettkaempferStats:{byGeschlecht:{male:0,female:0,divers:0},bySkillLevel:{anfaenger:0,fortgeschritten:0,experte:0},byAge:{under18:0,adult:0,senior:0}},streamingStats:{totalViews:0,totalMinutes:0,avgViewers:0,peakViewers:0},revenueData:[],popularTurniere:[]}),[n,r]=(0,s.useState)(!0),[a,i]=(0,s.useState)(null),[l,o]=(0,s.useState)("month");(0,s.useEffect)((()=>{c()}),[l]);const c=async()=>{r(!0);try{const e=localStorage.getItem("token"),[n,a,i,s]=await Promise.all([fetch("/api/turniere",{headers:{Authorization:`Bearer ${e}`}}),fetch("/api/wettkaempfer",{headers:{Authorization:`Bearer ${e}`}}),fetch("/api/anmeldungen",{headers:{Authorization:`Bearer ${e}`}}),fetch("/api/streaming/analytics",{headers:{Authorization:`Bearer ${e}`}}).catch((()=>({ok:!1})))]);let l=[];if(n.ok){const e=await n.json();l=Array.isArray(e)?e:e.data||[]}let o=[];if(a.ok){const e=await a.json();o=Array.isArray(e)?e:e.data||[]}let c=[];if(i.ok){const e=await i.json();c=Array.isArray(e)?e:e.data||[]}let u={totalViews:0,totalMinutes:0,avgViewers:0,peakViewers:0};if(s.ok){const e=await s.json();u=e.success?e.data:e}const h=d(l,o,c,u);t(h),r(!1)}catch(Zo){console.error("Fehler beim Laden der Analytics:",Zo),i(Zo.message),r(!1)}},d=(e,t,n,r)=>{const a=Array.isArray(e)?e:[],i=Array.isArray(t)?t:[],s=Array.isArray(n)?n:[],l={totalTurniere:a.length,totalWettkaempfer:i.length,totalAnmeldungen:s.length,totalRevenue:s.filter((e=>"confirmed"===e.status||"Angemeldet"===e.status)).reduce(((e,t)=>e+(t.anmeldegebuehr||t.startgebuehr||0)),0),activeStreams:(null===r||void 0===r?void 0:r.activeStreams)||0},o=a.map((e=>({name:e.name||"Unbekanntes Turnier",anmeldungen:s.filter((t=>t.turnier_id===e.turnier_id)).length,revenue:s.filter((t=>t.turnier_id===e.turnier_id&&("confirmed"===t.status||"Angemeldet"===t.status))).reduce(((e,t)=>e+(t.anmeldegebuehr||t.startgebuehr||0)),0),status:u(e)}))).sort(((e,t)=>t.anmeldungen-e.anmeldungen)),c={byGeschlecht:{male:i.filter((e=>"male"===e.geschlecht)).length,female:i.filter((e=>"female"===e.geschlecht)).length,divers:i.filter((e=>"divers"===e.geschlecht)).length},bySkillLevel:{anfaenger:i.filter((e=>"anfaenger"===e.skill_level)).length,fortgeschritten:i.filter((e=>"fortgeschritten"===e.skill_level)).length,experte:i.filter((e=>"experte"===e.skill_level)).length},byAge:h(i)},d=m(s),p=o.slice(0,5);return{overview:l,turnierStats:o,wettkaempferStats:c,streamingStats:r,revenueData:d,popularTurniere:p}},u=e=>{if(!e)return"unknown";const t=new Date,n=e.start_datum?new Date(e.start_datum):null,r=e.end_datum?new Date(e.end_datum):null;return n&&r?n>t?"upcoming":n<=t&&t<=r?"active":"completed":"unknown"},h=e=>{const t=Array.isArray(e)?e:[],n=new Date;let r=0,i=0,s=0;return t.forEach((e=>{if(e.geburtsdatum)try{const t=n.getFullYear()-new Date(e.geburtsdatum).getFullYear();t<18?r++:t<50?i++:s++}catch(a){console.warn("Ung\xfcltiges Geburtsdatum:",e.geburtsdatum)}})),{under18:r,adult:i,senior:s}},m=e=>{const t=Array.isArray(e)?e:[],n={},r=new Date;for(let a=5;a>=0;a--){const e=new Date(r.getFullYear(),r.getMonth()-a,1).toLocaleDateString("de-DE",{month:"short",year:"numeric"});n[e]=0}return t.filter((e=>("confirmed"===e.status||"Angemeldet"===e.status)&&(e.anmelde_datum||e.anmeldedatum))).forEach((e=>{const t=new Date(e.anmelde_datum||e.anmeldedatum).toLocaleDateString("de-DE",{month:"short",year:"numeric"});void 0!==n[t]&&(n[t]+=e.anmeldegebuehr||e.startgebuehr||0)})),Object.entries(n).map((e=>{let[t,n]=e;return{month:t,revenue:n}}))};return n?(0,we.jsxs)("div",{className:"analytics-loading",children:[(0,we.jsx)("div",{className:"loading-spinner",children:"\u23f3"}),(0,we.jsx)("p",{children:"Analytics werden geladen..."})]}):a?(0,we.jsxs)("div",{className:"analytics-error",children:[(0,we.jsx)("h3",{children:"\u274c Fehler"}),(0,we.jsx)("p",{children:a}),(0,we.jsx)("button",{onClick:c,children:"Erneut versuchen"})]}):(0,we.jsxs)("div",{className:"analytics-dashboard",children:[(0,we.jsxs)("div",{className:"action-header",children:[(0,we.jsxs)("select",{value:l,onChange:e=>o(e.target.value),className:"time-range-select",children:[(0,we.jsx)("option",{value:"week",children:"Diese Woche"}),(0,we.jsx)("option",{value:"month",children:"Dieser Monat"}),(0,we.jsx)("option",{value:"quarter",children:"Dieses Quartal"}),(0,we.jsx)("option",{value:"year",children:"Dieses Jahr"})]}),(0,we.jsx)("button",{className:"export-btn",onClick:()=>window.print(),children:"\ud83d\udcca Report exportieren"})]}),(0,we.jsxs)("div",{className:"tda-card-grid tda-card-grid-5",children:[(0,we.jsx)(vl,{title:e.overview.totalTurniere,subtitle:"Turniere gesamt",meta:[{icon:"\ud83c\udfc6",text:"Gesamt"}],size:"small"}),(0,we.jsx)(vl,{title:e.overview.totalWettkaempfer,subtitle:"Wettk\xe4mpfer",meta:[{icon:"\ud83e\udd4a",text:"Registriert"}],size:"small"}),(0,we.jsx)(vl,{title:e.overview.totalAnmeldungen,subtitle:"Anmeldungen",meta:[{icon:"\ud83d\udcdd",text:"Gesamt"}],size:"small"}),(0,we.jsx)(vl,{title:`${e.overview.totalRevenue}\u20ac`,subtitle:"Gesamteinnahmen",meta:[{icon:"\ud83d\udcb0",text:"Umsatz"}],size:"small",variant:"success"}),(0,we.jsx)(vl,{title:e.streamingStats.totalViews,subtitle:"Stream Views",meta:[{icon:"\ud83d\udcfa",text:"Views"}],size:"small"})]}),(0,we.jsxs)("div",{className:"tda-card-grid tda-card-grid-2",children:[(0,we.jsx)(vl,{title:"\ud83d\udcb0 Einnahmen-Verlauf",subtitle:"Monatliche Ums\xe4tze",meta:[{icon:"\ud83d\udcc8",text:"Trend"}],size:"large",children:(0,we.jsx)("div",{className:"chart-container",children:e.revenueData.map(((t,n)=>(0,we.jsxs)("div",{className:"revenue-bar",children:[(0,we.jsx)("div",{className:"bar",style:{height:`${Math.max(10,t.revenue/Math.max(...e.revenueData.map((e=>e.revenue)))*200)}px`}}),(0,we.jsx)("span",{className:"bar-label",children:t.month}),(0,we.jsxs)("span",{className:"bar-value",children:[t.revenue,"\u20ac"]})]},n)))})}),(0,we.jsx)(vl,{title:"\ud83d\udc65 Wettk\xe4mpfer-Demografie",subtitle:"Geschlecht und Skill Level",meta:[{icon:"\ud83d\udcca",text:"Statistiken"}],size:"large",children:(0,we.jsxs)("div",{className:"demographics-grid",children:[(0,we.jsxs)("div",{className:"demo-section",children:[(0,we.jsx)("h4",{children:"Geschlecht"}),(0,we.jsxs)("div",{className:"demo-bars",children:[(0,we.jsxs)("div",{className:"demo-bar male",children:[(0,we.jsxs)("span",{children:["M\xe4nnlich: ",e.wettkaempferStats.byGeschlecht.male]}),(0,we.jsx)("div",{className:"bar",style:{width:e.wettkaempferStats.byGeschlecht.male/e.overview.totalWettkaempfer*100+"%"}})]}),(0,we.jsxs)("div",{className:"demo-bar female",children:[(0,we.jsxs)("span",{children:["Weiblich: ",e.wettkaempferStats.byGeschlecht.female]}),(0,we.jsx)("div",{className:"bar",style:{width:e.wettkaempferStats.byGeschlecht.female/e.overview.totalWettkaempfer*100+"%"}})]}),(0,we.jsxs)("div",{className:"demo-bar divers",children:[(0,we.jsxs)("span",{children:["Divers: ",e.wettkaempferStats.byGeschlecht.divers]}),(0,we.jsx)("div",{className:"bar",style:{width:e.wettkaempferStats.byGeschlecht.divers/e.overview.totalWettkaempfer*100+"%"}})]})]})]}),(0,we.jsxs)("div",{className:"demo-section",children:[(0,we.jsx)("h4",{children:"Skill Level"}),(0,we.jsxs)("div",{className:"demo-bars",children:[(0,we.jsxs)("div",{className:"demo-bar anfaenger",children:[(0,we.jsxs)("span",{children:["Anf\xe4nger: ",e.wettkaempferStats.bySkillLevel.anfaenger]}),(0,we.jsx)("div",{className:"bar",style:{width:e.wettkaempferStats.bySkillLevel.anfaenger/e.overview.totalWettkaempfer*100+"%"}})]}),(0,we.jsxs)("div",{className:"demo-bar fortgeschritten",children:[(0,we.jsxs)("span",{children:["Fortgeschritten: ",e.wettkaempferStats.bySkillLevel.fortgeschritten]}),(0,we.jsx)("div",{className:"bar",style:{width:e.wettkaempferStats.bySkillLevel.fortgeschritten/e.overview.totalWettkaempfer*100+"%"}})]}),(0,we.jsxs)("div",{className:"demo-bar experte",children:[(0,we.jsxs)("span",{children:["Experte: ",e.wettkaempferStats.bySkillLevel.experte]}),(0,we.jsx)("div",{className:"bar",style:{width:e.wettkaempferStats.bySkillLevel.experte/e.overview.totalWettkaempfer*100+"%"}})]})]})]})]})}),(0,we.jsx)(vl,{title:"\ud83c\udfc6 Beliebte Turniere",subtitle:"Top Turniere nach Anmeldungen",meta:[{icon:"\ud83d\udcc8",text:"Ranking"}],size:"large",children:(0,we.jsx)("div",{className:"turniere-list",children:e.popularTurniere.map(((e,t)=>(0,we.jsxs)("div",{className:"turnier-item",children:[(0,we.jsxs)("div",{className:"turnier-rank",children:["#",t+1]}),(0,we.jsxs)("div",{className:"turnier-info",children:[(0,we.jsx)("h4",{children:e.name}),(0,we.jsxs)("div",{className:"turnier-stats",children:[(0,we.jsxs)("span",{children:["\ud83d\udcdd ",e.anmeldungen," Anmeldungen"]}),(0,we.jsxs)("span",{children:["\ud83d\udcb0 ",e.revenue,"\u20ac"]})]})]}),(0,we.jsx)("div",{className:`turnier-status ${e.status}`,children:"active"===e.status?"\u26a1 Live":"upcoming"===e.status?"\ud83d\udcc5 Geplant":"\u2705 Beendet"})]},t)))})}),(0,we.jsx)(vl,{title:"\ud83d\udcfa Streaming Statistiken",subtitle:"Live-Streaming Performance",meta:[{icon:"\ud83d\udcca",text:"Analytics"}],size:"large",children:(0,we.jsxs)("div",{className:"streaming-stats-grid",children:[(0,we.jsxs)("div",{className:"streaming-stat",children:[(0,we.jsx)("div",{className:"stat-value",children:e.streamingStats.totalViews}),(0,we.jsx)("div",{className:"stat-label",children:"Gesamt Views"})]}),(0,we.jsxs)("div",{className:"streaming-stat",children:[(0,we.jsxs)("div",{className:"stat-value",children:[Math.round(e.streamingStats.totalMinutes/60),"h"]}),(0,we.jsx)("div",{className:"stat-label",children:"Gestreamt"})]}),(0,we.jsxs)("div",{className:"streaming-stat",children:[(0,we.jsx)("div",{className:"stat-value",children:e.streamingStats.avgViewers}),(0,we.jsx)("div",{className:"stat-label",children:"\xd8 Zuschauer"})]}),(0,we.jsxs)("div",{className:"streaming-stat",children:[(0,we.jsx)("div",{className:"stat-value",children:e.streamingStats.peakViewers}),(0,we.jsx)("div",{className:"stat-label",children:"Peak Views"})]})]})})]})]})},Pl=e=>{let{division:t,onUpdate:n}=e;const[r,a]=(0,s.useState)(!1),[i,l]=(0,s.useState)({...t}),[o,c]=(0,s.useState)(!1),d=e=>{const{name:t,value:n}=e.target;l((e=>({...e,[t]:n})))};return(0,we.jsxs)("div",{className:"division-card",children:[o&&(0,we.jsx)("div",{className:"loading-overlay",children:(0,we.jsx)("div",{className:"loading-spinner"})}),(0,we.jsxs)("div",{className:"card-header",children:[(0,we.jsx)("h3",{children:t.Division_Code}),!r&&(0,we.jsxs)("div",{className:"card-actions",children:[(0,we.jsx)("button",{className:"btn btn-secondary btn-edit",onClick:()=>{a(!0),l({...t})},disabled:o,children:"\u270f\ufe0f Bearbeiten"}),(0,we.jsx)("button",{className:"btn btn-danger btn-delete",onClick:async()=>{if(window.confirm(`Division "${t.Division_Name}" wirklich l\xf6schen?`))try{var e;c(!0);const a=await er.delete(`/api/divisionen/${t.Division_Code}`);var r;if(null===(e=a.data)||void 0===e||!e.success)throw new Error((null===(r=a.data)||void 0===r?void 0:r.error)||"Fehler beim L\xf6schen");console.log("\u2705 Division erfolgreich gel\xf6scht"),null===n||void 0===n||n(null)}catch(s){var a,i;console.error("\u274c Fehler beim L\xf6schen der Division:",s),alert("Fehler beim L\xf6schen: "+((null===(a=s.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.error)||s.message))}finally{c(!1)}},disabled:o,children:"\ud83d\uddd1\ufe0f L\xf6schen"})]})]}),(0,we.jsx)("div",{className:"card-content",children:r?(0,we.jsxs)("div",{className:"edit-form",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Division Name:"}),(0,we.jsx)("input",{type:"text",name:"Division_Name",value:i.Division_Name||"",onChange:d,className:"form-input"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Division Type:"}),(0,we.jsxs)("select",{name:"Division_Type",value:i.Division_Type||"",onChange:d,className:"form-select",children:[(0,we.jsx)("option",{value:"",children:"Typ w\xe4hlen"}),(0,we.jsx)("option",{value:"Formen",children:"Formen"}),(0,we.jsx)("option",{value:"Grappling",children:"Grappling"}),(0,we.jsx)("option",{value:"Pointfighting",children:"Pointfighting"}),(0,we.jsx)("option",{value:"Continous Fighting",children:"Continous Fighting"}),(0,we.jsx)("option",{value:"K1",children:"K1"}),(0,we.jsx)("option",{value:"Fullcontact",children:"Fullcontact"}),(0,we.jsx)("option",{value:"Kumite",children:"Kumite"}),(0,we.jsx)("option",{value:"Selbstverteidigung",children:"Selbstverteidigung"}),(0,we.jsx)("option",{value:"Bruchtest",children:"Bruchtest"})]})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Geschlecht:"}),(0,we.jsxs)("select",{name:"Gender",value:i.Gender||"",onChange:d,className:"form-select",children:[(0,we.jsx)("option",{value:"",children:"Geschlecht w\xe4hlen"}),(0,we.jsx)("option",{value:"Male",children:"M\xe4nnlich"}),(0,we.jsx)("option",{value:"Female",children:"Weiblich"}),(0,we.jsx)("option",{value:"Male/Female",children:"M\xe4nnlich/Weiblich"}),(0,we.jsx)("option",{value:"Mixed",children:"Gemischt"})]})]}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Alter von:"}),(0,we.jsx)("input",{type:"number",name:"Age_from",value:i.Age_from||"",onChange:d,className:"form-input",min:"0",max:"100"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Alter bis:"}),(0,we.jsx)("input",{type:"number",name:"Age_to",value:i.Age_to||"",onChange:d,className:"form-input",min:"0",max:"100"})]})]}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Gewicht von (kg):"}),(0,we.jsx)("input",{type:"text",name:"Minimun_Weight",value:i.Minimun_Weight||"",onChange:d,className:"form-input",placeholder:"z.B. 60"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Gewicht bis (kg):"}),(0,we.jsx)("input",{type:"text",name:"Maximum_Weight",value:i.Maximum_Weight||"",onChange:d,className:"form-input",placeholder:"z.B. 65"})]})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Skill Level:"}),(0,we.jsxs)("select",{name:"Skill_Level",value:i.Skill_Level||"",onChange:d,className:"form-select",children:[(0,we.jsx)("option",{value:"",children:"Skill Level w\xe4hlen"}),(0,we.jsx)("option",{value:"Black Belts",children:"Black Belts"}),(0,we.jsx)("option",{value:"Color Belts",children:"Color Belts"}),(0,we.jsx)("option",{value:"Brown Belts",children:"Brown Belts"}),(0,we.jsx)("option",{value:"Beginner",children:"Beginner"}),(0,we.jsx)("option",{value:"Intermediate",children:"Intermediate"}),(0,we.jsx)("option",{value:"Advanced",children:"Advanced"})]})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Team:"}),(0,we.jsx)("input",{type:"text",name:"Team",value:i.Team||"",onChange:d,className:"form-input",placeholder:"z.B. Team, Duo"})]}),(0,we.jsxs)("div",{className:"form-actions",children:[(0,we.jsx)("button",{className:"btn btn-primary btn-save",onClick:async()=>{try{var e;c(!0);const s=await er.put(`/api/divisionen/${t.Division_Code}`,i);var r;if(null===(e=s.data)||void 0===e||!e.success)throw new Error((null===(r=s.data)||void 0===r?void 0:r.error)||"Unbekannter Fehler");a(!1),null===n||void 0===n||n(i),console.log("\u2705 Division erfolgreich aktualisiert")}catch(o){var s,l;console.error("\u274c Fehler beim Speichern der Division:",o),alert("Fehler beim Speichern: "+((null===(s=o.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)||o.message))}finally{c(!1)}},disabled:o,children:"\ud83d\udcbe Speichern"}),(0,we.jsx)("button",{className:"btn btn-secondary btn-cancel",onClick:()=>{a(!1),l({...t})},disabled:o,children:"\u274c Abbrechen"})]})]}):(0,we.jsxs)("div",{className:"view-content",children:[(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Name:"})," ",t.Division_Name]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Typ:"})," ",t.Division_Type]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Geschlecht:"})," ",t.Gender||"Nicht angegeben"]}),(t.Age_from||t.Age_to)&&(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Alter:"}),t.Age_from&&t.Age_to?`${t.Age_from} - ${t.Age_to} Jahre`:t.Age_from?`ab ${t.Age_from} Jahre`:`bis ${t.Age_to} Jahre`]}),(t.Minimun_Weight||t.Maximum_Weight)&&(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Gewicht:"}),t.Minimun_Weight&&t.Maximum_Weight?`${t.Minimun_Weight} - ${t.Maximum_Weight} kg`:t.Minimun_Weight?`ab ${t.Minimun_Weight} kg`:`bis ${t.Maximum_Weight} kg`]}),t.Skill_Level&&(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Skill Level:"})," ",t.Skill_Level]}),t.Age&&(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Altersklasse:"})," ",t.Age]}),t.Team&&(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"Team:"})," ",t.Team]})]})})]})},Ol=()=>{const[e,t]=(0,s.useState)([]),[n,r]=(0,s.useState)([]),[a,i]=(0,s.useState)(!0),[l,o]=(0,s.useState)(null),[c,d]=(0,s.useState)("all"),[u,h]=(0,s.useState)("all"),[m,p]=(0,s.useState)("all"),[f,g]=(0,s.useState)("all"),[x,v]=(0,s.useState)("all"),[b,j]=(0,s.useState)("all"),[y,k]=(0,s.useState)(!1),w=s.useMemo((()=>["Pointfighting","Continuous Fighting","Continous Fighting","Fullcontact","Full Contact","K1"]),[]),N=s.useMemo((()=>["Selbstverteidigung"]),[]),S=s.useMemo((()=>["Formen"]),[]),_=s.useMemo((()=>({all:"Alle Formen","Black Belt":"Black Belt Formen","Under Black Belt":"Under Black Belt Formen",Waffen:"Waffen-Formen","Ohne Waffen":"Formen ohne Waffen"})),[]),C=s.useMemo((()=>({all:"Alle Selbstverteidigung",TSD:"Team Self Defense (TSD)",RSD:"Real Self Defense (RSD)",SD:"Self Defense (SD)"})),[]),z=s.useCallback((e=>!!e&&N.includes(e)),[N]),T=s.useCallback((e=>!!e&&S.includes(e)),[S]),A=s.useCallback((e=>{if(!e)return null;if(/^BBF(-\d+)?(F)?$/i.test(e))return"Black Belt";if(e.toUpperCase().endsWith("W"))return"Waffen";if([/^BWP(-\d+)?(w|W)?$/i,/^UMW(-\d+)?$/i,/^WP(-\d+)?(F|w|W)?$/i,/^WWP(-\d+)?(w|W)?$/i,/^CWP(-\d+)?$/i,/^(DT|T)(BBW|UBW|MUB)P(-\d+)?$/i,/^(DT|T)(U|MU)BWP(-\d+)?$/i].some((t=>t.test(e))))return"Waffen";return[/^CUBF(-\d+)?(W)?$/i,/^JUBF(-\d+)?(W)?$/i,/^KUBF(-\d+)?(W)?$/i,/^UBF(-\d+)?(W)?$/i,/^(DT|T)(BBF|UBF|MUB)F(-\d+)?$/i].some((t=>t.test(e)))?e.toUpperCase().endsWith("W")?"Waffen":"Under Black Belt":null}),[]),E=s.useCallback(((e,t)=>{if(!e&&!t)return null;const n=e||0,r=t||99;return r<=7?"Bambini (bis 7)":r<=9?"Kinder (8-9)":r<=11?"Sch\xfcler (10-11)":r<=13?"Kadetten (12-13)":r<=15?"Jugend (14-15)":r<=17?"Junioren (16-17)":n>=18&&r<=35?"Erwachsene (18-35)":n>=36?"Senioren (36+)":"Gemischt"}),[]);(0,s.useEffect)((()=>{D()}),[]);const D=async()=>{try{i(!0);const e=await fetch("/api/divisionen"),n=await e.json();n.success?(t(n.data),r(n.data)):o("Fehler beim Laden der Divisionen")}catch(Zo){console.error("Error fetching divisions:",Zo),o("Netzwerkfehler beim Laden der Daten")}finally{i(!1)}},B=s.useCallback((()=>[...new Set(e.map((e=>e.Gender)).filter(Boolean))].sort()),[e]),R=s.useCallback((()=>[...new Set(e.map((e=>e.Skill_Level)).filter(Boolean))].sort()),[e]),F=s.useCallback((()=>[...new Set(e.map((e=>E(e.Age_from,e.Age_to))).filter(Boolean))]),[e,E]),L=s.useCallback((()=>[...new Set(e.map((e=>e.Team)).filter(Boolean))].sort()),[e]);(0,s.useEffect)((()=>{let t=[...e];"all"!==c&&(t="Kickboxen"===c?"all"===u?t.filter((e=>w.includes(e.Division_Type))):t.filter((e=>e.Division_Type===u)):"Selbstverteidigung"===c?"all"===u?t.filter((e=>z(e.Division_Type))):"TSD"===u?t.filter((e=>e.Division_Code&&e.Division_Code.startsWith("TSD"))):"RSD"===u?t.filter((e=>e.Division_Code&&e.Division_Code.startsWith("RSD"))):"SD"===u?t.filter((e=>e.Division_Code&&e.Division_Code.startsWith("SD")&&!e.Division_Code.startsWith("TSD")&&!e.Division_Code.startsWith("RSD"))):t.filter((e=>e.Division_Type===u)):"Formen"===c?"all"===u?t.filter((e=>T(e.Division_Type))):t.filter((e=>{if(!T(e.Division_Type))return!1;const t=A(e.Division_Code);return"Black Belt"===u?"Black Belt"===t:"Under Black Belt"===u?"Under Black Belt"===t:"Waffen"===u?"Waffen"===t:"Ohne Waffen"===u&&("Black Belt"===t||"Under Black Belt"===t)})):t.filter((e=>e.Division_Type===c))),"all"!==m&&(t=t.filter((e=>e.Gender===m))),"all"!==f&&(t=t.filter((e=>e.Skill_Level===f))),"all"!==x&&(t=t.filter((e=>E(e.Age_from,e.Age_to)===x))),"all"!==b&&(t=t.filter((e=>e.Team===b))),r(t)}),[e,c,u,m,f,x,b,w,z,T,A,E]);const P=e=>{d(e),h("all")},O=()=>{d("all"),h("all"),p("all"),g("all"),v("all"),j("all")},I=s.useCallback((()=>{const t=[...new Set(e.map((e=>e.Division_Type)))],n=t.filter((e=>!w.includes(e)&&!z(e)&&!T(e))),r=t.some((e=>w.includes(e))),a=t.some((e=>z(e))),i=t.some((e=>T(e))),s=[...n];return r&&s.push("Kickboxen"),a&&s.push("Selbstverteidigung"),i&&s.push("Formen"),s.sort()}),[e,w,z,T]),$=s.useCallback((()=>e.filter((e=>w.includes(e.Division_Type))).map((e=>e.Division_Type)).filter(((e,t,n)=>n.indexOf(e)===t)).sort()),[e,w]),W=s.useCallback((()=>{const t=e.filter((e=>z(e.Division_Type))),n=t.some((e=>e.Division_Code&&e.Division_Code.startsWith("TSD"))),r=t.some((e=>e.Division_Code&&e.Division_Code.startsWith("RSD"))),a=t.some((e=>e.Division_Code&&e.Division_Code.startsWith("SD")&&!e.Division_Code.startsWith("TSD")&&!e.Division_Code.startsWith("RSD"))),i=[];return n&&i.push("TSD"),r&&i.push("RSD"),a&&i.push("SD"),i.sort()}),[e,z]),M=s.useCallback((()=>{const t=e.filter((e=>T(e.Division_Type))),n=t.some((e=>"Black Belt"===A(e.Division_Code))),r=t.some((e=>"Under Black Belt"===A(e.Division_Code))),a=t.some((e=>"Waffen"===A(e.Division_Code))),i=t.some((e=>{const t=A(e.Division_Code);return"Black Belt"===t||"Under Black Belt"===t})),s=[];return n&&s.push("Black Belt"),r&&s.push("Under Black Belt"),a&&s.push("Waffen"),i&&s.push("Ohne Waffen"),s}),[e,T,A]);if(a)return(0,we.jsx)("div",{className:"division-uebersicht",children:(0,we.jsxs)("div",{className:"loading-container",children:[(0,we.jsx)("div",{className:"loading-spinner"}),(0,we.jsx)("p",{children:"Lade Divisionen..."})]})});if(l)return(0,we.jsx)("div",{className:"division-uebersicht",children:(0,we.jsxs)("div",{className:"error-container",children:[(0,we.jsx)("h2",{children:"Fehler"}),(0,we.jsx)("p",{children:l}),(0,we.jsx)("button",{className:"retry-button",onClick:D,children:"Erneut versuchen"})]})});const K=I(),U=$(),V=W(),q=M(),G=B(),H=R(),J=F(),Z=L(),Y=(()=>{let e=0;return"all"!==c&&e++,"all"!==u&&e++,"all"!==m&&e++,"all"!==f&&e++,"all"!==x&&e++,"all"!==b&&e++,e})();return(0,we.jsxs)("div",{className:"division-uebersicht",children:[(0,we.jsx)("h1",{children:"\ud83e\udd4b Divisions-\xdcbersicht"}),(0,we.jsxs)("div",{className:"filter-bar",children:[(0,we.jsx)("button",{className:"all"===c?"active":"",onClick:()=>P("all"),children:"\ud83d\udd0d Alle"}),K.map((e=>(0,we.jsxs)("button",{className:c===e?"active":"",onClick:()=>P(e),children:["Kickboxen"===e?"\ud83e\udd4a":"Formen"===e?"\ud83c\udfaf":"Kumite"===e?"\u2694\ufe0f":"Selbstverteidigung"===e?"\ud83d\udee1\ufe0f":"Grappling"===e?"\ud83e\udd3c":"Bruchtest"===e?"\ud83e\uddf1":"\ud83e\udd4b"," ",e]},e))),(0,we.jsxs)("button",{className:"filter-toggle "+(y?"active":""),onClick:()=>k(!y),children:["\u2699\ufe0f Filter ",Y>0&&`(${Y})`]})]}),"Kickboxen"===c&&U.length>0&&(0,we.jsxs)("div",{className:"sub-filter-bar",children:[(0,we.jsx)("button",{className:"all"===u?"active":"",onClick:()=>h("all"),children:"\ud83d\udccb Alle Kickboxen"}),U.map((e=>(0,we.jsxs)("button",{className:u===e?"active":"",onClick:()=>h(e),children:["Pointfighting"===e?"\ud83d\udc4a":"Continuous Fighting"===e?"\u26a1":"Fullcontact"===e?"\ud83d\udca5":"K1"===e?"\ud83d\udd25":"\ud83e\udd4a"," ",e]},e)))]}),"Formen"===c&&q.length>0&&(0,we.jsxs)("div",{className:"sub-filter-bar",children:[(0,we.jsx)("button",{className:"all"===u?"active":"",onClick:()=>h("all"),children:"\ud83d\udccb Alle Formen"}),q.map((e=>(0,we.jsxs)("button",{className:u===e?"active":"",onClick:()=>h(e),children:["Black Belt"===e?"\ud83e\udd4b":"Under Black Belt"===e?"\ud83d\udfe1":"Waffen"===e?"\u2694\ufe0f":"Ohne Waffen"===e?"\ud83c\udfaf":"\ud83d\udccb"," ",_[e]||e]},e)))]}),"Selbstverteidigung"===c&&V.length>0&&(0,we.jsxs)("div",{className:"sub-filter-bar",children:[(0,we.jsx)("button",{className:"all"===u?"active":"",onClick:()=>h("all"),children:"\ud83d\udccb Alle Selbstverteidigung"}),V.map((e=>(0,we.jsxs)("button",{className:u===e?"active":"",onClick:()=>h(e),children:["TSD"===e?"\ud83d\udc65":"RSD"===e?"\ud83e\udd77":"\ud83d\udee1\ufe0f"," ",C[e]||e]},e)))]}),y&&(0,we.jsxs)("div",{className:"advanced-filters",children:[(0,we.jsxs)("div",{className:"filter-section",children:[(0,we.jsx)("h4",{children:"\ud83d\udc64 Geschlecht"}),(0,we.jsxs)("div",{className:"filter-options",children:[(0,we.jsx)("button",{className:"all"===m?"active":"",onClick:()=>p("all"),children:"Alle"}),G.map((e=>(0,we.jsx)("button",{className:m===e?"active":"",onClick:()=>p(e),children:"Male"===e?"\u2642\ufe0f M\xe4nnlich":"Female"===e?"\u2640\ufe0f Weiblich":"Male/Female"===e?"\u26a5 Mixed":"Mixed"===e?"\u26a5 Gemischt":e},e)))]})]}),(0,we.jsxs)("div",{className:"filter-section",children:[(0,we.jsx)("h4",{children:"\ud83c\udf96\ufe0f Skill Level"}),(0,we.jsxs)("div",{className:"filter-options",children:[(0,we.jsx)("button",{className:"all"===f?"active":"",onClick:()=>g("all"),children:"Alle"}),H.map((e=>(0,we.jsx)("button",{className:f===e?"active":"",onClick:()=>g(e),children:"Black Belts"===e?"\ud83e\udd4b Black Belts":"Color Belts"===e?"\ud83d\udfe1 Color Belts":"Brown Belts"===e?"\ud83d\udfe4 Brown Belts":"Beginner"===e?"\ud83d\udfe2 Beginner":"Intermediate"===e?"\ud83d\udfe1 Intermediate":"Advanced"===e?"\ud83d\udd34 Advanced":e},e)))]})]}),(0,we.jsxs)("div",{className:"filter-section",children:[(0,we.jsx)("h4",{children:"\ud83d\udcc5 Altersklasse"}),(0,we.jsxs)("div",{className:"filter-options",children:[(0,we.jsx)("button",{className:"all"===x?"active":"",onClick:()=>v("all"),children:"Alle"}),J.map((e=>(0,we.jsx)("button",{className:x===e?"active":"",onClick:()=>v(e),children:e},e)))]})]}),Z.length>0&&(0,we.jsxs)("div",{className:"filter-section",children:[(0,we.jsx)("h4",{children:"\ud83d\udc65 Team"}),(0,we.jsxs)("div",{className:"filter-options",children:[(0,we.jsx)("button",{className:"all"===b?"active":"",onClick:()=>j("all"),children:"Alle"}),Z.map((e=>(0,we.jsx)("button",{className:b===e?"active":"",onClick:()=>j(e),children:e},e)))]})]})]}),Y>0&&(0,we.jsxs)("div",{className:"active-filters",children:[(0,we.jsx)("span",{className:"filter-label",children:"Aktive Filter:"}),"all"!==c&&(0,we.jsxs)("span",{className:"filter-tag",children:[c,"all"!==u&&` \u2192 ${u}`]}),"all"!==m&&(0,we.jsxs)("span",{className:"filter-tag",children:["Geschlecht: ","Male"===m?"M\xe4nnlich":"Female"===m?"Weiblich":m]}),"all"!==f&&(0,we.jsxs)("span",{className:"filter-tag",children:["Skill: ",f]}),"all"!==x&&(0,we.jsxs)("span",{className:"filter-tag",children:["Alter: ",x]}),"all"!==b&&(0,we.jsxs)("span",{className:"filter-tag",children:["Team: ",b]}),(0,we.jsx)("button",{className:"clear-filters",onClick:O,children:"\u2716\ufe0f Alle zur\xfccksetzen"})]}),(0,we.jsx)("div",{className:"results-info",children:(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:n.length})," von ",e.length," Divisionen"]})}),n.length>0?(0,we.jsx)("div",{className:"division-list",children:n.map((e=>(0,we.jsx)(Pl,{division:e},e.Division_Code)))}):(0,we.jsxs)("div",{className:"no-results",children:[(0,we.jsx)("h3",{children:"\ud83d\udd0d Keine Ergebnisse"}),(0,we.jsx)("p",{children:"Keine Divisionen f\xfcr die ausgew\xe4hlten Filter gefunden."}),(0,we.jsx)("button",{className:"show-all-btn",onClick:O,children:"\ud83d\udd0d Alle Divisionen anzeigen"})]})]})};const Il=function(e){let{selectedTurnier:t}=e;return(0,we.jsx)("div",{className:"division-dashboard",children:(0,we.jsx)(Ol,{})})};function $l(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map((e=>[n,e])):[[n,r]])}),[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(Yo){}new Map;const Wl=l.startTransition;wl.flushSync,l.useId;function Ml(e){let{basename:t,children:n,future:r,window:a}=e,i=s.useRef();var l;null==i.current&&(i.current=(void 0===(l={window:a,v5Compat:!0})&&(l={}),x((function(e,t){let{pathname:n,search:r,hash:a}=e.location;return p("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:f(t)}),null,l)));let o=i.current,[c,d]=s.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=s.useCallback((e=>{u&&Wl?Wl((()=>d(e))):d(e)}),[d,u]);return s.useLayoutEffect((()=>o.listen(h)),[o,h]),s.useEffect((()=>fe(r)),[r]),s.createElement(ve,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Kl,Ul;function Vl(e){let t=s.useRef($l(e)),n=s.useRef(!1),r=ee(),a=s.useMemo((()=>function(e,t){let n=$l(e);return t&&t.forEach(((e,r)=>{n.has(r)||t.getAll(r).forEach((e=>{n.append(r,e)}))})),n}(r.search,n.current?null:t.current)),[r.search]),i=ne(),l=s.useCallback(((e,t)=>{const r=$l("function"===typeof e?e(a):e);n.current=!0,i("?"+r,t)}),[i,a]);return[a,l]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Kl||(Kl={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ul||(Ul={}));const ql="https://events.tda-intl.org";const Gl=function(e){var t,n,r,a,i,l,o,c,d,u,h,m,p,f,g,x,v,b,j,y,k;let{turnierId:w}=e;const[N]=Vl(),S=w||N.get("turnierId"),[_,C]=(0,s.useState)([]),[z,T]=(0,s.useState)(null),[A,E]=(0,s.useState)(null),[D,B]=(0,s.useState)(null),[R,F]=(0,s.useState)(!0),[L,P]=(0,s.useState)([]),[O,I]=(0,s.useState)(180),[$,W]=(0,s.useState)(!1),[M,K]=(0,s.useState)(!1),[U,V]=(0,s.useState)(null),[q,G]=(0,s.useState)(!1),[H,J]=(0,s.useState)(3),[Z,Y]=(0,s.useState)(180),[Q,X]=(0,s.useState)(!1),[ee,te]=(0,s.useState)(!1),[ne,re]=(0,s.useState)(null),[ae,ie]=(0,s.useState)(""),[se,le]=(0,s.useState)(!1),[oe,ce]=(0,s.useState)(null),[de,ue]=(0,s.useState)(!1),[he,me]=(0,s.useState)([]),pe=localStorage.getItem("token"),fe=(0,s.useRef)(null),ge=(0,s.useRef)({});(0,s.useEffect)((()=>($&&O>0?fe.current=setInterval((()=>{I((e=>e-1))}),1e3):0===O&&W(!1),()=>clearInterval(fe.current))),[$,O]);const xe=(0,s.useRef)(!1),ve=(0,s.useCallback)((async()=>{if(S){try{const e=await fetch(`${ql}/api/formen/turnier/${S}`,{headers:{Authorization:`Bearer ${pe}`}}),t=await e.json();if(t.success){const e=t.data.filter((e=>parseInt(e.teilnehmer_anzahl)>0));me(e);const n=e.filter((e=>"completed"!==e.status));return C(n),n.length>0?n[0].kategorie_id:null}}catch(e){console.error("Fehler beim Laden der Kategorien:",e)}finally{F(!1)}return null}}),[S,pe]);(0,s.useEffect)((()=>{(async()=>{const e=await ve();e&&!xe.current&&(xe.current=!0,be(e))})()}),[ve]);const be=async e=>{try{const t=await fetch(`${ql}/api/formen/kategorie/${e}`,{headers:{Authorization:`Bearer ${pe}`}}),n=await t.json();if(n.success){E(n.data),T(n.data.kategorie);const e=n.data.teilnehmer.sort(((e,t)=>(e.startnummer||999)-(t.startnummer||999))).find((e=>"completed"!==e.status&&"disqualified"!==e.status));e?ke(e):(B(null),setTimeout((()=>ye(n.data)),100))}}catch(t){console.error("Fehler beim Laden der Kategorie:",t)}},je=e=>!e||0===e||"0"===e,ye=e=>{if(null===e||void 0===e||!e.teilnehmer)return!1;const t=e.teilnehmer.filter((e=>"completed"===e.status)).map((e=>({...e,gesamt_punkte_normalized:Math.round(100*(parseFloat(e.gesamt_punkte)||0))/100}))).sort(((e,t)=>t.gesamt_punkte_normalized-e.gesamt_punkte_normalized));for(let n=0;n<t.length-1;n++){const e=t[n],r=t[n+1];if(e.gesamt_punkte_normalized===r.gesamt_punkte_normalized&&je(e.tie_resolved)&&je(r.tie_resolved)){const r=t.filter((t=>t.gesamt_punkte_normalized===e.gesamt_punkte_normalized&&je(t.tie_resolved)));if(r.length>1)return ce({teilnehmer:r,punkte:e.gesamt_punkte_normalized,platzierung:n+1}),le(!0),!0}}return!1},ke=async e=>{B(e),K(!1),W(!1),I(180);const t=(null===z||void 0===z?void 0:z.anzahl_kampfrichter)||3;try{var n;const r=await fetch(`${ql}/api/formen/wertung/${z.kategorie_id}/${e.wettkaempfer_id}`,{headers:{Authorization:`Bearer ${pe}`}}),a=await r.json();if(a.success&&null!==(n=a.data)&&void 0!==n&&n.wertungen&&a.data.wertungen.length>0){const e=Array.from({length:t},((e,t)=>{const n=a.data.wertungen.find((e=>e.kampfrichter_nummer===t+1));return{kampfrichter_nummer:t+1,punkte:n?n.punkte.toString():"",notiz:(null===n||void 0===n?void 0:n.notiz)||""}}));P(e)}else P(Array.from({length:t},((e,t)=>({kampfrichter_nummer:t+1,punkte:"",notiz:""}))))}catch(r){console.error("Fehler beim Laden der Wertungen:",r),P(Array.from({length:t},((e,t)=>({kampfrichter_nummer:t+1,punkte:"",notiz:""}))))}Be()},Ne=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,Se=()=>{W(!1),I(180),K(!1)},_e=(e,t)=>{if(!D||!z)return;const n=parseFloat(z.punkte_min)||6,r=parseFloat(z.punkte_max)||10,a=parseFloat(t);if(isNaN(a)||a<n||a>r)return;const i=`${D.wettkaempfer_id}-${e}`;ge.current[i]&&clearTimeout(ge.current[i]),ge.current[i]=setTimeout((async()=>{try{await fetch(`${ql}/api/formen/wertung`,{method:"POST",headers:{Authorization:`Bearer ${pe}`,"Content-Type":"application/json"},body:JSON.stringify({kategorie_id:z.kategorie_id,wettkaempfer_id:D.wettkaempfer_id,wertungen:[{kampfrichter_nummer:e,punkte:a,notiz:""}],partial:!0})})}catch(t){}delete ge.current[i]}),300)},Ce=async e=>{if(!D||!z)return;const t=parseFloat(z.punkte_min)||6,n=parseFloat(z.punkte_max)||10;if(!e.every((e=>""!==e.punkte&&!isNaN(parseFloat(e.punkte)))))return;if(!e.every((e=>{const r=parseFloat(e.punkte);return r>=t&&r<=n})))return;const r=e.reduce(((e,t)=>e+parseFloat(t.punkte)),0);try{const t=e.map((e=>({...e,punkte:parseFloat(e.punkte)}))),n=await fetch(`${ql}/api/formen/wertung`,{method:"POST",headers:{Authorization:`Bearer ${pe}`,"Content-Type":"application/json"},body:JSON.stringify({kategorie_id:z.kategorie_id,wettkaempfer_id:D.wettkaempfer_id,wertungen:t})});(await n.json()).success&&(Re(r),await be(z.kategorie_id),await ve(),Se(),setTimeout((()=>Ae()),500))}catch(a){console.error("Auto-Complete Fehler:",a)}},ze=e=>{if(!U||U.closed||!D)return;const t=e.filter((e=>""!==e.punkte&&!isNaN(parseFloat(e.punkte)))),n=t.reduce(((e,t)=>e+parseFloat(t.punkte)),0),r=e.map(((e,t)=>`\n      <div class="score-item ${e.punkte?"filled":""}">\n        <div class="score-label">KR ${t+1}</div>\n        <div class="score-value">${e.punkte||"-"}</div>\n      </div>\n    `)).join("");U.document.body.innerHTML=`\n      <style>\n        * { margin: 0; padding: 0; box-sizing: border-box; }\n        body {\n          background: linear-gradient(180deg, #0d0a07 0%, #1a1510 50%, #0d0a07 100%);\n          color: #fff;\n          font-family: 'Segoe UI', sans-serif;\n          min-height: 100vh;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          overflow: hidden;\n        }\n        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.02); } }\n        @keyframes scoreIn { from { opacity: 0; transform: scale(0.5); } to { opacity: 1; transform: scale(1); } }\n        .header-bar {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          background: linear-gradient(180deg, #8B0000 0%, #5c0000 100%);\n          padding: 1rem 2rem;\n          border-bottom: 3px solid #d4af37;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        .header-kategorie { color: #d4af37; font-size: 1.2rem; }\n        .header-title { color: #fff; font-size: 1.5rem; font-weight: 700; letter-spacing: 3px; }\n        .header-status { color: #4CAF50; font-size: 1rem; letter-spacing: 2px; }\n        .athlete-section { text-align: center; margin-bottom: 2rem; }\n        .athlete-number {\n          display: inline-block;\n          background: linear-gradient(135deg, #d4af37, #b8942d);\n          color: #1a1510;\n          padding: 0.5rem 2rem;\n          border-radius: 30px;\n          font-size: 1.5rem;\n          font-weight: 900;\n          margin-bottom: 1rem;\n        }\n        .athlete-name { font-size: 3.5rem; font-weight: 900; margin-bottom: 0.5rem; }\n        .athlete-verein { color: #888; font-size: 1.3rem; }\n        .scores-container {\n          display: flex;\n          gap: 1.5rem;\n          margin-bottom: 2rem;\n        }\n        .score-item {\n          background: rgba(0,0,0,0.4);\n          border: 2px solid #5c4033;\n          border-radius: 12px;\n          padding: 1.5rem 2rem;\n          text-align: center;\n          min-width: 120px;\n          transition: all 0.3s;\n        }\n        .score-item.filled {\n          border-color: #d4af37;\n          background: rgba(212,175,55,0.1);\n          animation: scoreIn 0.3s ease-out;\n        }\n        .score-label { color: #888; font-size: 0.9rem; letter-spacing: 2px; margin-bottom: 0.5rem; }\n        .score-value { font-size: 2.5rem; font-weight: 700; color: #d4af37; }\n        .score-item:not(.filled) .score-value { color: #555; }\n        .summe-container {\n          background: linear-gradient(180deg, rgba(139,0,0,0.4), rgba(92,0,0,0.2));\n          border: 3px solid #d4af37;\n          border-radius: 16px;\n          padding: 2rem 4rem;\n          text-align: center;\n          animation: pulse 2s ease-in-out infinite;\n        }\n        .summe-label { color: #d4af37; font-size: 1.5rem; letter-spacing: 4px; margin-bottom: 0.5rem; }\n        .summe-value { font-size: 6rem; font-weight: 900; color: #fff; }\n        .summe-info { color: #888; font-size: 1rem; margin-top: 0.5rem; }\n      </style>\n      <div class="header-bar">\n        <div class="header-kategorie">${(null===z||void 0===z?void 0:z.kategorie_name)||""}</div>\n        <div class="header-title">\u70b9\u6570 WERTUNG</div>\n        <div class="header-status">LIVE</div>\n      </div>\n      <div class="athlete-section">\n        <div class="athlete-number">#${D.startnummer}</div>\n        <div class="athlete-name">${D.vorname} ${D.nachname}</div>\n        <div class="athlete-verein">${D.verein_name}</div>\n      </div>\n      <div class="scores-container">\n        ${r}\n      </div>\n      <div class="summe-container">\n        <div class="summe-label">\u5408\u8a08 GESAMT</div>\n        <div class="summe-value">${n.toFixed(2)}</div>\n        <div class="summe-info">${t.length} von ${e.length} Wertungen</div>\n      </div>\n    `},Te=async(e,t)=>{if(oe)try{const n=await fetch(`${ql}/api/formen/tie-breaker`,{method:"POST",headers:{Authorization:`Bearer ${pe}`,"Content-Type":"application/json"},body:JSON.stringify({kategorie_id:z.kategorie_id,teilnehmer_ids:oe.teilnehmer.map((e=>e.wettkaempfer_id)),method:e,winner_id:t,platzierung:oe.platzierung})}),r=await n.json();r.success?(le(!1),ce(null),await be(z.kategorie_id),Ee()):alert("Fehler: "+r.message)}catch(n){console.error("Fehler bei Tie-Breaker:",n)}},Ae=()=>{if(!A)return;0===A.teilnehmer.filter((e=>"completed"!==e.status&&"disqualified"!==e.status)).length&&Ee()},Ee=async()=>{if(null===z||void 0===z||!z.kategorie_id)return;const e=await fetch(`${ql}/api/formen/kategorie/${z.kategorie_id}`,{headers:{Authorization:`Bearer ${pe}`}}),t=await e.json();if(!t.success)return;if(!ye(t.data)){const e=t.data.teilnehmer.every((e=>"completed"===e.status||"disqualified"===e.status)),n=t.data.teilnehmer.filter((e=>"completed"===e.status));e&&n.length>0&&(X(!0),setTimeout((()=>Le()),500))}},De=(null===A||void 0===A||null===(t=A.teilnehmer)||void 0===t?void 0:t.some((e=>"completed"===e.status||e.gesamt_punkte>0)))||!1,Be=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;if(!e||e.closed)return;const t=D,n=z;e.document.body.innerHTML=`\n      <style>\n        * { margin: 0; padding: 0; box-sizing: border-box; }\n        body {\n          background: linear-gradient(180deg, #0d0a07 0%, #1a1510 50%, #0d0a07 100%);\n          color: #fff;\n          font-family: 'Segoe UI', sans-serif;\n          min-height: 100vh;\n          overflow: hidden;\n        }\n        @keyframes floatUp {\n          0% { transform: translateY(0) rotate(0deg); opacity: 0.08; }\n          50% { opacity: 0.15; }\n          100% { transform: translateY(-100vh) rotate(10deg); opacity: 0; }\n        }\n        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }\n        @keyframes glow { 0%, 100% { box-shadow: 0 0 30px rgba(212,175,55,0.5); } 50% { box-shadow: 0 0 60px rgba(212,175,55,0.8); } }\n        .kanji {\n          position: absolute;\n          color: rgba(212,175,55,0.08);\n          animation: floatUp 15s linear infinite;\n          font-size: 8rem;\n        }\n        .corner { position: absolute; width: 60px; height: 60px; }\n        .corner-h { position: absolute; height: 3px; background: linear-gradient(90deg, #d4af37, transparent); box-shadow: 0 0 10px rgba(212,175,55,0.5); }\n        .corner-v { position: absolute; width: 3px; background: linear-gradient(180deg, #d4af37, transparent); box-shadow: 0 0 10px rgba(212,175,55,0.5); }\n        .header {\n          background: linear-gradient(180deg, #8B0000 0%, #5c0000 100%);\n          padding: 1.5rem 3rem;\n          border-bottom: 4px solid #d4af37;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        .header-corners { position: absolute; top: 8px; left: 8px; right: 8px; bottom: 8px; pointer-events: none; }\n        .header-corners::before, .header-corners::after { content: ''; position: absolute; width: 20px; height: 20px; border: 2px solid #d4af37; }\n        .header-corners::before { top: 0; left: 0; border-right: none; border-bottom: none; }\n        .header-corners::after { top: 0; right: 0; border-left: none; border-bottom: none; }\n        .kategorie-badge {\n          background: linear-gradient(135deg, rgba(212,175,55,0.2), rgba(92,64,51,0.3));\n          border: 2px solid #d4af37;\n          padding: 0.8rem 1.5rem;\n          border-radius: 4px;\n        }\n        .kategorie-label { color: #888; font-size: 0.8rem; letter-spacing: 2px; }\n        .kategorie-name { color: #d4af37; font-weight: 700; font-size: 1.3rem; }\n        .title-center { text-align: center; }\n        .title-sub { color: #d4af37; font-size: 0.9rem; letter-spacing: 4px; }\n        .title-main { color: #fff; font-size: 2rem; font-weight: 700; letter-spacing: 3px; }\n        .timer-box {\n          background: rgba(0,0,0,0.4);\n          border: 2px solid ${$?"#4CAF50":"#d4af37"};\n          padding: 0.8rem 2rem;\n          border-radius: 8px;\n          text-align: center;\n          animation: ${$?"pulse 1s infinite":"none"};\n        }\n        .timer-label { color: #888; font-size: 0.7rem; letter-spacing: 2px; }\n        .timer-value { color: ${O<30?"#f44336":"#d4af37"}; font-size: 2.5rem; font-weight: 700; font-family: monospace; }\n        .main-content {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          min-height: calc(100vh - 150px);\n          padding: 3rem;\n          position: relative;\n        }\n        .athlete-card {\n          background: linear-gradient(180deg, rgba(139,0,0,0.3) 0%, rgba(92,0,0,0.2) 100%);\n          border: 3px solid #d4af37;\n          border-radius: 16px;\n          padding: 3rem 5rem;\n          text-align: center;\n          position: relative;\n          animation: glow 3s ease-in-out infinite;\n        }\n        .athlete-number {\n          position: absolute;\n          top: -30px;\n          left: 50%;\n          transform: translateX(-50%);\n          background: linear-gradient(135deg, #d4af37, #b8942d);\n          color: #1a1510;\n          padding: 0.5rem 2rem;\n          border-radius: 30px;\n          font-size: 1.5rem;\n          font-weight: 900;\n        }\n        .athlete-name {\n          font-size: 4rem;\n          font-weight: 900;\n          color: #fff;\n          margin: 1rem 0;\n          text-shadow: 0 0 30px rgba(255,255,255,0.3);\n        }\n        .athlete-details {\n          display: flex;\n          justify-content: center;\n          gap: 3rem;\n          color: #c4b89a;\n          font-size: 1.3rem;\n        }\n        .status-text {\n          margin-top: 2rem;\n          font-size: 1.5rem;\n          letter-spacing: 4px;\n          color: ${M?"#4CAF50":"#888"};\n        }\n        .no-athlete {\n          text-align: center;\n          color: #888;\n        }\n        .no-athlete-icon { font-size: 6rem; margin-bottom: 1rem; }\n        .no-athlete-text { font-size: 2rem; color: #d4af37; }\n      </style>\n\n      \x3c!-- Floating Kanji --\x3e\n      <div class="kanji" style="left: 5%; top: 100%; animation-delay: 0s;">\u5f62</div>\n      <div class="kanji" style="left: 20%; top: 100%; animation-delay: 2s;">\u6b66</div>\n      <div class="kanji" style="left: 35%; top: 100%; animation-delay: 4s;">\u9053</div>\n      <div class="kanji" style="left: 50%; top: 100%; animation-delay: 6s;">\u5fc3</div>\n      <div class="kanji" style="left: 65%; top: 100%; animation-delay: 8s;">\u6280</div>\n      <div class="kanji" style="left: 80%; top: 100%; animation-delay: 10s;">\u52dd</div>\n\n      \x3c!-- Corners --\x3e\n      <div class="corner" style="top: 20px; left: 20px;">\n        <div class="corner-h" style="top: 0; left: 0; width: 60px;"></div>\n        <div class="corner-v" style="top: 0; left: 0; height: 60px;"></div>\n      </div>\n      <div class="corner" style="top: 20px; right: 20px;">\n        <div class="corner-h" style="top: 0; right: 0; width: 60px; background: linear-gradient(270deg, #d4af37, transparent);"></div>\n        <div class="corner-v" style="top: 0; right: 0; height: 60px;"></div>\n      </div>\n      <div class="corner" style="bottom: 20px; left: 20px;">\n        <div class="corner-h" style="bottom: 0; left: 0; width: 60px;"></div>\n        <div class="corner-v" style="bottom: 0; left: 0; height: 60px; background: linear-gradient(0deg, #d4af37, transparent);"></div>\n      </div>\n      <div class="corner" style="bottom: 20px; right: 20px;">\n        <div class="corner-h" style="bottom: 0; right: 0; width: 60px; background: linear-gradient(270deg, #d4af37, transparent);"></div>\n        <div class="corner-v" style="bottom: 0; right: 0; height: 60px; background: linear-gradient(0deg, #d4af37, transparent);"></div>\n      </div>\n\n      \x3c!-- Header --\x3e\n      <div class="header" style="position: relative;">\n        <div class="header-corners"></div>\n        <div class="kategorie-badge">\n          <div class="kategorie-label">\u90e8\u9580 KATEGORIE</div>\n          <div class="kategorie-name">${(null===n||void 0===n?void 0:n.kategorie_name)||"Keine Kategorie"}</div>\n        </div>\n        <div class="title-center">\n          <div class="title-sub">\u5f62 FORMEN</div>\n          <div class="title-main">WERTUNG</div>\n        </div>\n        <div class="timer-box">\n          <div class="timer-label">\u6642\u9593 ZEIT</div>\n          <div class="timer-value">${Ne(O)}</div>\n        </div>\n      </div>\n\n      \x3c!-- Main Content --\x3e\n      <div class="main-content">\n        ${t?`\n          <div class="athlete-card">\n            <div class="athlete-number">#${t.startnummer}</div>\n            <div class="athlete-name">${t.vorname} ${t.nachname}</div>\n            <div class="athlete-details">\n              <span>\ud83c\udfdb\ufe0f ${t.verein_name}</span>\n              <span>\ud83e\udd4b ${t.gurtfarbe||"Unbekannt"}</span>\n            </div>\n            <div class="status-text">\n              ${M?$?"\u6f14\u6b66\u4e2d PERFORMING":"\u23f8 PAUSIERT":"\u6e96\u5099\u5b8c\u4e86 BEREIT"}\n            </div>\n          </div>\n        `:'\n          <div class="no-athlete">\n            <div class="no-athlete-icon">\u2705</div>\n            <div class="no-athlete-text">ALLE BEWERTET</div>\n          </div>\n        '}\n      </div>\n    `},Re=e=>{if(!U||U.closed)return;const t=`${null===D||void 0===D?void 0:D.vorname} ${null===D||void 0===D?void 0:D.nachname}`;U.document.body.innerHTML=`\n      <style>\n        * { margin: 0; padding: 0; box-sizing: border-box; }\n        body {\n          background: linear-gradient(180deg, #0d0a07 0%, #1a1510 50%, #0d0a07 100%);\n          color: #fff;\n          font-family: 'Segoe UI', sans-serif;\n          min-height: 100vh;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          overflow: hidden;\n        }\n        @keyframes scaleIn { from { transform: scale(0); } to { transform: scale(1); } }\n        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }\n        @keyframes glow { 0%, 100% { text-shadow: 0 0 30px rgba(212,175,55,0.5); } 50% { text-shadow: 0 0 60px rgba(212,175,55,1); } }\n        .result-container { text-align: center; animation: fadeInUp 0.8s ease-out; }\n        .result-label { color: #d4af37; font-size: 2rem; letter-spacing: 8px; margin-bottom: 1rem; }\n        .result-name { font-size: 3rem; font-weight: 700; margin-bottom: 2rem; }\n        .result-score {\n          font-size: 12rem;\n          font-weight: 900;\n          color: #d4af37;\n          animation: glow 2s ease-in-out infinite, scaleIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n        }\n        .result-unit { font-size: 2rem; color: #888; margin-top: 1rem; letter-spacing: 4px; }\n      </style>\n      <div class="result-container">\n        <div class="result-label">\u7d50\u679c ERGEBNIS</div>\n        <div class="result-name">${t}</div>\n        <div class="result-score">${e.toFixed(2)}</div>\n        <div class="result-unit">PUNKTE</div>\n      </div>\n    `,setTimeout((()=>{Be(),setTimeout((()=>Fe()),1e4)}),5e3)},Fe=()=>{var e,t;if(!U||U.closed)return;const n=(null===A||void 0===A||null===(e=A.teilnehmer)||void 0===e||null===(t=e.filter((e=>"completed"===e.status)))||void 0===t?void 0:t.sort(((e,t)=>t.gesamt_punkte-e.gesamt_punkte)))||[];if(0===n.length)return;const r=n.slice(0,10).map(((e,t)=>{var n;return`\n      <div class="rank-item ${t<3?"top-"+(t+1):""}">\n        <span class="rank-pos">${0===t?"\ud83e\udd47":1===t?"\ud83e\udd48":2===t?"\ud83e\udd49":t+1+"."}</span>\n        <span class="rank-name">${e.vorname} ${e.nachname}</span>\n        <span class="rank-verein">${e.verein_name}</span>\n        <span class="rank-score">${null===(n=e.gesamt_punkte)||void 0===n?void 0:n.toFixed(2)}</span>\n      </div>\n    `})).join("");U.document.body.innerHTML=`\n      <style>\n        * { margin: 0; padding: 0; box-sizing: border-box; }\n        body {\n          background: linear-gradient(180deg, #0d0a07 0%, #1a1510 50%, #0d0a07 100%);\n          color: #fff;\n          font-family: 'Segoe UI', sans-serif;\n          min-height: 100vh;\n          padding: 2rem;\n          overflow: hidden;\n        }\n        @keyframes slideIn { from { opacity: 0; transform: translateX(-30px); } to { opacity: 1; transform: translateX(0); } }\n        .ranking-container { max-width: 1200px; margin: 0 auto; }\n        .ranking-header {\n          text-align: center;\n          margin-bottom: 2rem;\n          padding: 1.5rem;\n          background: linear-gradient(180deg, #8B0000 0%, #5c0000 100%);\n          border: 3px solid #d4af37;\n          border-radius: 12px;\n        }\n        .ranking-title { color: #d4af37; font-size: 1.5rem; letter-spacing: 6px; }\n        .ranking-subtitle { color: #fff; font-size: 2.5rem; font-weight: 700; margin-top: 0.5rem; }\n        .kategorie-name { color: #c4b89a; font-size: 1.2rem; margin-top: 0.5rem; }\n        .rank-list { display: flex; flex-direction: column; gap: 0.8rem; }\n        .rank-item {\n          display: grid;\n          grid-template-columns: 80px 1fr 200px 120px;\n          align-items: center;\n          padding: 1rem 1.5rem;\n          background: rgba(0,0,0,0.4);\n          border: 2px solid #5c4033;\n          border-radius: 8px;\n          animation: slideIn 0.5s ease-out backwards;\n        }\n        .rank-item:nth-child(1) { animation-delay: 0.1s; }\n        .rank-item:nth-child(2) { animation-delay: 0.2s; }\n        .rank-item:nth-child(3) { animation-delay: 0.3s; }\n        .rank-item:nth-child(4) { animation-delay: 0.4s; }\n        .rank-item:nth-child(5) { animation-delay: 0.5s; }\n        .top-1 { border-color: #FFD700; background: rgba(255,215,0,0.1); }\n        .top-2 { border-color: #C0C0C0; background: rgba(192,192,192,0.1); }\n        .top-3 { border-color: #CD7F32; background: rgba(205,127,50,0.1); }\n        .rank-pos { font-size: 2rem; font-weight: 700; }\n        .rank-name { font-size: 1.5rem; font-weight: 600; color: #fff; }\n        .rank-verein { color: #888; font-size: 1rem; }\n        .rank-score { font-size: 1.8rem; font-weight: 700; color: #d4af37; text-align: right; }\n      </style>\n      <div class="ranking-container">\n        <div class="ranking-header">\n          <div class="ranking-title">\u52dd AKTUELLE RANGLISTE</div>\n          <div class="ranking-subtitle">WERTUNGSREIHENFOLGE</div>\n          <div class="kategorie-name">${(null===z||void 0===z?void 0:z.kategorie_name)||""}</div>\n        </div>\n        <div class="rank-list">\n          ${r}\n        </div>\n      </div>\n    `,setTimeout((()=>Be()),1e4)},Le=()=>{var e,t,n,r,a;if(!U||U.closed)return;const i=(null===A||void 0===A||null===(e=A.teilnehmer)||void 0===e||null===(t=e.filter((e=>"completed"===e.status)))||void 0===t?void 0:t.sort(((e,t)=>t.gesamt_punkte-e.gesamt_punkte)))||[],s=i[0],l=i[1],o=i[2];U.document.body.innerHTML=`\n      <style>\n        * { margin: 0; padding: 0; box-sizing: border-box; }\n        body {\n          background: linear-gradient(180deg, #0d0a07 0%, #1a1510 50%, #0d0a07 100%);\n          color: #fff;\n          font-family: 'Segoe UI', sans-serif;\n          min-height: 100vh;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          overflow: hidden;\n        }\n        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }\n        @keyframes glow { 0%, 100% { box-shadow: 0 0 30px rgba(212,175,55,0.5); } 50% { box-shadow: 0 0 60px rgba(212,175,55,0.8); } }\n        @keyframes fadeInUp { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }\n        .winner-header {\n          text-align: center;\n          margin-bottom: 3rem;\n          animation: fadeInUp 0.8s ease-out;\n        }\n        .winner-kanji { font-size: 4rem; color: #d4af37; margin-bottom: 0.5rem; }\n        .winner-title { font-size: 3rem; font-weight: 700; letter-spacing: 8px; }\n        .kategorie { color: #888; font-size: 1.5rem; margin-top: 0.5rem; }\n        .podium { display: flex; align-items: flex-end; gap: 2rem; }\n        .place {\n          text-align: center;\n          padding: 2rem;\n          border-radius: 16px;\n          animation: fadeInUp 0.8s ease-out backwards;\n        }\n        .place-1 {\n          order: 2;\n          background: linear-gradient(180deg, rgba(255,215,0,0.2), rgba(255,215,0,0.05));\n          border: 3px solid #FFD700;\n          animation-delay: 0.3s;\n          animation: glow 3s ease-in-out infinite;\n        }\n        .place-2 {\n          order: 1;\n          background: linear-gradient(180deg, rgba(192,192,192,0.2), rgba(192,192,192,0.05));\n          border: 3px solid #C0C0C0;\n          animation-delay: 0.5s;\n        }\n        .place-3 {\n          order: 3;\n          background: linear-gradient(180deg, rgba(205,127,50,0.2), rgba(205,127,50,0.05));\n          border: 3px solid #CD7F32;\n          animation-delay: 0.7s;\n        }\n        .medal { font-size: 5rem; animation: float 2s ease-in-out infinite; }\n        .place-1 .medal { animation-delay: 0s; }\n        .place-2 .medal { animation-delay: 0.3s; }\n        .place-3 .medal { animation-delay: 0.6s; }\n        .place-name { font-size: 2rem; font-weight: 700; margin: 1rem 0 0.5rem; }\n        .place-verein { color: #888; font-size: 1rem; margin-bottom: 1rem; }\n        .place-score { font-size: 2.5rem; font-weight: 900; color: #d4af37; }\n        .place-label { color: #888; font-size: 0.9rem; letter-spacing: 2px; }\n      </style>\n      <div class="winner-header">\n        <div class="winner-kanji">\u52dd\u8005</div>\n        <div class="winner-title">SIEGEREHRUNG</div>\n        <div class="kategorie">${(null===z||void 0===z?void 0:z.kategorie_name)||""}</div>\n      </div>\n      <div class="podium">\n        ${l?`\n          <div class="place place-2">\n            <div class="medal">\ud83e\udd48</div>\n            <div class="place-name">${l.vorname} ${l.nachname}</div>\n            <div class="place-verein">${l.verein_name}</div>\n            <div class="place-score">${null===(n=l.gesamt_punkte)||void 0===n?void 0:n.toFixed(2)}</div>\n            <div class="place-label">SILBER</div>\n          </div>\n        `:""}\n        ${s?`\n          <div class="place place-1">\n            <div class="medal">\ud83e\udd47</div>\n            <div class="place-name">${s.vorname} ${s.nachname}</div>\n            <div class="place-verein">${s.verein_name}</div>\n            <div class="place-score">${null===(r=s.gesamt_punkte)||void 0===r?void 0:r.toFixed(2)}</div>\n            <div class="place-label">GOLD</div>\n          </div>\n        `:""}\n        ${o?`\n          <div class="place place-3">\n            <div class="medal">\ud83e\udd49</div>\n            <div class="place-name">${o.vorname} ${o.nachname}</div>\n            <div class="place-verein">${o.verein_name}</div>\n            <div class="place-score">${null===(a=o.gesamt_punkte)||void 0===a?void 0:a.toFixed(2)}</div>\n            <div class="place-label">BRONZE</div>\n          </div>\n        `:""}\n      </div>\n    `};(0,s.useEffect)((()=>{U&&!U.closed&&Be()}),[O,$,M,D]);const Pe=L.reduce(((e,t)=>e+(parseFloat(t.punkte)||0)),0),Oe=(null===A||void 0===A||null===(n=A.teilnehmer)||void 0===n||null===(r=n.filter((e=>"completed"===e.status)))||void 0===r?void 0:r.sort(((e,t)=>t.gesamt_punkte-e.gesamt_punkte)))||[];return R?(0,we.jsxs)("div",{className:"formen-loading-jp",children:[(0,we.jsx)("div",{className:"loading-kanji",children:"\u5f62"}),(0,we.jsx)("p",{children:"Lade Kategorien..."})]}):(0,we.jsxs)("div",{className:"formen-schreiber-jp",children:[(0,we.jsxs)("div",{className:"schreiber-header-jp",children:[(0,we.jsx)("div",{className:"header-corners-jp"}),(0,we.jsxs)("div",{className:"header-left-jp",children:[(0,we.jsx)("button",{className:"btn-back-jp",onClick:()=>{window.opener?window.close():window.history.back()},title:"Zur\xfcck",children:"\u2190 Zur\xfcck"}),(0,we.jsxs)("div",{className:"kategorie-select-jp",children:[(0,we.jsx)("span",{className:"select-label",children:"\u90e8\u9580"}),(0,we.jsx)("select",{value:(null===z||void 0===z?void 0:z.kategorie_id)||"",onChange:e=>be(parseInt(e.target.value)),size:1,children:0===(de?he:_).length?(0,we.jsx)("option",{value:"",children:"Keine Kategorien"}):(de?he:_).map((e=>(0,we.jsxs)("option",{value:e.kategorie_id,children:["completed"===e.status?"\u2705 ":"",e.kategorie_name," (",e.abgeschlossen||0,"/",e.teilnehmer_anzahl,")"]},e.kategorie_id)))}),(0,we.jsxs)("span",{className:"kategorie-count",children:["(",(de?he:_).length," Kat.)"]})]}),(0,we.jsx)("button",{className:"btn-show-completed-jp "+(de?"active":""),onClick:()=>ue(!de),title:de?"Nur aktive Kategorien":"Abgeschlossene Kategorien anzeigen",children:de?"\ud83d\udcc2 Alle":"\ud83d\udcc1 +Abgeschlossen"})]}),(0,we.jsxs)("div",{className:"header-timer-jp",children:[(0,we.jsx)("span",{className:"timer-value-header "+(O<30?"warning":""),children:Ne(O)}),(0,we.jsxs)("div",{className:"timer-controls-header",children:[(0,we.jsx)("button",{className:"timer-btn-small "+(M&&$?"pause":"start"),onClick:()=>{M?W(!$):(K(!0),W(!0)),Be()},children:M&&$?"\u23f8":"\u25b6"}),(0,we.jsx)("button",{className:"timer-btn-small reset",onClick:Se,children:"\u21bb"})]})]}),(0,we.jsxs)("div",{className:"header-actions-jp",children:[(0,we.jsx)("button",{className:"btn-trophy-jp",onClick:()=>X(!0),title:"Siegerehrung anzeigen",children:"\ud83c\udfc6"}),(0,we.jsx)("button",{className:"btn-settings-jp",onClick:()=>{J((null===z||void 0===z?void 0:z.anzahl_kampfrichter)||3),Y(O>0?60*Math.ceil(O/60):180),G(!0)},title:"Einstellungen",children:"\u2699\ufe0f"}),(0,we.jsx)("button",{className:"btn-spectator-jp",onClick:()=>{const e=window.open("","FormenSpectator","width=1920,height=1080");V(e),Be(e)},title:"2. Bildschirm \xf6ffnen",children:"\ud83d\udcfa"}),(0,we.jsx)("button",{className:"btn-reset-jp",onClick:async()=>{if(z&&window.confirm(`Wirklich alle Wertungen f\xfcr "${z.kategorie_name}" zur\xfccksetzen?`))try{const e=await fetch(`${ql}/api/formen/kategorie/${z.kategorie_id}/reset`,{method:"DELETE",headers:{Authorization:`Bearer ${pe}`,"Content-Type":"application/json"},body:JSON.stringify({confirm:"RESET"})}),t=await e.json();t.success?(alert("Kategorie wurde zur\xfcckgesetzt!"),await be(z.kategorie_id),await ve()):alert("Fehler: "+t.message)}catch(e){console.error("Fehler beim Reset:",e),alert("Fehler beim Zur\xfccksetzen der Kategorie")}},title:"Kategorie zur\xfccksetzen",children:"\ud83d\udd04"})]})]}),z?(0,we.jsxs)("div",{className:"schreiber-content-jp",children:[(0,we.jsxs)("div",{className:"wertung-panel-jp",children:[D?(0,we.jsxs)("div",{className:"athlete-card-jp",children:[(0,we.jsxs)("div",{className:"athlete-header-jp",children:[(0,we.jsx)("span",{className:"label-jp",children:"\u9078\u624b ATHLET"}),(0,we.jsxs)("span",{className:"startnummer-jp",children:["#",D.startnummer]})]}),(0,we.jsxs)("div",{className:"athlete-content-jp",children:[(0,we.jsx)("div",{className:"athlete-photo-jp",children:D.foto_url?(0,we.jsx)("img",{src:D.foto_url,alt:D.vorname}):(0,we.jsx)("div",{className:"photo-placeholder-jp",children:(0,we.jsx)("span",{children:"\ud83e\udd4b"})})}),(0,we.jsxs)("div",{className:"athlete-details-jp",children:[(0,we.jsxs)("div",{className:"athlete-name-jp",children:[D.vorname," ",D.nachname]}),(0,we.jsxs)("div",{className:"athlete-info-jp",children:[(0,we.jsxs)("span",{children:["\ud83c\udfdb\ufe0f ",D.verein_name]}),(0,we.jsxs)("span",{children:["\ud83e\udd4b ",D.gurtfarbe||"-"]})]})]}),(0,we.jsxs)("div",{className:"athlete-score-jp",children:[(0,we.jsx)("span",{className:"score-label-jp",children:"\u5408\u8a08"}),(0,we.jsx)("span",{className:"score-value-jp",children:Pe.toFixed(2)})]}),(0,we.jsx)("button",{className:"btn-disqualify-jp",onClick:()=>{re(D),te(!0)},title:"Disqualifizieren",children:"\ud83d\udeab"})]})]}):(0,we.jsxs)("div",{className:"all-done-container-jp",children:[(0,we.jsx)("div",{className:"all-done-icon",children:"\ud83c\udfc6"}),(0,we.jsx)("div",{className:"all-done-text",children:"Alle bewertet!"}),(0,we.jsxs)("div",{className:"all-done-buttons",children:[(0,we.jsx)("button",{className:"show-winner-btn-jp",onClick:()=>X(!0),children:"\ud83c\udf89 Siegerehrung anzeigen"}),(0,we.jsx)("button",{className:"check-ties-btn-jp",onClick:()=>Ee(),children:"\u2696\ufe0f Gleichstand pr\xfcfen"})]}),Oe.length>0&&(0,we.jsxs)("div",{className:"quick-results-jp",children:[(0,we.jsxs)("div",{className:"quick-result gold",children:["\ud83e\udd47 ",null===(a=Oe[0])||void 0===a?void 0:a.vorname," ",null===(i=Oe[0])||void 0===i?void 0:i.nachname," - ",null===(l=Oe[0])||void 0===l||null===(o=l.gesamt_punkte)||void 0===o?void 0:o.toFixed(2)]}),Oe[1]&&(0,we.jsxs)("div",{className:"quick-result silver",children:["\ud83e\udd48 ",null===(c=Oe[1])||void 0===c?void 0:c.vorname," ",null===(d=Oe[1])||void 0===d?void 0:d.nachname," - ",null===(u=Oe[1])||void 0===u||null===(h=u.gesamt_punkte)||void 0===h?void 0:h.toFixed(2)]}),Oe[2]&&(0,we.jsxs)("div",{className:"quick-result bronze",children:["\ud83e\udd49 ",null===(m=Oe[2])||void 0===m?void 0:m.vorname," ",null===(p=Oe[2])||void 0===p?void 0:p.nachname," - ",null===(f=Oe[2])||void 0===f||null===(g=f.gesamt_punkte)||void 0===g?void 0:g.toFixed(2)]})]})]}),D&&(0,we.jsxs)("div",{className:"wertung-grid-jp",children:[(0,we.jsxs)("h3",{className:"section-title-jp",children:[(0,we.jsx)("span",{className:"kanji-small",children:"\u70b9"}),"WERTUNGEN (",L.length," Kampfrichter)"]}),(0,we.jsx)("div",{className:"kampfrichter-row-jp",children:L.map(((e,t)=>(0,we.jsxs)("div",{className:"kampfrichter-card-jp",children:[(0,we.jsxs)("div",{className:"kr-header-jp",children:[(0,we.jsx)("span",{className:"kr-number-jp",children:t+1}),(0,we.jsx)("span",{className:"kr-label-jp",children:"\u5be9\u5224"})]}),(0,we.jsx)("input",{type:"number",step:"0.1",value:e.punkte,onChange:e=>((e,t)=>{const n=[...L];n[e].punkte=t,P(n),""===t||isNaN(parseFloat(t))||(_e(e+1,t),ze(n),Ce(n))})(t,e.target.value),onBlur:e=>{""===e.target.value||isNaN(parseFloat(e.target.value))||(_e(t+1,e.target.value),Ce(L))},placeholder:`${z.punkte_min}-${z.punkte_max}`,className:"punkte-input-jp"}),(0,we.jsx)("div",{className:"quick-btns-jp",children:[parseFloat(z.punkte_min),(parseFloat(z.punkte_min)+parseFloat(z.punkte_max))/2,parseFloat(z.punkte_max)].map((n=>(0,we.jsx)("button",{className:"quick-btn-jp "+(parseFloat(e.punkte)===n?"active":""),onClick:()=>((e,t)=>{const n=[...L];n[e].punkte=t.toString(),P(n),_e(e+1,t),ze(n),Ce(n)})(t,n),children:n.toFixed(1)},n)))})]},t)))})]})]}),(0,we.jsxs)("div",{className:"sidebar-jp",children:[(0,we.jsxs)("div",{className:"list-card-jp",children:[(0,we.jsxs)("div",{className:"list-header-jp",children:[(0,we.jsxs)("h3",{className:"list-title-jp",children:[(0,we.jsx)("span",{className:"kanji-small",children:"\u9806"}),"STARTREIHENFOLGE"]}),(0,we.jsx)("button",{className:"btn-shuffle-small-jp "+(De?"disabled":""),onClick:async()=>{if(z)if(De)alert("Mischen nicht m\xf6glich - Kategorie wurde bereits gestartet");else if(window.confirm("Startreihenfolge zuf\xe4llig mischen?"))try{const e=await fetch(`${ql}/api/formen/kategorie/${z.kategorie_id}/startreihenfolge`,{method:"POST",headers:{Authorization:`Bearer ${pe}`,"Content-Type":"application/json"},body:JSON.stringify({mode:"shuffle"})}),t=await e.json();t.success?await be(z.kategorie_id):alert("Fehler: "+t.message)}catch(e){console.error("Fehler beim Mischen:",e)}},disabled:De,title:De?"Mischen nicht m\xf6glich - Kategorie bereits gestartet":"Reihenfolge mischen",children:"\ud83d\udd00 Mischen"})]}),(0,we.jsx)("div",{className:"list-scroll-jp",children:null===A||void 0===A||null===(x=A.teilnehmer)||void 0===x||null===(v=x.sort(((e,t)=>(e.startnummer||999)-(t.startnummer||999))))||void 0===v?void 0:v.map((e=>{var t;return(0,we.jsxs)("div",{className:`list-item-jp ${e.status} ${(null===D||void 0===D?void 0:D.wettkaempfer_id)===e.wettkaempfer_id?"active":""}`,onClick:()=>ke(e),title:"completed"===e.status?"Klicken zum Bearbeiten":"",children:[(0,we.jsx)("span",{className:"item-nummer-jp",children:e.startnummer}),(0,we.jsxs)("span",{className:"item-name-jp",children:[e.vorname," ",e.nachname]}),(0,we.jsx)("span",{className:"item-status-jp",children:"completed"===e.status?`\u2705 ${null===(t=e.gesamt_punkte)||void 0===t?void 0:t.toFixed(2)}`:"disqualified"===e.status?"\ud83d\udeab":"\u23f3"})]},e.wettkaempfer_id)}))})]}),(0,we.jsxs)("div",{className:"list-card-jp rangliste",children:[(0,we.jsxs)("h3",{className:"list-title-jp",children:[(0,we.jsx)("span",{className:"kanji-small",children:"\u52dd"}),"RANGLISTE"]}),0===Oe.length?(0,we.jsx)("div",{className:"no-results-jp",children:"Noch keine Wertungen"}):(0,we.jsx)("div",{className:"list-scroll-jp",children:Oe.map(((e,t)=>{var n,r,a;const i=t>0?Math.round(100*((null===(n=Oe[t-1])||void 0===n?void 0:n.gesamt_punkte)||0))/100:null,s=Math.round(100*(e.gesamt_punkte||0))/100,l=t<Oe.length-1?Math.round(100*((null===(r=Oe[t+1])||void 0===r?void 0:r.gesamt_punkte)||0))/100:null,o=(i===s||l===s)&&je(e.tie_resolved),c=e.tie_resolved&&(!0===e.tie_resolved||1===e.tie_resolved||"1"===e.tie_resolved),d=e.tie_method;let u=!1,h=!1;c&&d&&(l===s&&(u=!0),i===s&&(h=!0));const m="handwertung"===d?u?"\ud83d\udd90\ufe0f\u2191":"\ud83d\udd90\ufe0f\u2193":"extrapunkt"===d?u?"\u2795\u2191":"\u2795\u2193":null,p=c?`${"handwertung"===d?"Handentscheid":"Extrapunkt"}: ${u?"Gewonnen":"Verloren"}`:o?"Punktgleichheit!":"";return(0,we.jsxs)("div",{className:`rang-item-jp platz-${t+1} ${o?"has-tie":""} ${u?"tie-winner":""} ${h?"tie-loser":""}`,title:p,children:[(0,we.jsx)("span",{className:"rang-platz-jp",children:0===t?"\ud83e\udd47":1===t?"\ud83e\udd48":2===t?"\ud83e\udd49":`${t+1}.`}),(0,we.jsxs)("span",{className:"rang-name-jp",children:[o&&(0,we.jsx)("span",{className:"tie-indicator",children:"\u2696\ufe0f"}),m&&(0,we.jsx)("span",{className:"tie-result "+(u?"winner":"loser"),children:m}),e.vorname," ",e.nachname]}),(0,we.jsx)("span",{className:"rang-punkte-jp",children:null===(a=e.gesamt_punkte)||void 0===a?void 0:a.toFixed(2)})]},e.wettkaempfer_id)}))})]})]})]}):(0,we.jsxs)("div",{className:"no-kategorie-jp",children:[(0,we.jsx)("div",{className:"empty-kanji",children:"\u7a7a"}),(0,we.jsx)("h3",{children:"Keine aktive Kategorie"})]}),q&&(0,we.jsx)("div",{className:"settings-modal-overlay-jp",onClick:()=>G(!1),children:(0,we.jsxs)("div",{className:"settings-modal-jp",onClick:e=>e.stopPropagation(),children:[(0,we.jsxs)("div",{className:"settings-header-jp",children:[(0,we.jsx)("span",{className:"settings-kanji",children:"\u8a2d\u5b9a"}),(0,we.jsx)("span",{children:"EINSTELLUNGEN"}),(0,we.jsx)("button",{className:"close-btn-jp",onClick:()=>G(!1),children:"\u2715"})]}),(0,we.jsxs)("div",{className:"settings-content-jp",children:[(0,we.jsxs)("div",{className:"setting-row-jp",children:[(0,we.jsx)("label",{children:"\u5be9\u5224 Kampfrichter Anzahl:"}),(0,we.jsx)("div",{className:"kampfrichter-selector-jp",children:[1,2,3,4,5].map((e=>(0,we.jsx)("button",{className:"kr-select-btn-jp "+(H===e?"active":""),onClick:()=>J(e),children:e},e)))})]}),(0,we.jsxs)("div",{className:"setting-info-jp",children:["Aktuell: ",(null===z||void 0===z?void 0:z.anzahl_kampfrichter)||3," Kampfrichter"]}),(0,we.jsxs)("div",{className:"setting-row-jp",style:{marginTop:"1.5rem"},children:[(0,we.jsx)("label",{children:"\u6642\u9593 Timer-Dauer:"}),(0,we.jsx)("div",{className:"kampfrichter-selector-jp",children:[60,120,180,240,300].map((e=>(0,we.jsxs)("button",{className:"kr-select-btn-jp "+(Z===e?"active":""),onClick:()=>Y(e),children:[e/60,"m"]},e)))})]})]}),(0,we.jsxs)("div",{className:"settings-footer-jp",children:[(0,we.jsx)("button",{className:"cancel-btn-jp",onClick:()=>G(!1),children:"Abbrechen"}),(0,we.jsx)("button",{className:"save-settings-btn-jp",onClick:()=>{(async e=>{if(z)try{const t=await fetch(`${ql}/api/formen/kategorie/${z.kategorie_id}`,{method:"PATCH",headers:{Authorization:`Bearer ${pe}`,"Content-Type":"application/json"},body:JSON.stringify({anzahl_kampfrichter:e})}),n=await t.json();n.success?(await be(z.kategorie_id),G(!1)):alert("Fehler: "+n.message)}catch(t){console.error("Fehler beim Aktualisieren:",t)}})(H),I(Z),G(!1)},children:"\u4fdd\u5b58 Speichern"})]})]})}),Q&&(0,we.jsxs)("div",{className:"winner-screen-overlay-jp",onClick:()=>X(!1),children:[["topLeft","topRight","bottomLeft","bottomRight"].map((e=>(0,we.jsxs)("div",{className:`winner-corner-jp ${e}`,children:[(0,we.jsx)("div",{className:"corner-h"}),(0,we.jsx)("div",{className:"corner-v"}),(0,we.jsx)("div",{className:"corner-dot"})]},e))),(0,we.jsx)("div",{className:"winner-bg-kanji",children:["\u52dd","\u6b66","\u9053","\u529b","\u5fc3","\u6280","\u5f62","\u512a"].map(((e,t)=>(0,we.jsx)("span",{className:"floating-kanji",style:{left:5+12*t+"%",animationDelay:1.2*t+"s",fontSize:4+3*Math.random()+"rem"},children:e},t)))}),(0,we.jsx)("div",{className:"winner-glow-jp"}),(0,we.jsxs)("div",{className:"winner-content-jp",onClick:e=>e.stopPropagation(),children:[(0,we.jsxs)("div",{className:"winner-header-jp",children:[(0,we.jsx)("span",{className:"winner-kanji",children:"\u8868\u5f70"}),(0,we.jsx)("span",{className:"winner-title",children:"SIEGEREHRUNG"}),(0,we.jsx)("span",{className:"winner-kategorie",children:null===z||void 0===z?void 0:z.kategorie_name})]}),(0,we.jsxs)("div",{className:"podium-container-jp",children:[(0,we.jsxs)("div",{className:"podium-place-jp second",children:[(0,we.jsx)("div",{className:"podium-medal",children:"\ud83e\udd48"}),(0,we.jsx)("div",{className:"podium-rank",children:"2"}),Oe[1]?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("div",{className:"podium-name",children:[Oe[1].vorname," ",Oe[1].nachname]}),(0,we.jsx)("div",{className:"podium-verein",children:Oe[1].verein_name}),(0,we.jsxs)("div",{className:"podium-score",children:[null===(b=Oe[1].gesamt_punkte)||void 0===b?void 0:b.toFixed(2)," Pkt"]})]}):(0,we.jsx)("div",{className:"podium-empty",children:"-"}),(0,we.jsx)("div",{className:"podium-block second"})]}),(0,we.jsxs)("div",{className:"podium-place-jp first",children:[(0,we.jsx)("div",{className:"podium-medal",children:"\ud83e\udd47"}),(0,we.jsx)("div",{className:"podium-rank",children:"1"}),Oe[0]?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("div",{className:"podium-name",children:[Oe[0].vorname," ",Oe[0].nachname]}),(0,we.jsx)("div",{className:"podium-verein",children:Oe[0].verein_name}),(0,we.jsxs)("div",{className:"podium-score",children:[null===(j=Oe[0].gesamt_punkte)||void 0===j?void 0:j.toFixed(2)," Pkt"]})]}):(0,we.jsx)("div",{className:"podium-empty",children:"Noch kein Sieger"}),(0,we.jsx)("div",{className:"podium-block first"})]}),(0,we.jsxs)("div",{className:"podium-place-jp third",children:[(0,we.jsx)("div",{className:"podium-medal",children:"\ud83e\udd49"}),(0,we.jsx)("div",{className:"podium-rank",children:"3"}),Oe[2]?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("div",{className:"podium-name",children:[Oe[2].vorname," ",Oe[2].nachname]}),(0,we.jsx)("div",{className:"podium-verein",children:Oe[2].verein_name}),(0,we.jsxs)("div",{className:"podium-score",children:[null===(y=Oe[2].gesamt_punkte)||void 0===y?void 0:y.toFixed(2)," Pkt"]})]}):(0,we.jsx)("div",{className:"podium-empty",children:"-"}),(0,we.jsx)("div",{className:"podium-block third"})]})]}),Oe.length>3&&(0,we.jsxs)("div",{className:"winner-rankings-jp",children:[(0,we.jsx)("div",{className:"rankings-title",children:"WEITERE PLATZIERUNGEN"}),(0,we.jsx)("div",{className:"rankings-list",children:Oe.slice(3).map(((e,t)=>{var n;return(0,we.jsxs)("div",{className:"ranking-item-jp",children:[(0,we.jsxs)("span",{className:"ranking-pos",children:[t+4,"."]}),(0,we.jsxs)("span",{className:"ranking-name",children:[e.vorname," ",e.nachname]}),(0,we.jsx)("span",{className:"ranking-score",children:null===(n=e.gesamt_punkte)||void 0===n?void 0:n.toFixed(2)})]},e.wettkaempfer_id)}))})]}),(0,we.jsx)("div",{className:"winner-close-hint",children:"Klicken zum Schlie\xdfen"})]})]}),ee&&ne&&(0,we.jsx)("div",{className:"modal-overlay-jp",onClick:()=>te(!1),children:(0,we.jsxs)("div",{className:"modal-content-jp disqualify-modal",onClick:e=>e.stopPropagation(),children:[(0,we.jsxs)("div",{className:"modal-header-jp disqualify",children:[(0,we.jsx)("span",{className:"modal-icon",children:"\ud83d\udeab"}),(0,we.jsx)("span",{children:"DISQUALIFIKATION"})]}),(0,we.jsxs)("div",{className:"modal-body-jp",children:[(0,we.jsxs)("div",{className:"disqualify-target",children:[(0,we.jsx)("span",{className:"target-label",children:"Athlet:"}),(0,we.jsxs)("span",{className:"target-name",children:[ne.vorname," ",ne.nachname]})]}),(0,we.jsxs)("div",{className:"disqualify-reason-input",children:[(0,we.jsx)("label",{children:"Grund der Disqualifikation:"}),(0,we.jsxs)("select",{value:ae,onChange:e=>ie(e.target.value),className:"reason-select-jp",children:[(0,we.jsx)("option",{value:"",children:"-- Grund w\xe4hlen --"}),(0,we.jsx)("option",{value:"Regelversto\xdf",children:"Regelversto\xdf"}),(0,we.jsx)("option",{value:"Unsportliches Verhalten",children:"Unsportliches Verhalten"}),(0,we.jsx)("option",{value:"Nicht angetreten",children:"Nicht angetreten"}),(0,we.jsx)("option",{value:"Verletzung",children:"Verletzung"}),(0,we.jsx)("option",{value:"Technischer Ausschluss",children:"Technischer Ausschluss"}),(0,we.jsx)("option",{value:"Sonstiges",children:"Sonstiges"})]}),"Sonstiges"===ae&&(0,we.jsx)("input",{type:"text",placeholder:"Grund eingeben...",className:"reason-input-jp",onChange:e=>ie(e.target.value)})]})]}),(0,we.jsxs)("div",{className:"modal-footer-jp",children:[(0,we.jsx)("button",{className:"cancel-btn-jp",onClick:()=>{te(!1),ie("")},children:"Abbrechen"}),(0,we.jsx)("button",{className:"confirm-disqualify-btn-jp",onClick:async()=>{if(ne&&ae.trim())try{const e=await fetch(`${ql}/api/formen/teilnehmer/${ne.wettkaempfer_id}/disqualify`,{method:"POST",headers:{Authorization:`Bearer ${pe}`,"Content-Type":"application/json"},body:JSON.stringify({kategorie_id:z.kategorie_id,grund:ae})}),t=await e.json();t.success?(te(!1),re(null),ie(""),await be(z.kategorie_id),await ve(),Ae()):alert("Fehler: "+t.message)}catch(e){console.error("Fehler bei Disqualifikation:",e)}else alert("Bitte Grund angeben")},disabled:!ae,children:"\ud83d\udeab Disqualifizieren"})]})]})}),se&&oe&&(0,we.jsx)("div",{className:"modal-overlay-jp",children:(0,we.jsxs)("div",{className:"modal-content-jp tiebreaker-modal",onClick:e=>e.stopPropagation(),children:[(0,we.jsxs)("div",{className:"modal-header-jp tiebreaker",children:[(0,we.jsx)("span",{className:"modal-icon",children:"\u2696\ufe0f"}),(0,we.jsx)("span",{children:"PUNKTGLEICHHEIT"})]}),(0,we.jsxs)("div",{className:"modal-body-jp",children:[(0,we.jsxs)("div",{className:"tiebreaker-info",children:[(0,we.jsxs)("p",{children:["F\xfcr Platz ",(0,we.jsx)("strong",{children:oe.platzierung})," haben folgende Athleten die gleiche Punktzahl:"]}),(0,we.jsxs)("p",{className:"tied-score",children:[null===(k=oe.punkte)||void 0===k?void 0:k.toFixed(2)," Punkte"]})]}),(0,we.jsx)("div",{className:"tiebreaker-participants",children:oe.teilnehmer.map((e=>(0,we.jsxs)("div",{className:"tied-participant",children:[(0,we.jsxs)("span",{className:"tied-name",children:[e.vorname," ",e.nachname]}),(0,we.jsx)("span",{className:"tied-verein",children:e.verein_name})]},e.wettkaempfer_id)))}),(0,we.jsx)("div",{className:"tiebreaker-question",children:(0,we.jsx)("p",{children:"Wie soll entschieden werden?"})}),(0,we.jsxs)("div",{className:"tiebreaker-options",children:[(0,we.jsxs)("div",{className:"tiebreaker-method",children:[(0,we.jsx)("h4",{children:"\ud83d\udd90\ufe0f Handwertung"}),(0,we.jsx)("p",{children:"Kampfrichter entscheiden durch Handzeichen"}),(0,we.jsx)("div",{className:"tiebreaker-select",children:oe.teilnehmer.map((e=>(0,we.jsxs)("button",{className:"tiebreaker-winner-btn",onClick:()=>Te("handwertung",e.wettkaempfer_id),children:[e.vorname," ",e.nachname]},e.wettkaempfer_id)))})]}),(0,we.jsx)("div",{className:"tiebreaker-divider",children:"ODER"}),(0,we.jsxs)("div",{className:"tiebreaker-method",children:[(0,we.jsx)("h4",{children:"\u2795 Extrapunkt"}),(0,we.jsx)("p",{children:"Zus\xe4tzliche Wertung entscheidet"}),(0,we.jsx)("div",{className:"tiebreaker-select",children:oe.teilnehmer.map((e=>(0,we.jsxs)("button",{className:"tiebreaker-winner-btn extra",onClick:()=>Te("extrapunkt",e.wettkaempfer_id),children:[e.vorname," ",e.nachname]},e.wettkaempfer_id)))})]})]})]})]})})]})};const Hl=function(e){let{turnierId:t}=e;return(0,we.jsx)(Gl,{turnierId:t})},Jl="https://events.tda-intl.org";const Zl=function(e){var t,n;let{turnierId:r}=e;const[a,i]=(0,s.useState)([]),[l,o]=(0,s.useState)(null),[c,d]=(0,s.useState)([]),[u,h]=(0,s.useState)(null),[m,p]=(0,s.useState)(!0),[f,g]=(0,s.useState)([]),[x,v]=(0,s.useState)(null),[b,j]=(0,s.useState)("traditionell"),[y,k]=(0,s.useState)(5),[w,N]=(0,s.useState)({}),[S,_]=(0,s.useState)({}),[C,z]=(0,s.useState)(null),[T,A]=(0,s.useState)({});(0,s.useEffect)((()=>{Object.keys(S).length>0&&localStorage.setItem("bruchtest_techniken",JSON.stringify(S))}),[S]),(0,s.useEffect)((()=>{const e=localStorage.getItem("bruchtest_techniken");if(e)try{_(JSON.parse(e))}catch(Yo){console.error("Fehler beim Laden der gespeicherten Techniken:",Yo)}}),[]);const[E,D]=(0,s.useState)({material:"bretter",anzahl:0,technik:"",mitSprung:!1,schwierigkeitsgrad:5,ausfuehrung:5,kraft:5,zusatzpunkte:0,erfolg:!0,versuche:1,bemerkung:""}),B=localStorage.getItem("token"),R=[{id:"bretter",name:"Bretter",icon:"\ud83e\udeb5",basisPunkte:10},{id:"dachziegel",name:"Dachziegel",icon:"\ud83c\udfe0",basisPunkte:15},{id:"ziegel",name:"Ziegel",icon:"\ud83e\uddf1",basisPunkte:20},{id:"baseballschlaeger",name:"Baseballschl\xe4ger",icon:"\ud83c\udfcf",basisPunkte:25}],F=[{id:"faust",name:"Fauststo\xdf",kategorie:"hand",multiplikator:1},{id:"handkante",name:"Handkante",kategorie:"hand",multiplikator:1.1},{id:"hammerfaust",name:"Hammerfaust",kategorie:"hand",multiplikator:1.1},{id:"handruecken",name:"Handr\xfccken",kategorie:"hand",multiplikator:1.2},{id:"ellbogen",name:"Ellbogensto\xdf",kategorie:"hand",multiplikator:1.3},{id:"frontkick",name:"Frontkick",kategorie:"fuss",multiplikator:1.1},{id:"sidekick",name:"Sidekick",kategorie:"fuss",multiplikator:1.2},{id:"roundhouse",name:"Roundhousekick",kategorie:"fuss",multiplikator:1.2},{id:"axtkick",name:"Axtkick",kategorie:"fuss",multiplikator:1.3},{id:"backkick",name:"Backkick",kategorie:"fuss",multiplikator:1.4},{id:"drehkick",name:"Drehkick (360\xb0)",kategorie:"fuss",multiplikator:1.5},{id:"hookkick",name:"Hookkick",kategorie:"fuss",multiplikator:1.3},{id:"kopfstoss",name:"Kopfsto\xdf",kategorie:"spezial",multiplikator:1.8},{id:"knie",name:"Kniesto\xdf",kategorie:"spezial",multiplikator:1.2},{id:"sonstiges",name:"Sonstige Technik",kategorie:"spezial",multiplikator:1}],L={hand:1.2,fuss:1.4,spezial:1.6};(0,s.useEffect)((()=>{P()}),[]);const P=async()=>{try{const e=await fetch(`${Jl}/api/turniere`,{headers:{Authorization:`Bearer ${B}`}});if(e.ok){const t=await e.json(),n=t.data||t||[];g(Array.isArray(n)?n:[]),n.length>0&&!r&&v(n[0])}}catch(Zo){console.error("Fehler beim Laden der Turniere:",Zo)}};(0,s.useEffect)((()=>{const e=r||(null===x||void 0===x?void 0:x.turnier_id);e&&O(e)}),[r,x]);const O=async e=>{p(!0);try{const n=await fetch(`${Jl}/api/bruchtest/turnier/${e}`,{headers:{Authorization:`Bearer ${B}`}});if(n.ok){var t;const e=await n.json();if(e.success&&(null===(t=e.data)||void 0===t?void 0:t.length)>0)return i(e.data),I(e.data[0]),void p(!1)}const r=await fetch(`${Jl}/api/turniere/${e}/kategorien`,{headers:{Authorization:`Bearer ${B}`}});if(r.ok){const e=await r.json(),t=(e.data||e||[]).filter((e=>{var t;return(null===(t=e.kategorie)||void 0===t?void 0:t.toLowerCase().includes("bruchtest"))||"bruchtest"===e.kategorie_typ}));i(t),t.length>0&&I(t[0])}}catch(Zo){console.error("Fehler beim Laden der Kategorien:",Zo)}finally{p(!1)}},I=async e=>{o(e);try{const n=r||(null===x||void 0===x?void 0:x.turnier_id),a=await fetch(`${Jl}/api/anmeldungen/turnier/${n}?kategorie=${e.kategorie}`,{headers:{Authorization:`Bearer ${B}`}});if(a.ok){var t;const e=await a.json();let n=[];const r=(null===(t=e.data)||void 0===t?void 0:t.anmeldungen_by_verein)||e.anmeldungen_by_verein||e.data||{};"object"!==typeof r||Array.isArray(r)||Object.values(r).forEach((e=>{e.wettkampfer&&Array.isArray(e.wettkampfer)&&(n=n.concat(e.wettkampfer))})),0===n.length&&Array.isArray(e.data)&&(n=e.data),d(n),n.length>0&&(h(n[0]),$())}}catch(Zo){console.error("Fehler beim Laden der Teilnehmer:",Zo)}},$=()=>{D({material:"bretter",anzahl:0,technik:"",mitSprung:!1,schwierigkeitsgrad:5,ausfuehrung:5,kraft:5,zusatzpunkte:0,erfolg:!0,versuche:1,bemerkung:""})};return m?(0,we.jsx)("div",{className:"bruchtest-dashboard",children:(0,we.jsxs)("div",{className:"loading-state",children:[(0,we.jsx)("div",{className:"loading-spinner",children:"\ud83e\uddf1"}),(0,we.jsx)("p",{children:"Lade Bruchtest-Kategorien..."})]})}):(0,we.jsxs)("div",{className:"bruchtest-dashboard",children:[(0,we.jsxs)("div",{className:"bruchtest-header",children:[(0,we.jsxs)("div",{className:"header-title",children:[(0,we.jsx)("h1",{children:"\ud83e\uddf1 Bruchtest Wertung"}),a.length>0&&(0,we.jsxs)("div",{className:"header-kategorie",children:[(0,we.jsxs)("select",{value:(null===l||void 0===l?void 0:l.kategorie_id)||"",onChange:e=>{const t=a.find((t=>String(t.kategorie_id)===e.target.value));if(t){I(t);const e=(t.kategorie||"").toLowerCase();e.includes("kreativ")?j("kreativ"):e.includes("traditionell")&&j("traditionell")}},children:[(0,we.jsx)("option",{value:"",children:"-- Kategorie --"}),a.map((e=>(0,we.jsx)("option",{value:e.kategorie_id,children:e.kategorie},e.kategorie_id||e.kategorie)))]}),l&&(0,we.jsx)("span",{className:"modus-badge",children:"kreativ"===b?"Kreativ":"Traditionell"})]})]}),(0,we.jsxs)("div",{className:"header-settings",children:["traditionell"===b&&(0,we.jsxs)("div",{className:"setting-group",children:[(0,we.jsx)("label",{children:"Max:"}),(0,we.jsxs)("div",{className:"max-techniken-input",children:[(0,we.jsx)("button",{onClick:()=>k(Math.max(1,y-1)),children:"-"}),(0,we.jsx)("span",{children:y}),(0,we.jsx)("button",{onClick:()=>k(y+1),children:"+"})]})]}),!r&&(0,we.jsx)("div",{className:"setting-group",children:(0,we.jsxs)("select",{value:(null===x||void 0===x?void 0:x.turnier_id)||"",onChange:e=>{const t=f.find((t=>t.turnier_id===parseInt(e.target.value)));v(t)},children:[(0,we.jsx)("option",{value:"",children:"-- Turnier --"}),f.map((e=>(0,we.jsx)("option",{value:e.turnier_id,children:e.name},e.turnier_id)))]})})]})]}),0===a.length?(0,we.jsxs)("div",{className:"empty-state",children:[(0,we.jsx)("div",{className:"empty-icon",children:"\ud83e\uddf1"}),(0,we.jsx)("h3",{children:"Keine Bruchtest-Kategorien gefunden"}),(0,we.jsx)("p",{children:"Erstellen Sie zuerst eine Bruchtest-Kategorie f\xfcr dieses Turnier."})]}):(0,we.jsxs)("div",{className:"bruchtest-content new-layout",children:[(0,we.jsx)("div",{className:"bruchtest-main",children:u?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("div",{className:"teilnehmer-header",children:[(0,we.jsxs)("div",{className:"teilnehmer-info",children:[(0,we.jsxs)("h2",{children:[u.vorname," ",u.nachname]}),(0,we.jsx)("span",{className:"verein",children:u.verein_name})]}),(0,we.jsxs)("div",{className:"technik-counter",children:[(0,we.jsx)("span",{className:"counter-label",children:"Techniken:"}),(0,we.jsxs)("span",{className:"counter-value",children:[(null===(t=w[u.anmeldung_id])||void 0===t?void 0:t.length)||0,"traditionell"===b?` / ${y}`:""]})]})]}),"traditionell"===b&&(0,we.jsx)("div",{className:"traditionell-section",children:(0,we.jsxs)("div",{className:"assigned-techniken",children:[(0,we.jsx)("div",{className:"assigned-header",children:(0,we.jsxs)("span",{children:["Zugewiesene Techniken (",(S[u.anmeldung_id]||[]).length,"/",y,")"]})}),(0,we.jsx)("div",{className:"assigned-list",children:(S[u.anmeldung_id]||[]).map(((e,t)=>{const n=F.find((t=>t.id===e.technikId)),a=e.mitSprung?L[null===n||void 0===n?void 0:n.kategorie]:1,i=R.find((t=>t.id===e.material)),s=(()=>{if(!e.erfolg)return 0;const t=(null===i||void 0===i?void 0:i.basisPunkte)||10,r=(e.anzahl||1)*t*((null===n||void 0===n?void 0:n.multiplikator)||1)*(a||1)*((e.schwierigkeit||5)/10*((e.technikWert||5)/10)*((e.ausfuehrung||5)/10)*((e.kraft||5)/10))*Math.max(0,1-.2*((e.versuche||1)-1))+(e.zusatzpunkte||0);return Math.round(100*r)/100})()||0,o=(n,a)=>{const i={...e,[n]:a};_((e=>({...e,[u.anmeldung_id]:e[u.anmeldung_id].map(((e,n)=>n===t?i:e))}))),(async(e,t)=>{if(!u||!l)return;const n=r||(null===x||void 0===x?void 0:x.turnier_id)||(null===l||void 0===l?void 0:l.turnier_id),a=u.wettkaempfer_id||u.wettkampfer_id;if(n&&a&&e.technikId)try{const r=await fetch(`${Jl}/api/bruchtest/wertung`,{method:"POST",headers:{Authorization:`Bearer ${B}`,"Content-Type":"application/json"},body:JSON.stringify({turnier_id:n,kategorie_id:null===l||void 0===l?void 0:l.kategorie_id,kategorie:null===l||void 0===l?void 0:l.kategorie,wettkaempfer_id:a,anmeldung_id:u.anmeldung_id,technik:e.technikId,material:e.material,anzahl_bretter:e.anzahl,mitSprung:e.mitSprung,schwierigkeitsgrad:e.schwierigkeit,ausfuehrung:e.ausfuehrung,kraft:e.kraft,versuche:e.versuche,erfolg:e.erfolg,zusatzpunkte:e.zusatzpunkte})});(await r.json()).success&&console.log(`\u2705 Technik ${t+1} auto-gespeichert`)}catch(Zo){console.error("Auto-Save Fehler:",Zo)}})(i,t)},c=!e.erledigt||T[`${u.anmeldung_id}-${t}`];return(0,we.jsxs)("div",{className:`assigned-item-full ${e.erledigt?"done":""} ${c?"expanded":"collapsed"}`,children:[(0,we.jsxs)("div",{className:"item-header",onClick:()=>{e.erledigt&&A((e=>({...e,[`${u.anmeldung_id}-${t}`]:!e[`${u.anmeldung_id}-${t}`]})))},style:{cursor:e.erledigt?"pointer":"default"},children:[(0,we.jsxs)("span",{className:"assigned-num",children:[t+1,"."]}),(0,we.jsx)("span",{className:"assigned-name",children:null===n||void 0===n?void 0:n.name}),(0,we.jsxs)("span",{className:"mult-badge",children:["x",null===n||void 0===n?void 0:n.multiplikator]}),e.mitSprung&&(0,we.jsxs)("span",{className:"sprung-mult-badge",children:["Sprung x",a]}),e.erledigt&&(0,we.jsxs)("span",{className:"done-badge",children:[Math.round(100*s)/100," Pkt"]}),e.erledigt&&(0,we.jsx)("span",{className:"expand-icon",children:c?"\u25bc":"\u25b6"}),!e.erledigt&&(0,we.jsx)("button",{className:"remove-btn",onClick:e=>{e.stopPropagation(),_((e=>({...e,[u.anmeldung_id]:e[u.anmeldung_id].filter(((e,n)=>n!==t))})))},children:"\u2715"})]}),c&&(0,we.jsxs)("div",{className:"item-controls",children:[(0,we.jsxs)("div",{className:"control-row",children:[(0,we.jsxs)("div",{className:"control-group material-group",children:[(0,we.jsx)("label",{children:"Material"}),(0,we.jsx)("div",{className:"material-btns",children:R.map((t=>(0,we.jsx)("button",{className:"mat-btn-sm "+(e.material===t.id?"active":""),onClick:()=>o("material",t.id),title:`${t.name} (${t.basisPunkte} Pkt)`,children:t.icon},t.id)))})]}),(0,we.jsxs)("div",{className:"control-group",children:[(0,we.jsx)("label",{children:"Anzahl"}),(0,we.jsxs)("div",{className:"num-ctrl",children:[(0,we.jsx)("button",{onClick:()=>o("anzahl",Math.max(0,(e.anzahl||0)-1)),children:"-"}),(0,we.jsx)("span",{children:e.anzahl||0}),(0,we.jsx)("button",{onClick:()=>o("anzahl",(e.anzahl||0)+1),children:"+"})]})]}),(0,we.jsxs)("div",{className:"control-group",children:[(0,we.jsx)("label",{children:"Sprung"}),(0,we.jsx)("button",{className:"toggle-btn "+(e.mitSprung?"yes":"no"),onClick:()=>o("mitSprung",!e.mitSprung),children:e.mitSprung?"Ja":"Nein"})]}),(0,we.jsxs)("div",{className:"control-group",children:[(0,we.jsx)("label",{children:"Versuche"}),(0,we.jsxs)("div",{className:"num-ctrl",children:[(0,we.jsx)("button",{onClick:()=>o("versuche",Math.max(1,(e.versuche||1)-1)),children:"-"}),(0,we.jsx)("span",{children:e.versuche||1}),(0,we.jsx)("button",{onClick:()=>o("versuche",(e.versuche||1)+1),children:"+"})]})]}),(0,we.jsxs)("div",{className:"control-group",children:[(0,we.jsx)("label",{children:"Erfolg"}),(0,we.jsx)("button",{className:"toggle-btn "+(e.erfolg?"success":"fail"),onClick:()=>o("erfolg",!e.erfolg),children:e.erfolg?"Ja":"Nein"})]})]}),(0,we.jsxs)("div",{className:"control-row sliders",children:[(0,we.jsxs)("div",{className:"slider-group",children:[(0,we.jsxs)("label",{children:["Schwierigkeit ",(0,we.jsx)("strong",{children:e.schwierigkeit||5})]}),(0,we.jsx)("input",{type:"range",min:"1",max:"10",value:e.schwierigkeit||5,onChange:e=>o("schwierigkeit",parseInt(e.target.value))})]}),(0,we.jsxs)("div",{className:"slider-group",children:[(0,we.jsxs)("label",{children:["Technik ",(0,we.jsx)("strong",{children:e.technikWert||5})]}),(0,we.jsx)("input",{type:"range",min:"1",max:"10",value:e.technikWert||5,onChange:e=>o("technikWert",parseInt(e.target.value))})]}),(0,we.jsxs)("div",{className:"slider-group",children:[(0,we.jsxs)("label",{children:["Ausf\xfchrung ",(0,we.jsx)("strong",{children:e.ausfuehrung||5})]}),(0,we.jsx)("input",{type:"range",min:"1",max:"10",value:e.ausfuehrung||5,onChange:e=>o("ausfuehrung",parseInt(e.target.value))})]}),(0,we.jsxs)("div",{className:"slider-group",children:[(0,we.jsxs)("label",{children:["Kraft ",(0,we.jsx)("strong",{children:e.kraft||5})]}),(0,we.jsx)("input",{type:"range",min:"1",max:"10",value:e.kraft||5,onChange:e=>o("kraft",parseInt(e.target.value))})]}),(0,we.jsxs)("div",{className:"zusatz-group",children:[(0,we.jsx)("label",{children:"Zusatz"}),(0,we.jsx)("input",{type:"number",value:e.zusatzpunkte||0,onChange:e=>o("zusatzpunkte",parseInt(e.target.value)||0)})]})]}),(0,we.jsx)("div",{className:"control-row save-row",style:{background:"rgba(255,51,51,0.1)",padding:"0.75rem",borderRadius:"6px"},children:(0,we.jsxs)("div",{className:"item-punkte",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,we.jsx)("span",{style:{color:"rgba(255,255,255,0.7)",fontSize:"0.9rem"},children:"Punkte:"}),(0,we.jsx)("span",{style:{fontSize:"1.5rem",fontWeight:"bold",color:e.erfolg?"#ff3333":"#888"},children:s})]})})]})]},t)}))}),(S[u.anmeldung_id]||[]).length<y&&(0,we.jsxs)("div",{className:"add-technik",children:[(0,we.jsx)("span",{className:"add-label",children:"Technik hinzuf\xfcgen:"}),(0,we.jsxs)("div",{className:"technik-kategorie",children:[(0,we.jsx)("span",{className:"kat-label",children:"Hand"}),(0,we.jsx)("div",{className:"technik-buttons",children:F.filter((e=>"hand"===e.kategorie)).map((e=>(0,we.jsx)("button",{className:"tech-btn",onClick:()=>{_((t=>({...t,[u.anmeldung_id]:[...t[u.anmeldung_id]||[],{technikId:e.id,mitSprung:!1,erledigt:!1,punkte:0,anzahl:1,material:"bretter",versuche:1,erfolg:!0,schwierigkeit:5,ausfuehrung:5,kraft:5,technikWert:5,zusatzpunkte:0}]})))},children:e.name},e.id)))})]}),(0,we.jsxs)("div",{className:"technik-kategorie",children:[(0,we.jsx)("span",{className:"kat-label",children:"Fu\xdf"}),(0,we.jsx)("div",{className:"technik-buttons",children:F.filter((e=>"fuss"===e.kategorie)).map((e=>(0,we.jsx)("button",{className:"tech-btn",onClick:()=>{_((t=>({...t,[u.anmeldung_id]:[...t[u.anmeldung_id]||[],{technikId:e.id,mitSprung:!1,erledigt:!1,punkte:0,anzahl:1,material:"bretter",versuche:1,erfolg:!0,schwierigkeit:5,ausfuehrung:5,kraft:5,technikWert:5,zusatzpunkte:0}]})))},children:e.name},e.id)))})]}),(0,we.jsxs)("div",{className:"technik-kategorie",children:[(0,we.jsx)("span",{className:"kat-label",children:"Spezial"}),(0,we.jsx)("div",{className:"technik-buttons",children:F.filter((e=>"spezial"===e.kategorie)).map((e=>(0,we.jsx)("button",{className:"tech-btn",onClick:()=>{_((t=>({...t,[u.anmeldung_id]:[...t[u.anmeldung_id]||[],{technikId:e.id,mitSprung:!1,erledigt:!1,punkte:0,anzahl:1,material:"bretter",versuche:1,erfolg:!0,schwierigkeit:5,ausfuehrung:5,kraft:5,technikWert:5,zusatzpunkte:0}]})))},children:e.name},e.id)))})]})]})]})}),"kreativ"===b&&(0,we.jsxs)(we.Fragment,{children:[(null===(n=w[u.anmeldung_id])||void 0===n?void 0:n.length)>0&&(0,we.jsxs)("div",{className:"performed-techniken",children:[(0,we.jsx)("span",{className:"performed-label",children:"Absolviert:"}),(0,we.jsx)("div",{className:"performed-list",children:w[u.anmeldung_id].map(((e,t)=>{const n=F.find((t=>t.id===e.technik));return(0,we.jsxs)("div",{className:"performed-item "+(e.mitSprung?"mit-sprung":""),children:[(0,we.jsxs)("span",{className:"performed-num",children:[t+1,"."]}),(0,we.jsx)("span",{className:"performed-name",children:(null===n||void 0===n?void 0:n.name)||e.technik}),e.mitSprung&&(0,we.jsx)("span",{className:"sprung-badge",children:"Sprung"}),(0,we.jsxs)("span",{className:"performed-punkte",children:[e.punkte," Pkt"]})]},t)}))})]}),(0,we.jsxs)("div",{className:"bewertung-form compact",children:[(0,we.jsxs)("div",{className:"form-row top-row",children:[(0,we.jsxs)("div",{className:"form-cell material-cell",children:[(0,we.jsx)("label",{children:"Material"}),(0,we.jsx)("div",{className:"material-buttons",children:R.map((e=>(0,we.jsxs)("button",{className:"mat-btn "+(E.material===e.id?"active":""),onClick:()=>D((t=>({...t,material:e.id}))),children:[e.icon," ",e.name]},e.id)))})]}),(0,we.jsxs)("div",{className:"form-cell anzahl-cell",children:[(0,we.jsx)("label",{children:"Anzahl"}),(0,we.jsxs)("div",{className:"number-input compact",children:[(0,we.jsx)("button",{onClick:()=>D((e=>({...e,anzahl:Math.max(0,e.anzahl-1)}))),children:"-"}),(0,we.jsx)("span",{children:E.anzahl}),(0,we.jsx)("button",{onClick:()=>D((e=>({...e,anzahl:e.anzahl+1}))),children:"+"})]})]}),(0,we.jsxs)("div",{className:"form-cell sprung-cell",children:[(0,we.jsx)("label",{children:"Sprung"}),(0,we.jsxs)("div",{className:"sprung-buttons",children:[(0,we.jsx)("button",{className:"spr-btn "+(E.mitSprung?"":"active"),onClick:()=>D((e=>({...e,mitSprung:!1}))),children:"Ohne"}),(0,we.jsx)("button",{className:"spr-btn bonus "+(E.mitSprung?"active":""),onClick:()=>D((e=>({...e,mitSprung:!0}))),children:"Mit (+50%)"})]})]})]}),(0,we.jsx)("div",{className:"form-row technik-row",children:(0,we.jsxs)("div",{className:"technik-compact",children:[(0,we.jsxs)("div",{className:"technik-col",children:[(0,we.jsx)("span",{className:"col-label",children:"Hand"}),F.filter((e=>"hand"===e.kategorie)).map((e=>(0,we.jsxs)("button",{className:"tech-btn "+(E.technik===e.id?"active":""),onClick:()=>D((t=>({...t,technik:e.id}))),children:[e.name," ",(0,we.jsxs)("small",{children:["x",e.multiplikator]})]},e.id)))]}),(0,we.jsxs)("div",{className:"technik-col",children:[(0,we.jsx)("span",{className:"col-label",children:"Fu\xdf"}),F.filter((e=>"fuss"===e.kategorie)).map((e=>(0,we.jsxs)("button",{className:"tech-btn "+(E.technik===e.id?"active":""),onClick:()=>D((t=>({...t,technik:e.id}))),children:[e.name," ",(0,we.jsxs)("small",{children:["x",e.multiplikator]})]},e.id)))]}),(0,we.jsxs)("div",{className:"technik-col",children:[(0,we.jsx)("span",{className:"col-label",children:"Spezial"}),F.filter((e=>"spezial"===e.kategorie)).map((e=>(0,we.jsxs)("button",{className:"tech-btn "+(E.technik===e.id?"active":""),onClick:()=>D((t=>({...t,technik:e.id}))),children:[e.name," ",(0,we.jsxs)("small",{children:["x",e.multiplikator]})]},e.id)))]})]})}),(0,we.jsxs)("div",{className:"form-row slider-row",children:[(0,we.jsxs)("div",{className:"slider-compact",children:[(0,we.jsxs)("label",{children:["Schwierigkeit ",(0,we.jsx)("strong",{children:E.schwierigkeitsgrad})]}),(0,we.jsx)("input",{type:"range",min:"1",max:"10",value:E.schwierigkeitsgrad,onChange:e=>D((t=>({...t,schwierigkeitsgrad:parseInt(e.target.value)})))})]}),(0,we.jsxs)("div",{className:"slider-compact",children:[(0,we.jsxs)("label",{children:["Ausf\xfchrung ",(0,we.jsx)("strong",{children:E.ausfuehrung})]}),(0,we.jsx)("input",{type:"range",min:"1",max:"10",value:E.ausfuehrung,onChange:e=>D((t=>({...t,ausfuehrung:parseInt(e.target.value)})))})]}),(0,we.jsxs)("div",{className:"slider-compact",children:[(0,we.jsxs)("label",{children:["Kraft ",(0,we.jsx)("strong",{children:E.kraft})]}),(0,we.jsx)("input",{type:"range",min:"1",max:"10",value:E.kraft,onChange:e=>D((t=>({...t,kraft:parseInt(e.target.value)})))})]}),(0,we.jsxs)("div",{className:"zusatz-compact",children:[(0,we.jsx)("label",{children:"Zusatzpunkte"}),(0,we.jsx)("input",{type:"number",value:E.zusatzpunkte,onChange:e=>D((t=>({...t,zusatzpunkte:parseInt(e.target.value)||0}))),placeholder:"0"})]})]}),(0,we.jsxs)("div",{className:"form-section inline",children:[(0,we.jsxs)("div",{className:"versuche-group",children:[(0,we.jsx)("label",{children:"Versuche:"}),(0,we.jsxs)("div",{className:"number-input small",children:[(0,we.jsx)("button",{onClick:()=>D((e=>({...e,versuche:Math.max(1,e.versuche-1)}))),children:"-"}),(0,we.jsx)("span",{children:E.versuche}),(0,we.jsx)("button",{onClick:()=>D((e=>({...e,versuche:e.versuche+1}))),children:"+"})]})]}),(0,we.jsxs)("div",{className:"erfolg-group",children:[(0,we.jsx)("label",{children:"Erfolg:"}),(0,we.jsxs)("div",{className:"erfolg-toggle",children:[(0,we.jsx)("button",{className:"erfolg-btn "+(E.erfolg?"active success":""),onClick:()=>D((e=>({...e,erfolg:!0}))),children:"Erfolg"}),(0,we.jsx)("button",{className:"erfolg-btn "+(E.erfolg?"":"active fail"),onClick:()=>D((e=>({...e,erfolg:!1}))),children:"Fehlversuch"})]})]})]}),(0,we.jsxs)("div",{className:"form-section",children:[(0,we.jsx)("label",{children:"Bemerkung (optional):"}),(0,we.jsx)("textarea",{value:E.bemerkung,onChange:e=>D((t=>({...t,bemerkung:e.target.value}))),placeholder:"Zus\xe4tzliche Anmerkungen..."})]})]})]}),(0,we.jsxs)("div",{className:"bewertung-footer",children:[(0,we.jsxs)("div",{className:"punkte-display",children:[(0,we.jsx)("span",{className:"punkte-label",children:"Gesamtpunkte:"}),(0,we.jsx)("span",{className:"punkte-value",children:(()=>{const e=S[null===u||void 0===u?void 0:u.anmeldung_id]||[];let t=0;return e.forEach((e=>{if(!e.erfolg)return;const n=F.find((t=>t.id===e.technikId)),r=R.find((t=>t.id===e.material)),a=e.mitSprung&&L[null===n||void 0===n?void 0:n.kategorie]||1,i=(null===r||void 0===r?void 0:r.basisPunkte)||10,s=(e.anzahl||1)*i*((null===n||void 0===n?void 0:n.multiplikator)||1)*a,l=(e.schwierigkeit||5)/10*((e.technikWert||5)/10)*((e.ausfuehrung||5)/10)*((e.kraft||5)/10),o=Math.max(0,1-.2*((e.versuche||1)-1));t+=s*l*o+(e.zusatzpunkte||0)})),Math.round(100*t)/100})()})]}),(0,we.jsx)("button",{className:"save-btn",onClick:async()=>{if(!u||!l)return;const e=S[u.anmeldung_id]||[];if("traditionell"===b&&0===e.length)return void alert("Bitte f\xfcgen Sie mindestens eine Technik hinzu");const t=r||(null===x||void 0===x?void 0:x.turnier_id)||(null===l||void 0===l?void 0:l.turnier_id),n=u.wettkaempfer_id||u.wettkampfer_id;if(t&&n)try{for(let a=0;a<e.length;a++){const r=e[a];if(!r.technikId)continue;const i=await fetch(`${Jl}/api/bruchtest/wertung`,{method:"POST",headers:{Authorization:`Bearer ${B}`,"Content-Type":"application/json"},body:JSON.stringify({turnier_id:t,kategorie_id:null===l||void 0===l?void 0:l.kategorie_id,kategorie:null===l||void 0===l?void 0:l.kategorie,wettkaempfer_id:n,anmeldung_id:u.anmeldung_id,technik:r.technikId,material:r.material,anzahl_bretter:r.anzahl,mitSprung:r.mitSprung,schwierigkeitsgrad:r.schwierigkeit,ausfuehrung:r.ausfuehrung,kraft:r.kraft,versuche:r.versuche,erfolg:r.erfolg,zusatzpunkte:r.zusatzpunkte})}),s=await i.json();if(!s.success)throw new Error(s.error||"Fehler beim Speichern")}_((t=>({...t,[u.anmeldung_id]:e.map((e=>({...e,erledigt:!0})))})));const r=c.findIndex((e=>e.anmeldung_id===u.anmeldung_id));r<c.length-1?(h(c[r+1]),z(null),$()):alert("Alle Teilnehmer bewertet!")}catch(Zo){console.error("Fehler beim Speichern:",Zo),alert("Fehler beim Speichern: "+Zo.message)}else alert("Fehlende Daten f\xfcr Speicherung")},children:"Bewertung speichern"})]})]}):(0,we.jsx)("div",{className:"no-teilnehmer",children:(0,we.jsx)("p",{children:"W\xe4hlen Sie einen Teilnehmer aus der Liste"})})}),(0,we.jsxs)("div",{className:"bruchtest-right-panel",children:[(0,we.jsxs)("div",{className:"panel-header",children:[(0,we.jsx)("h3",{children:"Teilnehmer"}),(0,we.jsx)("span",{className:"teilnehmer-anzahl",children:c.length})]}),(0,we.jsx)("div",{className:"teilnehmer-ranking-list",children:Array.isArray(c)&&c.map((e=>{const t=S[e.anmeldung_id]||[];let n=0;return t.forEach((e=>{if(!e.erfolg)return;const t=F.find((t=>t.id===e.technikId)),r=R.find((t=>t.id===e.material)),a=e.mitSprung&&L[null===t||void 0===t?void 0:t.kategorie]||1,i=(null===r||void 0===r?void 0:r.basisPunkte)||10,s=(e.anzahl||1)*i*((null===t||void 0===t?void 0:t.multiplikator)||1)*a,l=(e.schwierigkeit||5)/10*((e.technikWert||5)/10)*((e.ausfuehrung||5)/10)*((e.kraft||5)/10),o=Math.max(0,1-.2*((e.versuche||1)-1));n+=s*l*o+(e.zusatzpunkte||0)})),{...e,gesamtPunkte:Math.round(100*n)/100}})).sort(((e,t)=>t.gesamtPunkte-e.gesamtPunkte)).map(((e,t)=>{var n;const r=(null===(n=w[e.anmeldung_id])||void 0===n?void 0:n.length)||0,a="traditionell"===b&&r>=y,i=t+1;return(0,we.jsxs)("div",{className:`ranking-item ${(null===u||void 0===u?void 0:u.anmeldung_id)===e.anmeldung_id?"active":""} ${a?"complete":""}`,onClick:()=>(e=>{h(e),z(null),$()})(e),children:[(0,we.jsxs)("span",{className:"platzierung "+(i<=3?`top-${i}`:""),children:[i,"."]}),(0,we.jsxs)("span",{className:"ranking-name",children:[e.vorname," ",e.nachname]}),(0,we.jsx)("span",{className:"ranking-punkte",children:e.gesamtPunkte>0?Math.round(100*e.gesamtPunkte)/100+" Pkt":"-"})]},e.anmeldung_id)}))})]})]})]})},Yl={BASE_URL:"https://events.tda-intl.org",ENDPOINTS:{WETTKAEMPFER:"/api/wettkaempfer",TURNIERE:"/api/turniere",ANMELDUNGEN:"/api/anmeldungen",VEREINE:"/api/vereine",DIVISIONEN:"/api/divisionen",STREAMING:"/api/streaming",AUTH:"/api/auth"},getUrl:e=>`${Yl.BASE_URL}${e}`,wettkaempfer:{search:e=>`${Yl.BASE_URL}/api/wettkaempfer?search=${encodeURIComponent(e)}`,getAll:()=>`${Yl.BASE_URL}/api/wettkaempfer`,getById:e=>`${Yl.BASE_URL}/api/wettkaempfer/${e}`,create:()=>`${Yl.BASE_URL}/api/wettkaempfer`,update:e=>`${Yl.BASE_URL}/api/wettkaempfer/${e}`,delete:e=>`${Yl.BASE_URL}/api/wettkaempfer/${e}`},turniere:{getAll:()=>`${Yl.BASE_URL}/api/turniere`,getById:e=>`${Yl.BASE_URL}/api/turniere/${e}`,create:()=>`${Yl.BASE_URL}/api/turniere`,update:e=>`${Yl.BASE_URL}/api/turniere/${e}`,delete:e=>`${Yl.BASE_URL}/api/turniere/${e}`},anmeldungen:{getAll:()=>`${Yl.BASE_URL}/api/anmeldungen`,getByTurnier:e=>`${Yl.BASE_URL}/api/anmeldungen/turnier/${e}`,getByVerein:e=>`${Yl.BASE_URL}/api/anmeldungen/verein/${e}`,create:()=>`${Yl.BASE_URL}/api/anmeldungen`,cancel:e=>`${Yl.BASE_URL}/api/anmeldungen/cancel/${e}`,stats:()=>`${Yl.BASE_URL}/api/anmeldungen/stats`}},Ql=Yl;function Xl(e){let{data:t,onChange:n,onNestedChange:r}=e;const[a,i]=(0,s.useState)(""),[l,o]=(0,s.useState)([]),[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(!1),[m,p]=(0,s.useState)(null),[f,g]=(0,s.useState)(null),x=e=>{const t=new Date,n=new Date(e);let r=t.getFullYear()-n.getFullYear();const a=t.getMonth()-n.getMonth();return(a<0||0===a&&t.getDate()<n.getDate())&&r--,r};return(0,s.useEffect)((()=>()=>{m&&clearTimeout(m)}),[m]),(0,we.jsxs)("div",{className:"profil-tab",children:[(0,we.jsx)("h3",{children:"\ud83d\udc64 Pers\xf6nliche Daten"}),(0,we.jsxs)("div",{className:"search-section",children:[(0,we.jsx)("div",{className:"search-header",children:(0,we.jsx)("button",{type:"button",className:"search-toggle-btn",onClick:()=>d(!c),children:"\ud83d\udd0d Vorhandenen Sportler suchen"})}),c&&(0,we.jsxs)("div",{className:"search-container",children:[(0,we.jsxs)("div",{className:"search-input-group",children:[(0,we.jsx)("input",{type:"text",placeholder:"Namen eingeben (min. 2 Zeichen)...",value:a,onChange:e=>{const t=e.target.value;i(t),m&&clearTimeout(m);const n=setTimeout((()=>{(async e=>{if(e.length<2)o([]);else{h(!0);try{const t=localStorage.getItem("token"),n=await fetch(Ql.wettkaempfer.search(e),{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(n.ok){const e=await n.json();console.log("\ud83d\udd0d Suchresultat:",e);let t=[];e.success&&e.data?t=e.data:Array.isArray(e)?t=e:e.sportler&&(t=e.sportler),o(Array.isArray(t)?t:[])}else{console.error("API-Fehler:",n.status,n.statusText);const t=[{id:1,vorname:"Max",nachname:"Mustermann",email:"max.mustermann@email.com",telefon:"+49 123 456789",geburtsdatum:"1990-05-15",geschlecht:"m\xe4nnlich",strasse:"Musterstra\xdfe 123",plz:"12345",ort:"Musterstadt",land:"Deutschland",verein_name:"Demo Verein"},{id:2,vorname:"Anna",nachname:"M\xfcller",email:"anna.mueller@email.com",telefon:"+49 987 654321",geburtsdatum:"1995-08-22",geschlecht:"weiblich",strasse:"Beispielweg 456",plz:"54321",ort:"Beispielstadt",land:"Deutschland",verein_name:"Test Verein"}].filter((t=>t.vorname.toLowerCase().includes(e.toLowerCase())||t.nachname.toLowerCase().includes(e.toLowerCase())||t.email.toLowerCase().includes(e.toLowerCase())));o(t)}}catch(t){console.error("Fehler bei der Suche:",t),o([])}finally{h(!1)}}})(t)}),300);p(n)},className:"search-input"}),u&&(0,we.jsx)("span",{className:"search-loading",children:"\ud83d\udd04"})]}),l.length>0&&(0,we.jsx)("div",{className:"search-results",children:l.map((e=>(0,we.jsx)("div",{className:"search-result-item",onClick:()=>{return g(r=e),i(`${r.vorname} ${r.nachname}`),o([]),d(!1),void n({...t,vorname:r.vorname,nachname:r.nachname,geschlecht:r.geschlecht,geburtsdatum:r.geburtsdatum,gewicht:r.gewicht,skill_level:r.skill_level,gurtfarbe:r.gurtfarbe,kampfstil:r.kampfstil,email:r.email,handy:r.handy});var r},children:(0,we.jsxs)("div",{className:"sportler-info",children:[(0,we.jsxs)("div",{className:"sportler-name",children:[e.vorname," ",e.nachname,e.geschlecht&&(0,we.jsx)("span",{className:"gender-badge",children:"m\xe4nnlich"===e.geschlecht||"male"===e.geschlecht?"\u2642":"\u2640"})]}),(0,we.jsxs)("div",{className:"sportler-details",children:[(0,we.jsxs)("div",{className:"detail-row",children:[e.geburtsdatum&&(0,we.jsxs)("span",{className:"detail-item",children:["\ud83c\udf82 ",x(e.geburtsdatum)," Jahre"]}),e.gewicht&&(0,we.jsxs)("span",{className:"detail-item",children:["\u2696\ufe0f ",e.gewicht," kg"]}),e.skill_level&&(0,we.jsxs)("span",{className:"detail-item",children:["\ud83e\udd4b ",e.skill_level]})]}),(0,we.jsxs)("div",{className:"detail-row",children:[e.gurtfarbe&&(0,we.jsxs)("span",{className:"detail-item",children:["\ud83c\udf97\ufe0f ",e.gurtfarbe]}),e.kampfstil&&(0,we.jsxs)("span",{className:"detail-item",children:["\ud83e\udd4a ",e.kampfstil]})]}),(0,we.jsxs)("div",{className:"detail-row",children:[e.email&&(0,we.jsxs)("span",{className:"detail-item",children:["\ud83d\udce7 ",e.email]}),e.handy&&(0,we.jsxs)("span",{className:"detail-item",children:["\ud83d\udcf1 ",e.handy]})]})]})]})},e.wettkaempfer_id||e.id)))}),a.length>=2&&0===l.length&&!u&&(0,we.jsxs)("div",{className:"no-results",children:['Keine Sportler gefunden f\xfcr "',a,'"']})]})]}),(0,we.jsxs)("div",{className:"form-grid",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{htmlFor:"vorname",children:"Vorname *"}),(0,we.jsx)("input",{type:"text",id:"vorname",value:t.vorname,onChange:e=>n("profil","vorname",e.target.value),placeholder:"Max",required:!0})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{htmlFor:"nachname",children:"Nachname *"}),(0,we.jsx)("input",{type:"text",id:"nachname",value:t.nachname,onChange:e=>n("profil","nachname",e.target.value),placeholder:"Mustermann",required:!0})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{htmlFor:"email",children:"E-Mail *"}),(0,we.jsx)("input",{type:"email",id:"email",value:t.email,onChange:e=>n("profil","email",e.target.value),placeholder:"max.mustermann@email.com",required:!0})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{htmlFor:"telefon",children:"Telefon"}),(0,we.jsx)("input",{type:"tel",id:"telefon",value:t.telefon,onChange:e=>n("profil","telefon",e.target.value),placeholder:"+49 123 456789"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{htmlFor:"geburtsdatum",children:"Geburtsdatum *"}),(0,we.jsx)("input",{type:"date",id:"geburtsdatum",value:t.geburtsdatum,onChange:e=>n("profil","geburtsdatum",e.target.value),required:!0})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{htmlFor:"geschlecht",children:"Geschlecht *"}),(0,we.jsxs)("select",{id:"geschlecht",value:t.geschlecht,onChange:e=>n("profil","geschlecht",e.target.value),required:!0,children:[(0,we.jsx)("option",{value:"",children:"Bitte w\xe4hlen"}),(0,we.jsx)("option",{value:"m\xe4nnlich",children:"\u2642 M\xe4nnlich"}),(0,we.jsx)("option",{value:"weiblich",children:"\u2640 Weiblich"}),(0,we.jsx)("option",{value:"divers",children:"\u26a7 Divers"})]})]})]}),(0,we.jsxs)("div",{className:"address-section",children:[(0,we.jsx)("h4",{children:"\ud83c\udfe0 Adresse"}),(0,we.jsxs)("div",{className:"form-grid",children:[(0,we.jsxs)("div",{className:"form-group full-width",children:[(0,we.jsx)("label",{htmlFor:"strasse",children:"Stra\xdfe und Hausnummer"}),(0,we.jsx)("input",{type:"text",id:"strasse",value:t.adresse.strasse,onChange:e=>r("profil","adresse","strasse",e.target.value),placeholder:"Musterstra\xdfe 123"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{htmlFor:"plz",children:"PLZ"}),(0,we.jsx)("input",{type:"text",id:"plz",value:t.adresse.plz,onChange:e=>r("profil","adresse","plz",e.target.value),placeholder:"12345"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{htmlFor:"ort",children:"Ort"}),(0,we.jsx)("input",{type:"text",id:"ort",value:t.adresse.ort,onChange:e=>r("profil","adresse","ort",e.target.value),placeholder:"Musterstadt"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{htmlFor:"land",children:"Land"}),(0,we.jsxs)("select",{id:"land",value:t.adresse.land,onChange:e=>r("profil","adresse","land",e.target.value),children:[(0,we.jsx)("option",{value:"Deutschland",children:"\ud83c\udde9\ud83c\uddea Deutschland"}),(0,we.jsx)("option",{value:"\xd6sterreich",children:"\ud83c\udde6\ud83c\uddf9 \xd6sterreich"}),(0,we.jsx)("option",{value:"Schweiz",children:"\ud83c\udde8\ud83c\udded Schweiz"}),(0,we.jsx)("option",{value:"Andere",children:"\ud83c\udf0d Andere"})]})]})]})]})]})}function eo(e){let{data:t,onChange:n}=e;return(0,we.jsxs)("div",{className:"divisionen-tab",children:[(0,we.jsx)("h3",{children:"\ud83e\udd4b Divisionen ausw\xe4hlen"}),(0,we.jsx)("p",{children:"W\xe4hlen Sie die Divisionen aus, an denen der Wettk\xe4mpfer teilnehmen m\xf6chte:"}),(0,we.jsx)("div",{className:"divisionen-grid",children:[{id:1,name:"Kata Einzel",kategorie:"Kata",alter:"12-17",geschlecht:"M\xe4nnlich",preis:25},{id:2,name:"Kata Einzel",kategorie:"Kata",alter:"12-17",geschlecht:"Weiblich",preis:25},{id:3,name:"Kumite Einzel",kategorie:"Kumite",alter:"12-17",geschlecht:"M\xe4nnlich",preis:30},{id:4,name:"Kumite Einzel",kategorie:"Kumite",alter:"12-17",geschlecht:"Weiblich",preis:30},{id:5,name:"Kata Team",kategorie:"Kata",alter:"12-17",geschlecht:"Gemischt",preis:50},{id:6,name:"Kumite Team",kategorie:"Kumite",alter:"12-17",geschlecht:"Gemischt",preis:60}].map((e=>{const r=t.some((t=>t.id===e.id));return(0,we.jsxs)("div",{className:"division-card "+(r?"selected":""),onClick:()=>(e=>{const r=t.some((t=>t.id===e.id));n("divisionen","",r?t.filter((t=>t.id!==e.id)):[...t,e])})(e),children:[(0,we.jsxs)("div",{className:"division-header",children:[(0,we.jsx)("h4",{children:e.name}),(0,we.jsxs)("span",{className:"division-price",children:[e.preis,"\u20ac"]})]}),(0,we.jsxs)("div",{className:"division-details",children:[(0,we.jsxs)("span",{className:"division-category",children:["\ud83d\udccb ",e.kategorie]}),(0,we.jsxs)("span",{className:"division-age",children:["\ud83c\udf82 ",e.alter," Jahre"]}),(0,we.jsxs)("span",{className:"division-gender",children:["\ud83d\udc65 ",e.geschlecht]})]}),r&&(0,we.jsx)("div",{className:"division-selected",children:"\u2705 Ausgew\xe4hlt"})]},e.id)}))}),(0,we.jsxs)("div",{className:"divisionen-summary",children:[(0,we.jsx)("h4",{children:"\ud83d\udcca Zusammenfassung"}),(0,we.jsxs)("p",{children:["Ausgew\xe4hlte Divisionen: ",t.length]}),(0,we.jsxs)("p",{children:["Gesamtpreis: ",t.reduce(((e,t)=>e+t.preis),0),"\u20ac"]})]})]})}function to(e){let{data:t,onChange:n}=e;return(0,we.jsxs)("div",{className:"warenkorb-tab",children:[(0,we.jsx)("h3",{children:"\ud83d\uded2 Mein Warenkorb"}),(0,we.jsx)("p",{children:"W\xe4hlen Sie zus\xe4tzliche Artikel f\xfcr den Wettk\xe4mpfer:"}),(0,we.jsx)("div",{className:"warenkorb-grid",children:[{id:1,name:"Startgeb\xfchr",preis:15,beschreibung:"Grundgeb\xfchr f\xfcr die Teilnahme"},{id:2,name:"T-Shirt",preis:25,beschreibung:"Offizielles Turnier-T-Shirt"},{id:3,name:"Medaille",preis:10,beschreibung:"Teilnahme-Medaille"},{id:4,name:"Urkunde",preis:5,beschreibung:"Digitale Teilnahme-Urkunde"}].map((e=>{const r=t.items.some((t=>t.id===e.id));return(0,we.jsxs)("div",{className:"warenkorb-item "+(r?"selected":""),onClick:()=>(e=>{let r;r=t.items.some((t=>t.id===e.id))?t.items.filter((t=>t.id!==e.id)):[...t.items,e];const a=r.reduce(((e,t)=>e+t.preis),0);n("warenkorb","items",r),n("warenkorb","gesamtpreis",a)})(e),children:[(0,we.jsxs)("div",{className:"item-header",children:[(0,we.jsx)("h4",{children:e.name}),(0,we.jsxs)("span",{className:"item-price",children:[e.preis,"\u20ac"]})]}),(0,we.jsx)("p",{className:"item-description",children:e.beschreibung}),r&&(0,we.jsx)("div",{className:"item-selected",children:"\u2705 Im Warenkorb"})]},e.id)}))}),(0,we.jsxs)("div",{className:"warenkorb-summary",children:[(0,we.jsx)("h4",{children:"\ud83d\udcb0 Warenkorb-Zusammenfassung"}),(0,we.jsx)("div",{className:"summary-items",children:t.items.map((e=>(0,we.jsxs)("div",{className:"summary-item",children:[(0,we.jsx)("span",{children:e.name}),(0,we.jsxs)("span",{children:[e.preis,"\u20ac"]})]},e.id)))}),(0,we.jsx)("div",{className:"summary-total",children:(0,we.jsxs)("strong",{children:["Gesamt: ",t.gesamtpreis,"\u20ac"]})})]})]})}function no(e){let{data:t,onChange:n}=e;return(0,we.jsxs)("div",{className:"meine-divisionen-tab",children:[(0,we.jsx)("h3",{children:"\ud83d\udccb Meine Division/en"}),(0,we.jsx)("p",{children:"\xdcbersicht \xfcber alle ausgew\xe4hlten Divisionen und Zusatzartikel:"}),(0,we.jsxs)("div",{className:"final-summary",children:[(0,we.jsxs)("div",{className:"summary-section",children:[(0,we.jsx)("h4",{children:"\ud83e\udd4b Ausgew\xe4hlte Divisionen"}),t.length>0?(0,we.jsx)("div",{className:"divisionen-list",children:t.map(((e,t)=>(0,we.jsxs)("div",{className:"division-item",children:[(0,we.jsx)("span",{className:"division-name",children:e.name}),(0,we.jsxs)("span",{className:"division-price",children:[e.preis,"\u20ac"]})]},t)))}):(0,we.jsx)("p",{className:"no-items",children:"Keine Divisionen ausgew\xe4hlt"})]}),(0,we.jsxs)("div",{className:"summary-section",children:[(0,we.jsx)("h4",{children:"\ud83d\uded2 Zusatzartikel"}),(0,we.jsx)("p",{className:"no-items",children:"Warenkorb-Artikel werden hier angezeigt"})]}),(0,we.jsxs)("div",{className:"summary-section",children:[(0,we.jsx)("h4",{children:"\ud83d\udcb0 Gesamtkosten"}),(0,we.jsxs)("div",{className:"total-cost",children:[(0,we.jsxs)("span",{children:["Divisionen: ",t.reduce(((e,t)=>e+t.preis),0),"\u20ac"]}),(0,we.jsx)("span",{children:"Zusatzartikel: 0\u20ac"}),(0,we.jsx)("span",{className:"final-total",children:(0,we.jsxs)("strong",{children:["Gesamt: ",t.reduce(((e,t)=>e+t.preis),0),"\u20ac"]})})]})]})]}),(0,we.jsxs)("div",{className:"registration-actions",children:[(0,we.jsx)("button",{className:"btn-secondary",children:"\ud83d\udcc4 Vorschau drucken"}),(0,we.jsx)("button",{className:"btn-primary",children:"\u2705 Registrierung abschlie\xdfen"})]})]})}const ro=function(){const[e,t]=(0,s.useState)("profil"),[n,r]=(0,s.useState)({profil:{vorname:"",nachname:"",email:"",telefon:"",geburtsdatum:"",geschlecht:"",adresse:{strasse:"",plz:"",ort:"",land:"Deutschland"}},divisionen:[],warenkorb:{items:[],gesamtpreis:0},meineDivisionen:[]}),a=[{id:"profil",label:"Profil",icon:"\ud83d\udc64"},{id:"divisionen",label:"Divisionen",icon:"\ud83e\udd4b"},{id:"warenkorb",label:"Warenkorb",icon:"\ud83d\uded2"},{id:"meine-divisionen",label:"\xdcbersicht",icon:"\ud83d\udccb"}],i=(e,t,n)=>{r((r=>({...r,[e]:{...r[e],[t]:n}})))},l=(e,t,n,a)=>{r((r=>({...r,[e]:{...r[e],[t]:{...r[e][t],[n]:a}}})))};return(0,we.jsxs)("div",{className:"wettkaempfer-registrieren",children:[(0,we.jsxs)("div",{className:"registration-header",children:[(0,we.jsx)("h2",{children:"\ud83d\udcdd Wettk\xe4mpfer registrieren"}),(0,we.jsx)("p",{children:"Registrieren Sie einen neuen Wettk\xe4mpfer in mehreren Schritten"})]}),(0,we.jsx)("div",{className:"tab-navigation",children:a.map((n=>(0,we.jsxs)("button",{className:"tab-button "+(e===n.id?"active":""),onClick:()=>{return e=n.id,void t(e);var e},children:[(0,we.jsx)("span",{className:"tab-icon",children:n.icon}),(0,we.jsx)("span",{className:"tab-label",children:n.label})]},n.id)))}),(0,we.jsx)("div",{className:"tab-content",children:(()=>{switch(e){case"profil":default:return(0,we.jsx)(Xl,{data:n.profil,onChange:i,onNestedChange:l});case"divisionen":return(0,we.jsx)(eo,{data:n.divisionen,onChange:i});case"warenkorb":return(0,we.jsx)(to,{data:n.warenkorb,onChange:i});case"meine-divisionen":return(0,we.jsx)(no,{data:n.meineDivisionen,onChange:i})}})()}),(0,we.jsxs)("div",{className:"registration-navigation",children:[(0,we.jsx)("button",{className:"nav-button prev",disabled:"profil"===e,onClick:()=>{const n=a.findIndex((t=>t.id===e));n>0&&t(a[n-1].id)},children:"\u2190 Zur\xfcck"}),(0,we.jsxs)("div",{className:"step-indicator",children:["Schritt ",a.findIndex((t=>t.id===e))+1," von ",a.length]}),(0,we.jsx)("button",{className:"nav-button next",disabled:"meine-divisionen"===e,onClick:()=>{const n=a.findIndex((t=>t.id===e));n<a.length-1&&t(a[n+1].id)},children:"Weiter \u2192"})]})]})},ao=()=>{const e=ne(),[t,n]=(0,s.useState)([]),[r,a]=(0,s.useState)([]),[i,l]=(0,s.useState)(!0),[o,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[h,m]=(0,s.useState)("name-asc"),[p,f]=(0,s.useState)("Alle"),[g,x]=(0,s.useState)(new Set),[v,b]=(0,s.useState)({gesamt:0,aktive:0,archiviert:0,totalWettkaempfer:0,mitHomepage:0,topStadt:""});(0,s.useEffect)((()=>{j(),y(),k(),w()}),[]);const j=async()=>{l(!0),c("");try{var e,t;const r=localStorage.getItem("authToken")||localStorage.getItem("token")||JSON.parse(localStorage.getItem("clubData")||"{}").token,a=await fetch("/api/vereine",{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const i=await a.json();let s=[];i.success&&Array.isArray(i.data)?s=i.data:Array.isArray(i)&&(s=i),console.log("\ud83c\udfdb\ufe0f Vereine geladen:",s.length,"Beispiel:",null===(e=s[0])||void 0===e?void 0:e.name,"K\xe4mpfer:",null===(t=s[0])||void 0===t?void 0:t.anzahl_wettkaempfer),n(s),b((e=>({...e,gesamt:s.length,aktive:s.filter((e=>"verein"===e.rolle||!e.rolle)).length})))}catch(Zo){console.error("\u274c Fehler beim Laden der Vereine:",Zo),c("Fehler beim Laden der Vereine: "+Zo.message)}finally{l(!1)}},y=async()=>{try{const e=localStorage.getItem("authToken")||localStorage.getItem("token")||JSON.parse(localStorage.getItem("clubData")||"{}").token,t=await fetch("/api/vereine/archived",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const n=await t.json();let r=[];n.success&&Array.isArray(n.data)?r=n.data:Array.isArray(n)&&(r=n),a(r),b((e=>({...e,archiviert:r.length})))}catch(Zo){console.error("\u274c Fehler beim Laden archivierter Vereine:",Zo)}},k=async()=>{try{const e=localStorage.getItem("authToken")||localStorage.getItem("token")||JSON.parse(localStorage.getItem("clubData")||"{}").token,t=await fetch("/api/wettkaempfer",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const n=await t.json();let r=[];n.success&&Array.isArray(n.data)?r=n.data:Array.isArray(n)&&(r=n),b((e=>({...e,totalWettkaempfer:r.length})))}catch(Zo){console.error("\u274c Fehler beim Laden der Wettk\xe4mpfer-Statistik:",Zo)}},w=async()=>{try{const e=localStorage.getItem("authToken")||localStorage.getItem("token")||JSON.parse(localStorage.getItem("clubData")||"{}").token,t=await fetch("/api/vereine/admin/stats",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)return;const n=await t.json();n.success&&n.data&&b((e=>{var t,r;return{...e,mitHomepage:n.data.vereineMitHomepage||0,topStadt:(null===(t=n.data.byOrt)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.ort)||""}}))}catch(Zo){console.error("\u274c Fehler beim Laden der Admin-Statistik:",Zo)}},N=async(e,t)=>{if(!window.confirm(`ACHTUNG: Verein "${t}" PERMANENT l\xf6schen?\n\nDiese Aktion kann NICHT r\xfcckg\xe4ngig gemacht werden!\nAlle Daten inkl. Wettk\xe4mpfer und Archiv-Eintr\xe4ge werden gel\xf6scht.`))return;if("L\xd6SCHEN"===prompt('Bitte geben Sie "L\xd6SCHEN" ein, um zu best\xe4tigen:'))try{const n=localStorage.getItem("authToken")||localStorage.getItem("token")||JSON.parse(localStorage.getItem("clubData")||"{}").token,r=await fetch(`/api/vereine/${e}/permanent`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const a=await r.json();if(!a.success)throw new Error(a.error||"L\xf6schung fehlgeschlagen");alert(`\u2705 Verein "${t}" permanent gel\xf6scht!`),j(),y()}catch(Zo){console.error("\u274c Fehler beim L\xf6schen:",Zo),alert("Fehler beim L\xf6schen: "+Zo.message)}else alert("L\xf6schung abgebrochen.")},S=t=>{e(`/dashboard/vereine/${t}`)},_=s.useMemo((()=>{const e=new Set;return t.forEach((t=>{if(t.name){const n=t.name.charAt(0).toUpperCase();n.match(/[A-Z]/)&&e.add(n)}})),Array.from(e).sort()}),[t]),C=t.filter((e=>{var t,n,r,a;const i=(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(d.toLowerCase()))||(null===(n=e.ort)||void 0===n?void 0:n.toLowerCase().includes(d.toLowerCase()))||(null===(r=e.ansprechpartner)||void 0===r?void 0:r.toLowerCase().includes(d.toLowerCase())),s="Alle"===p||(null===(a=e.name)||void 0===a?void 0:a.charAt(0).toUpperCase())===p;return i&&s})).sort(((e,t)=>{switch(h){case"name-asc":return(e.name||"").localeCompare(t.name||"");case"name-desc":return(t.name||"").localeCompare(e.name||"");case"ort-asc":return(e.ort||"").localeCompare(t.ort||"");case"ort-desc":return(t.ort||"").localeCompare(e.ort||"");case"newest":return new Date(t.erstellt_am||0)-new Date(e.erstellt_am||0);case"oldest":return new Date(e.erstellt_am||0)-new Date(t.erstellt_am||0);default:return 0}}));return i?(0,we.jsxs)("div",{className:"vereine-page",children:[(0,we.jsxs)("div",{className:"page-header",children:[(0,we.jsx)("h1",{children:"\ud83c\udfdb\ufe0f Vereine verwalten"}),(0,we.jsx)("p",{children:"Zentrale Verwaltung aller registrierten Vereine"})]}),(0,we.jsxs)("div",{className:"loading-container",children:[(0,we.jsx)("div",{className:"loading-spinner"}),(0,we.jsx)("p",{children:"Vereine werden geladen..."})]})]}):o?(0,we.jsxs)("div",{className:"vereine-page",children:[(0,we.jsxs)("div",{className:"page-header",children:[(0,we.jsx)("h1",{children:"\ud83c\udfdb\ufe0f Vereine verwalten"}),(0,we.jsx)("p",{children:"Zentrale Verwaltung aller registrierten Vereine"})]}),(0,we.jsxs)("div",{className:"error-container",children:[(0,we.jsx)("h2",{children:"\u274c Fehler beim Laden"}),(0,we.jsx)("p",{children:o}),(0,we.jsx)("button",{className:"retry-button",onClick:j,children:"\ud83d\udd04 Erneut versuchen"})]})]}):(0,we.jsxs)("div",{className:"vereine-page",children:[(0,we.jsxs)("div",{className:"page-header",children:[(0,we.jsx)("h1",{children:"\ud83c\udfdb\ufe0f Vereine verwalten"}),(0,we.jsx)("p",{children:"Zentrale Verwaltung aller registrierten Vereine"})]}),(0,we.jsxs)("div",{className:"stats-grid",children:[(0,we.jsxs)("div",{className:"stat-card",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\ud83c\udfdb\ufe0f"}),(0,we.jsxs)("div",{className:"stat-content",children:[(0,we.jsx)("h3",{children:v.gesamt}),(0,we.jsx)("p",{children:"Vereine gesamt"})]})]}),(0,we.jsxs)("div",{className:"stat-card",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\ud83e\udd4b"}),(0,we.jsxs)("div",{className:"stat-content",children:[(0,we.jsx)("h3",{children:v.totalWettkaempfer}),(0,we.jsx)("p",{children:"Wettk\xe4mpfer"})]})]}),(0,we.jsxs)("div",{className:"stat-card",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\ud83d\udce6"}),(0,we.jsxs)("div",{className:"stat-content",children:[(0,we.jsx)("h3",{children:v.archiviert}),(0,we.jsx)("p",{children:"Archiviert"})]})]}),(0,we.jsxs)("div",{className:"stat-card",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\ud83d\udd0d"}),(0,we.jsxs)("div",{className:"stat-content",children:[(0,we.jsx)("h3",{children:C.length}),(0,we.jsx)("p",{children:"Gefiltert"})]})]})]}),(0,we.jsxs)("div",{className:"controls-section",children:[(0,we.jsx)("div",{className:"search-container",children:(0,we.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d Vereine durchsuchen...",value:d,onChange:e=>u(e.target.value),className:"search-input"})}),(0,we.jsx)("div",{className:"sort-container",children:(0,we.jsxs)("select",{value:h,onChange:e=>m(e.target.value),className:"sort-select",children:[(0,we.jsx)("option",{value:"name-asc",children:"\ud83d\udd24 Name (A-Z)"}),(0,we.jsx)("option",{value:"name-desc",children:"\ud83d\udd24 Name (Z-A)"}),(0,we.jsx)("option",{value:"ort-asc",children:"\ud83d\udccd Ort (A-Z)"}),(0,we.jsx)("option",{value:"ort-desc",children:"\ud83d\udccd Ort (Z-A)"}),(0,we.jsx)("option",{value:"newest",children:"\ud83d\udcc5 Neueste zuerst"}),(0,we.jsx)("option",{value:"oldest",children:"\ud83d\udcc5 \xc4lteste zuerst"})]})}),(0,we.jsxs)("div",{className:"letter-filter-container",children:[(0,we.jsx)("button",{className:"letter-filter-btn "+("Alle"===p?"active":""),onClick:()=>f("Alle"),children:"Alle"}),_.map((e=>(0,we.jsx)("button",{className:"letter-filter-btn "+(p===e?"active":""),onClick:()=>f(e),children:e},e)))]}),(0,we.jsxs)("div",{className:"actions-container",children:[(0,we.jsx)("button",{className:"action-button toggle",onClick:()=>{g.size===C.length?x(new Set):x(new Set(C.map((e=>e.vereins_id))))},title:g.size===C.length?"Alle zuklappen":"Alle aufklappen",children:g.size===C.length?"\u25bc Zuklappen":"\u25b6 Aufklappen"}),(0,we.jsx)("button",{className:"action-button primary",onClick:()=>{j(),y(),k(),w()},children:"\ud83d\udd04 Aktualisieren"}),(0,we.jsx)("button",{className:"action-button secondary",onClick:()=>e("/dashboard/vereine/neu"),children:"\u2795 Neuer Verein"})]})]}),0===C.length?(0,we.jsx)("div",{className:"no-results",children:(0,we.jsxs)("div",{className:"no-results-content",children:[(0,we.jsx)("h3",{children:"\ud83d\udd0d Keine Vereine gefunden"}),(0,we.jsx)("p",{children:d?`Keine Vereine entsprechen dem Suchbegriff "${d}"`:"Noch keine Vereine registriert"}),d&&(0,we.jsx)("button",{className:"clear-search-button",onClick:()=>u(""),children:"\u274c Suche l\xf6schen"})]})}):(0,we.jsx)("div",{className:"vereine-grid",children:C.map((t=>{const n=g.has(t.vereins_id);return(0,we.jsxs)("div",{className:"verein-card "+(n?"expanded":"collapsed"),children:[(0,we.jsxs)("div",{className:"verein-card-header-compact",onClick:e=>{var n;e.stopPropagation(),n=t.vereins_id,x((e=>{const t=new Set(e);return t.has(n)?t.delete(n):t.add(n),t}))},children:[(0,we.jsx)("span",{className:"expand-icon",children:n?"\u25bc":"\u25b6"}),(0,we.jsx)("h3",{className:"verein-name",children:t.name}),(0,we.jsxs)("span",{className:"verein-kaempfer",children:["\ud83e\udd4b ",t.anzahl_wettkaempfer||0]}),(0,we.jsx)("span",{className:"verein-ort",children:t.ort||""}),(0,we.jsxs)("div",{className:"quick-actions",children:[(0,we.jsx)("button",{className:"quick-btn",onClick:e=>{e.stopPropagation(),S(t.vereins_id)},title:"Details anzeigen",children:"\ud83d\udc41\ufe0f"}),(0,we.jsx)("button",{className:"quick-btn",onClick:n=>{n.stopPropagation(),e(`/dashboard/vereine/${t.vereins_id}/bearbeiten`)},title:"Bearbeiten",children:"\u270f\ufe0f"})]})]}),n&&(0,we.jsxs)("div",{className:"verein-card-expanded",children:[(0,we.jsxs)("div",{className:"verein-info-grid",children:[(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"info-icon",children:"\ud83e\udd4b"}),(0,we.jsx)("span",{className:"info-text",children:(0,we.jsxs)("strong",{children:[t.anzahl_wettkaempfer||0," Wettk\xe4mpfer"]})})]}),(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"info-icon",children:"\ud83d\udc64"}),(0,we.jsx)("span",{className:"info-text",children:t.ansprechpartner||"-"})]}),(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"info-icon",children:"\ud83d\udce7"}),(0,we.jsx)("span",{className:"info-text",children:t.email})]}),(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"info-icon",children:"\ud83d\udcde"}),(0,we.jsx)("span",{className:"info-text",children:t.telefon||"-"})]}),(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"info-icon",children:"\ud83c\udd94"}),(0,we.jsxs)("span",{className:"info-text",children:["ID: ",t.vereins_id]})]})]}),(0,we.jsxs)("div",{className:"verein-card-actions",children:[(0,we.jsx)("button",{className:"card-action-button primary",onClick:()=>S(t.vereins_id),children:"\ud83d\udc41\ufe0f Details"}),(0,we.jsx)("button",{className:"card-action-button secondary",onClick:()=>e(`/dashboard/vereine/${t.vereins_id}/bearbeiten`),children:"\u270f\ufe0f Bearbeiten"}),(0,we.jsx)("button",{className:"card-action-button archive",onClick:()=>(async(e,t)=>{if(window.confirm(`Verein "${t}" wirklich archivieren?\n\nDer Verein und alle Wettk\xe4mpfer werden archiviert und aus der aktiven Liste entfernt.`))try{const n=localStorage.getItem("authToken")||localStorage.getItem("token")||JSON.parse(localStorage.getItem("clubData")||"{}").token,r=await fetch(`/api/vereine/${e}/archive`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({grund:"Archiviert durch Admin"})});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const a=await r.json();if(!a.success)throw new Error(a.error||"Archivierung fehlgeschlagen");alert(`\u2705 Verein "${t}" erfolgreich archiviert!`),j(),y()}catch(Zo){console.error("\u274c Fehler beim Archivieren:",Zo),alert("Fehler beim Archivieren: "+Zo.message)}})(t.vereins_id,t.name),children:"\ud83d\udce6 Archivieren"}),(0,we.jsx)("button",{className:"card-action-button danger",onClick:()=>N(t.vereins_id,t.name),children:"\ud83d\uddd1\ufe0f L\xf6schen"})]})]})]},t.vereins_id)}))}),r.length>0&&(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("div",{className:"archived-section-header",children:[(0,we.jsxs)("h2",{children:["\ud83d\udce6 Archivierte Vereine (",r.length,")"]}),(0,we.jsx)("p",{children:"Vereine, die archiviert wurden und wiederhergestellt werden k\xf6nnen"})]}),(0,we.jsx)("div",{className:"vereine-grid archived",children:r.map((e=>(0,we.jsx)("div",{className:"verein-card archived-card",children:(0,we.jsxs)("div",{className:"verein-card-header-compact archived",children:[(0,we.jsx)("span",{className:"expand-icon",children:"\ud83d\udce6"}),(0,we.jsx)("h3",{className:"verein-name",children:e.name}),(0,we.jsx)("span",{className:"verein-ort",children:e.ort||""}),(0,we.jsxs)("span",{className:"archived-date",children:["Archiviert: ",new Date(e.archiviert_am).toLocaleDateString("de-DE")]}),(0,we.jsxs)("div",{className:"quick-actions",children:[(0,we.jsx)("button",{className:"quick-btn restore",onClick:()=>(async(e,t)=>{if(window.confirm(`Verein "${t}" aus dem Archiv wiederherstellen?`))try{const n=localStorage.getItem("authToken")||localStorage.getItem("token")||JSON.parse(localStorage.getItem("clubData")||"{}").token,r=await fetch(`/api/vereine/archived/${e}/restore`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const a=await r.json();if(!a.success)throw new Error(a.error||"Wiederherstellung fehlgeschlagen");alert(`\u2705 Verein "${t}" erfolgreich wiederhergestellt!`),j(),y()}catch(Zo){console.error("\u274c Fehler beim Wiederherstellen:",Zo),alert("Fehler beim Wiederherstellen: "+Zo.message)}})(e.archiv_id,e.name),title:"Wiederherstellen",children:"\u267b\ufe0f Wiederherstellen"}),(0,we.jsx)("button",{className:"quick-btn danger",onClick:()=>N(e.original_vereins_id,e.name),title:"Permanent l\xf6schen",children:"\ud83d\uddd1\ufe0f L\xf6schen"})]})]})},e.archiv_id)))})]})]})},io=e=>{let{turnier:t,onClose:n,onAnmeldungAbgeschlossen:r,preselectedVerein:a,editingWettkaempfer:i}=e;const[l,o]=(0,s.useState)(1),[c,d]=(0,s.useState)(""),[u,h]=(0,s.useState)(null),[m,p]=(0,s.useState)([]),[f,g]=(0,s.useState)(a||null),[x,v]=(0,s.useState)([]),[b,j]=(0,s.useState)([]),[y,k]=(0,s.useState)(""),[w,N]=(0,s.useState)([]),[S,_]=(0,s.useState)({}),[C,z]=(0,s.useState)(null),[T,A]=(0,s.useState)({}),[E,D]=(0,s.useState)("alle"),[B,R]=(0,s.useState)(""),[F,L]=(0,s.useState)("code"),[P,O]=(0,s.useState)(!1),[I,$]=(0,s.useState)((()=>{const e=localStorage.getItem("divisionFavoriten");return e?JSON.parse(e):[]})),[W,M]=(0,s.useState)(null),[K,U]=(0,s.useState)({}),[V,q]=(0,s.useState)(!1),[G,H]=(0,s.useState)(!1),[J,Z]=(0,s.useState)(""),[Y,Q]=(0,s.useState)(!1);(0,s.useEffect)((()=>{te()}),[]),(0,s.useEffect)((()=>{i&&x.length>0&&2===l&&(console.log("\u270f\ufe0f Bearbeitungsmodus f\xfcr Wettk\xe4mpfer:",i),j([i.wettkaempfer_id]),o(3))}),[i,x,l]),(0,s.useEffect)((()=>{3===l&&0===w.length&&b.length>0&&!G&&(console.log("\ud83d\udccb Lade Divisionen f\xfcr Schritt 3..."),ie())}),[l,w.length,b.length,G]);const X=()=>{console.log("\ud83d\udd11 Token-Extraktion gestartet...");const e=localStorage.getItem("clubData"),t=localStorage.getItem("adminData");if(console.log("\ud83d\udce6 ClubData vorhanden:",!!e),console.log("\ud83d\udce6 AdminData vorhanden:",!!t),e)try{const t=JSON.parse(e);if(console.log("\ud83c\udfe2 ClubData Structure:",Object.keys(t)),console.log("\ud83d\udd11 ClubData Token verf\xfcgbar:",!!t.token),t.token&&"string"===typeof t.token&&t.token.length>10)return console.log("\u2705 Token aus ClubData extrahiert:",t.token.substring(0,20)+"..."),t.token}catch(Yo){console.error("\u274c ClubData Parse Error:",Yo)}if(t)try{const e=JSON.parse(t);if(console.log("\ud83d\udc51 AdminData Structure:",Object.keys(e)),console.log("\ud83d\udd11 AdminData Token verf\xfcgbar:",!!e.token),e.token&&"string"===typeof e.token&&e.token.length>10)return console.log("\u2705 Token aus AdminData extrahiert:",e.token.substring(0,20)+"..."),e.token}catch(Yo){console.error("\u274c AdminData Parse Error:",Yo)}const n=localStorage.getItem("authToken")||localStorage.getItem("token");return n&&"string"===typeof n&&n.length>10?(console.log("\ud83d\udd04 Fallback Token gefunden:",n.substring(0,20)+"..."),n):(console.error("\u274c Kein g\xfcltiger Token gefunden in localStorage"),console.error("\ud83d\udd0d localStorage Keys:",Object.keys(localStorage)),null)},ee=()=>{console.log("\ud83d\udc64 User-Daten-Extraktion gestartet...");const e=localStorage.getItem("clubData"),t=localStorage.getItem("adminData");if(e)try{const t=JSON.parse(e);if(console.log("\ud83c\udfe2 ClubData User:",t.user),t.user)return{role:t.user.role||"verein",vereinId:t.user.vereins_id,name:t.user.name,email:t.user.email,token:t.token}}catch(Yo){console.error("\u274c ClubData User Parse Error:",Yo)}if(t)try{const e=JSON.parse(t);if(console.log("\ud83d\udc51 AdminData User:",e.user),e.user)return{role:"admin",vereinId:null,name:e.user.name||"Administrator",email:e.user.email,token:e.token}}catch(Yo){console.error("\u274c AdminData User Parse Error:",Yo)}return console.error("\u274c Keine g\xfcltigen User-Daten gefunden"),null},te=async()=>{try{const e=ee();if(!e)throw new Error("Nicht angemeldet. Bitte loggen Sie sich ein.");const{role:t,vereinId:n,name:r,token:i}=e;if(!i)throw new Error("Kein Authentifizierungstoken gefunden. Bitte loggen Sie sich erneut ein.");if(d(t),h(n),console.log("\ud83d\udd11 User-Daten initialisiert:",{role:t,vereinId:n,name:r,preselectedVerein:a}),a&&a.vereins_id)return console.log("\u2705 Vorausgew\xe4hlter Verein:",a),g(a),o(2),void await re(a.vereins_id);if("admin"===t)o(1),await ne();else{if(!n)throw new Error("Verein-ID nicht gefunden. Bitte loggen Sie sich erneut ein.");g({vereins_id:n,name:r||"Mein Verein"}),o(2),await re(n)}}catch(Zo){console.error("\u274c Initialisierung fehlgeschlagen:",Zo),Z(Zo.message)}},ne=async()=>{H(!0);try{const e=X();if(!e)throw new Error("Kein Authentifizierungstoken gefunden");console.log("\ud83c\udf10 Lade Vereine...");const t=await fetch("/api/vereine",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(console.log("\ud83d\udce1 Vereine Response Status:",t.status),!t.ok){if(401===t.status)throw new Error("Session abgelaufen. Bitte loggen Sie sich erneut ein.");throw new Error(`Fehler beim Laden der Vereine: ${t.status}`)}const n=await t.json();console.log("\ud83d\udcca Vereine-Daten:",n);let r=[];n.success&&Array.isArray(n.data)?r=n.data:Array.isArray(n)&&(r=n);const a=r.filter((e=>"verein"===e.rolle||!e.rolle));p(a),console.log("\u2705 Vereine geladen:",a.length)}catch(Zo){console.error("\u274c Fehler beim Laden der Vereine:",Zo),Z("Fehler beim Laden der Vereine: "+Zo.message)}finally{H(!1)}},re=async e=>{console.log("\ud83d\udd04 loadWettkampfer gestartet f\xfcr Verein:",e),H(!0),Z("");try{const t=X();if(!t)throw new Error("Kein Authentifizierungstoken gefunden. Bitte loggen Sie sich erneut ein.");console.log("\u2705 Token verf\xfcgbar f\xfcr Wettk\xe4mpfer-API"),console.log("\ud83d\udc64 User-Role:",c),console.log("\ud83c\udfe2 User-Vereins-ID:",u);const n=`/api/wettkaempfer/verein/${e}`;console.log("\ud83c\udf10 API-URL:",n);const r={Authorization:`Bearer ${t}`,"Content-Type":"application/json"};console.log("\ud83d\udce4 Request Headers:",r);const a=await fetch(n,{method:"GET",headers:r});if(console.log("\ud83d\udce1 Wettk\xe4mpfer Response Status:",a.status),console.log("\ud83d\udce1 Response Headers:",Object.fromEntries(a.headers.entries())),!a.ok){let e=`HTTP ${a.status}`;try{const t=await a.text();console.error("\u274c API Error Response:",t),401===a.status?e="Authentifizierungsfehler. Bitte schlie\xdfen Sie das Modal und versuchen Sie es erneut.":403===a.status?e="Zugriff verweigert. Sie haben keine Berechtigung f\xfcr diese Wettk\xe4mpfer.":400===a.status?e=`Ung\xfcltige Anfrage: ${t}`:500===a.status?e="Server-Fehler. Bitte versuchen Sie es sp\xe4ter erneut.":0===a.status&&(e="Netzwerk-Fehler. Pr\xfcfen Sie Ihre Internetverbindung.")}catch(Yo){console.error("\u274c Error parsing response:",Yo),e="Unbekannter Server-Fehler aufgetreten."}throw new Error(e)}const i=await a.json();console.log("\ud83d\udcca Wettk\xe4mpfer-Daten empfangen:",i);let s=[];if(i.success&&Array.isArray(i.data))s=i.data;else{if(!Array.isArray(i))throw console.warn("\u26a0\ufe0f Unerwartetes Datenformat:",i),new Error("Unerwartetes Datenformat vom Server erhalten.");s=i}v(s),console.log(`\u2705 ${s.length} Wettk\xe4mpfer erfolgreich geladen`),0===s.length&&(console.log("\u2139\ufe0f Keine Wettk\xe4mpfer f\xfcr Verein",e,"gefunden"),Z("Keine Wettk\xe4mpfer f\xfcr diesen Verein gefunden."))}catch(Zo){console.error("\u274c Fehler beim Laden der Wettk\xe4mpfer:",Zo),Zo.message.includes("Failed to fetch")||"TypeError"===Zo.name?(console.error("\ud83c\udf10 CORS oder Netzwerk-Fehler erkannt"),Z("Verbindungsfehler zum Server. Bitte pr\xfcfen Sie:\n\u2022 Ist das Backend gestartet?\n\u2022 CORS-Konfiguration korrekt?\n\u2022 Internetverbindung verf\xfcgbar?")):Z("Fehler beim Laden der Wettk\xe4mpfer: "+Zo.message),v([]),console.error("\ud83d\udccd Error Details:",{message:Zo.message,name:Zo.name,stack:Zo.stack,vereinId:e,userRole:c,userVereinId:u,timestamp:(new Date).toISOString(),url:`/api/wettkaempfer/verein/${e}`})}finally{H(!1)}},ae=e=>{j((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))},ie=async()=>{H(!0),Z("");try{const e=X();if(!e)throw new Error("Kein Authentifizierungstoken gefunden");console.log("\ud83d\udccb Lade Divisionen...");const t=await fetch("/api/divisionen?limit=2000",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Fehler beim Laden der Divisionen: ${t.status}`);const n=await t.json();console.log("\ud83d\udcca Divisionen geladen:",n);let r=[];n.success&&Array.isArray(n.data)?r=n.data:Array.isArray(n)&&(r=n),N(r),console.log(`\u2705 ${r.length} Divisionen geladen`);const a={beginner:["Beginner","Amateur","Rookie Grappling"],intermediate:["Intermediate","Amateur","Advanced Grappling"],advanced:["Advanced","Amateur","Master Grappling"],"black belt":["Black Belts","Advanced","Master Grappling","Grand Champion"]},s={beginner:["Beginner","Intermediate","Amateur","Rookie Grappling"],intermediate:["Intermediate","Advanced","Amateur","Advanced Grappling"],advanced:["Advanced","Black Belts","Amateur","Master Grappling"],"black belt":["Black Belts","Advanced","Master Grappling","Grand Champion"]},l=["Formen","Selbstverteidigung","Forms","Self Defense","Breaking"],o=["Kumite","Sparring","Fighting","Combat","Grappling","Kickboxen","Kickboxing","Pointfighting","Continous Fighting","Continuous Fighting","Fullcontact","Full Contact","K1","K-1","Rumble"],c={};b.forEach((e=>{var t,n;const d=x.find((t=>t.wettkaempfer_id===e));if(!d)return;const u=ce(d.geburtsdatum),h=parseFloat(d.gewicht)||0,m=null===(t=d.geschlecht)||void 0===t?void 0:t.toLowerCase(),p=null===(n=d.skill_level)||void 0===n?void 0:n.toLowerCase();console.log(`\ud83d\udd0d Filtere f\xfcr ${d.vorname} ${d.nachname}:`,{alter:u,gewicht:h,geschlecht:m,skillLevel:p});const f=r.filter((e=>{const t=e.Division_Type||"",n=l.some((e=>t.toLowerCase().includes(e.toLowerCase()))),r=o.some((e=>t.toLowerCase().includes(e.toLowerCase()))),i=parseInt(e.Age_from),c=parseInt(e.Age_to);if(!isNaN(i)&&!isNaN(c))if(r){if(!(u>=i&&u<=c)&&!(u<i&&u>=i-5))return!1}else if(u<i||u>c)return!1;const d=parseFloat(e.Minimun_Weight),f=parseFloat(e.Maximum_Weight);if(h>0&&!isNaN(d)&&!isNaN(f))if(r){if(!(h>=d&&h<=f)&&!(h<d&&h>=d-10))return!1}else if(h<d||h>f)return!1;if(e.Skill_Level&&p){const t=n?s[p]||[]:a[p]||[];if(t.length>0&&!t.includes(e.Skill_Level))return!1}if(e.Gender&&m){const t=e.Gender.toLowerCase();if("mixed"!==t&&"m/f"!==t&&"all"!==t&&""!==t){if(("m"===t||"male"===t||"m\xe4nnlich"===t)&&("weiblich"===m||"f"===m||"female"===m))return!1;if(("f"===t||"female"===t||"weiblich"===t)&&("m\xe4nnlich"===m||"m"===m||"male"===m))return!1}}return!0}));console.log(`\ud83d\udc64 ${d.vorname} ${d.nachname}: ${f.length} passende Divisionen`),f.length>0&&console.log("   Beispiele:",f.slice(0,5).map((e=>`${e.Division_Code} (${e.Division_Type}, ${e.Skill_Level})`)));let g=[];i&&i.wettkaempfer_id===e&&i.existingDivisions&&(g=i.existingDivisions.filter((e=>f.some((t=>t.Division_Code===e)))),console.log(`\u270f\ufe0f Bearbeitungsmodus: ${g.length} bereits angemeldete Kategorien vorausgew\xe4hlt`)),c[e]={passend:f,ausgewaehlt:g}})),_(c),b.length>0&&z(b[0])}catch(Zo){console.error("\u274c Fehler beim Laden der Divisionen:",Zo),Z("Fehler beim Laden der Divisionen: "+Zo.message)}finally{H(!1)}},se=()=>b.every((e=>S[e]&&S[e].ausgewaehlt&&S[e].ausgewaehlt.length>0)),le=()=>b.map((e=>({wettkampfer:x.find((t=>t.wettkaempfer_id===e)),divisionen:((S[e]||{passend:[],ausgewaehlt:[]}).ausgewaehlt||[]).map((e=>w.find((t=>t.Division_Code===e)))).filter(Boolean)}))),oe=x.filter((e=>{var t,n,r,a;return(null===(t=e.vorname)||void 0===t?void 0:t.toLowerCase().includes(y.toLowerCase()))||(null===(n=e.nachname)||void 0===n?void 0:n.toLowerCase().includes(y.toLowerCase()))||(null===(r=e.gurtfarbe)||void 0===r?void 0:r.toLowerCase().includes(y.toLowerCase()))||(null===(a=e.kampfstil)||void 0===a?void 0:a.toLowerCase().includes(y.toLowerCase()))})),ce=e=>{const t=new Date,n=new Date(e);let r=t.getFullYear()-n.getFullYear();const a=t.getMonth()-n.getMonth();return(a<0||0===a&&t.getDate()<n.getDate())&&r--,r};return s.useEffect((()=>{window.testCORSHeaders=async()=>{console.log("\ud83e\uddea CORS-Header Test gestartet...");try{const e=X(),t=await fetch("/api/wettkaempfer/test",{method:"GET",headers:{Authorization:`Bearer ${e}`}});console.log("\u2705 CORS-Test erfolgreich, Status:",t.status);const n=await t.json();return console.log("\ud83d\udcca Test-Data:",n),!0}catch(J){return console.error("\u274c CORS-Test fehlgeschlagen:",J),!1}},window.testAPIWithoutAuth=async e=>{console.log("\ud83e\uddea Test API ohne Auth f\xfcr Verein:",e);try{const t=await fetch(`/api/wettkaempfer/verein/${e}/noauth`,{method:"GET",headers:{"Content-Type":"application/json"}});if(console.log("\ud83d\udce1 NoAuth Test Status:",t.status),t.ok){const e=await t.json();return console.log("\u2705 NoAuth Test erfolgreich:",e),e}return console.log("\u274c NoAuth Test fehlgeschlagen:",t.status),null}catch(J){return console.error("\u274c NoAuth Test Error:",J),null}},window.debugModalAuth=()=>{console.log("\ud83d\udd0d Modal Auth-State Debugging:"),console.log("\ud83d\udce6 localStorage clubData:",localStorage.getItem("clubData")),console.log("\ud83d\udce6 localStorage adminData:",localStorage.getItem("adminData")),console.log("\ud83d\udd11 Extrahierter Token:",X()),console.log("\ud83d\udc64 User-Data:",ee()),console.log("\ud83c\udfad Current userRole:",c),console.log("\ud83c\udfe2 Current userVereinId:",u)},window.testWettkampferAPI=async e=>{console.log("\ud83e\uddea Testing Wettk\xe4mpfer API for Verein:",e);try{const t=X(),n=await fetch(`/api/wettkaempfer/verein/${e}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});console.log("\ud83d\udce1 Status:",n.status);const r=await n.json();console.log("\ud83d\udcca Data:",r)}catch(J){console.error("\u274c Test Error:",J)}},console.log("\ud83d\udd27 Modal Debug-Funktionen verf\xfcgbar:"),console.log("   debugModalAuth() - Zeigt Auth-Status"),console.log("   testWettkampferAPI(vereinId) - Testet API direkt"),console.log("   testCORSHeaders() - Testet CORS mit minimalen Headers"),console.log("   testAPIWithoutAuth(9) - Testet API ohne Authorization")}),[]),(0,we.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&n(),children:(0,we.jsxs)("div",{className:"modal-content "+(3===l?"fullscreen":"large"),children:[(0,we.jsxs)("div",{className:"modal-header "+(3===l?"compact":""),children:[(0,we.jsx)("div",{className:"header-left",children:(0,we.jsxs)("div",{className:"modal-title",children:[(0,we.jsx)("h2",{children:"\ud83c\udfc6 Turnier-Anmeldung"}),(0,we.jsxs)("p",{children:[t.name," - ",t.datum_formatted||new Date(t.datum).toLocaleDateString("de-DE")]})]})}),(0,we.jsxs)("div",{className:"progress-indicator-compact",children:[(0,we.jsxs)("div",{className:`step-compact ${l>=1?"active":""} ${1===l?"current":""}`,children:[(0,we.jsx)("span",{className:"step-dot",children:"1"}),(0,we.jsx)("span",{className:"step-text",children:"Verein"})]}),(0,we.jsx)("div",{className:"step-line-compact"}),(0,we.jsxs)("div",{className:`step-compact ${l>=2?"active":""} ${2===l?"current":""}`,children:[(0,we.jsx)("span",{className:"step-dot",children:"2"}),(0,we.jsx)("span",{className:"step-text",children:"Wettk\xe4mpfer"})]}),(0,we.jsx)("div",{className:"step-line-compact"}),(0,we.jsxs)("div",{className:`step-compact ${l>=3?"active":""} ${3===l?"current":""}`,children:[(0,we.jsx)("span",{className:"step-dot",children:"3"}),(0,we.jsx)("span",{className:"step-text",children:"Divisionen"})]})]}),(0,we.jsx)("button",{className:"modal-close",onClick:n,children:"\u2715"})]}),(0,we.jsxs)("div",{className:"modal-body",children:[J&&(0,we.jsxs)("div",{className:"error-message",children:[(0,we.jsxs)("span",{children:["\u274c ",J]}),(0,we.jsx)("button",{onClick:()=>Z(""),children:"\u2715"})]}),1===l&&"admin"===c&&(0,we.jsxs)("div",{className:"step-content",children:[(0,we.jsx)("h3",{children:"Verein f\xfcr Anmeldung ausw\xe4hlen"}),(0,we.jsx)("p",{children:"W\xe4hlen Sie den Verein aus, f\xfcr den Sie Wettk\xe4mpfer anmelden m\xf6chten:"}),G?(0,we.jsxs)("div",{className:"loading-spinner-container",children:[(0,we.jsx)("div",{className:"loading-spinner"}),(0,we.jsx)("p",{children:"Vereine werden geladen..."})]}):(0,we.jsx)("div",{className:"vereine-grid",children:m.map((e=>(0,we.jsxs)("div",{className:"verein-card selectable",onClick:()=>(async e=>{console.log("\ud83c\udfe2 Verein ausgew\xe4hlt:",e),g(e),o(2),await re(e.vereins_id)})(e),children:[(0,we.jsxs)("div",{className:"verein-info",children:[(0,we.jsx)("h4",{children:e.name}),(0,we.jsxs)("p",{children:["\ud83d\udccd ",e.ort]}),(0,we.jsxs)("p",{children:["\ud83d\udc64 ",e.ansprechpartner]})]}),(0,we.jsx)("div",{className:"select-indicator",children:"\u2192"})]},e.vereins_id)))})]}),2===l&&"admin"!==c&&f&&(0,we.jsxs)("div",{className:"current-verein-info",children:[(0,we.jsx)("h3",{children:"Angemeldet als:"}),(0,we.jsx)("div",{className:"verein-card current",children:(0,we.jsxs)("div",{className:"verein-info",children:[(0,we.jsx)("h4",{children:f.name}),(0,we.jsx)("p",{children:"\ud83d\udd11 Vereins-Login aktiv"})]})})]}),2===l&&f&&(0,we.jsxs)("div",{className:"step-content",children:[(0,we.jsxs)("h3",{children:["Wettk\xe4mpfer von ",f.name," ausw\xe4hlen"]}),(0,we.jsxs)("div",{className:"wettkampfer-controls",children:[(0,we.jsx)("div",{className:"search-container",children:(0,we.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d Wettk\xe4mpfer durchsuchen...",value:y,onChange:e=>k(e.target.value),className:"search-input"})}),(0,we.jsxs)("div",{className:"selection-info",children:[(0,we.jsxs)("span",{children:[b.length," von ",oe.length," ausgew\xe4hlt"]}),(0,we.jsx)("button",{className:"select-all-button",onClick:()=>{const e=oe.map((e=>e.wettkaempfer_id));b.length===e.length?j([]):j(e)},children:b.length===oe.length?"Alle abw\xe4hlen":"Alle ausw\xe4hlen"})]})]}),G?(0,we.jsxs)("div",{className:"loading-spinner-container",children:[(0,we.jsx)("div",{className:"loading-spinner"}),(0,we.jsx)("p",{children:"Wettk\xe4mpfer werden geladen..."})]}):0===oe.length?(0,we.jsxs)("div",{className:"no-wettkampfer",children:[(0,we.jsx)("p",{children:"\ud83e\udd37\u200d\u2642\ufe0f Keine Wettk\xe4mpfer gefunden"}),y&&(0,we.jsx)("button",{onClick:()=>k(""),children:"Suche zur\xfccksetzen"})]}):(0,we.jsx)("div",{className:"wettkampfer-grid",children:oe.map((e=>(0,we.jsxs)("div",{className:"wettkampfer-card "+(b.includes(e.wettkaempfer_id)?"selected":""),onClick:()=>ae(e.wettkaempfer_id),children:[(0,we.jsx)("div",{className:"wettkampfer-checkbox",children:(0,we.jsx)("input",{type:"checkbox",checked:b.includes(e.wettkaempfer_id),onChange:()=>ae(e.wettkaempfer_id)})}),(0,we.jsxs)("div",{className:"wettkampfer-info",children:[(0,we.jsxs)("h4",{children:[e.vorname," ",e.nachname]}),(0,we.jsxs)("div",{className:"wettkampfer-details",children:[(0,we.jsxs)("span",{className:"detail-item",children:["\ud83c\udf82 ",ce(e.geburtsdatum)," Jahre"]}),(0,we.jsxs)("span",{className:"detail-item",children:["\u2696\ufe0f ",e.gewicht," kg"]}),(0,we.jsxs)("span",{className:"detail-item",children:["\ud83e\udd4b ",e.gurtfarbe]}),(0,we.jsxs)("span",{className:"detail-item",children:["\ud83c\udfc6 ",e.skill_level]}),(0,we.jsxs)("span",{className:"detail-item",children:["\ud83e\udd4a ",e.kampfstil]})]})]}),(0,we.jsx)("button",{className:"wettkampfer-edit-btn",onClick:t=>{t.stopPropagation(),(e=>{U({wettkaempfer_id:e.wettkaempfer_id,vorname:e.vorname||"",nachname:e.nachname||"",geburtsdatum:e.geburtsdatum?e.geburtsdatum.split("T")[0]:"",geschlecht:e.geschlecht||"",gewicht:e.gewicht||"",groesse:e.groesse||"",gurtfarbe:e.gurtfarbe||"",skill_level:e.skill_level||"",kampfstil:e.kampfstil||""}),M(e)})(e)},title:"Wettk\xe4mpfer bearbeiten",children:"\u270f\ufe0f"})]},e.wettkaempfer_id)))})]}),W&&(0,we.jsx)("div",{className:"edit-modal-overlay",onClick:()=>M(null),children:(0,we.jsxs)("div",{className:"edit-modal",onClick:e=>e.stopPropagation(),children:[(0,we.jsxs)("div",{className:"edit-modal-header",children:[(0,we.jsx)("h3",{children:"Wettk\xe4mpfer bearbeiten"}),(0,we.jsx)("button",{className:"close-edit",onClick:()=>M(null),children:"\u2715"})]}),(0,we.jsxs)("div",{className:"edit-modal-body",children:[(0,we.jsxs)("div",{className:"edit-form-row",children:[(0,we.jsxs)("div",{className:"edit-form-group",children:[(0,we.jsx)("label",{children:"Vorname"}),(0,we.jsx)("input",{type:"text",value:K.vorname,onChange:e=>U({...K,vorname:e.target.value})})]}),(0,we.jsxs)("div",{className:"edit-form-group",children:[(0,we.jsx)("label",{children:"Nachname"}),(0,we.jsx)("input",{type:"text",value:K.nachname,onChange:e=>U({...K,nachname:e.target.value})})]})]}),(0,we.jsxs)("div",{className:"edit-form-row",children:[(0,we.jsxs)("div",{className:"edit-form-group",children:[(0,we.jsx)("label",{children:"Geburtsdatum"}),(0,we.jsx)("input",{type:"date",value:K.geburtsdatum,onChange:e=>U({...K,geburtsdatum:e.target.value})})]}),(0,we.jsxs)("div",{className:"edit-form-group",children:[(0,we.jsx)("label",{children:"Geschlecht"}),(0,we.jsxs)("select",{value:K.geschlecht,onChange:e=>U({...K,geschlecht:e.target.value}),children:[(0,we.jsx)("option",{value:"",children:"Bitte w\xe4hlen"}),(0,we.jsx)("option",{value:"m\xe4nnlich",children:"M\xe4nnlich"}),(0,we.jsx)("option",{value:"weiblich",children:"Weiblich"})]})]})]}),(0,we.jsxs)("div",{className:"edit-form-row",children:[(0,we.jsxs)("div",{className:"edit-form-group",children:[(0,we.jsx)("label",{children:"Gewicht (kg)"}),(0,we.jsx)("input",{type:"number",step:"0.1",value:K.gewicht,onChange:e=>U({...K,gewicht:e.target.value})})]}),(0,we.jsxs)("div",{className:"edit-form-group",children:[(0,we.jsx)("label",{children:"Gr\xf6\xdfe (cm)"}),(0,we.jsx)("input",{type:"number",value:K.groesse,onChange:e=>U({...K,groesse:e.target.value})})]})]}),(0,we.jsxs)("div",{className:"edit-form-row",children:[(0,we.jsxs)("div",{className:"edit-form-group",children:[(0,we.jsx)("label",{children:"Gurtfarbe"}),(0,we.jsxs)("select",{value:K.gurtfarbe,onChange:e=>U({...K,gurtfarbe:e.target.value}),children:[(0,we.jsx)("option",{value:"",children:"Bitte w\xe4hlen"}),(0,we.jsx)("option",{value:"Wei\xdf",children:"Wei\xdf"}),(0,we.jsx)("option",{value:"Gelb",children:"Gelb"}),(0,we.jsx)("option",{value:"Orange",children:"Orange"}),(0,we.jsx)("option",{value:"Gr\xfcn",children:"Gr\xfcn"}),(0,we.jsx)("option",{value:"Blau",children:"Blau"}),(0,we.jsx)("option",{value:"Braun",children:"Braun"}),(0,we.jsx)("option",{value:"Schwarz",children:"Schwarz"})]})]}),(0,we.jsxs)("div",{className:"edit-form-group",children:[(0,we.jsx)("label",{children:"Skill-Level"}),(0,we.jsxs)("select",{value:K.skill_level,onChange:e=>U({...K,skill_level:e.target.value}),children:[(0,we.jsx)("option",{value:"",children:"Bitte w\xe4hlen"}),(0,we.jsx)("option",{value:"Beginner",children:"Beginner"}),(0,we.jsx)("option",{value:"Intermediate",children:"Intermediate"}),(0,we.jsx)("option",{value:"Advanced",children:"Advanced"}),(0,we.jsx)("option",{value:"Black Belt",children:"Black Belt"})]})]})]}),(0,we.jsx)("div",{className:"edit-form-row",children:(0,we.jsxs)("div",{className:"edit-form-group full-width",children:[(0,we.jsx)("label",{children:"Kampfstil"}),(0,we.jsx)("input",{type:"text",value:K.kampfstil,onChange:e=>U({...K,kampfstil:e.target.value}),placeholder:"z.B. Karate, Taekwondo, Kickboxen"})]})})]}),(0,we.jsxs)("div",{className:"edit-modal-footer",children:[(0,we.jsx)("button",{className:"btn-secondary",onClick:()=>M(null),children:"Abbrechen"}),(0,we.jsx)("button",{className:"btn-primary",onClick:async()=>{q(!0);try{const e=X();if(!e)throw new Error("Kein Authentifizierungstoken gefunden");const t=await fetch(`/api/wettkaempfer/${K.wettkaempfer_id}`,{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(K)});if(!t.ok){const e=await t.json();throw new Error(e.message||`HTTP ${t.status}`)}v((e=>e.map((e=>e.wettkaempfer_id===K.wettkaempfer_id?{...e,...K}:e)))),M(null),U({})}catch(Zo){console.error("\u274c Fehler beim Speichern:",Zo),Z("Fehler beim Speichern: "+Zo.message)}finally{q(!1)}},disabled:V,children:V?"\u23f3 Speichern...":"\ud83d\udcbe Speichern"})]})]})}),3===l&&(0,we.jsx)("div",{className:"step-content fullscreen-step",children:G?(0,we.jsxs)("div",{className:"loading-spinner-container",children:[(0,we.jsx)("div",{className:"loading-spinner"}),(0,we.jsx)("p",{children:"Divisionen werden geladen und gefiltert..."})]}):(0,we.jsxs)("div",{className:"sidebar-layout",children:[(0,we.jsxs)("div",{className:"wettkampfer-sidebar",children:[(0,we.jsx)("div",{className:"sidebar-header",children:"Wettk\xe4mpfer"}),b.map((e=>{var t,n;const r=x.find((t=>t.wettkaempfer_id===e));if(!r)return null;const a=S[e]||{passend:[],ausgewaehlt:[]},i=C===e,s=(null===(t=a.ausgewaehlt)||void 0===t?void 0:t.length)>0;return(0,we.jsxs)("button",{className:`sidebar-item ${i?"active":""} ${s?"has-selection":""}`,onClick:()=>{z(e),A({}),D("alle")},children:[(0,we.jsxs)("div",{className:"sidebar-name",children:[r.vorname," ",r.nachname]}),(0,we.jsxs)("div",{className:"sidebar-details",children:[(0,we.jsxs)("span",{children:[ce(r.geburtsdatum),"J"]}),(0,we.jsxs)("span",{children:[r.gewicht,"kg"]}),(0,we.jsx)("span",{children:"m\xe4nnlich"===r.geschlecht?"\u2642":"weiblich"===r.geschlecht?"\u2640":""})]}),(0,we.jsxs)("div",{className:"sidebar-details",children:[(0,we.jsx)("span",{children:r.gurtfarbe}),(0,we.jsx)("span",{children:r.skill_level})]}),s?(0,we.jsx)("span",{className:"sidebar-badge",children:a.ausgewaehlt.length}):(null===(n=a.passend)||void 0===n?void 0:n.length)>0?(0,we.jsx)("span",{className:"sidebar-warning",children:"!"}):null]},e)}))]}),(0,we.jsx)("div",{className:"division-main-area",children:C&&(()=>{if(!x.find((e=>e.wettkaempfer_id===C)))return null;const e=S[C]||{passend:[],ausgewaehlt:[]},t=e.passend||[],n=e.ausgewaehlt||[],r=t.reduce(((e,t)=>{const n=t.Division_Type||"Sonstige";return e[n]||(e[n]=[]),e[n].push(t),e}),{});return(0,we.jsxs)("div",{className:"division-content",children:[(0,we.jsxs)("div",{className:"compact-action-bar",children:[(0,we.jsxs)("span",{className:"division-stats",children:[n.length,"/",t.length]}),(0,we.jsx)("button",{className:"btn-small",onClick:()=>O(!0),children:"\ud83d\udccb \xdcbersicht"}),(0,we.jsx)("button",{className:"btn-small",onClick:()=>{return e=C,void _((t=>{const n=t[e]||{passend:[],ausgewaehlt:[]},r=n.passend.map((e=>e.Division_Code));return n.ausgewaehlt.length===r.length?{...t,[e]:{...n,ausgewaehlt:[]}}:{...t,[e]:{...n,ausgewaehlt:r}}}));var e},children:n.length===t.length?"Keine":"Alle"})]}),(()=>{const e=Object.keys(r),n={formen:["formen","forms","kata"],kumite:["kumite","sparring"],kickboxen:["kickboxen","kickboxing","pointfighting","point fighting","continuous","continous","fullcontact","full contact","k1","k-1"],grappling:["grappling","wrestling","bjj"],rumble:["rumble"],selbstverteidigung:["selbstverteidigung","self defense","self-defense","sv"],bruchtest:["bruchtest","breaking","break"]},a=[{id:"alle",label:"Alle",icon:"\ud83d\udccb"},{id:"formen",label:"Formen",icon:"\ud83e\udd4b"},{id:"kumite",label:"Kumite",icon:"\ud83d\udc4a"},{id:"kickboxen",label:"Kickboxen",icon:"\ud83e\udd4a"},{id:"grappling",label:"Grappling",icon:"\ud83e\udd3c"},{id:"selbstverteidigung",label:"Selbstvert.",icon:"\ud83d\udee1\ufe0f"},{id:"bruchtest",label:"Bruchtest",icon:"\ud83e\uddf1"},{id:"rumble",label:"Rumble",icon:"\ud83d\udca5"}].filter((t=>"alle"===t.id||(t=>{const r=n[t]||[t];return e.some((e=>r.some((t=>e.toLowerCase().includes(t)))))})(t.id)));return(0,we.jsx)("div",{className:"main-category-tabs",children:a.map((a=>{const i=(t=>{const r=n[t]||[t];return e.filter((e=>r.some((t=>e.toLowerCase().includes(t)))))})(a.id),s="alle"===a.id?t.length:i.reduce(((e,t)=>e+(r[t]||[]).length),0);return(0,we.jsxs)("button",{className:"main-category-tab "+(E===a.id?"active":""),onClick:()=>D(a.id),children:[(0,we.jsx)("span",{className:"cat-icon",children:a.icon}),(0,we.jsx)("span",{className:"cat-label",children:a.label}),(0,we.jsx)("span",{className:"cat-count",children:s})]},a.id)}))})})(),(0,we.jsxs)("div",{className:"division-toolbar",children:[(0,we.jsxs)("div",{className:"division-search",children:[(0,we.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d Division suchen...",value:B,onChange:e=>R(e.target.value),className:"division-search-input"}),B&&(0,we.jsx)("button",{className:"clear-search",onClick:()=>R(""),children:"\u2715"})]}),(0,we.jsxs)("div",{className:"division-sort",children:[(0,we.jsx)("label",{children:"Sortieren:"}),(0,we.jsxs)("select",{value:F,onChange:e=>L(e.target.value),className:"sort-select",children:[(0,we.jsx)("option",{value:"code",children:"Code (A-Z)"}),(0,we.jsx)("option",{value:"alter",children:"Alter"}),(0,we.jsx)("option",{value:"gewicht",children:"Gewicht"}),(0,we.jsx)("option",{value:"skill",children:"Skill-Level"}),(0,we.jsx)("option",{value:"favoriten",children:"Favoriten zuerst"})]})]})]}),0===t.length?(0,we.jsx)("div",{className:"no-divisions-warning",children:"\u26a0\ufe0f Keine passenden Divisionen f\xfcr diesen Wettk\xe4mpfer gefunden"}):(0,we.jsx)("div",{className:"divisions-container",children:Object.entries(r).filter((e=>{let[t]=e;if("alle"===E)return!0;return({formen:["formen","forms","kata"],kumite:["kumite","sparring"],kickboxen:["kickboxen","kickboxing","pointfighting","point fighting","continuous","continous","fullcontact","full contact","k1","k-1"],grappling:["grappling","wrestling","bjj"],rumble:["rumble"],selbstverteidigung:["selbstverteidigung","self defense","self-defense","sv"],bruchtest:["bruchtest","breaking","break"]}[E]||[E]).some((e=>t.toLowerCase().includes(e)))})).map((e=>{var t;let[r,a]=e;const i=r.toLowerCase(),s={formen:[{id:"alle",label:"Alle",filter:()=>!0},{id:"japanese",label:"Japanese",filter:e=>{var t;return null===(t=e.Division_Name)||void 0===t?void 0:t.toLowerCase().includes("japanese")}},{id:"korean",label:"Korean",filter:e=>{var t;return null===(t=e.Division_Name)||void 0===t?void 0:t.toLowerCase().includes("korean")}},{id:"chinese",label:"Chinese/Kenpo",filter:e=>{var t,n,r;return(null===(t=e.Division_Name)||void 0===t?void 0:t.toLowerCase().includes("chinese"))||(null===(n=e.Division_Name)||void 0===n?void 0:n.toLowerCase().includes("kenpo"))||(null===(r=e.Division_Name)||void 0===r?void 0:r.toLowerCase().includes("kempo"))}},{id:"weapons",label:"Weapons",filter:e=>{var t;return null===(t=e.Division_Name)||void 0===t?void 0:t.toLowerCase().includes("weapon")}},{id:"open",label:"Open/Creative",filter:e=>{var t,n,r;return(null===(t=e.Division_Name)||void 0===t?void 0:t.toLowerCase().includes("open"))||(null===(n=e.Division_Name)||void 0===n?void 0:n.toLowerCase().includes("creative"))||(null===(r=e.Division_Name)||void 0===r?void 0:r.toLowerCase().includes("music"))}},{id:"team",label:"Team/Duo",filter:e=>{var t,n;return(null===(t=e.Division_Name)||void 0===t?void 0:t.toLowerCase().includes("team"))||(null===(n=e.Division_Name)||void 0===n?void 0:n.toLowerCase().includes("duo"))}}],kickboxen:[{id:"alle",label:"Alle",filter:()=>!0},{id:"pointfighting",label:"Pointfighting",filter:e=>{var t;return null===(t=e.Division_Name)||void 0===t?void 0:t.toLowerCase().includes("point")}},{id:"continuous",label:"Continuous",filter:e=>{var t;return null===(t=e.Division_Name)||void 0===t?void 0:t.toLowerCase().includes("continu")}},{id:"fullcontact",label:"Fullcontact",filter:e=>{var t,n;return(null===(t=e.Division_Name)||void 0===t?void 0:t.toLowerCase().includes("fullcontact"))||(null===(n=e.Division_Name)||void 0===n?void 0:n.toLowerCase().includes("full contact"))}},{id:"k1",label:"K1",filter:e=>{var t,n;return(null===(t=e.Division_Name)||void 0===t?void 0:t.toLowerCase().includes("k1"))||(null===(n=e.Division_Name)||void 0===n?void 0:n.toLowerCase().includes("k-1"))}}],grappling:[{id:"alle",label:"Alle",filter:()=>!0},{id:"nogi",label:"No-Gi",filter:e=>{var t,n;return(null===(t=e.Division_Name)||void 0===t?void 0:t.toLowerCase().includes("no-gi"))||(null===(n=e.Division_Name)||void 0===n?void 0:n.toLowerCase().includes("nogi"))}},{id:"gi",label:"Gi",filter:e=>{var t,n,r;return(null===(t=e.Division_Name)||void 0===t?void 0:t.toLowerCase().includes("gi"))&&!(null!==(n=e.Division_Name)&&void 0!==n&&n.toLowerCase().includes("no-gi"))&&!(null!==(r=e.Division_Name)&&void 0!==r&&r.toLowerCase().includes("nogi"))}}],kumite:[{id:"alle",label:"Alle",filter:()=>!0},{id:"light",label:"Light Contact",filter:e=>{var t;return null===(t=e.Division_Name)||void 0===t?void 0:t.toLowerCase().includes("light")}},{id:"semi",label:"Semi Contact",filter:e=>{var t;return null===(t=e.Division_Name)||void 0===t?void 0:t.toLowerCase().includes("semi")}},{id:"full",label:"Full Contact",filter:e=>{var t;return null===(t=e.Division_Name)||void 0===t?void 0:t.toLowerCase().includes("full")}}],rumble:[{id:"alle",label:"Alle",filter:()=>!0}]}[i]||null,l=s&&s.length>1,o=T[i]||"alle";let c=l?a.filter((null===(t=s.find((e=>e.id===o)))||void 0===t?void 0:t.filter)||(()=>!0)):a;c=(e=>{if(!B.trim())return e;const t=B.toLowerCase();return e.filter((e=>{var n,r;return(null===(n=e.Division_Code)||void 0===n?void 0:n.toLowerCase().includes(t))||(null===(r=e.Division_Name)||void 0===r?void 0:r.toLowerCase().includes(t))}))})(c),c=(e=>{const t=[...e];switch(F){case"alter":return t.sort(((e,t)=>(parseInt(e.Age_from)||0)-(parseInt(t.Age_from)||0)));case"gewicht":return t.sort(((e,t)=>(parseFloat(e.Minimun_Weight)||0)-(parseFloat(t.Minimun_Weight)||0)));case"skill":const e={Beginner:1,Intermediate:2,Amateur:3,Advanced:4,"Black Belts":5};return t.sort(((t,n)=>(e[t.Skill_Level]||99)-(e[n.Skill_Level]||99)));case"favoriten":return t.sort(((e,t)=>(I.includes(e.Division_Code)?0:1)-(I.includes(t.Division_Code)?0:1)));default:return t.sort(((e,t)=>(e.Division_Code||"").localeCompare(t.Division_Code||"")))}})(c);const d={};return l&&s.forEach((e=>{d[e.id]=a.filter(e.filter).length})),0===a.length?null:(0,we.jsxs)("div",{className:"division-type-section",children:[(0,we.jsxs)("div",{className:"type-header",children:[(0,we.jsx)("h4",{children:r}),(0,we.jsxs)("span",{className:"type-count",children:[c.length,B&&c.length!==a.length?` / ${a.length}`:""," Divisionen"]})]}),l&&(0,we.jsx)("div",{className:"formen-filter-tabs",children:s.map((e=>(0,we.jsxs)("button",{className:"formen-filter-tab "+(o===e.id?"active":""),onClick:t=>{t.stopPropagation(),A((t=>({...t,[i]:e.id})))},children:[e.label,(0,we.jsx)("span",{className:"filter-count",children:d[e.id]})]},e.id)))}),0===c.length&&B&&(0,we.jsxs)("div",{className:"no-search-results",children:['Keine Divisionen gefunden f\xfcr "',B,'"']}),(0,we.jsx)("div",{className:"divisions-grid",children:c.map((e=>{const t=n.includes(e.Division_Code),r=I.includes(e.Division_Code);return(0,we.jsxs)("div",{className:`division-card ${t?"selected":""} ${r?"favorit":""}`,onClick:()=>{return t=C,n=e.Division_Code,void _((e=>{const r=e[t]||{passend:[],ausgewaehlt:[]},a=r.ausgewaehlt||[];return a.includes(n)?{...e,[t]:{...r,ausgewaehlt:a.filter((e=>e!==n))}}:{...e,[t]:{...r,ausgewaehlt:[...a,n]}}}));var t,n},children:[(0,we.jsx)("div",{className:"division-checkbox",children:t?"\u2713":""}),(0,we.jsx)("button",{className:"favorit-btn "+(r?"active":""),onClick:t=>{var n;t.stopPropagation(),n=e.Division_Code,$((e=>{const t=e.includes(n)?e.filter((e=>e!==n)):[...e,n];return localStorage.setItem("divisionFavoriten",JSON.stringify(t)),t}))},title:r?"Aus Favoriten entfernen":"Zu Favoriten hinzuf\xfcgen",children:r?"\u2605":"\u2606"}),(0,we.jsxs)("div",{className:"division-info",children:[(0,we.jsx)("div",{className:"division-code",children:e.Division_Code}),(0,we.jsx)("div",{className:"division-name",children:e.Division_Name}),(0,we.jsxs)("div",{className:"division-details",children:[(0,we.jsxs)("span",{children:["\ud83c\udf82 ",e.Age_from||"?","-",e.Age_to||"?"," J"]}),(e.Minimun_Weight||e.Maximum_Weight)&&(0,we.jsxs)("span",{children:["\u2696\ufe0f ",e.Minimun_Weight||"?","-",e.Maximum_Weight||"?"," kg"]}),e.Skill_Level&&(0,we.jsxs)("span",{children:["\ud83c\udfc6 ",e.Skill_Level]}),e.Gender&&(0,we.jsxs)("span",{children:["\ud83d\udc64 ",e.Gender]})]})]})]},e.Division_Code)}))}),l&&0===c.length&&!B&&(0,we.jsx)("div",{className:"no-filter-results",children:"Keine Divisionen in dieser Kategorie"})]},r)}))}),0===n.length&&t.length>0&&(0,we.jsx)("div",{className:"selection-warning",children:"\u26a0\ufe0f Bitte mindestens eine Division f\xfcr diesen Wettk\xe4mpfer ausw\xe4hlen"})]})})()})]})})]}),P&&(0,we.jsx)("div",{className:"summary-overlay",onClick:()=>O(!1),children:(0,we.jsxs)("div",{className:"summary-modal",onClick:e=>e.stopPropagation(),children:[(0,we.jsxs)("div",{className:"summary-header",children:[(0,we.jsx)("h3",{children:"Anmeldungs-\xdcbersicht"}),(0,we.jsx)("button",{className:"close-summary",onClick:()=>O(!1),children:"\u2715"})]}),(0,we.jsx)("div",{className:"summary-content",children:le().map((e=>{let{wettkampfer:t,divisionen:n}=e;return(0,we.jsxs)("div",{className:"summary-wettkampfer",children:[(0,we.jsxs)("div",{className:"summary-wettkampfer-header",children:[(0,we.jsxs)("h4",{children:[null===t||void 0===t?void 0:t.vorname," ",null===t||void 0===t?void 0:t.nachname]}),(0,we.jsxs)("span",{className:"summary-badge",children:[n.length," Division",1!==n.length?"en":""]})]}),0===n.length?(0,we.jsx)("p",{className:"summary-warning",children:"Keine Divisionen ausgew\xe4hlt"}):(0,we.jsx)("ul",{className:"summary-divisions",children:n.map((e=>(0,we.jsxs)("li",{children:[(0,we.jsx)("span",{className:"summary-code",children:e.Division_Code}),(0,we.jsx)("span",{className:"summary-name",children:e.Division_Name})]},e.Division_Code)))})]},null===t||void 0===t?void 0:t.wettkaempfer_id)}))}),(0,we.jsxs)("div",{className:"summary-footer",children:[(0,we.jsxs)("div",{className:"summary-total",children:["Gesamt: ",b.length," Wettk\xe4mpfer, "," ",le().reduce(((e,t)=>e+t.divisionen.length),0)," Divisions-Anmeldungen"]}),(0,we.jsx)("button",{className:"btn-primary",onClick:()=>O(!1),children:"Schlie\xdfen"})]})]})}),(0,we.jsxs)("div",{className:"modal-footer",children:[(0,we.jsx)("button",{className:"btn-secondary",onClick:n,children:"Abbrechen"}),1===l&&"admin"===c&&(0,we.jsx)("button",{className:"btn-primary",disabled:!f,children:"Verein ausw\xe4hlen \u2192"}),2===l&&(0,we.jsxs)(we.Fragment,{children:["admin"===c&&(0,we.jsx)("button",{className:"btn-secondary",onClick:()=>o(1),children:"\u2190 Zur\xfcck"}),(0,we.jsx)("button",{className:"btn-primary",onClick:async()=>{0!==b.length?(o(3),await ie()):Z("Bitte w\xe4hlen Sie mindestens einen Wettk\xe4mpfer aus.")},disabled:0===b.length,children:"Weiter zu Divisionen \u2192"})]}),3===l&&(0,we.jsxs)(we.Fragment,{children:[(0,we.jsx)("button",{className:"btn-secondary",onClick:()=>o(2),children:"\u2190 Zur\xfcck"}),(0,we.jsx)("button",{className:"btn-primary",onClick:async()=>{if(0!==b.length)if(se()){Q(!0);try{const a=X();if(!a)throw new Error("Kein Authentifizierungstoken gefunden. Bitte loggen Sie sich erneut ein.");const s=b.map((e=>{var t;return{wettkaempfer_id:e,divisionen:(null===(t=S[e])||void 0===t?void 0:t.ausgewaehlt)||[]}})),l={turnier_id:t.turnier_id,verein_id:f.vereins_id,wettkampfer_ids:b,wettkampfer_divisionen:s,anmelde_datum:(new Date).toISOString(),is_update:!!i};console.log("\ud83d\udcdd Sende Anmeldung mit Divisionen:",l);const o=await fetch("/api/anmeldungen",{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(l)});if(console.log("\ud83d\udce1 Anmeldung Response Status:",o.status),!o.ok){const e=await o.json();throw console.error("\u274c Anmeldung Error:",e),new Error(e.message||`HTTP ${o.status}`)}const c=await o.json();var e;if(console.log("\u2705 Anmeldung erfolgreich:",c),r)r({turnier:t,verein:f,wettkampfer:b,divisionen:S,anmeldung_id:null===(e=c.data)||void 0===e?void 0:e.anmeldung_id});n()}catch(Zo){console.error("\u274c Anmeldung fehlgeschlagen:",Zo),Z("Anmeldung fehlgeschlagen: "+Zo.message)}finally{Q(!1)}}else Z("Bitte w\xe4hlen Sie f\xfcr jeden Wettk\xe4mpfer mindestens eine Division aus.");else Z("Bitte w\xe4hlen Sie mindestens einen Wettk\xe4mpfer aus.")},disabled:!se()||Y,children:Y?(0,we.jsx)(we.Fragment,{children:"\u23f3 Anmeldung l\xe4uft..."}):(0,we.jsxs)(we.Fragment,{children:["\u2705 ",b.length," Wettk\xe4mpfer anmelden"]})})]})]})]})})},so=["Beginner","Intermediate","Advanced","Black Belt"],lo=[{value:"hauptkampfrichter",label:"Hauptkampfrichter",icon:"\ud83d\udc68\u200d\u2696\ufe0f"},{value:"seitenkampfrichter",label:"Seitenkampfrichter",icon:"\u2696\ufe0f"},{value:"punktrichter",label:"Punktrichter",icon:"\ud83d\udcdd"},{value:"zeitnehmer",label:"Zeitnehmer",icon:"\u23f1\ufe0f"},{value:"mattenleiter",label:"Mattenleiter",icon:"\ud83c\udfaf"},{value:"schreiber",label:"Schreiber",icon:"\u270d\ufe0f"},{value:"helfer",label:"Helfer",icon:"\ud83e\udd1d"},{value:"arzt",label:"Arzt",icon:"\ud83d\udc68\u200d\u2695\ufe0f"},{value:"sanitaeter",label:"Sanit\xe4ter",icon:"\ud83d\ude91"}],oo=[{value:"keine",label:"Keine Lizenz",icon:"\u26aa"},{value:"c_lizenz",label:"C-Lizenz",icon:"\ud83d\udfe2"},{value:"b_lizenz",label:"B-Lizenz",icon:"\ud83d\udd35"},{value:"a_lizenz",label:"A-Lizenz",icon:"\ud83d\udfe1"},{value:"international",label:"International",icon:"\ud83d\udd34"}],co=["Wei\xdf","Wei\xdf/Gelb","Gelb","Orange","Gr\xfcn","Gr\xfcn/Blau","Blau","Lila","Blau/Rot","Rot","Braun","Schwarz"];function uo(e){if(!e)return"";return new Date(e).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})}function ho(e,t,n,r,a){const i=arguments.length>5&&void 0!==arguments[5]&&arguments[5]?n||40:t||25;let s=0;for(let l=0;l<e;l++)s+=0===l?i:1===l?i*(1-(r||20)/100):i*(1-(a||40)/100);return s}function mo(e){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e)}function po(e){let{open:t,title:n,children:r,onClose:a}=e;return t?(0,we.jsx)("div",{className:"modal-backdrop",children:(0,we.jsxs)("div",{className:"modal-content",children:[(0,we.jsxs)("div",{className:"modal-header",children:[(0,we.jsx)("h2",{children:n}),(0,we.jsx)("button",{className:"modal-close-btn",onClick:a,children:"\xd7"})]}),(0,we.jsx)("div",{className:"modal-body",children:r})]})}):null}function fo(e){let{vereinId:t}=e;const{id:r}=function(){let{matches:e}=s.useContext(Y),t=e[e.length-1];return t?t.params:{}}(),a=ne(),i=t||r,[l,o]=(0,s.useState)(null),[c,d]=(0,s.useState)([]),[u,h]=(0,s.useState)(!1),[m,p]=(0,s.useState)(""),[f,g]=(0,s.useState)(!1),[x,v]=(0,s.useState)(!1),[b,j]=(0,s.useState)("ALL"),[y,k]=(0,s.useState)(""),[w,N]=(0,s.useState)(!1),[S,_]=(0,s.useState)(null),[C,z]=(0,s.useState)(!1),[T,A]=(0,s.useState)(null),[E,D]=(0,s.useState)(!1),[B,R]=(0,s.useState)(null),[F,L]=(0,s.useState)(new Set),[P,O]=(0,s.useState)("wettkaempfer"),[I,$]=(0,s.useState)(!1),[W,M]=(0,s.useState)(!1),[K,U]=(0,s.useState)([]),[V,q]=(0,s.useState)(null),[G,H]=(0,s.useState)(!1),[J,Z]=(0,s.useState)([]),[Q,X]=(0,s.useState)(!1),[ee,te]=(0,s.useState)({vorname:"",nachname:"",email:"",telefon:"",primaer_rolle:"helfer",qualifikation:"keine",lizenz_nummer:"",verband:"",notizen:""}),[re,ae]=(0,s.useState)([]),[ie,se]=(0,s.useState)(!1),[le,oe]=(0,s.useState)(null),[ce,de]=(0,s.useState)({}),[ue,he]=(0,s.useState)(!1),[me,pe]=(0,s.useState)(null),[fe,ge]=(0,s.useState)(null),[xe,ve]=(0,s.useState)(!1),[be,je]=(0,s.useState)(null),[ye,Ne]=(0,s.useState)({vorname:"",nachname:"",geburtsdatum:"",gewicht:"",skill_level:"",email:"",handy:"",vereins_id:i,geschlecht:"",nationalitaet:"",gurtfarbe:"",kampfstil:""}),Se=async()=>{try{const e=localStorage.getItem("token")||localStorage.getItem("authToken"),t=await fetch("/api/personal",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json();e.success&&Z(e.data)}}catch(Zo){console.error("Fehler beim Laden des Personals:",Zo),Z([])}},_e=async()=>{if(i){se(!0);try{const e=localStorage.getItem("token")||localStorage.getItem("authToken"),t=await fetch(`/api/anmeldungen/verein/${i}`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json();console.log("Anmeldungen API Response:",e),e.success&&e.data&&Array.isArray(e.data.anmeldungen)?ae(e.data.anmeldungen):e.success&&Array.isArray(e.data)?ae(e.data):Array.isArray(e)?ae(e):ae([])}else ae([])}catch(Zo){console.error("Fehler beim Laden der Anmeldungen:",Zo),ae([])}finally{se(!1)}}};(0,s.useEffect)((()=>{(0,ke.Qd)(i).then((e=>{console.log("\ud83c\udfe2 Vereinsdaten geladen:",e),o(e)})).catch((e=>console.error("Fehler beim Laden der Vereinsdetails:",e))),Le(i).then(d).catch((()=>d([]))),Se(),_e(),Ce()}),[i]);const Ce=async()=>{try{const e=await fetch(`/api/dojo-sync/check-updates/${i}`),t=await e.json();t.success&&t.has_integration&&(he(!0),ge(t.last_sync),pe(t))}catch(e){console.error("Error checking dojo integration:",e)}},ze=c.filter((e=>{const t=(e.nachname||"").charAt(0).toUpperCase(),n="ALL"===b||t===b,r=""===y||`${e.vorname} ${e.nachname}`.toLowerCase().includes(y.toLowerCase());return n&&r})),Te=(()=>{const e=new Set;return c.forEach((t=>{const n=(t.nachname||"").charAt(0).toUpperCase();n>="A"&&n<="Z"&&e.add(n)})),Array.from(e).sort()})();if(!l)return(0,we.jsx)("div",{className:"verein-detail-page",children:(0,we.jsxs)("div",{className:"loading-container",children:[(0,we.jsx)("div",{className:"loading-spinner"}),(0,we.jsx)("p",{children:"Lade Vereinsdaten..."})]})});const Ae=async()=>{await(async()=>{H(!0);try{const e=localStorage.getItem("token")||localStorage.getItem("authToken"),t=localStorage.getItem("clubData");let n=e;t&&(n=JSON.parse(t).token||e);const r=new URLSearchParams({zukunft:"true",anmeldeoffen:"true"}),a=await fetch(`/api/turniere?${r}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}});if(!a.ok)throw new Error(`HTTP ${a.status}`);const i=await a.json();let s=[];i.success&&Array.isArray(i.data)?s=i.data:Array.isArray(i)&&(s=i);const l=s.filter((e=>!1!==e.canRegister));U(l)}catch(e){console.error("Fehler beim Laden der Turniere:",e),U([])}finally{H(!1)}})(),M(!0)};return(0,we.jsxs)("div",{className:"verein-detail-page",children:[(0,we.jsxs)("div",{className:"detail-layout "+(x?"sidebar-collapsed":""),children:[(0,we.jsxs)("div",{className:"verein-sidebar "+(x?"collapsed":""),children:[(0,we.jsxs)("div",{className:"sidebar-header",children:[(0,we.jsxs)("div",{className:"sidebar-header-left",onClick:()=>v(!x),children:[(0,we.jsx)("span",{className:"toggle-icon",children:x?"\u25b6":"\u25c0"}),(0,we.jsx)("h2",{children:"Vereinsdaten"})]}),!x&&!w&&(0,we.jsx)("button",{className:"edit-button",onClick:()=>{_({...l}),N(!0)},children:"\u270f\ufe0f Bearbeiten"}),!x&&w&&(0,we.jsxs)("div",{className:"edit-actions",children:[(0,we.jsx)("button",{className:"save-button",onClick:async()=>{try{g(!0);const{updateVerein:e}=await Promise.resolve().then(n.bind(n,201));await e(i,S),o(S),N(!1),_(null)}catch(e){console.error("Fehler beim Speichern der Vereinsdaten:",e),alert("Fehler beim Speichern: "+e.message)}finally{g(!1)}},disabled:f,children:f?"\ud83d\udcbe Speichern...":"\ud83d\udcbe Speichern"}),(0,we.jsx)("button",{className:"cancel-button",onClick:()=>{_(null),N(!1)},disabled:f,children:"\u274c Abbrechen"})]})]}),!x&&(0,we.jsxs)("div",{className:"sidebar-content",children:[(0,we.jsxs)("div",{className:"info-section",children:[(0,we.jsx)("h3",{children:"Allgemeines"}),(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"info-label",children:"Name:"}),w?(0,we.jsx)("input",{type:"text",className:"info-input",value:(null===S||void 0===S?void 0:S.name)||"",onChange:e=>_({...S,name:e.target.value})}):(0,we.jsx)("span",{className:"info-value",children:l.name})]}),(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"info-label",children:"Ansprechpartner:"}),w?(0,we.jsx)("input",{type:"text",className:"info-input",value:(null===S||void 0===S?void 0:S.ansprechpartner)||"",onChange:e=>_({...S,ansprechpartner:e.target.value})}):(0,we.jsx)("span",{className:"info-value",children:l.ansprechpartner})]})]}),(0,we.jsxs)("div",{className:"info-section",children:[(0,we.jsx)("h3",{children:"Kontakt"}),(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"info-label",children:"\ud83d\udce7 Email:"}),w?(0,we.jsx)("input",{type:"email",className:"info-input",value:(null===S||void 0===S?void 0:S.email)||"",onChange:e=>_({...S,email:e.target.value})}):(0,we.jsx)("span",{className:"info-value",children:l.email})]}),(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"info-label",children:"\ud83d\udcde Telefon:"}),w?(0,we.jsx)("input",{type:"tel",className:"info-input",value:(null===S||void 0===S?void 0:S.telefon)||"",onChange:e=>_({...S,telefon:e.target.value})}):(0,we.jsx)("span",{className:"info-value",children:l.telefon})]})]}),(0,we.jsxs)("div",{className:"info-section",children:[(0,we.jsx)("h3",{children:"Adresse"}),(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"info-label",children:"Stra\xdfe:"}),w?(0,we.jsx)("input",{type:"text",className:"info-input",value:(null===S||void 0===S?void 0:S.strasse)||"",onChange:e=>_({...S,strasse:e.target.value}),placeholder:"Stra\xdfe"}):(0,we.jsxs)("span",{className:"info-value",children:[l.strasse," ",l.hausnummer]})]}),w&&(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"info-label",children:"Hausnummer:"}),(0,we.jsx)("input",{type:"text",className:"info-input",value:(null===S||void 0===S?void 0:S.hausnummer)||"",onChange:e=>_({...S,hausnummer:e.target.value}),placeholder:"Nr."})]}),(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"info-label",children:"PLZ:"}),w?(0,we.jsx)("input",{type:"text",className:"info-input",value:(null===S||void 0===S?void 0:S.plz)||"",onChange:e=>_({...S,plz:e.target.value}),placeholder:"PLZ"}):(0,we.jsx)("span",{className:"info-value",children:l.plz})]}),(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"info-label",children:"Ort:"}),w?(0,we.jsx)("input",{type:"text",className:"info-input",value:(null===S||void 0===S?void 0:S.ort)||"",onChange:e=>_({...S,ort:e.target.value}),placeholder:"Ort"}):(0,we.jsx)("span",{className:"info-value",children:l.ort})]})]}),(0,we.jsxs)("div",{className:"info-section",children:[(0,we.jsx)("h3",{children:"Sonstiges"}),(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"info-label",children:"Benutzername:"}),(0,we.jsx)("span",{className:"info-value",children:l.benutzername})]}),(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"info-label",children:"Homepage:"}),w?(0,we.jsx)("input",{type:"url",className:"info-input",value:(null===S||void 0===S?void 0:S.homepage)||"",onChange:e=>_({...S,homepage:e.target.value}),placeholder:"https://..."}):l.homepage?(0,we.jsx)("span",{className:"info-value",children:(0,we.jsx)("a",{href:l.homepage,target:"_blank",rel:"noopener noreferrer",children:l.homepage})}):(0,we.jsx)("span",{className:"info-value",children:"-"})]}),l.logo&&!w&&(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"info-label",children:"Logo:"}),(0,we.jsx)("img",{src:l.logo,alt:"Logo",className:"verein-logo"})]})]})]})]}),(0,we.jsxs)("div",{className:"wettkaempfer-content",children:[(0,we.jsxs)("div",{className:"content-tabs",children:[(0,we.jsxs)("button",{className:"content-tab "+("wettkaempfer"===P?"active":""),onClick:()=>O("wettkaempfer"),children:["\ud83e\udd4b Wettk\xe4mpfer (",c.length,")"]}),(0,we.jsxs)("button",{className:"content-tab "+("personal"===P?"active":""),onClick:()=>O("personal"),children:["\ud83d\udc68\u200d\u2696\ufe0f Helfer & Kampfrichter (",J.length,")"]}),(0,we.jsxs)("button",{className:"content-tab "+("anmeldungen"===P?"active":""),onClick:()=>O("anmeldungen"),children:["\ud83d\udccb Anmeldungen (",re.length,")"]}),(0,we.jsx)("button",{className:"back-button-tab",onClick:()=>a(-1),title:"Zur\xfcck",children:"\u2190 Zur\xfcck"})]}),(0,we.jsxs)("div",{className:"actions-bar",children:[(0,we.jsxs)("h2",{children:["wettkaempfer"===P&&`Wettk\xe4mpfer (${c.length})`,"personal"===P&&`Helfer & Kampfrichter (${J.length})`,"anmeldungen"===P&&`Turnier-Anmeldungen (${re.length})`]}),(0,we.jsxs)("div",{className:"actions-buttons",children:["wettkaempfer"===P&&(0,we.jsxs)(we.Fragment,{children:[(0,we.jsx)("button",{className:"turnier-button",onClick:Ae,children:"\ud83c\udfc6 F\xfcr Turnier anmelden"}),(0,we.jsx)("button",{className:"add-button",onClick:()=>{Ne({vorname:"",nachname:"",geburtsdatum:"",gewicht:"",skill_level:"",email:"",handy:"",vereins_id:i,geschlecht:"",nationalitaet:"",gurtfarbe:"",kampfstil:""}),p(""),h(!0)},children:"\u2795 Wettk\xe4mpfer hinzuf\xfcgen"})]}),"personal"===P&&(0,we.jsx)("button",{className:"add-button",onClick:()=>{te({vorname:"",nachname:"",email:"",telefon:"",primaer_rolle:"helfer",qualifikation:"keine",lizenz_nummer:"",verband:"",notizen:""}),p(""),X(!0)},children:"\u2795 Personal hinzuf\xfcgen"}),"anmeldungen"===P&&(0,we.jsx)("button",{className:"turnier-button",onClick:Ae,children:"\ud83c\udfc6 Neue Anmeldung"})]})]}),"wettkaempfer"===P&&(0,we.jsxs)(we.Fragment,{children:[ue&&(0,we.jsxs)("div",{className:"dojo-sync-widget-compact",children:[(0,we.jsxs)("div",{className:"sync-widget-title",children:[(0,we.jsx)("span",{className:"sync-icon",children:"\ud83d\udd04"}),(0,we.jsx)("span",{children:"Dojosoftware Synchronisation"})]}),(0,we.jsx)("button",{className:"sync-button-compact",onClick:async()=>{ve(!0),je(null);try{const e=await fetch("/api/dojo-sync/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({verein_id:i})}),t=await e.json();if(t.success){je({type:"success",text:`\u2705 Sync erfolgreich! ${t.imported} neue, ${t.updated} aktualisiert${t.errors>0?`, ${t.errors} Fehler`:""}`}),ge(t.last_sync);const e=await Le(i);d(e),Ce()}else je({type:"error",text:`\u274c Sync fehlgeschlagen: ${t.message}`})}catch(e){je({type:"error",text:`\u274c Fehler beim Sync: ${e.message}`})}finally{ve(!1),setTimeout((()=>je(null)),5e3)}},disabled:xe,children:xe?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsx)("span",{className:"loading-spinner-small"}),"Synchronisiere..."]}):"\ud83d\udd04 Jetzt synchronisieren"}),(0,we.jsxs)("div",{className:"sync-last-info",children:[(0,we.jsx)("span",{className:"info-label",children:"Letzter Sync:"}),(0,we.jsx)("span",{className:"info-value",children:fe?new Date(fe).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}):"Noch nicht synchronisiert"})]})]}),be&&(0,we.jsx)("div",{className:`sync-message ${be.type}`,children:be.text}),(0,we.jsxs)("div",{className:"filter-bar",children:[(0,we.jsx)("input",{type:"text",className:"search-input",placeholder:"\ud83d\udd0d Suche nach Namen...",value:y,onChange:e=>k(e.target.value)}),Te.length>0&&(0,we.jsxs)("div",{className:"letter-filter-inline",children:[(0,we.jsx)("button",{className:"letter-button "+("ALL"===b?"active":""),onClick:()=>j("ALL"),children:"Alle"}),Te.map((e=>(0,we.jsx)("button",{className:"letter-button "+(b===e?"active":""),onClick:()=>j(e),children:e},e)))]})]}),(0,we.jsx)("div",{className:"wettkaempfer-list",children:0===ze.length?(0,we.jsx)("div",{className:"no-results",children:(0,we.jsx)("p",{children:"ALL"===b?"Noch keine Wettk\xe4mpfer angelegt.":`Keine Wettk\xe4mpfer mit Anfangsbuchstabe "${b}".`})}):(0,we.jsx)("div",{className:"wettkaempfer-grid",children:ze.map((e=>{const t=e.wettkaempfer_id||e.id,n=F.has(t);return(0,we.jsxs)("div",{className:"wettkaempfer-card "+(n?"expanded":"collapsed"),children:[(0,we.jsxs)("div",{className:"wettkaempfer-header clickable",onClick:()=>(e=>{L((t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n}))})(t),children:[(0,we.jsxs)("div",{className:"header-left",children:[(0,we.jsx)("span",{className:"toggle-icon",children:n?"\u25bc":"\u25b6"}),(0,we.jsxs)("h3",{children:[e.vorname," ",e.nachname]})]}),(0,we.jsxs)("div",{className:"header-right",children:[e.gurtfarbe&&(0,we.jsx)("span",{className:"gurtfarbe-badge",children:e.gurtfarbe}),!n&&e.geburtsdatum&&(0,we.jsxs)("span",{className:"compact-info",children:["\ud83c\udf82 ",uo(e.geburtsdatum)]})]})]}),n&&(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("div",{className:"wettkaempfer-info",children:[(0,we.jsxs)("div",{className:"info-row-dual",children:[e.geburtsdatum&&(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"icon",children:"\ud83c\udf82"}),(0,we.jsx)("span",{children:uo(e.geburtsdatum)})]}),e.geschlecht&&(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"icon",children:"\ud83d\udc64"}),(0,we.jsx)("span",{children:e.geschlecht})]})]}),e.gewicht&&(0,we.jsxs)("div",{className:"info-row-dual",children:[(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"icon",children:"\u2696\ufe0f"}),(0,we.jsxs)("span",{children:[e.gewicht," kg"]})]}),e.skill_level&&(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"icon",children:"\ud83c\udfaf"}),(0,we.jsx)("span",{children:e.skill_level})]})]})]}),(0,we.jsxs)("div",{className:"wettkaempfer-actions",children:[(0,we.jsx)("button",{className:"action-btn detail-btn",onClick:t=>{t.stopPropagation(),(e=>{const t=e.geburtsdatum?e.geburtsdatum.split("T")[0]:"";R({...e,geburtsdatum:t}),D(!0)})(e)},title:"Details",children:"\ud83d\udc41\ufe0f"}),(0,we.jsx)("button",{className:"action-btn edit-btn",onClick:t=>{t.stopPropagation(),(e=>{const t=e.geburtsdatum?e.geburtsdatum.split("T")[0]:"";A({...e,geburtsdatum:t}),z(!0)})(e)},title:"Bearbeiten",children:"\u270f\ufe0f"}),(0,we.jsx)("button",{className:"action-btn archive-btn",onClick:e=>{e.stopPropagation(),(async e=>{const t=prompt("Grund f\xfcr Archivierung:");if(null!==t)try{const n=localStorage.getItem("token")||localStorage.getItem("authToken"),r=await fetch(`/api/wettkaempfer/${e}/archive`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({grund:t})});if(!r.ok)throw new Error((await r.json()).error||"Fehler");d(await Le(i)),alert("\u2705 Archiviert")}catch(Zo){alert("\u274c "+Zo.message)}})(t)},title:"Archivieren",children:"\ud83d\udce6"}),(0,we.jsx)("button",{className:"action-btn delete-btn",onClick:e=>{e.stopPropagation(),(async e=>{if(window.confirm("Wettk\xe4mpfer l\xf6schen?"))try{const t=localStorage.getItem("token")||localStorage.getItem("authToken"),n=await fetch(`/api/wettkaempfer/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(!n.ok)throw new Error((await n.json()).error||"Fehler");d(await Le(i)),alert("\u2705 Gel\xf6scht")}catch(Zo){alert("\u274c "+Zo.message)}})(t)},title:"L\xf6schen",children:"\ud83d\uddd1\ufe0f"})]})]})]},t)}))})})]}),"personal"===P&&(0,we.jsx)("div",{className:"personal-list",children:0===J.length?(0,we.jsx)("div",{className:"no-results",children:(0,we.jsx)("p",{children:"Noch kein Personal angelegt. F\xfcgen Sie Kampfrichter und Helfer hinzu."})}):(0,we.jsx)("div",{className:"wettkaempfer-grid",children:J.map((e=>{const t=(n=e.primaer_rolle,lo.find((e=>e.value===n))||lo[6]);var n;const r=(a=e.qualifikation,oo.find((e=>e.value===a))||oo[0]);var a;return(0,we.jsxs)("div",{className:"wettkaempfer-card personal-card",children:[(0,we.jsxs)("div",{className:"wettkaempfer-header",children:[(0,we.jsxs)("h3",{children:[e.vorname," ",e.nachname]}),(0,we.jsxs)("span",{className:"rolle-badge",style:{background:"#8B0000"},children:[t.icon," ",t.label]})]}),(0,we.jsxs)("div",{className:"wettkaempfer-info",children:[(0,we.jsxs)("div",{className:"info-row-dual",children:[(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"icon",children:r.icon}),(0,we.jsx)("span",{children:r.label})]}),e.lizenz_nummer&&(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"icon",children:"\ud83c\udfab"}),(0,we.jsx)("span",{children:e.lizenz_nummer})]})]}),e.email&&(0,we.jsx)("div",{className:"info-row-dual",children:(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"icon",children:"\ud83d\udce7"}),(0,we.jsx)("span",{children:e.email})]})}),e.telefon&&(0,we.jsx)("div",{className:"info-row-dual",children:(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"icon",children:"\ud83d\udcde"}),(0,we.jsx)("span",{children:e.telefon})]})}),e.anzahl_turniere>0&&(0,we.jsx)("div",{className:"info-row-dual",children:(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("span",{className:"icon",children:"\ud83c\udfc6"}),(0,we.jsxs)("span",{children:[e.anzahl_turniere," Turnier-Eins\xe4tze"]})]})})]}),(0,we.jsx)("div",{className:"wettkaempfer-actions",children:(0,we.jsx)("button",{className:"action-btn delete-btn",onClick:()=>(async e=>{if(window.confirm("Person wirklich deaktivieren?"))try{const t=localStorage.getItem("token")||localStorage.getItem("authToken");(await fetch(`/api/personal/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok&&await Se()}catch(Zo){alert("\u274c "+Zo.message)}})(e.personal_id),title:"Deaktivieren",children:"\ud83d\uddd1\ufe0f"})})]},e.personal_id)}))})}),"anmeldungen"===P&&(0,we.jsx)("div",{className:"anmeldungen-list",children:ie?(0,we.jsxs)("div",{className:"loading-container",style:{padding:"2rem",textAlign:"center"},children:[(0,we.jsx)("div",{className:"loading-spinner"}),(0,we.jsx)("p",{children:"Anmeldungen werden geladen..."})]}):Array.isArray(re)&&0!==re.length?(0,we.jsx)("div",{className:"anmeldungen-grid",children:Object.entries(re.reduce(((e,t)=>{const n=t.turnier_id||"unknown";e[n]||(e[n]={turnier_id:t.turnier_id,turnier_name:t.turnier_name||"Unbekanntes Turnier",turnier_datum:t.turnier_datum,turnier_ort:t.turnier_ort,preis_einzel:parseFloat(t.preis_einzel)||25,preis_team:parseFloat(t.preis_team)||40,rabatt_zweite_kategorie:parseFloat(t.rabatt_zweite_kategorie)||20,rabatt_weitere_kategorien:parseFloat(t.rabatt_weitere_kategorien)||40,wettkaempfer:{}});const r=t.wettkaempfer_id;return e[n].wettkaempfer[r]||(e[n].wettkaempfer[r]={wettkaempfer_id:t.wettkaempfer_id,vorname:t.vorname,nachname:t.nachname,anmeldedatum:t.anmeldedatum,kategorien:[]}),e[n].wettkaempfer[r].kategorien.push({anmeldung_id:t.anmeldung_id,division_code:t.division_code,status:t.status}),e}),{})).map((e=>{let[t,n]=e;const r=Object.values(n.wettkaempfer),a=r.reduce(((e,t)=>e+t.kategorien.length),0),i=r.reduce(((e,t)=>e+ho(t.kategorien.length,n.preis_einzel,n.preis_team,n.rabatt_zweite_kategorie,n.rabatt_weitere_kategorien)),0);return(0,we.jsxs)("div",{className:"anmeldung-turnier-card",children:[(0,we.jsxs)("div",{className:"anmeldung-turnier-header",children:[(0,we.jsxs)("div",{className:"turnier-info",children:[(0,we.jsxs)("h3",{children:["\ud83c\udfc6 ",n.turnier_name]}),(0,we.jsxs)("div",{className:"turnier-details",children:[n.turnier_datum&&(0,we.jsxs)("span",{children:["\ud83d\udcc5 ",uo(n.turnier_datum)]}),n.turnier_ort&&(0,we.jsxs)("span",{children:["\ud83d\udccd ",n.turnier_ort]})]})]}),(0,we.jsxs)("div",{className:"anmeldung-count",children:[(0,we.jsx)("span",{className:"count-badge",children:r.length}),(0,we.jsx)("span",{className:"count-label",children:"Teilnehmer"}),(0,we.jsx)("span",{className:"count-badge",style:{marginLeft:"0.5rem",background:"rgba(168, 85, 247, 0.2)",borderColor:"rgba(168, 85, 247, 0.4)"},children:a}),(0,we.jsx)("span",{className:"count-label",children:"Starts"}),(0,we.jsx)("span",{className:"count-badge",style:{marginLeft:"0.5rem",background:"rgba(46, 213, 115, 0.2)",borderColor:"rgba(46, 213, 115, 0.4)",color:"#2ed573"},children:mo(i)})]})]}),(0,we.jsx)("div",{className:"anmeldung-teilnehmer",children:r.map((e=>{const r=ce[`${t}-${e.wettkaempfer_id}`],a=ho(e.kategorien.length,n.preis_einzel,n.preis_team,n.rabatt_zweite_kategorie,n.rabatt_weitere_kategorien);return(0,we.jsxs)("div",{className:"wettkaempfer-anmeldung-row",children:[(0,we.jsxs)("div",{className:"wettkaempfer-header-row",onClick:()=>((e,t)=>{const n=`${e}-${t}`;de((e=>({...e,[n]:!e[n]})))})(t,e.wettkaempfer_id),style:{cursor:"pointer"},children:[(0,we.jsx)("div",{className:"expand-icon",children:r?"\u25bc":"\u25b6"}),(0,we.jsx)("div",{className:"wettkaempfer-name",children:(0,we.jsxs)("strong",{children:[e.vorname," ",e.nachname]})}),(0,we.jsx)("div",{className:"kategorien-badges",children:e.kategorien.map(((e,t)=>(0,we.jsx)("span",{className:"kategorie-badge",children:e.division_code||"-"},t)))}),(0,we.jsxs)("div",{className:"wettkaempfer-meta",children:[(0,we.jsxs)("span",{className:"kategorien-count",children:[e.kategorien.length," ",1===e.kategorien.length?"Kategorie":"Kategorien"]}),(0,we.jsx)("span",{className:"wettkaempfer-preis",style:{color:"#2ed573",fontWeight:"600"},children:mo(a)})]}),(0,we.jsx)("div",{className:"wettkaempfer-actions",children:(0,we.jsx)("button",{className:"action-btn edit-btn",onClick:t=>{t.stopPropagation(),(async e=>{const t={turnier_id:e.turnier_id,name:e.turnier_name,datum:e.turnier_datum,ort:e.turnier_ort};try{const n=localStorage.getItem("token")||localStorage.getItem("authToken"),r=await fetch(`/api/anmeldungen/wettkampfer/${e.wettkaempfer_id}/turnier/${e.turnier_id}`,{headers:{Authorization:`Bearer ${n}`}});let a=[];if(r.ok){const e=await r.json();e.success&&Array.isArray(e.data)&&(a=e.data.map((e=>e.division_code)).filter(Boolean))}console.log("\ud83d\udccb Bereits angemeldete Kategorien:",a),oe({...e,wettkaempfer_id:e.wettkaempfer_id,existingDivisions:a}),q(t),$(!0)}catch(Zo){console.error("Fehler beim Laden der bestehenden Anmeldungen:",Zo),oe({...e,wettkaempfer_id:e.wettkaempfer_id,existingDivisions:e.division_code?[e.division_code]:[]}),q(t),$(!0)}})({...e.kategorien[0],wettkaempfer_id:e.wettkaempfer_id,vorname:e.vorname,nachname:e.nachname,turnier_id:n.turnier_id,turnier_name:n.turnier_name,turnier_datum:n.turnier_datum,turnier_ort:n.turnier_ort})},title:"Kategorien bearbeiten",style:{background:"#1a1a1a",border:"1px solid rgba(168, 85, 247, 0.3)",color:"white",padding:"0.4rem 0.6rem",borderRadius:"6px",cursor:"pointer"},children:"\u270f\ufe0f"})})]}),r&&(0,we.jsx)("div",{className:"kategorien-details",children:(0,we.jsxs)("table",{className:"kategorien-table",children:[(0,we.jsx)("thead",{children:(0,we.jsxs)("tr",{children:[(0,we.jsx)("th",{children:"Kategorie"}),(0,we.jsx)("th",{children:"Status"}),(0,we.jsx)("th",{children:"Aktion"})]})}),(0,we.jsx)("tbody",{children:e.kategorien.map(((e,t)=>(0,we.jsxs)("tr",{children:[(0,we.jsx)("td",{children:e.division_code||"-"}),(0,we.jsx)("td",{children:(0,we.jsxs)("span",{className:`status-badge status-${(e.status||"angemeldet").toLowerCase()}`,children:["Angemeldet"===e.status&&"\u2705 ","Storniert"===e.status&&"\u274c ","Best\xe4tigt"===e.status&&"\u2714\ufe0f ",e.status||"Angemeldet"]})}),(0,we.jsx)("td",{children:(0,we.jsx)("button",{className:"action-btn delete-btn",onClick:()=>(async e=>{if(window.confirm("Anmeldung wirklich l\xf6schen?"))try{const t=localStorage.getItem("token")||localStorage.getItem("authToken"),n=await fetch(`/api/anmeldungen/cancel/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({grund:"Manuell gel\xf6scht"})});if(n.ok)await _e();else{const e=await n.json();alert("Fehler: "+(e.message||e.error))}}catch(Zo){alert("Fehler beim L\xf6schen: "+Zo.message)}})(e.anmeldung_id),title:"Stornieren",style:{background:"#1a1a1a",border:"1px solid rgba(239, 68, 68, 0.3)",color:"white",padding:"0.3rem 0.5rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem"},children:"\ud83d\uddd1\ufe0f"})})]},t)))})]})})]},e.wettkaempfer_id)}))})]},t)}))}):(0,we.jsxs)("div",{className:"no-results",children:[(0,we.jsx)("p",{children:"Noch keine Turnier-Anmeldungen vorhanden."}),(0,we.jsx)("button",{className:"turnier-button",onClick:Ae,style:{marginTop:"1rem"},children:"\ud83c\udfc6 Jetzt f\xfcr Turnier anmelden"})]})})]})]}),(0,we.jsx)(po,{open:u,title:"Wettk\xe4mpfer anlegen",onClose:()=>h(!1),children:(0,we.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),p(""),g(!0),!ye.vorname||!ye.nachname||!ye.geburtsdatum||!ye.skill_level||!ye.geschlecht||!ye.gurtfarbe)return p("\u274c Bitte alle Pflichtfelder ausf\xfcllen!"),void g(!1);try{const e={...ye,vereins_id:i},t=await Pe(e);if(t&&(t.id||t.wettkaempfer_id)){const e=await Le(i);d(e),h(!1)}else p("\u26a0\ufe0f Speichern fehlgeschlagen.")}catch(Zo){p("\u26a0\ufe0f Fehler beim Speichern: "+(Zo.message||""))}g(!1)},className:"wettkaempfer-form",children:(0,we.jsxs)("div",{className:"form-grid",children:[(0,we.jsxs)("div",{className:"form-column",children:[(0,we.jsxs)("label",{children:["Vorname *",(0,we.jsx)("input",{type:"text",value:ye.vorname,onChange:e=>Ne({...ye,vorname:e.target.value}),required:!0})]}),(0,we.jsxs)("label",{children:["Nachname *",(0,we.jsx)("input",{type:"text",value:ye.nachname,onChange:e=>Ne({...ye,nachname:e.target.value}),required:!0})]}),(0,we.jsxs)("label",{children:["Geburtsdatum *",(0,we.jsx)("input",{type:"date",value:ye.geburtsdatum,onChange:e=>Ne({...ye,geburtsdatum:e.target.value}),required:!0})]}),(0,we.jsxs)("label",{children:["Gewicht (kg)",(0,we.jsx)("input",{type:"number",value:ye.gewicht,onChange:e=>Ne({...ye,gewicht:e.target.value}),min:"0",step:"0.1"})]}),(0,we.jsxs)("label",{children:["Skill Level *",(0,we.jsxs)("select",{value:ye.skill_level,onChange:e=>Ne({...ye,skill_level:e.target.value}),required:!0,children:[(0,we.jsx)("option",{value:"",children:"Bitte w\xe4hlen"}),so.map((e=>(0,we.jsx)("option",{value:e,children:e},e)))]})]}),(0,we.jsxs)("label",{children:["Geschlecht *",(0,we.jsxs)("select",{value:ye.geschlecht,onChange:e=>Ne({...ye,geschlecht:e.target.value}),required:!0,children:[(0,we.jsx)("option",{value:"",children:"Bitte w\xe4hlen"}),(0,we.jsx)("option",{value:"m\xe4nnlich",children:"m\xe4nnlich"}),(0,we.jsx)("option",{value:"weiblich",children:"weiblich"}),(0,we.jsx)("option",{value:"divers",children:"divers"})]})]})]}),(0,we.jsxs)("div",{className:"form-column",children:[(0,we.jsxs)("label",{children:["Nationalit\xe4t",(0,we.jsx)("input",{type:"text",value:ye.nationalitaet,onChange:e=>Ne({...ye,nationalitaet:e.target.value})})]}),(0,we.jsxs)("label",{children:["Gurtfarbe *",(0,we.jsxs)("select",{value:ye.gurtfarbe,onChange:e=>Ne({...ye,gurtfarbe:e.target.value}),required:!0,children:[(0,we.jsx)("option",{value:"",children:"Bitte w\xe4hlen"}),co.map((e=>(0,we.jsx)("option",{value:e,children:e},e)))]})]}),(0,we.jsxs)("label",{children:["Kampfstil",(0,we.jsx)("input",{type:"text",value:ye.kampfstil,onChange:e=>Ne({...ye,kampfstil:e.target.value})})]}),(0,we.jsxs)("label",{children:["E-Mail",(0,we.jsx)("input",{type:"email",value:ye.email,onChange:e=>Ne({...ye,email:e.target.value})})]}),(0,we.jsxs)("label",{children:["Handy",(0,we.jsx)("input",{type:"tel",value:ye.handy,onChange:e=>Ne({...ye,handy:e.target.value})})]}),(0,we.jsx)("button",{className:"submit-button",type:"submit",disabled:f,children:f?"Speichern...":"Speichern"}),m&&(0,we.jsx)("div",{className:"error-message",children:m})]})]})})}),(0,we.jsx)(po,{open:C,title:"Wettk\xe4mpfer bearbeiten",onClose:()=>z(!1),children:T&&(0,we.jsxs)("form",{onSubmit:async()=>{if(T){g(!0),p("");try{const e=localStorage.getItem("token")||localStorage.getItem("authToken"),t=await fetch(`/api/wettkaempfer/${T.wettkaempfer_id}`,{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(T)});if(!t.ok)throw new Error((await t.json()).error||"Fehler");d(await Le(i)),z(!1),A(null),alert("\u2705 Wettk\xe4mpfer aktualisiert")}catch(Zo){p(Zo.message)}finally{g(!1)}}},className:"wettkaempfer-form",children:[m&&(0,we.jsx)("div",{className:"error-message",children:m}),(0,we.jsxs)("div",{className:"form-grid",children:[(0,we.jsxs)("div",{className:"form-column",children:[(0,we.jsxs)("label",{children:["Vorname *",(0,we.jsx)("input",{type:"text",value:T.vorname,onChange:e=>A({...T,vorname:e.target.value}),required:!0})]}),(0,we.jsxs)("label",{children:["Nachname *",(0,we.jsx)("input",{type:"text",value:T.nachname,onChange:e=>A({...T,nachname:e.target.value}),required:!0})]}),(0,we.jsxs)("label",{children:["Geburtsdatum *",(0,we.jsx)("input",{type:"date",value:T.geburtsdatum,onChange:e=>A({...T,geburtsdatum:e.target.value}),required:!0})]}),(0,we.jsxs)("label",{children:["Geschlecht *",(0,we.jsxs)("select",{value:T.geschlecht||"",onChange:e=>A({...T,geschlecht:e.target.value}),required:!0,children:[(0,we.jsx)("option",{value:"",children:"Bitte w\xe4hlen"}),(0,we.jsx)("option",{value:"M",children:"M\xe4nnlich"}),(0,we.jsx)("option",{value:"W",children:"Weiblich"}),(0,we.jsx)("option",{value:"divers",children:"Divers"})]})]}),(0,we.jsxs)("label",{children:["Gewicht (kg) *",(0,we.jsx)("input",{type:"number",step:"0.1",value:T.gewicht||"",onChange:e=>A({...T,gewicht:e.target.value}),required:!0})]}),(0,we.jsxs)("label",{children:["Skill Level *",(0,we.jsxs)("select",{value:T.skill_level||"",onChange:e=>A({...T,skill_level:e.target.value}),required:!0,children:[(0,we.jsx)("option",{value:"",children:"Bitte w\xe4hlen"}),so.map((e=>(0,we.jsx)("option",{value:e,children:e},e)))]})]})]}),(0,we.jsxs)("div",{className:"form-column",children:[(0,we.jsxs)("label",{children:["Gurtfarbe",(0,we.jsxs)("select",{value:T.gurtfarbe||"",onChange:e=>A({...T,gurtfarbe:e.target.value}),children:[(0,we.jsx)("option",{value:"",children:"Bitte w\xe4hlen"}),co.map((e=>(0,we.jsx)("option",{value:e,children:e},e)))]})]}),(0,we.jsxs)("label",{children:["Kampfstil",(0,we.jsx)("input",{type:"text",value:T.kampfstil||"",onChange:e=>A({...T,kampfstil:e.target.value})})]}),(0,we.jsxs)("label",{children:["Nationalit\xe4t",(0,we.jsx)("input",{type:"text",value:T.nationalitaet||"DE",onChange:e=>A({...T,nationalitaet:e.target.value})})]}),(0,we.jsxs)("label",{children:["E-Mail",(0,we.jsx)("input",{type:"email",value:T.email||"",onChange:e=>A({...T,email:e.target.value})})]}),(0,we.jsxs)("label",{children:["Handy",(0,we.jsx)("input",{type:"tel",value:T.handy||"",onChange:e=>A({...T,handy:e.target.value})})]})]})]}),(0,we.jsx)("button",{className:"submit-button",type:"submit",disabled:f,children:f?"Speichere...":"\xc4nderungen speichern"})]})}),(0,we.jsx)(po,{open:E,title:"Wettk\xe4mpfer Details",onClose:()=>D(!1),children:B&&(0,we.jsxs)("div",{className:"detail-view",children:[(0,we.jsxs)("div",{className:"detail-header",children:[(0,we.jsxs)("h2",{children:[B.vorname," ",B.nachname]}),(0,we.jsx)("button",{className:"action-btn edit-btn",onClick:()=>{A(B),D(!1),z(!0)},children:"\u270f\ufe0f Bearbeiten"})]}),(0,we.jsxs)("div",{className:"detail-grid",children:[(0,we.jsxs)("div",{className:"detail-section",children:[(0,we.jsx)("h3",{children:"\ud83d\udccb Pers\xf6nliche Daten"}),(0,we.jsxs)("div",{className:"detail-row",children:[(0,we.jsx)("strong",{children:"Geburtsdatum:"})," ",uo(B.geburtsdatum)]}),(0,we.jsxs)("div",{className:"detail-row",children:[(0,we.jsx)("strong",{children:"Geschlecht:"})," ",B.geschlecht]}),(0,we.jsxs)("div",{className:"detail-row",children:[(0,we.jsx)("strong",{children:"Nationalit\xe4t:"})," ",B.nationalitaet||"DE"]}),B.email&&(0,we.jsxs)("div",{className:"detail-row",children:[(0,we.jsx)("strong",{children:"E-Mail:"})," ",B.email]}),B.handy&&(0,we.jsxs)("div",{className:"detail-row",children:[(0,we.jsx)("strong",{children:"Handy:"})," ",B.handy]})]}),(0,we.jsxs)("div",{className:"detail-section",children:[(0,we.jsx)("h3",{children:"\ud83e\udd4b Kampfsport-Daten"}),(0,we.jsxs)("div",{className:"detail-row",children:[(0,we.jsx)("strong",{children:"Gewicht:"})," ",B.gewicht," kg"]}),(0,we.jsxs)("div",{className:"detail-row",children:[(0,we.jsx)("strong",{children:"Skill Level:"})," ",B.skill_level]}),B.gurtfarbe&&(0,we.jsxs)("div",{className:"detail-row",children:[(0,we.jsx)("strong",{children:"Gurtfarbe:"})," ",B.gurtfarbe]}),B.kampfstil&&(0,we.jsxs)("div",{className:"detail-row",children:[(0,we.jsx)("strong",{children:"Kampfstil:"})," ",B.kampfstil]})]})]})]})}),(0,we.jsx)(po,{open:Q,title:"Personal anlegen",onClose:()=>X(!1),children:(0,we.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),p(""),g(!0),!ee.vorname||!ee.nachname)return p("\u274c Vor- und Nachname sind erforderlich!"),void g(!1);try{const e=localStorage.getItem("token")||localStorage.getItem("authToken"),t=await fetch("/api/personal",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(ee)}),n=await t.json();n.success?(await Se(),X(!1)):p("\u26a0\ufe0f "+(n.message||"Fehler beim Speichern"))}catch(Zo){p("\u26a0\ufe0f Fehler: "+Zo.message)}g(!1)},className:"wettkaempfer-form",children:(0,we.jsxs)("div",{className:"form-grid",children:[(0,we.jsxs)("div",{className:"form-column",children:[(0,we.jsxs)("label",{children:["Vorname *",(0,we.jsx)("input",{type:"text",value:ee.vorname,onChange:e=>te({...ee,vorname:e.target.value}),required:!0})]}),(0,we.jsxs)("label",{children:["Nachname *",(0,we.jsx)("input",{type:"text",value:ee.nachname,onChange:e=>te({...ee,nachname:e.target.value}),required:!0})]}),(0,we.jsxs)("label",{children:["Rolle *",(0,we.jsx)("select",{value:ee.primaer_rolle,onChange:e=>te({...ee,primaer_rolle:e.target.value}),required:!0,children:lo.map((e=>(0,we.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value)))})]}),(0,we.jsxs)("label",{children:["Qualifikation",(0,we.jsx)("select",{value:ee.qualifikation,onChange:e=>te({...ee,qualifikation:e.target.value}),children:oo.map((e=>(0,we.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value)))})]})]}),(0,we.jsxs)("div",{className:"form-column",children:[(0,we.jsxs)("label",{children:["E-Mail",(0,we.jsx)("input",{type:"email",value:ee.email,onChange:e=>te({...ee,email:e.target.value})})]}),(0,we.jsxs)("label",{children:["Telefon",(0,we.jsx)("input",{type:"tel",value:ee.telefon,onChange:e=>te({...ee,telefon:e.target.value})})]}),(0,we.jsxs)("label",{children:["Lizenz-Nr.",(0,we.jsx)("input",{type:"text",value:ee.lizenz_nummer,onChange:e=>te({...ee,lizenz_nummer:e.target.value}),placeholder:"z.B. DTU-12345"})]}),(0,we.jsxs)("label",{children:["Verband",(0,we.jsx)("input",{type:"text",value:ee.verband,onChange:e=>te({...ee,verband:e.target.value}),placeholder:"z.B. DTU, WTF"})]}),(0,we.jsx)("button",{className:"submit-button",type:"submit",disabled:f,children:f?"Speichern...":"Speichern"}),m&&(0,we.jsx)("div",{className:"error-message",children:m})]})]})})}),(0,we.jsx)(po,{open:W,title:"Turnier f\xfcr Anmeldung w\xe4hlen",onClose:()=>M(!1),children:(0,we.jsx)("div",{className:"turnier-auswahl-content",children:G?(0,we.jsxs)("div",{className:"loading-container",style:{padding:"2rem",textAlign:"center"},children:[(0,we.jsx)("div",{className:"loading-spinner"}),(0,we.jsx)("p",{children:"Turniere werden geladen..."})]}):0===K.length?(0,we.jsxs)("div",{className:"no-results",style:{padding:"2rem",textAlign:"center"},children:[(0,we.jsx)("h3",{children:"Keine verf\xfcgbaren Turniere"}),(0,we.jsx)("p",{children:"Derzeit sind keine Turniere mit offener Anmeldung verf\xfcgbar."})]}):(0,we.jsx)("div",{className:"turnier-auswahl-grid",children:K.map((e=>(0,we.jsxs)("div",{className:"turnier-auswahl-card",onClick:()=>(e=>{q(e),M(!1),$(!0)})(e),children:[(0,we.jsxs)("div",{className:"turnier-auswahl-header",children:[(0,we.jsx)("h3",{children:e.name}),(0,we.jsx)("span",{className:"turnier-datum",children:e.datum_formatted||uo(e.datum)})]}),(0,we.jsxs)("div",{className:"turnier-auswahl-info",children:[(0,we.jsxs)("p",{children:["\ud83d\udccd ",e.ort]}),(0,we.jsxs)("p",{children:["\ud83e\udd4b ",e.disziplin||"Alle Disziplinen"]}),e.anmeldeschluss&&(0,we.jsxs)("p",{className:"anmeldeschluss",children:["\u23f0 Anmeldeschluss: ",e.anmeldeschluss_formatted||uo(e.anmeldeschluss)]})]}),(0,we.jsx)("div",{className:"turnier-auswahl-action",children:(0,we.jsx)("span",{children:"Wettk\xe4mpfer anmelden \u2192"})})]},e.turnier_id)))})})}),I&&V&&(0,we.jsx)(io,{turnier:V,onClose:()=>{$(!1),q(null),oe(null)},onAnmeldungAbgeschlossen:e=>{(e=>{var t,n;$(!1),q(null),alert(`\u2705 Anmeldung erfolgreich!\n\n${(null===(t=e.wettkampfer)||void 0===t?void 0:t.length)||0} Wettk\xe4mpfer wurden f\xfcr das Turnier "${null===(n=e.turnier)||void 0===n?void 0:n.name}" angemeldet.`)})(e),oe(null),_e()},preselectedVerein:l?{vereins_id:l.vereins_id,name:l.name}:null,editingWettkaempfer:le?{wettkaempfer_id:le.wettkaempfer_id,division_code:le.division_code,existingDivisions:le.existingDivisions||[]}:null})]})}const go=()=>{const e=ne(),[t,n]=(0,s.useState)(!1),[r,a]=(0,s.useState)(""),[i,l]=(0,s.useState)({name:"",ansprechpartner:"",email:"",benutzername:"",passwort:"",telefon:"",strasse:"",hausnummer:"",plz:"",ort:"",homepage:"",rolle:"verein"}),o=e=>{const{name:t,value:n}=e.target;l((e=>({...e,[t]:n})))};return(0,we.jsxs)("div",{className:"verein-detail-page",children:[(0,we.jsx)("div",{className:"page-header",children:(0,we.jsxs)("div",{className:"header-left",children:[(0,we.jsx)("button",{className:"back-button",onClick:()=>e("/dashboard/vereine"),children:"\u2190 Zur\xfcck zu Vereine"}),(0,we.jsx)("h1",{children:"\u2795 Neuer Verein"})]})}),r&&(0,we.jsxs)("div",{className:"error-banner",children:[(0,we.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,we.jsx)("span",{className:"error-text",children:r}),(0,we.jsx)("button",{className:"error-close",onClick:()=>a(""),children:"\u2715"})]}),(0,we.jsx)("div",{className:"verein-details-container",children:(0,we.jsx)("div",{className:"vereinsdaten-section expanded",children:(0,we.jsx)("div",{className:"section-content",children:(0,we.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),n(!0),a("");try{const t=localStorage.getItem("authToken")||localStorage.getItem("token")||JSON.parse(localStorage.getItem("clubData")||"{}").token,n=await fetch("/api/auth/register",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(i)});if(!n.ok){const e=await n.json();throw new Error(e.error||"Fehler beim Erstellen des Vereins")}const r=await n.json();if(!r.success)throw new Error(r.error||"Fehler beim Erstellen des Vereins");alert(`\u2705 Verein "${i.name}" erfolgreich erstellt!`),e("/dashboard/vereine")}catch(Zo){console.error("\u274c Fehler beim Erstellen:",Zo),a(Zo.message)}finally{n(!1)}},children:[(0,we.jsxs)("div",{className:"form-grid",children:[(0,we.jsxs)("div",{className:"form-group full-width",children:[(0,we.jsxs)("label",{className:"form-label",children:["Vereinsname ",(0,we.jsx)("span",{className:"required",children:"*"})]}),(0,we.jsx)("input",{type:"text",name:"name",value:i.name,onChange:o,className:"form-input",required:!0,placeholder:"z.B. Kampfsportverein Berlin"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsxs)("label",{className:"form-label",children:["Benutzername ",(0,we.jsx)("span",{className:"required",children:"*"})]}),(0,we.jsx)("input",{type:"text",name:"benutzername",value:i.benutzername,onChange:o,className:"form-input",required:!0,placeholder:"z.B. ks-berlin"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsxs)("label",{className:"form-label",children:["Passwort ",(0,we.jsx)("span",{className:"required",children:"*"})]}),(0,we.jsx)("input",{type:"password",name:"passwort",value:i.passwort,onChange:o,className:"form-input",required:!0,minLength:"6",placeholder:"Mindestens 6 Zeichen"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsxs)("label",{className:"form-label",children:["E-Mail ",(0,we.jsx)("span",{className:"required",children:"*"})]}),(0,we.jsx)("input",{type:"email",name:"email",value:i.email,onChange:o,className:"form-input",required:!0,placeholder:"kontakt@verein.de"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsxs)("label",{className:"form-label",children:["Telefon ",(0,we.jsx)("span",{className:"required",children:"*"})]}),(0,we.jsx)("input",{type:"tel",name:"telefon",value:i.telefon,onChange:o,className:"form-input",required:!0,placeholder:"+49 123 456789"})]}),(0,we.jsxs)("div",{className:"form-group full-width",children:[(0,we.jsx)("label",{className:"form-label",children:"Ansprechpartner"}),(0,we.jsx)("input",{type:"text",name:"ansprechpartner",value:i.ansprechpartner,onChange:o,className:"form-input",placeholder:"Max Mustermann"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{className:"form-label",children:"Stra\xdfe"}),(0,we.jsx)("input",{type:"text",name:"strasse",value:i.strasse,onChange:o,className:"form-input",placeholder:"Hauptstra\xdfe"})]}),(0,we.jsxs)("div",{className:"form-group",style:{maxWidth:"120px"},children:[(0,we.jsx)("label",{className:"form-label",children:"Nr."}),(0,we.jsx)("input",{type:"text",name:"hausnummer",value:i.hausnummer,onChange:o,className:"form-input",placeholder:"123"})]}),(0,we.jsxs)("div",{className:"form-group",style:{maxWidth:"150px"},children:[(0,we.jsx)("label",{className:"form-label",children:"PLZ"}),(0,we.jsx)("input",{type:"text",name:"plz",value:i.plz,onChange:o,className:"form-input",placeholder:"12345"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{className:"form-label",children:"Ort"}),(0,we.jsx)("input",{type:"text",name:"ort",value:i.ort,onChange:o,className:"form-input",placeholder:"Berlin"})]}),(0,we.jsxs)("div",{className:"form-group full-width",children:[(0,we.jsx)("label",{className:"form-label",children:"Homepage"}),(0,we.jsx)("input",{type:"url",name:"homepage",value:i.homepage,onChange:o,className:"form-input",placeholder:"https://www.verein.de"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{className:"form-label",children:"Rolle"}),(0,we.jsxs)("select",{name:"rolle",value:i.rolle,onChange:o,className:"form-input",children:[(0,we.jsx)("option",{value:"verein",children:"Verein"}),(0,we.jsx)("option",{value:"admin",children:"Admin"})]})]})]}),(0,we.jsxs)("div",{className:"form-actions",children:[(0,we.jsx)("button",{type:"button",className:"cancel-button",onClick:()=>e("/dashboard/vereine"),disabled:t,children:"Abbrechen"}),(0,we.jsx)("button",{type:"submit",className:"save-button",disabled:t,children:t?"\u23f3 Erstelle...":"\u2705 Verein erstellen"})]})]})})})})]})},xo=()=>{var e,t,n,r,a,i;const l=ne(),o=ee(),c=(()=>{const e=o.pathname.split("/"),t=e.findIndex((e=>"turnier-bearbeiten"===e));return-1!==t&&e[t+1]?e[t+1]:null})(),d=!c||"neu"===c,u=(null===(e=o.state)||void 0===e?void 0:e.turnier)||null,[h,m]=(0,s.useState)("grunddaten"),[p,f]=(0,s.useState)(!d&&!u),[g,x]=(0,s.useState)(!1),[v,b]=(0,s.useState)(""),[j,y]=(0,s.useState)(""),k=[{id:"Kumite",label:"Kumite",icon:"\ud83e\udd4a"},{id:"Formen",label:"Formen / Kata",icon:"\ud83c\udfad"},{id:"Kickboxen",label:"Kickboxen",icon:"\ud83e\uddb5"},{id:"Selbstverteidigung",label:"Selbstverteidigung",icon:"\ud83d\udee1\ufe0f"},{id:"Grappling",label:"Grappling",icon:"\ud83e\udd3c"},{id:"Rumble",label:"Rumble",icon:"\u2694\ufe0f"},{id:"Bruchtest",label:"Bruchtest",icon:"\ud83e\uddf1"},{id:"BJJ",label:"Brazilian Jiu-Jitsu",icon:"\ud83e\udd4b"}],[w,N]=(0,s.useState)([]),[S,_]=(0,s.useState)({name:(null===u||void 0===u?void 0:u.name)||"",beschreibung:(null===u||void 0===u?void 0:u.beschreibung)||"",sportart:(null===u||void 0===u?void 0:u.sportart)||"",disziplin:(null===u||void 0===u?void 0:u.disziplin)||"",start_datum:(null===u||void 0===u||null===(t=u.start_datum)||void 0===t?void 0:t.split("T")[0])||(null===u||void 0===u||null===(n=u.datum)||void 0===n?void 0:n.split("T")[0])||"",end_datum:(null===u||void 0===u||null===(r=u.end_datum)||void 0===r?void 0:r.split("T")[0])||"",anmeldeschluss:(null===u||void 0===u||null===(a=u.anmeldeschluss)||void 0===a?void 0:a.split("T")[0])||"",max_teilnehmer:(null===u||void 0===u?void 0:u.max_teilnehmer)||"",anmeldegebuehr:(null===u||void 0===u?void 0:u.anmeldegebuehr)||"",ort:(null===u||void 0===u?void 0:u.ort)||"",adresse:(null===u||void 0===u?void 0:u.adresse)||"",plz:(null===u||void 0===u?void 0:u.plz)||"",stadt:(null===u||void 0===u?void 0:u.stadt)||"",land:(null===u||void 0===u?void 0:u.land)||"Deutschland",kontakt_email:(null===u||void 0===u?void 0:u.kontakt_email)||"",kontakt_telefon:(null===u||void 0===u?void 0:u.kontakt_telefon)||"",website:(null===u||void 0===u?void 0:u.website)||"",regeln:(null===u||void 0===u?void 0:u.regeln)||"",status:(null===u||void 0===u?void 0:u.status)||"Geplant",altersklassen:(null===u||void 0===u?void 0:u.altersklassen)||"",gewichtsklassen:(null===u||void 0===u?void 0:u.gewichtsklassen)||"",hinweise:(null===u||void 0===u?void 0:u.hinweise)||"",default_tournament_mode:(null===u||void 0===u?void 0:u.default_tournament_mode)||"single_elimination_bronze",formen_scoring_mode:(null===u||void 0===u?void 0:u.formen_scoring_mode)||"average_drop_extremes",bruchtest_scoring_mode:(null===u||void 0===u?void 0:u.bruchtest_scoring_mode)||"points",sv_scoring_mode:(null===u||void 0===u?void 0:u.sv_scoring_mode)||"criteria",preis_einzel:(null===u||void 0===u?void 0:u.preis_einzel)||25,preis_team:(null===u||void 0===u?void 0:u.preis_team)||40,rabatt_zweite_kategorie:(null===u||void 0===u?void 0:u.rabatt_zweite_kategorie)||20,rabatt_weitere_kategorien:(null===u||void 0===u?void 0:u.rabatt_weitere_kategorien)||40,fruehbucher_bis:(null===u||void 0===u||null===(i=u.fruehbucher_bis)||void 0===i?void 0:i.split("T")[0])||"",fruehbucher_rabatt:(null===u||void 0===u?void 0:u.fruehbucher_rabatt)||0,nachmeldegebuehr:(null===u||void 0===u?void 0:u.nachmeldegebuehr)||0});(0,s.useEffect)((()=>{d||u||z(),!d&&c&&C()}),[c,d,u]);const C=async()=>{try{const e=localStorage.getItem("token"),t=await fetch(`/api/turniere/${c}/kategorien`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(t.ok){const e=await t.json();N(e.data||[])}}catch(Zo){console.error("Fehler beim Laden der Kategorien:",Zo)}},z=async()=>{try{var e,t,n,r;const a=localStorage.getItem("token"),i=await fetch(`/api/turniere/${c}`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error("Turnier konnte nicht geladen werden");const s=await i.json(),l=s.data||s;_({name:l.name||"",beschreibung:l.beschreibung||"",sportart:l.sportart||"",disziplin:l.disziplin||"",start_datum:(null===(e=l.start_datum)||void 0===e?void 0:e.split("T")[0])||(null===(t=l.datum)||void 0===t?void 0:t.split("T")[0])||"",end_datum:(null===(n=l.end_datum)||void 0===n?void 0:n.split("T")[0])||"",anmeldeschluss:(null===(r=l.anmeldeschluss)||void 0===r?void 0:r.split("T")[0])||"",max_teilnehmer:l.max_teilnehmer||"",anmeldegebuehr:l.anmeldegebuehr||"",ort:l.ort||"",adresse:l.adresse||"",plz:l.plz||"",stadt:l.stadt||"",land:l.land||"Deutschland",kontakt_email:l.kontakt_email||"",kontakt_telefon:l.kontakt_telefon||"",website:l.website||"",regeln:l.regeln||"",status:l.status||"Geplant",altersklassen:l.altersklassen||"",gewichtsklassen:l.gewichtsklassen||"",hinweise:l.hinweise||"",default_tournament_mode:l.default_tournament_mode||"single_elimination_bronze"}),f(!1)}catch(Zo){b(Zo.message),f(!1)}},T=e=>{const{name:t,value:n}=e.target;_((e=>({...e,[t]:n})))};return p?(0,we.jsx)("div",{className:"turnier-edit",children:(0,we.jsxs)("div",{className:"loading-box",children:[(0,we.jsx)("div",{className:"loading-spinner"}),(0,we.jsx)("p",{children:"Turnier wird geladen..."})]})}):(0,we.jsxs)("div",{className:"turnier-edit",children:[(0,we.jsxs)("div",{className:"edit-header",children:[(0,we.jsxs)("div",{className:"header-title",children:[(0,we.jsx)("span",{className:"header-icon",children:d?"\ud83c\udfc6":"\u270f\ufe0f"}),(0,we.jsxs)("div",{className:"header-text",children:[(0,we.jsx)("h1",{children:d?"Neues Turnier erstellen":"Turnier bearbeiten"}),(0,we.jsx)("p",{children:d?"Neues Turnier anlegen":S.name||"Turnier bearbeiten"})]})]}),(0,we.jsxs)("div",{className:"header-actions",children:[(0,we.jsx)("button",{className:"btn-back",onClick:()=>l("/dashboard/turniere"),children:"\u2190 Zur\xfcck"}),(0,we.jsx)("button",{type:"submit",form:"turnier-form",className:"btn-save",disabled:g,children:g?"Speichern...":"Speichern"})]})]}),v&&(0,we.jsxs)("div",{className:"msg msg-error",children:[(0,we.jsx)("span",{children:"Fehler:"})," ",v]}),j&&(0,we.jsxs)("div",{className:"msg msg-success",children:[(0,we.jsx)("span",{children:"Erfolg:"})," ",j]}),(0,we.jsx)("div",{className:"tab-nav",children:[{id:"grunddaten",label:"Grunddaten",icon:"\ud83d\udccb"},{id:"termin-ort",label:"Termin & Ort",icon:"\ud83d\udccd"},{id:"preise",label:"Preise",icon:"\ud83d\udcb0"},{id:"teilnehmer",label:"Teilnehmer",icon:"\ud83d\udc65"},{id:"kontakt",label:"Kontakt",icon:"\ud83d\udcde"},{id:"kategorien",label:"Kategorien",icon:"\ud83c\udff7\ufe0f"}].map((e=>(0,we.jsxs)("button",{className:"tab-btn "+(h===e.id?"active":""),onClick:()=>m(e.id),type:"button",children:[(0,we.jsx)("span",{className:"tab-icon",children:e.icon}),(0,we.jsx)("span",{children:e.label})]},e.id)))}),(0,we.jsxs)("form",{id:"turnier-form",onSubmit:async e=>{if(e.preventDefault(),b(""),y(""),!S.name.trim())return b("Bitte Turniernamen eingeben."),void m("grunddaten");if(!S.start_datum)return b("Bitte Turnierdatum eingeben."),void m("termin-ort");x(!0);try{var t;const e=localStorage.getItem("token"),n=d?"/api/turniere":`/api/turniere/${c}`,r=d?"POST":"PUT",a={name:S.name,start_datum:S.start_datum,end_datum:S.end_datum||S.start_datum,ort:S.ort,disziplin:S.disziplin,anmeldeschluss:S.anmeldeschluss,status:S.status,default_tournament_mode:S.default_tournament_mode},i=await fetch(n,{method:r,headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(!i.ok){const e=await i.json();throw new Error(e.error||"Fehler beim Speichern")}const s=(null===(t=(await i.json()).data)||void 0===t?void 0:t.turnier_id)||c;s&&w.length>=0&&await fetch(`/api/turniere/${s}/kategorien`,{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({kategorien:w})}),y(d?"Turnier erstellt!":"Gespeichert!"),setTimeout((()=>l("/dashboard/turniere")),1e3)}catch(Zo){b(Zo.message)}finally{x(!1)}},className:"form-container",children:["grunddaten"===h&&(0,we.jsxs)("div",{className:"form-section",children:[(0,we.jsx)("h3",{children:"\ud83d\udccb Grunddaten"}),(0,we.jsx)("div",{className:"form-row",children:(0,we.jsxs)("div",{className:"form-group full-width",children:[(0,we.jsx)("label",{children:"Turniername *"}),(0,we.jsx)("input",{type:"text",name:"name",value:S.name,onChange:T,placeholder:"z.B. TDA Meisterschaft 2026",required:!0})]})}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Sportart"}),(0,we.jsxs)("select",{name:"sportart",value:S.sportart,onChange:T,children:[(0,we.jsx)("option",{value:"",children:"-- Ausw\xe4hlen --"}),(0,we.jsx)("option",{value:"Taekwondo",children:"Taekwondo"}),(0,we.jsx)("option",{value:"Karate",children:"Karate"}),(0,we.jsx)("option",{value:"Judo",children:"Judo"}),(0,we.jsx)("option",{value:"Kickboxen",children:"Kickboxen"}),(0,we.jsx)("option",{value:"MMA",children:"MMA"}),(0,we.jsx)("option",{value:"Andere",children:"Andere"})]})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Disziplin"}),(0,we.jsxs)("select",{name:"disziplin",value:S.disziplin,onChange:T,children:[(0,we.jsx)("option",{value:"",children:"-- Ausw\xe4hlen --"}),(0,we.jsx)("option",{value:"Vollkontakt",children:"Vollkontakt"}),(0,we.jsx)("option",{value:"Leichtkontakt",children:"Leichtkontakt"}),(0,we.jsx)("option",{value:"Semi-Kontakt",children:"Semi-Kontakt"}),(0,we.jsx)("option",{value:"Formen/Kata",children:"Formen/Kata"}),(0,we.jsx)("option",{value:"Waffen",children:"Waffen"}),(0,we.jsx)("option",{value:"Mixed",children:"Mixed"})]})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Status"}),(0,we.jsx)("div",{className:"status-options",children:["Geplant","Aktiv","Abgeschlossen","Abgesagt"].map((e=>(0,we.jsx)("button",{type:"button",className:"status-btn "+(S.status===e?"active":""),onClick:()=>_((t=>({...t,status:e}))),children:e},e)))})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Sichtbarkeit"}),(0,we.jsxs)("div",{className:"publish-toggle",children:[(0,we.jsx)("button",{type:"button",className:"publish-btn "+(S.veroeffentlicht?"published":"unpublished"),onClick:()=>_((e=>({...e,veroeffentlicht:!e.veroeffentlicht}))),children:S.veroeffentlicht?"\ud83c\udf10 Ver\xf6ffentlicht":"\ud83d\udd12 Nicht ver\xf6ffentlicht"}),(0,we.jsx)("span",{className:"publish-hint",children:S.veroeffentlicht?"Turnier ist in Dojo/Verband Software sichtbar":"Turnier ist nur hier sichtbar"})]})]})]}),(0,we.jsx)("div",{className:"form-row",children:(0,we.jsxs)("div",{className:"form-group full-width",children:[(0,we.jsx)("label",{children:"Beschreibung"}),(0,we.jsx)("textarea",{name:"beschreibung",value:S.beschreibung,onChange:T,rows:"3",placeholder:"Kurze Beschreibung des Turniers..."})]})})]}),"termin-ort"===h&&(0,we.jsxs)("div",{className:"form-section",children:[(0,we.jsx)("h3",{children:"\ud83d\udccd Termin & Ort"}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Startdatum *"}),(0,we.jsx)("input",{type:"date",name:"start_datum",value:S.start_datum,onChange:T,required:!0})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Enddatum"}),(0,we.jsx)("input",{type:"date",name:"end_datum",value:S.end_datum,onChange:T})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Anmeldeschluss"}),(0,we.jsx)("input",{type:"date",name:"anmeldeschluss",value:S.anmeldeschluss,onChange:T})]})]}),(0,we.jsx)("div",{className:"form-row",children:(0,we.jsxs)("div",{className:"form-group full-width",children:[(0,we.jsx)("label",{children:"Veranstaltungsort / Halle"}),(0,we.jsx)("input",{type:"text",name:"ort",value:S.ort,onChange:T,placeholder:"z.B. Sporthalle Musterstadt"})]})}),(0,we.jsx)("div",{className:"form-row",children:(0,we.jsxs)("div",{className:"form-group full-width",children:[(0,we.jsx)("label",{children:"Adresse"}),(0,we.jsx)("input",{type:"text",name:"adresse",value:S.adresse,onChange:T,placeholder:"Stra\xdfe und Hausnummer"})]})}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"PLZ"}),(0,we.jsx)("input",{type:"text",name:"plz",value:S.plz,onChange:T,placeholder:"12345"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Stadt"}),(0,we.jsx)("input",{type:"text",name:"stadt",value:S.stadt,onChange:T,placeholder:"Musterstadt"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Land"}),(0,we.jsx)("input",{type:"text",name:"land",value:S.land,onChange:T,placeholder:"Deutschland"})]})]})]}),"preise"===h&&(0,we.jsxs)("div",{className:"form-section",children:[(0,we.jsx)("h3",{children:"\ud83d\udcb0 Startgeb\xfchren & Rabatte"}),(0,we.jsx)("div",{className:"info-box info-blue",children:(0,we.jsxs)("p",{children:["\ud83d\udca1 ",(0,we.jsx)("strong",{children:"Staffelpreise:"})," Bei mehreren Kategorien pro Person werden automatisch Rabatte berechnet."]})}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Preis Einzelkategorie (\u20ac)"}),(0,we.jsx)("input",{type:"number",name:"preis_einzel",value:S.preis_einzel,onChange:T,min:"0",step:"0.50",placeholder:"25.00"}),(0,we.jsx)("small",{className:"form-hint",children:"Basispreis f\xfcr Kumite, Formen, etc."})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Preis Teamkategorie (\u20ac)"}),(0,we.jsx)("input",{type:"number",name:"preis_team",value:S.preis_team,onChange:T,min:"0",step:"0.50",placeholder:"40.00"}),(0,we.jsx)("small",{className:"form-hint",children:"F\xfcr Synchron-Formen, Team-Kumite, etc."})]})]}),(0,we.jsx)("h4",{className:"subsection-title",children:"\ud83d\udcc9 Staffelrabatte"}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Rabatt 2. Kategorie (%)"}),(0,we.jsx)("input",{type:"number",name:"rabatt_zweite_kategorie",value:S.rabatt_zweite_kategorie,onChange:T,min:"0",max:"100",placeholder:"20"}),(0,we.jsx)("small",{className:"form-hint",children:"z.B. 20% \u2192 20\u20ac statt 25\u20ac"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Rabatt 3.+ Kategorie (%)"}),(0,we.jsx)("input",{type:"number",name:"rabatt_weitere_kategorien",value:S.rabatt_weitere_kategorien,onChange:T,min:"0",max:"100",placeholder:"40"}),(0,we.jsx)("small",{className:"form-hint",children:"z.B. 40% \u2192 15\u20ac statt 25\u20ac"})]})]}),(0,we.jsx)("h4",{className:"subsection-title",children:"\ud83c\udfaf Fr\xfchbucher & Nachmeldung"}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Fr\xfchbucher bis"}),(0,we.jsx)("input",{type:"date",name:"fruehbucher_bis",value:S.fruehbucher_bis,onChange:T}),(0,we.jsx)("small",{className:"form-hint",children:"Datum bis wann Fr\xfchbucher-Rabatt gilt"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Fr\xfchbucher-Rabatt (%)"}),(0,we.jsx)("input",{type:"number",name:"fruehbucher_rabatt",value:S.fruehbucher_rabatt,onChange:T,min:"0",max:"100",placeholder:"10"}),(0,we.jsx)("small",{className:"form-hint",children:"z.B. 10% Rabatt bei fr\xfcher Anmeldung"})]})]}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Nachmeldegeb\xfchr (\u20ac)"}),(0,we.jsx)("input",{type:"number",name:"nachmeldegebuehr",value:S.nachmeldegebuehr,onChange:T,min:"0",step:"0.50",placeholder:"10.00"}),(0,we.jsx)("small",{className:"form-hint",children:"Zusatzgeb\xfchr nach Anmeldeschluss"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Preisbeispiel"}),(0,we.jsxs)("div",{className:"price-preview",children:[(0,we.jsxs)("div",{className:"price-row",children:[(0,we.jsx)("span",{children:"1. Kategorie:"}),(0,we.jsxs)("strong",{children:[S.preis_einzel," \u20ac"]})]}),(0,we.jsxs)("div",{className:"price-row",children:[(0,we.jsx)("span",{children:"2. Kategorie:"}),(0,we.jsxs)("strong",{children:[(S.preis_einzel*(1-S.rabatt_zweite_kategorie/100)).toFixed(2)," \u20ac"]})]}),(0,we.jsxs)("div",{className:"price-row price-total",children:[(0,we.jsx)("span",{children:"Gesamt (2 Kat.):"}),(0,we.jsxs)("strong",{className:"price-sum",children:[(parseFloat(S.preis_einzel)+parseFloat(S.preis_einzel)*(1-S.rabatt_zweite_kategorie/100)).toFixed(2)," \u20ac"]})]})]})]})]})]}),"teilnehmer"===h&&(0,we.jsxs)("div",{className:"form-section",children:[(0,we.jsx)("h3",{children:"\ud83d\udc65 Teilnehmer-Einstellungen"}),(0,we.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1.5rem"},children:[(0,we.jsxs)("div",{className:"mode-box",children:[(0,we.jsx)("h4",{children:"\ud83e\udd4a Kampf-Modus"}),(0,we.jsx)("p",{children:"Kumite, Kickboxen, Grappling"}),[{value:"single_elimination",label:"Single Elimination (KO)",description:"Verloren = Raus"},{value:"single_elimination_bronze",label:"KO + Bronze-Kampf",description:"Mit Kampf um Platz 3"},{value:"single_elimination_double_bronze",label:"KO + Doppel-Bronze",description:"Beide Halbfinal-Verlierer = Platz 3"},{value:"consolation_bracket",label:"Trostrunden-Bracket",description:"Verlierer k\xe4mpfen separat um Platz 3"},{value:"double_elimination",label:"Double Elimination",description:"2x verlieren = raus"},{value:"repechage",label:"Repechage (Olympisch)",description:"Trostrunde f\xfcr Verlierer gegen Finalisten"},{value:"round_robin",label:"Round Robin",description:"Jeder gegen Jeden"}].map((e=>(0,we.jsxs)("label",{className:"mode-option compact "+(S.default_tournament_mode===e.value?"selected":""),children:[(0,we.jsx)("input",{type:"radio",name:"default_tournament_mode",value:e.value,checked:S.default_tournament_mode===e.value,onChange:T}),(0,we.jsxs)("div",{className:"mode-info",children:[(0,we.jsx)("h4",{children:e.label}),(0,we.jsx)("p",{children:e.description})]})]},e.value)))]}),(0,we.jsxs)("div",{className:"mode-box",children:[(0,we.jsx)("h4",{children:"\ud83c\udfad Formen-Modus"}),(0,we.jsx)("p",{children:"Kata, Poomsae, Hyong"}),[{value:"average",label:"Durchschnitt",description:"Durchschnitt aller Kampfrichter-Wertungen"},{value:"average_drop_extremes",label:"Durchschnitt ohne Extreme",description:"H\xf6chste und niedrigste Wertung werden gestrichen"},{value:"total",label:"Summe",description:"Alle Punkte werden addiert"},{value:"majority",label:"Mehrheitsentscheidung",description:"Kampfrichter stimmen f\xfcr Platzierung"}].map((e=>(0,we.jsxs)("label",{className:"mode-option compact "+(S.formen_scoring_mode===e.value?"selected":""),children:[(0,we.jsx)("input",{type:"radio",name:"formen_scoring_mode",value:e.value,checked:S.formen_scoring_mode===e.value,onChange:T}),(0,we.jsxs)("div",{className:"mode-info",children:[(0,we.jsx)("h4",{children:e.label}),(0,we.jsx)("p",{children:e.description})]})]},e.value)))]}),(0,we.jsxs)("div",{className:"mode-box",children:[(0,we.jsx)("h4",{children:"\ud83e\uddf1 Bruchtest-Modus"}),(0,we.jsx)("p",{children:"Tameshiwari"}),[{value:"pass_fail",label:"Bestanden/Nicht bestanden",description:"Einfache Ja/Nein Bewertung"},{value:"points",label:"Punktesystem",description:"Punkte nach Schwierigkeitsgrad"},{value:"count",label:"Anzahl Bretter",description:"Wer mehr Bretter bricht, gewinnt"},{value:"technique",label:"Technik + Kraft",description:"Kombinierte Wertung aus Technik und Kraft"}].map((e=>(0,we.jsxs)("label",{className:"mode-option compact "+(S.bruchtest_scoring_mode===e.value?"selected":""),children:[(0,we.jsx)("input",{type:"radio",name:"bruchtest_scoring_mode",value:e.value,checked:S.bruchtest_scoring_mode===e.value,onChange:T}),(0,we.jsxs)("div",{className:"mode-info",children:[(0,we.jsx)("h4",{children:e.label}),(0,we.jsx)("p",{children:e.description})]})]},e.value)))]}),(0,we.jsxs)("div",{className:"mode-box",children:[(0,we.jsx)("h4",{children:"\ud83d\udee1\ufe0f SV-Modus"}),(0,we.jsx)("p",{children:"Hosinsul, Selbstverteidigung"}),[{value:"points_total",label:"Gesamtpunkte",description:"Summe aller Technik-Bewertungen"},{value:"average",label:"Durchschnitt",description:"Durchschnitt der Kampfrichter"},{value:"criteria",label:"Kriterienbewertung",description:"Einzelne Kriterien (Effektivit\xe4t, Technik, Pr\xe4sentation)"},{value:"ranking",label:"Direktes Ranking",description:"Kampfrichter vergeben Platzierungen"}].map((e=>(0,we.jsxs)("label",{className:"mode-option compact "+(S.sv_scoring_mode===e.value?"selected":""),children:[(0,we.jsx)("input",{type:"radio",name:"sv_scoring_mode",value:e.value,checked:S.sv_scoring_mode===e.value,onChange:T}),(0,we.jsxs)("div",{className:"mode-info",children:[(0,we.jsx)("h4",{children:e.label}),(0,we.jsx)("p",{children:e.description})]})]},e.value)))]})]}),(0,we.jsxs)("div",{style:{marginTop:"1.5rem",borderTop:"1px solid rgba(255,51,51,0.2)",paddingTop:"1.5rem"},children:[(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Max. Teilnehmer"}),(0,we.jsx)("input",{type:"number",name:"max_teilnehmer",value:S.max_teilnehmer,onChange:T,min:"1",placeholder:"200"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Anmeldegeb\xfchr (EUR)"}),(0,we.jsx)("input",{type:"number",name:"anmeldegebuehr",value:S.anmeldegebuehr,onChange:T,min:"0",step:"0.01",placeholder:"35.00"})]})]}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Altersklassen"}),(0,we.jsx)("input",{type:"text",name:"altersklassen",value:S.altersklassen,onChange:T,placeholder:"U12, U15, U18, Erwachsene"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Gewichtsklassen"}),(0,we.jsx)("input",{type:"text",name:"gewichtsklassen",value:S.gewichtsklassen,onChange:T,placeholder:"-50kg, -60kg, -70kg, +70kg"})]})]}),(0,we.jsx)("div",{className:"form-row",children:(0,we.jsxs)("div",{className:"form-group full-width",children:[(0,we.jsx)("label",{children:"Turnierregeln"}),(0,we.jsx)("textarea",{name:"regeln",value:S.regeln,onChange:T,rows:"4",placeholder:"Turnierregeln und besondere Bestimmungen..."})]})})]})]}),"kontakt"===h&&(0,we.jsxs)("div",{className:"form-section",children:[(0,we.jsx)("h3",{children:"\ud83d\udcde Kontakt & Info"}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"E-Mail"}),(0,we.jsx)("input",{type:"email",name:"kontakt_email",value:S.kontakt_email,onChange:T,placeholder:"turnier@example.com"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Telefon"}),(0,we.jsx)("input",{type:"tel",name:"kontakt_telefon",value:S.kontakt_telefon,onChange:T,placeholder:"+49 123 456789"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Website"}),(0,we.jsx)("input",{type:"url",name:"website",value:S.website,onChange:T,placeholder:"https://www.turnier.de"})]})]}),(0,we.jsx)("div",{className:"form-row",children:(0,we.jsxs)("div",{className:"form-group full-width",children:[(0,we.jsx)("label",{children:"Besondere Hinweise"}),(0,we.jsx)("textarea",{name:"hinweise",value:S.hinweise,onChange:T,rows:"3",placeholder:"Weitere Hinweise f\xfcr Teilnehmer..."})]})})]}),"kategorien"===h&&(0,we.jsxs)("div",{className:"kategorien-section",children:[(0,we.jsx)("h3",{children:"\ud83c\udff7\ufe0f Turnier-Kategorien"}),(0,we.jsx)("p",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"1rem",fontSize:"0.9rem"},children:"W\xe4hlen Sie die Kategorien, die bei diesem Turnier angeboten werden:"}),(0,we.jsx)("div",{className:"kategorien-grid",children:k.map((e=>(0,we.jsxs)("label",{className:"kategorie-item "+(w.includes(e.id)?"selected":""),children:[(0,we.jsx)("input",{type:"checkbox",checked:w.includes(e.id),onChange:()=>{return t=e.id,void N((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t}}),(0,we.jsx)("span",{className:"icon",children:e.icon}),(0,we.jsx)("span",{className:"label",children:e.label})]},e.id)))}),(0,we.jsx)("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",background:"rgba(255,51,51,0.1)",borderRadius:"8px",border:"1px solid rgba(255,51,51,0.2)"},children:(0,we.jsxs)("span",{style:{color:"#ff3333"},children:[w.length," / ",k.length," Kategorien ausgew\xe4hlt"]})})]})]})]})};function vo(e){let{item:t,isEditing:n,onEdit:r,onSave:a,onCancel:i,saving:l}=e;const[o,c]=(0,s.useState)({...t});return(0,s.useEffect)((()=>{c({...t})}),[t,n]),n?(0,we.jsxs)("div",{className:"settings-card-jp editing",children:[(0,we.jsx)("div",{className:"card-header-jp",children:(0,we.jsx)("span",{className:"division-type-jp",children:o.division_type})}),(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Wertungssystem:"}),(0,we.jsxs)("select",{value:o.wertungs_system,onChange:e=>c({...o,wertungs_system:e.target.value}),children:[(0,we.jsx)("option",{value:"bracket",children:"Bracket (K.O.-System)"}),(0,we.jsx)("option",{value:"punkte",children:"Punkte (Bewertung)"})]})]}),"punkte"===o.wertungs_system&&(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("div",{className:"form-row-jp",children:[(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Farbgurte Min:"}),(0,we.jsx)("input",{type:"number",step:"0.5",value:o.punkte_min_farbgurt,onChange:e=>c({...o,punkte_min_farbgurt:parseFloat(e.target.value)})})]}),(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Farbgurte Max:"}),(0,we.jsx)("input",{type:"number",step:"0.5",value:o.punkte_max_farbgurt,onChange:e=>c({...o,punkte_max_farbgurt:parseFloat(e.target.value)})})]})]}),(0,we.jsxs)("div",{className:"form-row-jp",children:[(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Schwarzgurte Min:"}),(0,we.jsx)("input",{type:"number",step:"0.5",value:o.punkte_min_schwarzgurt,onChange:e=>c({...o,punkte_min_schwarzgurt:parseFloat(e.target.value)})})]}),(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Schwarzgurte Max:"}),(0,we.jsx)("input",{type:"number",step:"0.5",value:o.punkte_max_schwarzgurt,onChange:e=>c({...o,punkte_max_schwarzgurt:parseFloat(e.target.value)})})]})]}),(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Anzahl Kampfrichter:"}),(0,we.jsx)("input",{type:"number",min:"1",max:"10",value:o.anzahl_kampfrichter,onChange:e=>c({...o,anzahl_kampfrichter:parseInt(e.target.value)})})]})]}),(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Beschreibung:"}),(0,we.jsx)("input",{type:"text",value:o.beschreibung||"",onChange:e=>c({...o,beschreibung:e.target.value})})]}),(0,we.jsxs)("div",{className:"card-actions-jp",children:[(0,we.jsx)("button",{className:"btn-cancel-jp",onClick:i,disabled:l,children:"Abbrechen"}),(0,we.jsx)("button",{className:"btn-save-jp",onClick:()=>a(o),disabled:l,children:l?"Speichern...":"Speichern"})]})]}):(0,we.jsxs)("div",{className:"settings-card-jp",children:[(0,we.jsxs)("div",{className:"card-header-jp",children:[(0,we.jsx)("span",{className:"division-type-jp",children:t.division_type}),(0,we.jsx)("span",{className:`wertung-badge-jp ${t.wertungs_system}`,children:"bracket"===t.wertungs_system?"K.O.":"Punkte"})]}),"punkte"===t.wertungs_system&&(0,we.jsxs)("div",{className:"punkte-info-jp",children:[(0,we.jsxs)("div",{className:"punkte-range-jp",children:[(0,we.jsx)("span",{children:"Farbgurte:"}),(0,we.jsxs)("strong",{children:[t.punkte_min_farbgurt," - ",t.punkte_max_farbgurt]})]}),(0,we.jsxs)("div",{className:"punkte-range-jp",children:[(0,we.jsx)("span",{children:"Schwarzgurte:"}),(0,we.jsxs)("strong",{children:[t.punkte_min_schwarzgurt," - ",t.punkte_max_schwarzgurt]})]}),(0,we.jsxs)("div",{className:"kampfrichter-info-jp",children:[(0,we.jsx)("span",{children:"Kampfrichter:"}),(0,we.jsx)("strong",{children:t.anzahl_kampfrichter})]})]}),(0,we.jsx)("p",{className:"beschreibung-jp",children:t.beschreibung}),(0,we.jsx)("button",{className:"btn-edit-jp",onClick:r,children:"Bearbeiten"})]})}function bo(e){let{item:t,isEditing:n,onEdit:r,onSave:a,onCancel:i,onReset:l,saving:o}=e;const[c,d]=(0,s.useState)({...t});return(0,s.useEffect)((()=>{d({...t})}),[t,n]),n?(0,we.jsx)("div",{className:"turnier-row-jp editing",children:(0,we.jsxs)("div",{className:"edit-form-jp",children:[(0,we.jsx)("h4",{children:t.division_type}),(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Wertungssystem:"}),(0,we.jsxs)("select",{value:c.wertungs_system,onChange:e=>d({...c,wertungs_system:e.target.value}),children:[(0,we.jsx)("option",{value:"bracket",children:"Bracket (K.O.-System)"}),(0,we.jsx)("option",{value:"punkte",children:"Punkte (Bewertung)"})]})]}),"punkte"===c.wertungs_system&&(0,we.jsxs)("div",{className:"punkte-fields-jp",children:[(0,we.jsxs)("div",{className:"form-row-jp",children:[(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Farbgurte:"}),(0,we.jsxs)("div",{className:"range-inputs-jp",children:[(0,we.jsx)("input",{type:"number",step:"0.5",value:c.punkte_min_farbgurt,onChange:e=>d({...c,punkte_min_farbgurt:parseFloat(e.target.value)})}),(0,we.jsx)("span",{children:"bis"}),(0,we.jsx)("input",{type:"number",step:"0.5",value:c.punkte_max_farbgurt,onChange:e=>d({...c,punkte_max_farbgurt:parseFloat(e.target.value)})})]})]}),(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Schwarzgurte:"}),(0,we.jsxs)("div",{className:"range-inputs-jp",children:[(0,we.jsx)("input",{type:"number",step:"0.5",value:c.punkte_min_schwarzgurt,onChange:e=>d({...c,punkte_min_schwarzgurt:parseFloat(e.target.value)})}),(0,we.jsx)("span",{children:"bis"}),(0,we.jsx)("input",{type:"number",step:"0.5",value:c.punkte_max_schwarzgurt,onChange:e=>d({...c,punkte_max_schwarzgurt:parseFloat(e.target.value)})})]})]})]}),(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Kampfrichter:"}),(0,we.jsx)("input",{type:"number",min:"1",max:"10",value:c.anzahl_kampfrichter,onChange:e=>d({...c,anzahl_kampfrichter:parseInt(e.target.value)}),style:{width:"80px"}})]})]}),(0,we.jsxs)("div",{className:"edit-actions-jp",children:[(0,we.jsx)("button",{className:"btn-cancel-jp",onClick:i,disabled:o,children:"Abbrechen"}),(0,we.jsx)("button",{className:"btn-save-jp",onClick:()=>a(c),disabled:o,children:o?"Speichern...":"Speichern"})]})]})}):(0,we.jsxs)("div",{className:"turnier-row-jp "+(t.ist_ueberschrieben?"overridden":""),children:[(0,we.jsxs)("div",{className:"row-main-jp",children:[(0,we.jsx)("span",{className:"division-type-jp",children:t.division_type}),(0,we.jsx)("span",{className:`wertung-badge-jp ${t.wertungs_system}`,children:"bracket"===t.wertungs_system?"K.O.":"Punkte"}),"punkte"===t.wertungs_system&&(0,we.jsxs)("span",{className:"punkte-preview-jp",children:["Farbgurt: ",t.punkte_min_farbgurt,"-",t.punkte_max_farbgurt," | Schwarzgurt: ",t.punkte_min_schwarzgurt,"-",t.punkte_max_schwarzgurt]}),t.ist_ueberschrieben&&(0,we.jsx)("span",{className:"override-badge-jp",children:"Angepasst"})]}),(0,we.jsxs)("div",{className:"row-actions-jp",children:[(0,we.jsx)("button",{className:"btn-edit-jp",onClick:r,children:"Anpassen"}),t.ist_ueberschrieben&&(0,we.jsx)("button",{className:"btn-reset-jp",onClick:l,children:"Standard"})]})]})}const jo=function(){var e,t,n,r,a,i,l,o,c,d,u,h,m,p,f,g,x,v,b,j,y,k,w,N,S,_,C,z,T,A,E,D;const[B,R]=(0,s.useState)([]),[F,L]=(0,s.useState)([]),[P,O]=(0,s.useState)(null),[I,$]=(0,s.useState)([]),[W,M]=(0,s.useState)(!0),[K,U]=(0,s.useState)(!1),[V,q]=(0,s.useState)("global"),[G,H]=(0,s.useState)(null),[J,Z]=(0,s.useState)({rings:2,start_time:"09:00",pause_between_categories:5,disciplines:{Formen:{durationPerPerson:3,breakAfter:1},Selbstverteidigung:{durationPerPerson:4,breakAfter:1},Kickboxen:{roundDuration:2,rounds:2,breakBetweenRounds:1,breakAfter:2},Freefight:{roundDuration:2,rounds:2,breakBetweenRounds:1,breakAfter:2},Pointfighting:{roundDuration:2,rounds:2,breakBetweenRounds:1,breakAfter:2},Default:{durationPerMatch:5,breakAfter:2}}}),[Y,Q]=(0,s.useState)("hardcoded");(0,s.useEffect)((()=>{X(),te()}),[]),(0,s.useEffect)((()=>{P?(ee(P.turnier_id),te(P.turnier_id)):te()}),[P]);const X=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/wertung/einstellungen",{headers:{Authorization:`Bearer ${e}`}}),n=await t.json();n.success&&R(n.data);const r=await fetch("/api/turniere",{headers:{Authorization:`Bearer ${e}`}}),a=await r.json();a.data&&L(a.data),M(!1)}catch(Zo){console.error("Fehler beim Laden:",Zo),M(!1)}},ee=async e=>{try{const t=localStorage.getItem("token"),n=await fetch(`/api/wertung/turnier/${e}`,{headers:{Authorization:`Bearer ${t}`}}),r=await n.json();r.success&&$(r.data)}catch(Zo){console.error("Fehler beim Laden der Turnier-Einstellungen:",Zo)}},te=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=localStorage.getItem("token"),n=e?`/api/schedule/zeitplan-einstellungen/${e}`:"/api/schedule/zeitplan-einstellungen/default",r=await fetch(n,{headers:{Authorization:`Bearer ${t}`}}),a=await r.json();a.success&&a.data&&(Z({rings:a.data.rings||2,start_time:a.data.start_time||"09:00",pause_between_categories:a.data.pause_between_categories||5,disciplines:a.data.disciplines||{}}),Q(a.source||"loaded"))}catch(Zo){console.error("Fehler beim Laden der Zeitplan-Einstellungen:",Zo)}},ne=(e,t,n)=>{Z((r=>({...r,disciplines:{...r.disciplines,[e]:{...r.disciplines[e],[t]:parseInt(n)||0}}})))},re=async e=>{U(!0);try{const t=localStorage.getItem("token"),n=await fetch(`/api/wertung/einstellungen/${encodeURIComponent(e.division_type)}`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await n.json();r.success?(await X(),H(null),alert("Einstellung gespeichert!")):alert("Fehler: "+r.message)}catch(Zo){alert("Fehler beim Speichern: "+Zo.message)}finally{U(!1)}},ae=async e=>{if(P){U(!0);try{const t=localStorage.getItem("token"),n=await fetch(`/api/wertung/turnier/${P.turnier_id}/${encodeURIComponent(e.division_type)}`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await n.json();r.success?(await ee(P.turnier_id),H(null),alert("Turnier-Einstellung gespeichert!")):alert("Fehler: "+r.message)}catch(Zo){alert("Fehler beim Speichern: "+Zo.message)}finally{U(!1)}}};return W?(0,we.jsxs)("div",{className:"turnier-einstellungen-jp loading",children:[(0,we.jsx)("div",{className:"loading-kanji-jp",children:"\u8a2d"}),(0,we.jsx)("p",{children:"Lade Einstellungen..."})]}):(0,we.jsxs)("div",{className:"turnier-einstellungen-jp",children:[(0,we.jsx)("div",{className:"page-header-jp",children:(0,we.jsxs)("div",{className:"header-title-jp",children:[(0,we.jsx)("span",{className:"header-kanji",children:"\u8a2d\u5b9a"}),(0,we.jsxs)("div",{className:"header-text-jp",children:[(0,we.jsx)("h1",{children:"Turnier-Einstellungen"}),(0,we.jsx)("p",{children:"Wertungssysteme und Punktebereiche konfigurieren"})]})]})}),(0,we.jsxs)("div",{className:"tab-nav-jp",children:[(0,we.jsxs)("button",{className:"tab-btn-jp "+("global"===V?"active":""),onClick:()=>q("global"),children:[(0,we.jsx)("span",{className:"tab-icon",children:"\u2699\ufe0f"}),"Standard-Einstellungen"]}),(0,we.jsxs)("button",{className:"tab-btn-jp "+("turnier"===V?"active":""),onClick:()=>q("turnier"),children:[(0,we.jsx)("span",{className:"tab-icon",children:"\ud83c\udfc6"}),"Turnier-spezifisch"]}),(0,we.jsxs)("button",{className:"tab-btn-jp "+("zeitplan"===V?"active":""),onClick:()=>q("zeitplan"),children:[(0,we.jsx)("span",{className:"tab-icon",children:"\ud83d\udcc5"}),"Zeitplan-Einstellungen"]})]}),"global"===V&&(0,we.jsxs)("div",{className:"settings-container-jp",children:[(0,we.jsxs)("div",{className:"section-header-jp",children:[(0,we.jsx)("h2",{children:"\ud83c\udfaf Standard-Einstellungen (Dauereinstellungen)"}),(0,we.jsx)("p",{children:"Diese Einstellungen gelten f\xfcr alle Turniere, sofern nicht \xfcberschrieben."})]}),(0,we.jsxs)("div",{className:"settings-grid-jp",children:[(0,we.jsxs)("div",{className:"settings-group-jp",children:[(0,we.jsx)("h3",{children:"\u2694\ufe0f Bracket-Kategorien (K.O.-System)"}),B.filter((e=>"bracket"===e.wertungs_system)).map((e=>(0,we.jsx)(vo,{item:e,isEditing:G===e.division_type,onEdit:()=>H(e.division_type),onSave:re,onCancel:()=>H(null),saving:K},e.division_type)))]}),(0,we.jsxs)("div",{className:"settings-group-jp",children:[(0,we.jsx)("h3",{children:"\ud83d\udcca Punkte-Kategorien (Bewertung)"}),B.filter((e=>"punkte"===e.wertungs_system)).map((e=>(0,we.jsx)(vo,{item:e,isEditing:G===e.division_type,onEdit:()=>H(e.division_type),onSave:re,onCancel:()=>H(null),saving:K},e.division_type)))]})]})]}),"turnier"===V&&(0,we.jsxs)("div",{className:"settings-container-jp",children:[(0,we.jsxs)("div",{className:"section-header-jp",children:[(0,we.jsx)("h2",{children:"\ud83c\udfef Turnier-spezifische Einstellungen"}),(0,we.jsx)("p",{children:"\xdcberschreiben Sie die Standard-Einstellungen f\xfcr ein bestimmtes Turnier."})]}),(0,we.jsxs)("div",{className:"turnier-selector-jp",children:[(0,we.jsx)("label",{children:"Turnier ausw\xe4hlen:"}),(0,we.jsxs)("select",{value:(null===P||void 0===P?void 0:P.turnier_id)||"",onChange:e=>{const t=F.find((t=>t.turnier_id===parseInt(e.target.value)));O(t)},children:[(0,we.jsx)("option",{value:"",children:"-- Turnier w\xe4hlen --"}),F.map((e=>(0,we.jsxs)("option",{value:e.turnier_id,children:[e.name," (",new Date(e.datum).toLocaleDateString("de-DE"),")"]},e.turnier_id)))]})]}),P&&(0,we.jsxs)("div",{className:"turnier-settings-jp",children:[(0,we.jsxs)("h3",{children:["\ud83c\udf8c Einstellungen f\xfcr: ",P.name]}),(0,we.jsx)("div",{className:"settings-list-jp",children:I.map((e=>(0,we.jsx)(bo,{item:e,isEditing:G===`turnier-${e.division_type}`,onEdit:()=>H(`turnier-${e.division_type}`),onSave:ae,onCancel:()=>H(null),onReset:()=>(async e=>{if(P&&window.confirm(`"${e}" auf Standard zur\xfccksetzen?`))try{const t=localStorage.getItem("token"),n=await fetch(`/api/wertung/turnier/${P.turnier_id}/${encodeURIComponent(e)}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});(await n.json()).success&&(await ee(P.turnier_id),alert("Auf Standard zur\xfcckgesetzt!"))}catch(Zo){alert("Fehler: "+Zo.message)}})(e.division_type),saving:K},e.division_type)))})]})]}),"zeitplan"===V&&(0,we.jsxs)("div",{className:"settings-container-jp",children:[(0,we.jsxs)("div",{className:"section-header-jp",children:[(0,we.jsx)("h2",{children:"\ud83d\udcc5 Zeitplan-Einstellungen"}),(0,we.jsx)("p",{children:"Konfigurieren Sie die Zeiten f\xfcr die automatische Zeitplan-Generierung."})]}),(0,we.jsxs)("div",{className:"turnier-selector-jp",children:[(0,we.jsx)("label",{children:"Einstellungen f\xfcr:"}),(0,we.jsxs)("select",{value:(null===P||void 0===P?void 0:P.turnier_id)||"global",onChange:e=>{if("global"===e.target.value)O(null),te();else{const t=F.find((t=>t.turnier_id===parseInt(e.target.value)));O(t)}},children:[(0,we.jsx)("option",{value:"global",children:"Standard (Global)"}),F.map((e=>(0,we.jsxs)("option",{value:e.turnier_id,children:[e.name," (",new Date(e.datum).toLocaleDateString("de-DE"),")"]},e.turnier_id)))]}),"turnier"===Y&&(0,we.jsx)("span",{className:"override-badge-jp",children:"Turnier-spezifisch"})]}),(0,we.jsxs)("div",{className:"zeitplan-settings-box",children:[(0,we.jsx)("h3",{children:"\u2699\ufe0f Basis-Einstellungen"}),(0,we.jsxs)("div",{className:"zeitplan-settings-grid",children:[(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Anzahl Ringe"}),(0,we.jsx)("input",{type:"number",min:"1",max:"10",value:J.rings,onChange:e=>Z({...J,rings:parseInt(e.target.value)||2})})]}),(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Beginn"}),(0,we.jsx)("input",{type:"time",value:J.start_time,onChange:e=>Z({...J,start_time:e.target.value})})]}),(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Pause zwischen Kategorien (Min)"}),(0,we.jsx)("input",{type:"number",min:"0",max:"30",value:J.pause_between_categories,onChange:e=>Z({...J,pause_between_categories:parseInt(e.target.value)||5})})]})]})]}),(0,we.jsxs)("div",{className:"zeitplan-settings-box",children:[(0,we.jsx)("h3",{children:"\ud83e\udd4b Disziplin-Zeiten"}),(0,we.jsxs)("div",{className:"discipline-settings-row",children:[(0,we.jsxs)("div",{className:"discipline-name-box",children:[(0,we.jsx)("span",{className:"discipline-icon",children:"\ud83e\udd4b"}),(0,we.jsx)("span",{children:"Formen / Hyong / Tul"})]}),(0,we.jsxs)("div",{className:"discipline-inputs-box",children:[(0,we.jsxs)("div",{className:"input-group-mini",children:[(0,we.jsx)("label",{children:"Pro Person:"}),(0,we.jsx)("input",{type:"number",min:"1",max:"10",value:(null===(e=J.disciplines)||void 0===e||null===(t=e.Formen)||void 0===t?void 0:t.durationPerPerson)||3,onChange:e=>ne("Formen","durationPerPerson",e.target.value)}),(0,we.jsx)("span",{children:"Min"})]}),(0,we.jsxs)("div",{className:"input-group-mini",children:[(0,we.jsx)("label",{children:"Pause danach:"}),(0,we.jsx)("input",{type:"number",min:"0",max:"5",value:(null===(n=J.disciplines)||void 0===n||null===(r=n.Formen)||void 0===r?void 0:r.breakAfter)||1,onChange:e=>ne("Formen","breakAfter",e.target.value)}),(0,we.jsx)("span",{children:"Min"})]})]})]}),(0,we.jsxs)("div",{className:"discipline-settings-row",children:[(0,we.jsxs)("div",{className:"discipline-name-box",children:[(0,we.jsx)("span",{className:"discipline-icon",children:"\ud83d\udee1\ufe0f"}),(0,we.jsx)("span",{children:"Selbstverteidigung"})]}),(0,we.jsxs)("div",{className:"discipline-inputs-box",children:[(0,we.jsxs)("div",{className:"input-group-mini",children:[(0,we.jsx)("label",{children:"Pro Person:"}),(0,we.jsx)("input",{type:"number",min:"1",max:"10",value:(null===(a=J.disciplines)||void 0===a||null===(i=a.Selbstverteidigung)||void 0===i?void 0:i.durationPerPerson)||4,onChange:e=>ne("Selbstverteidigung","durationPerPerson",e.target.value)}),(0,we.jsx)("span",{children:"Min"})]}),(0,we.jsxs)("div",{className:"input-group-mini",children:[(0,we.jsx)("label",{children:"Pause danach:"}),(0,we.jsx)("input",{type:"number",min:"0",max:"5",value:(null===(l=J.disciplines)||void 0===l||null===(o=l.Selbstverteidigung)||void 0===o?void 0:o.breakAfter)||1,onChange:e=>ne("Selbstverteidigung","breakAfter",e.target.value)}),(0,we.jsx)("span",{children:"Min"})]})]})]}),(0,we.jsxs)("div",{className:"discipline-settings-row",children:[(0,we.jsxs)("div",{className:"discipline-name-box",children:[(0,we.jsx)("span",{className:"discipline-icon",children:"\ud83e\udd4a"}),(0,we.jsx)("span",{children:"Kickboxen / LK"})]}),(0,we.jsxs)("div",{className:"discipline-inputs-box",children:[(0,we.jsxs)("div",{className:"input-group-mini",children:[(0,we.jsx)("label",{children:"Runden:"}),(0,we.jsx)("input",{type:"number",min:"1",max:"5",value:(null===(c=J.disciplines)||void 0===c||null===(d=c.Kickboxen)||void 0===d?void 0:d.rounds)||2,onChange:e=>ne("Kickboxen","rounds",e.target.value)})]}),(0,we.jsxs)("div",{className:"input-group-mini",children:[(0,we.jsx)("label",{children:"Rundendauer:"}),(0,we.jsx)("input",{type:"number",min:"1",max:"5",value:(null===(u=J.disciplines)||void 0===u||null===(h=u.Kickboxen)||void 0===h?void 0:h.roundDuration)||2,onChange:e=>ne("Kickboxen","roundDuration",e.target.value)}),(0,we.jsx)("span",{children:"Min"})]}),(0,we.jsxs)("div",{className:"input-group-mini",children:[(0,we.jsx)("label",{children:"Rundenpause:"}),(0,we.jsx)("input",{type:"number",min:"0",max:"3",value:(null===(m=J.disciplines)||void 0===m||null===(p=m.Kickboxen)||void 0===p?void 0:p.breakBetweenRounds)||1,onChange:e=>ne("Kickboxen","breakBetweenRounds",e.target.value)}),(0,we.jsx)("span",{children:"Min"})]}),(0,we.jsxs)("div",{className:"input-group-mini",children:[(0,we.jsx)("label",{children:"Pause danach:"}),(0,we.jsx)("input",{type:"number",min:"0",max:"5",value:(null===(f=J.disciplines)||void 0===f||null===(g=f.Kickboxen)||void 0===g?void 0:g.breakAfter)||2,onChange:e=>ne("Kickboxen","breakAfter",e.target.value)}),(0,we.jsx)("span",{children:"Min"})]})]})]}),(0,we.jsxs)("div",{className:"discipline-settings-row",children:[(0,we.jsxs)("div",{className:"discipline-name-box",children:[(0,we.jsx)("span",{className:"discipline-icon",children:"\ud83d\udc4a"}),(0,we.jsx)("span",{children:"Freefight"})]}),(0,we.jsxs)("div",{className:"discipline-inputs-box",children:[(0,we.jsxs)("div",{className:"input-group-mini",children:[(0,we.jsx)("label",{children:"Runden:"}),(0,we.jsx)("input",{type:"number",min:"1",max:"5",value:(null===(x=J.disciplines)||void 0===x||null===(v=x.Freefight)||void 0===v?void 0:v.rounds)||2,onChange:e=>ne("Freefight","rounds",e.target.value)})]}),(0,we.jsxs)("div",{className:"input-group-mini",children:[(0,we.jsx)("label",{children:"Rundendauer:"}),(0,we.jsx)("input",{type:"number",min:"1",max:"5",value:(null===(b=J.disciplines)||void 0===b||null===(j=b.Freefight)||void 0===j?void 0:j.roundDuration)||2,onChange:e=>ne("Freefight","roundDuration",e.target.value)}),(0,we.jsx)("span",{children:"Min"})]}),(0,we.jsxs)("div",{className:"input-group-mini",children:[(0,we.jsx)("label",{children:"Rundenpause:"}),(0,we.jsx)("input",{type:"number",min:"0",max:"3",value:(null===(y=J.disciplines)||void 0===y||null===(k=y.Freefight)||void 0===k?void 0:k.breakBetweenRounds)||1,onChange:e=>ne("Freefight","breakBetweenRounds",e.target.value)}),(0,we.jsx)("span",{children:"Min"})]}),(0,we.jsxs)("div",{className:"input-group-mini",children:[(0,we.jsx)("label",{children:"Pause danach:"}),(0,we.jsx)("input",{type:"number",min:"0",max:"5",value:(null===(w=J.disciplines)||void 0===w||null===(N=w.Freefight)||void 0===N?void 0:N.breakAfter)||2,onChange:e=>ne("Freefight","breakAfter",e.target.value)}),(0,we.jsx)("span",{children:"Min"})]})]})]}),(0,we.jsxs)("div",{className:"discipline-settings-row",children:[(0,we.jsxs)("div",{className:"discipline-name-box",children:[(0,we.jsx)("span",{className:"discipline-icon",children:"\u26a1"}),(0,we.jsx)("span",{children:"Pointfighting / Semi"})]}),(0,we.jsxs)("div",{className:"discipline-inputs-box",children:[(0,we.jsxs)("div",{className:"input-group-mini",children:[(0,we.jsx)("label",{children:"Runden:"}),(0,we.jsx)("input",{type:"number",min:"1",max:"5",value:(null===(S=J.disciplines)||void 0===S||null===(_=S.Pointfighting)||void 0===_?void 0:_.rounds)||2,onChange:e=>ne("Pointfighting","rounds",e.target.value)})]}),(0,we.jsxs)("div",{className:"input-group-mini",children:[(0,we.jsx)("label",{children:"Rundendauer:"}),(0,we.jsx)("input",{type:"number",min:"1",max:"5",value:(null===(C=J.disciplines)||void 0===C||null===(z=C.Pointfighting)||void 0===z?void 0:z.roundDuration)||2,onChange:e=>ne("Pointfighting","roundDuration",e.target.value)}),(0,we.jsx)("span",{children:"Min"})]}),(0,we.jsxs)("div",{className:"input-group-mini",children:[(0,we.jsx)("label",{children:"Rundenpause:"}),(0,we.jsx)("input",{type:"number",min:"0",max:"3",value:(null===(T=J.disciplines)||void 0===T||null===(A=T.Pointfighting)||void 0===A?void 0:A.breakBetweenRounds)||1,onChange:e=>ne("Pointfighting","breakBetweenRounds",e.target.value)}),(0,we.jsx)("span",{children:"Min"})]}),(0,we.jsxs)("div",{className:"input-group-mini",children:[(0,we.jsx)("label",{children:"Pause danach:"}),(0,we.jsx)("input",{type:"number",min:"0",max:"5",value:(null===(E=J.disciplines)||void 0===E||null===(D=E.Pointfighting)||void 0===D?void 0:D.breakAfter)||2,onChange:e=>ne("Pointfighting","breakAfter",e.target.value)}),(0,we.jsx)("span",{children:"Min"})]})]})]})]}),(0,we.jsxs)("div",{className:"zeitplan-actions-box",children:[(0,we.jsx)("button",{className:"btn-save-jp",onClick:()=>async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];U(!0);try{const t=localStorage.getItem("token"),n=e?"/api/schedule/zeitplan-einstellungen/default":`/api/schedule/zeitplan-einstellungen/${null===P||void 0===P?void 0:P.turnier_id}`,r=await fetch(n,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(J)}),a=await r.json();a.success?alert(e?"Standard-Einstellungen gespeichert!":"Turnier-Einstellungen gespeichert!"):alert("Fehler: "+a.error)}catch(Zo){alert("Fehler beim Speichern: "+Zo.message)}finally{U(!1)}}(!P),disabled:K,children:K?"Speichern...":P?"Turnier-Einstellungen speichern":"Standard-Einstellungen speichern"}),P&&"turnier"===Y&&(0,we.jsx)("button",{className:"btn-reset-jp",onClick:async()=>{if(P&&window.confirm("Zeitplan-Einstellungen auf Standard zur\xfccksetzen?"))try{const e=localStorage.getItem("token"),t=await fetch(`/api/schedule/zeitplan-einstellungen/${P.turnier_id}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}});(await t.json()).success&&(await te(),alert("Auf Standard zur\xfcckgesetzt!"))}catch(Zo){alert("Fehler: "+Zo.message)}},disabled:K,children:"Auf Standard zur\xfccksetzen"})]})]})]})},yo=[{value:"matte",label:"Matte",icon:"\ud83e\udd4b"},{value:"tatami",label:"Tatami",icon:"\ud83d\udfeb"},{value:"ring",label:"Ring",icon:"\ud83d\udd35"},{value:"arena",label:"Arena",icon:"\ud83c\udfdf\ufe0f"},{value:"octagon",label:"Octagon",icon:"\ud83d\udd37"}],ko=[{value:"frei",label:"Frei",color:"#4CAF50",icon:"\ud83d\udfe2"},{value:"besetzt",label:"Besetzt",color:"#8B0000",icon:"\ud83d\udd34"},{value:"pause",label:"Pause",color:"#d4af37",icon:"\u23f8\ufe0f"},{value:"inaktiv",label:"Inaktiv",color:"#666",icon:"\u26ab"}],wo=["#8B0000","#1a5c1a","#1a3c6e","#6e1a6e","#d4af37","#333333"];const No=function(e){let{turnierId:t}=e;const[n,r]=(0,s.useState)([]),[a,i]=(0,s.useState)([]),[l,o]=(0,s.useState)(t||null),[c,d]=(0,s.useState)(!0),[u,h]=(0,s.useState)(!1),[m,p]=(0,s.useState)(null),[f,g]=(0,s.useState)(!1),[x,v]=(0,s.useState)({name:"",nummer:1,typ:"matte",groesse:"8x8m",standort:"",farbe:"#8B0000",prioritaet:1,hat_anzeigetafel:!1,hat_kamera:!1,hat_timer:!0,anzahl_kampfrichter:3,hat_schreiber:!0,anzahl_schreiber:1});(0,s.useEffect)((()=>{b()}),[]),(0,s.useEffect)((()=>{l&&j()}),[l]);const b=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/turniere",{headers:{Authorization:`Bearer ${e}`}}),n=await t.json();n.data&&(i(n.data),!l&&n.data.length>0&&o(n.data[0].turnier_id)),d(!1)}catch(Zo){console.error("Fehler beim Laden der Turniere:",Zo),d(!1)}},j=async()=>{if(l)try{const e=localStorage.getItem("token"),t=await fetch(`/api/kampfflaechen/${l}`,{headers:{Authorization:`Bearer ${e}`}}),n=await t.json();n.success&&r(n.data)}catch(Zo){console.error("Fehler beim Laden der Kampffl\xe4chen:",Zo)}},y=()=>{p(null);const e=n.length>0?Math.max(...n.map((e=>e.nummer)))+1:1;k(),v((t=>({...t,nummer:e,name:`Matte ${e}`}))),h(!0)},k=()=>{v({name:"",nummer:1,typ:"matte",groesse:"8x8m",standort:"",farbe:"#8B0000",prioritaet:1,hat_anzeigetafel:!1,hat_kamera:!1,hat_timer:!0,anzahl_kampfrichter:3,hat_schreiber:!0,anzahl_schreiber:1})},w=e=>{const t=yo.find((t=>t.value===e));return t?t.icon:"\ud83e\udd4b"};return c?(0,we.jsxs)("div",{className:"kampfflaechen-jp loading",children:[(0,we.jsx)("div",{className:"loading-kanji-jp",children:"\u7573"}),(0,we.jsx)("p",{children:"Lade Kampffl\xe4chen..."})]}):(0,we.jsxs)("div",{className:"kampfflaechen-jp",children:[(0,we.jsxs)("div",{className:"kf-header-jp",children:[(0,we.jsxs)("div",{className:"header-title-jp",children:[(0,we.jsx)("span",{className:"header-kanji",children:"\u7573"}),(0,we.jsxs)("div",{className:"header-text-jp",children:[(0,we.jsx)("h1",{children:"Kampffl\xe4chen"}),(0,we.jsx)("p",{children:"Matten, Arenen und Kampfbereiche verwalten"})]})]}),(0,we.jsxs)("div",{className:"header-actions-jp",children:[(0,we.jsx)("button",{className:"btn-auto-jp",onClick:async()=>{const e=prompt("Wie viele Kampffl\xe4chen sollen erstellt werden?","4");if(e)try{const t=localStorage.getItem("token"),n=await fetch(`/api/kampfflaechen/${l}/auto-generate`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({anzahl:parseInt(e)})}),r=await n.json();r.success&&(await j(),alert(r.message))}catch(Zo){alert("Fehler: "+Zo.message)}},children:"\u26a1 Auto-Generieren"}),(0,we.jsx)("button",{className:"btn-add-jp",onClick:y,children:"\u2795 Neue Fl\xe4che"})]})]}),(0,we.jsxs)("div",{className:"turnier-selector-jp",children:[(0,we.jsx)("label",{children:"Turnier:"}),(0,we.jsx)("select",{value:l||"",onChange:e=>o(parseInt(e.target.value)),children:a.map((e=>(0,we.jsxs)("option",{value:e.turnier_id,children:[e.name," (",new Date(e.datum).toLocaleDateString("de-DE"),")"]},e.turnier_id)))})]}),0===n.length?(0,we.jsxs)("div",{className:"empty-state-jp",children:[(0,we.jsx)("div",{className:"empty-icon",children:"\ud83e\udd4b"}),(0,we.jsx)("h3",{children:"Keine Kampffl\xe4chen vorhanden"}),(0,we.jsx)("p",{children:"Erstellen Sie Kampffl\xe4chen f\xfcr dieses Turnier"}),(0,we.jsx)("button",{className:"btn-add-jp",onClick:y,children:"\u2795 Erste Fl\xe4che erstellen"})]}):(0,we.jsx)("div",{className:"flaechen-grid-jp",children:n.map((e=>{const t=e.aktueller_kampf_id||e.kaempfer1,n=t?"besetzt":e.status,r=(a=n,ko.find((e=>e.value===a))||ko[0]);var a;return(0,we.jsxs)("div",{className:`flaeche-card-jp status-${n} ${t?"hat-kampf":""}`,style:{"--flaeche-color":e.farbe},children:[(0,we.jsxs)("div",{className:"flaeche-header-jp",children:[(0,we.jsx)("div",{className:"flaeche-nummer-jp",style:{background:e.farbe},children:e.nummer}),(0,we.jsxs)("div",{className:"flaeche-info-jp",children:[(0,we.jsx)("h3",{children:e.name}),(0,we.jsxs)("span",{className:"flaeche-typ-jp",children:[w(e.typ)," ",e.typ]})]}),(0,we.jsxs)("div",{className:"flaeche-status-jp "+(t?"pulsing":""),style:{background:r.color},children:[r.icon," ",r.label]})]}),"besetzt"===e.status&&e.kaempfer1&&(0,we.jsxs)("div",{className:"flaeche-kampf-jp",children:[(0,we.jsxs)("div",{className:"kampf-header-jp",children:[(0,we.jsx)("span",{children:"\u2694\ufe0f Aktueller Kampf"}),(0,we.jsx)("span",{className:"bracket-name-jp",children:e.bracket_name})]}),(0,we.jsxs)("div",{className:"kampf-teilnehmer-jp",children:[(0,we.jsxs)("div",{className:"teilnehmer-jp rot",children:[(0,we.jsx)("span",{className:"name-jp",children:e.kaempfer1}),(0,we.jsx)("span",{className:"verein-jp",children:e.verein1})]}),(0,we.jsx)("div",{className:"vs-jp",children:"VS"}),(0,we.jsxs)("div",{className:"teilnehmer-jp blau",children:[(0,we.jsx)("span",{className:"name-jp",children:e.kaempfer2}),(0,we.jsx)("span",{className:"verein-jp",children:e.verein2})]})]})]}),(0,we.jsxs)("div",{className:"flaeche-details-jp",children:[(0,we.jsxs)("div",{className:"details-row-jp",children:[e.groesse&&(0,we.jsxs)("span",{className:"detail-item-jp",children:["\ud83d\udcd0 ",e.groesse]}),e.standort&&(0,we.jsxs)("span",{className:"detail-item-jp",children:["\ud83d\udccd ",e.standort]})]}),(0,we.jsxs)("div",{className:"details-row-jp personal-row-jp",children:[(0,we.jsxs)("span",{className:"detail-item-jp",title:"Kampfrichter",children:["\ud83d\udc68\u200d\u2696\ufe0f ",e.anzahl_kampfrichter||3," KR"]}),!1!==e.hat_schreiber&&(0,we.jsxs)("span",{className:"detail-item-jp",title:"Schreiber",children:["\ud83d\udcdd ",e.anzahl_schreiber||1," Schreiber"]}),(0,we.jsxs)("div",{className:"ausstattung-jp",children:[e.hat_timer&&(0,we.jsx)("span",{title:"Timer",children:"\u23f1\ufe0f"}),e.hat_anzeigetafel&&(0,we.jsx)("span",{title:"Anzeigetafel",children:"\ud83d\udcfa"}),e.hat_kamera&&(0,we.jsx)("span",{title:"Kamera",children:"\ud83d\udcf9"})]})]})]}),(0,we.jsx)("div",{className:"status-buttons-jp",children:ko.map((r=>(0,we.jsxs)("button",{className:"status-btn-jp "+(n===r.value?"active":""),style:{"--status-color":r.color},onClick:()=>(async(e,t)=>{try{const n=localStorage.getItem("token");await fetch(`/api/kampfflaechen/${e}/status`,{method:"PUT",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({status:t})}),await j()}catch(Zo){console.error("Fehler beim Status-Update:",Zo)}})(e.kampfflaeche_id,r.value),disabled:t&&"frei"===r.value,title:t&&"frei"===r.value?"Kampf muss erst beendet werden":"",children:[r.icon," ",r.label]},r.value)))}),(0,we.jsxs)("div",{className:"flaeche-actions-jp",children:[(0,we.jsx)("button",{className:"btn-edit-jp",onClick:()=>(e=>{p(e),v({name:e.name,nummer:e.nummer,typ:e.typ,groesse:e.groesse||"",standort:e.standort||"",farbe:e.farbe||"#8B0000",prioritaet:e.prioritaet||1,hat_anzeigetafel:e.hat_anzeigetafel||!1,hat_kamera:e.hat_kamera||!1,hat_timer:!1!==e.hat_timer,anzahl_kampfrichter:e.anzahl_kampfrichter||3,hat_schreiber:!1!==e.hat_schreiber,anzahl_schreiber:e.anzahl_schreiber||1}),h(!0)})(e),children:"\u270f\ufe0f Bearbeiten"}),(0,we.jsx)("button",{className:"btn-delete-jp",onClick:()=>(async e=>{if(window.confirm("Kampffl\xe4che wirklich l\xf6schen?"))try{const t=localStorage.getItem("token"),n=await fetch(`/api/kampfflaechen/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});(await n.json()).success&&await j()}catch(Zo){alert("Fehler beim L\xf6schen: "+Zo.message)}})(e.kampfflaeche_id),children:"\ud83d\uddd1\ufe0f"})]})]},e.kampfflaeche_id)}))}),u&&(0,we.jsx)("div",{className:"modal-overlay-jp",onClick:()=>h(!1),children:(0,we.jsxs)("div",{className:"modal-content-jp",onClick:e=>e.stopPropagation(),children:[(0,we.jsxs)("div",{className:"modal-header-jp",children:[(0,we.jsx)("h2",{children:m?"\u270f\ufe0f Kampffl\xe4che bearbeiten":"\u2795 Neue Kampffl\xe4che"}),(0,we.jsx)("button",{className:"modal-close-jp",onClick:()=>h(!1),children:"\u2715"})]}),(0,we.jsxs)("div",{className:"modal-body-jp",children:[(0,we.jsxs)("div",{className:"form-row-jp",children:[(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Name *"}),(0,we.jsx)("input",{type:"text",value:x.name,onChange:e=>v({...x,name:e.target.value}),placeholder:"z.B. Matte 1"})]}),(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Nummer *"}),(0,we.jsx)("input",{type:"number",min:"1",value:x.nummer,onChange:e=>{var t;const n=parseInt(e.target.value)||1,r=(null===(t=yo.find((e=>e.value===x.typ)))||void 0===t?void 0:t.label)||"Matte";v({...x,nummer:n,name:`${r} ${n}`})}})]})]}),(0,we.jsxs)("div",{className:"form-row-jp",children:[(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Typ"}),(0,we.jsx)("select",{value:x.typ,onChange:e=>{var t;const n=e.target.value,r=(null===(t=yo.find((e=>e.value===n)))||void 0===t?void 0:t.label)||"Matte";v({...x,typ:n,name:`${r} ${x.nummer}`})},children:yo.map((e=>(0,we.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value)))})]}),(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Gr\xf6\xdfe"}),(0,we.jsx)("input",{type:"text",value:x.groesse,onChange:e=>v({...x,groesse:e.target.value}),placeholder:"z.B. 8x8m"})]})]}),(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Standort"}),(0,we.jsx)("input",{type:"text",value:x.standort,onChange:e=>v({...x,standort:e.target.value}),placeholder:"z.B. Halle A, Bereich Nord"})]}),(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Farbe"}),(0,we.jsx)("div",{className:"color-picker-jp",children:wo.map((e=>(0,we.jsx)("button",{className:"color-btn-jp "+(x.farbe===e?"active":""),style:{background:e},onClick:()=>v({...x,farbe:e})},e)))})]}),(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Personal-Bedarf"}),(0,we.jsxs)("div",{className:"personal-config-jp",children:[(0,we.jsxs)("div",{className:"personal-item-jp",children:[(0,we.jsx)("label",{children:"\ud83d\udc68\u200d\u2696\ufe0f Kampfrichter:"}),(0,we.jsxs)("select",{value:x.anzahl_kampfrichter,onChange:e=>v({...x,anzahl_kampfrichter:parseInt(e.target.value)}),children:[(0,we.jsx)("option",{value:1,children:"1 Kampfrichter"}),(0,we.jsx)("option",{value:2,children:"2 Kampfrichter"}),(0,we.jsx)("option",{value:3,children:"3 Kampfrichter (Standard)"}),(0,we.jsx)("option",{value:4,children:"4 Kampfrichter"}),(0,we.jsx)("option",{value:5,children:"5 Kampfrichter"})]})]}),(0,we.jsxs)("div",{className:"personal-item-jp",children:[(0,we.jsxs)("label",{className:"checkbox-inline-jp",children:[(0,we.jsx)("input",{type:"checkbox",checked:x.hat_schreiber,onChange:e=>v({...x,hat_schreiber:e.target.checked})}),(0,we.jsx)("span",{children:"\ud83d\udcdd Schreiber"})]}),x.hat_schreiber&&(0,we.jsxs)("select",{value:x.anzahl_schreiber,onChange:e=>v({...x,anzahl_schreiber:parseInt(e.target.value)}),children:[(0,we.jsx)("option",{value:1,children:"1 Schreiber"}),(0,we.jsx)("option",{value:2,children:"2 Schreiber"})]})]})]})]}),(0,we.jsxs)("div",{className:"form-group-jp",children:[(0,we.jsx)("label",{children:"Ausstattung (Hardware vor Ort)"}),(0,we.jsxs)("div",{className:"checkbox-group-jp",children:[(0,we.jsxs)("label",{className:"checkbox-item-jp",title:"Countdown-Display f\xfcr Kampfzeit",children:[(0,we.jsx)("input",{type:"checkbox",checked:x.hat_timer,onChange:e=>v({...x,hat_timer:e.target.checked})}),(0,we.jsx)("span",{children:"\u23f1\ufe0f Timer-Display"})]}),(0,we.jsxs)("label",{className:"checkbox-item-jp",title:"Punkte-Anzeigetafel",children:[(0,we.jsx)("input",{type:"checkbox",checked:x.hat_anzeigetafel,onChange:e=>v({...x,hat_anzeigetafel:e.target.checked})}),(0,we.jsx)("span",{children:"\ud83d\udcfa Anzeigetafel"})]}),(0,we.jsxs)("label",{className:"checkbox-item-jp",title:"Kamera f\xfcr Streaming/Aufzeichnung",children:[(0,we.jsx)("input",{type:"checkbox",checked:x.hat_kamera,onChange:e=>v({...x,hat_kamera:e.target.checked})}),(0,we.jsx)("span",{children:"\ud83d\udcf9 Kamera"})]})]})]})]}),(0,we.jsxs)("div",{className:"modal-footer-jp",children:[(0,we.jsx)("button",{className:"btn-cancel-jp",onClick:()=>h(!1),children:"Abbrechen"}),(0,we.jsx)("button",{className:"btn-save-jp",onClick:m?async()=>{if(m){g(!0);try{const e=localStorage.getItem("token"),t=await fetch(`/api/kampfflaechen/${m.kampfflaeche_id}`,{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(x)}),n=await t.json();n.success?(await j(),h(!1),p(null),k()):alert("Fehler: "+n.message)}catch(Zo){alert("Fehler beim Aktualisieren: "+Zo.message)}finally{g(!1)}}}:async()=>{g(!0);try{const e=localStorage.getItem("token"),t=await fetch(`/api/kampfflaechen/${l}`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(x)}),n=await t.json();n.success?(await j(),h(!1),k()):alert("Fehler: "+n.message)}catch(Zo){alert("Fehler beim Erstellen: "+Zo.message)}finally{g(!1)}},disabled:f||!x.name,children:f?"Speichern...":m?"Aktualisieren":"Erstellen"})]})]})})]})},So=[{value:"hauptkampfrichter",label:"Hauptkampfrichter",icon:"\ud83d\udc68\u200d\u2696\ufe0f",color:"#ff3333"},{value:"seitenkampfrichter",label:"Seitenkampfrichter",icon:"\u2696\ufe0f",color:"#4CAF50"},{value:"punktrichter",label:"Punktrichter",icon:"\ud83d\udcdd",color:"#3b82f6"},{value:"zeitnehmer",label:"Zeitnehmer",icon:"\u23f1\ufe0f",color:"#9333ea"},{value:"mattenleiter",label:"Mattenleiter",icon:"\ud83c\udfaf",color:"#f7931e"},{value:"schreiber",label:"Schreiber",icon:"\u270d\ufe0f",color:"#6b7280"},{value:"helfer",label:"Helfer",icon:"\ud83e\udd1d",color:"#64748b"},{value:"arzt",label:"Arzt",icon:"\ud83d\udc68\u200d\u2695\ufe0f",color:"#ef4444"},{value:"sanitaeter",label:"Sanit\xe4ter",icon:"\ud83d\ude91",color:"#f87171"}],_o=[{value:"keine",label:"Keine Lizenz",icon:"\u26aa"},{value:"c_lizenz",label:"C-Lizenz",icon:"\ud83d\udfe2"},{value:"b_lizenz",label:"B-Lizenz",icon:"\ud83d\udd35"},{value:"a_lizenz",label:"A-Lizenz",icon:"\ud83d\udfe1"},{value:"international",label:"International",icon:"\ud83d\udd34"}],Co=[{value:"verfuegbar",label:"Verf\xfcgbar",color:"#4CAF50",icon:"\ud83d\udfe2"},{value:"im_einsatz",label:"Im Einsatz",color:"#ff3333",icon:"\ud83d\udd34"},{value:"pause",label:"Pause",color:"#f7931e",icon:"\u2615"},{value:"abwesend",label:"Abwesend",color:"#666",icon:"\u26ab"}];const zo=function(e){let{turnierId:t}=e;const[n,r]=(0,s.useState)([]),[a,i]=(0,s.useState)([]),[l,o]=(0,s.useState)(t||null),[c,d]=(0,s.useState)(!0),[u,h]=(0,s.useState)(!1),[m,p]=(0,s.useState)(null),[f,g]=(0,s.useState)(!1),[x,v]=(0,s.useState)("uebersicht"),[b,j]=(0,s.useState)("alle"),[y,k]=(0,s.useState)({}),[w,N]=(0,s.useState)({vorname:"",nachname:"",email:"",telefon:"",primaer_rolle:"helfer",qualifikation:"keine",lizenz_nummer:"",verband:"",notizen:"",erfahrung_jahre:0});(0,s.useEffect)((()=>{S(),_()}),[]),(0,s.useEffect)((()=>{l&&_()}),[l]);const S=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/turniere",{headers:{Authorization:`Bearer ${e}`}}),n=await t.json();n.data&&(i(n.data),!l&&n.data.length>0&&o(n.data[0].turnier_id))}catch(Zo){console.error("Fehler beim Laden der Turniere:",Zo)}},_=async()=>{d(!0);try{const e=localStorage.getItem("token"),t=await fetch("/api/personal",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json();if(e.success){const t=e.data.map((e=>({id:e.personal_id,name:e.name||`${e.vorname} ${e.nachname}`,vorname:e.vorname,nachname:e.nachname,email:e.email,telefon:e.telefon,rolle:e.primaer_rolle,qualifikation:e.qualifikation,lizenz_nummer:e.lizenz_nummer,verband:e.verband,notizen:e.notizen,erfahrung_jahre:e.erfahrung_jahre,anzahl_turniere:e.anzahl_turniere,status:"verfuegbar",matte:null})));r(t)}}else r([])}catch(Zo){console.error("Fehler beim Laden des Personals:",Zo),r([])}finally{d(!1)}},C=(e,t)=>{r(n.map((n=>n.id===e?{...n,matte:t,status:t?"im_einsatz":"verfuegbar"}:n)))},z=()=>{p(null),T(),h(!0)},T=()=>{N({vorname:"",nachname:"",email:"",telefon:"",primaer_rolle:"helfer",qualifikation:"keine",lizenz_nummer:"",verband:"",notizen:"",erfahrung_jahre:0})},A=e=>So.find((t=>t.value===e))||So[6],E="alle"===b?n:n.filter((e=>e.rolle===b)),D={gesamt:n.length,verfuegbar:n.filter((e=>"verfuegbar"===e.status)).length,imEinsatz:n.filter((e=>"im_einsatz"===e.status)).length,pause:n.filter((e=>"pause"===e.status)).length};return c?(0,we.jsxs)("div",{className:"staff-manager loading",children:[(0,we.jsx)("div",{className:"loading-spinner"}),(0,we.jsx)("p",{children:"Lade Staff-Daten..."})]}):(0,we.jsxs)("div",{className:"staff-manager",children:[(0,we.jsxs)("div",{className:"staff-header",children:[(0,we.jsxs)("div",{className:"header-title",children:[(0,we.jsx)("span",{className:"header-icon",children:"\ud83d\udc65"}),(0,we.jsxs)("div",{className:"header-text",children:[(0,we.jsx)("h1",{children:"Staff Management"}),(0,we.jsx)("p",{children:"Kampfrichter, Zeitnehmer und Helfer verwalten"})]})]}),(0,we.jsx)("div",{className:"header-actions",children:(0,we.jsx)("button",{className:"btn-add",onClick:z,children:"+ Neuer Mitarbeiter"})})]}),(0,we.jsxs)("div",{className:"staff-stats",children:[(0,we.jsxs)("div",{className:"stat-card",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\ud83d\udc65"}),(0,we.jsxs)("div",{className:"stat-info",children:[(0,we.jsx)("span",{className:"stat-value",children:D.gesamt}),(0,we.jsx)("span",{className:"stat-label",children:"Gesamt"})]})]}),(0,we.jsxs)("div",{className:"stat-card verfuegbar",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\ud83d\udfe2"}),(0,we.jsxs)("div",{className:"stat-info",children:[(0,we.jsx)("span",{className:"stat-value",children:D.verfuegbar}),(0,we.jsx)("span",{className:"stat-label",children:"Verf\xfcgbar"})]})]}),(0,we.jsxs)("div",{className:"stat-card einsatz",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\ud83d\udd34"}),(0,we.jsxs)("div",{className:"stat-info",children:[(0,we.jsx)("span",{className:"stat-value",children:D.imEinsatz}),(0,we.jsx)("span",{className:"stat-label",children:"Im Einsatz"})]})]}),(0,we.jsxs)("div",{className:"stat-card pause",children:[(0,we.jsx)("div",{className:"stat-icon",children:"\u2615"}),(0,we.jsxs)("div",{className:"stat-info",children:[(0,we.jsx)("span",{className:"stat-value",children:D.pause}),(0,we.jsx)("span",{className:"stat-label",children:"Pause"})]})]})]}),(0,we.jsxs)("div",{className:"staff-tabs",children:[(0,we.jsx)("button",{className:"tab-btn "+("uebersicht"===x?"active":""),onClick:()=>v("uebersicht"),children:"\ud83d\udccb \xdcbersicht"}),(0,we.jsx)("button",{className:"tab-btn "+("einsatzplan"===x?"active":""),onClick:()=>v("einsatzplan"),children:"\ud83d\udcc5 Einsatzplan"}),(0,we.jsx)("button",{className:"tab-btn "+("matten"===x?"active":""),onClick:()=>v("matten"),children:"\ud83e\udd4b Matten-Zuweisung"})]}),(0,we.jsxs)("div",{className:"staff-filter",children:[(0,we.jsx)("button",{className:"filter-btn "+("alle"===b?"active":""),onClick:()=>j("alle"),children:"\ud83d\udc65 Alle"}),So.map((e=>(0,we.jsxs)("button",{className:"filter-btn "+(b===e.value?"active":""),style:{"--filter-color":e.color},onClick:()=>j(e.value),children:[e.icon," ",e.label]},e.value))),(0,we.jsxs)("span",{className:"filter-count",children:[E.length," Mitarbeiter"]})]}),"uebersicht"===x&&(0,we.jsx)("div",{className:"staff-grid",children:0===E.length?(0,we.jsxs)("div",{className:"empty-state",children:[(0,we.jsx)("div",{className:"empty-icon",children:"\ud83d\udc65"}),(0,we.jsx)("h3",{children:"Keine Mitarbeiter gefunden"}),(0,we.jsx)("p",{children:"F\xfcgen Sie Kampfrichter und Helfer hinzu"}),(0,we.jsx)("button",{className:"btn-add",onClick:z,children:"+ Ersten Mitarbeiter hinzuf\xfcgen"})]}):E.map((e=>{const t=A(e.rolle),a=(i=e.qualifikation,_o.find((e=>e.value===i))||_o[0]);var i;const s=(l=e.status,Co.find((e=>e.value===l))||Co[0]);var l;const o=y[e.id];return(0,we.jsxs)("div",{className:`staff-card status-${e.status} ${o?"expanded":"collapsed"}`,style:{"--rolle-color":t.color},children:[(0,we.jsxs)("div",{className:"staff-card-header",onClick:()=>{return t=e.id,void k((e=>({...e,[t]:!e[t]})));var t},children:[(0,we.jsx)("div",{className:"staff-avatar",style:{background:t.color},children:e.name.charAt(0).toUpperCase()}),(0,we.jsxs)("div",{className:"staff-info",children:[(0,we.jsx)("h3",{children:e.name}),(0,we.jsxs)("span",{className:"staff-rolle",children:[t.icon," ",t.label]})]}),(0,we.jsxs)("div",{className:"staff-status "+("im_einsatz"===e.status?"pulsing":""),style:{background:s.color},children:[s.icon," ",s.label]}),(0,we.jsx)("button",{className:"card-toggle",children:o?"\u25b2":"\u25bc"})]}),o&&(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("div",{className:"staff-details",children:[(0,we.jsxs)("div",{className:"detail-item",children:[(0,we.jsx)("span",{className:"detail-label",children:"Qualifikation:"}),(0,we.jsxs)("span",{className:"detail-value",children:[a.icon," ",a.label]})]}),e.lizenz_nummer&&(0,we.jsxs)("div",{className:"detail-item",children:[(0,we.jsx)("span",{className:"detail-label",children:"Lizenz:"}),(0,we.jsx)("span",{className:"detail-value",children:e.lizenz_nummer})]}),e.anzahl_turniere>0&&(0,we.jsxs)("div",{className:"detail-item",children:[(0,we.jsx)("span",{className:"detail-label",children:"Turniere:"}),(0,we.jsxs)("span",{className:"detail-value",children:[e.anzahl_turniere," Eins\xe4tze"]})]}),e.matte&&(0,we.jsxs)("div",{className:"detail-item highlight",children:[(0,we.jsx)("span",{className:"detail-label",children:"Eingesetzt auf:"}),(0,we.jsxs)("span",{className:"detail-value",children:["\ud83e\udd4b Matte ",e.matte]})]})]}),(0,we.jsx)("div",{className:"status-buttons",children:Co.map((t=>(0,we.jsx)("button",{className:"status-btn "+(e.status===t.value?"active":""),style:{"--status-color":t.color},onClick:()=>{return a=e.id,i=t.value,void r(n.map((e=>e.id===a?{...e,status:i}:e)));var a,i},children:t.icon},t.value)))}),(0,we.jsxs)("div",{className:"staff-actions",children:[(0,we.jsx)("button",{className:"btn-edit",onClick:()=>(e=>{var t,n;p(e),N({vorname:e.vorname||(null===(t=e.name)||void 0===t?void 0:t.split(" ")[0])||"",nachname:e.nachname||(null===(n=e.name)||void 0===n?void 0:n.split(" ").slice(1).join(" "))||"",email:e.email||"",telefon:e.telefon||"",primaer_rolle:e.rolle,qualifikation:e.qualifikation,lizenz_nummer:e.lizenz_nummer||"",verband:e.verband||"",notizen:e.notizen||"",erfahrung_jahre:e.erfahrung_jahre||0}),h(!0)})(e),children:"Bearbeiten"}),(0,we.jsx)("button",{className:"btn-delete",onClick:()=>(async e=>{if(window.confirm("Mitarbeiter wirklich deaktivieren?"))try{const t=localStorage.getItem("token");(await fetch(`/api/personal/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok&&await _()}catch(Zo){console.error("Fehler beim L\xf6schen:",Zo)}})(e.id),children:"\ud83d\uddd1\ufe0f"})]})]})]},e.id)}))}),"einsatzplan"===x&&(0,we.jsx)("div",{className:"einsatzplan",children:(0,we.jsxs)("div",{className:"coming-soon",children:[(0,we.jsx)("span",{className:"icon",children:"\ud83d\udcc5"}),(0,we.jsx)("h3",{children:"Einsatzplan"}),(0,we.jsx)("p",{children:"Zeitliche Planung der Eins\xe4tze - Demn\xe4chst verf\xfcgbar"})]})}),"matten"===x&&(0,we.jsx)("div",{className:"matten-zuweisung",children:(0,we.jsx)("div",{className:"matten-grid",children:[1,2,3,4].map((e=>{const t=n.filter((t=>t.matte===e));return(0,we.jsxs)("div",{className:"matte-box",children:[(0,we.jsxs)("div",{className:"matte-header",children:[(0,we.jsxs)("span",{className:"matte-nummer",children:["\ud83e\udd4b Matte ",e]}),(0,we.jsxs)("span",{className:"matte-count",children:[t.length," Mitarbeiter"]})]}),(0,we.jsxs)("div",{className:"matte-staff",children:[t.map((e=>(0,we.jsxs)("div",{className:"matte-staff-item",children:[(0,we.jsxs)("span",{children:[A(e.rolle).icon," ",e.name]}),(0,we.jsx)("button",{className:"btn-remove",onClick:()=>C(e.id,null),children:"\u2715"})]},e.id))),0===t.length&&(0,we.jsx)("p",{className:"no-staff",children:"Keine Zuweisung"})]}),(0,we.jsx)("div",{className:"matte-assign",children:(0,we.jsxs)("select",{onChange:t=>{t.target.value&&(C(parseInt(t.target.value),e),t.target.value="")},children:[(0,we.jsx)("option",{value:"",children:"+ Mitarbeiter zuweisen"}),n.filter((e=>!e.matte&&"verfuegbar"===e.status)).map((e=>(0,we.jsxs)("option",{value:e.id,children:[A(e.rolle).icon," ",e.name]},e.id)))]})})]},e)}))})}),u&&(0,we.jsx)("div",{className:"modal-overlay",onClick:()=>h(!1),children:(0,we.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,we.jsxs)("div",{className:"modal-header",children:[(0,we.jsx)("h2",{children:m?"Mitarbeiter bearbeiten":"Neuer Mitarbeiter"}),(0,we.jsx)("button",{className:"modal-close",onClick:()=>h(!1),children:"\u2715"})]}),(0,we.jsxs)("div",{className:"modal-body",children:[(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Vorname *"}),(0,we.jsx)("input",{type:"text",value:w.vorname,onChange:e=>N({...w,vorname:e.target.value}),placeholder:"Vorname"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Nachname *"}),(0,we.jsx)("input",{type:"text",value:w.nachname,onChange:e=>N({...w,nachname:e.target.value}),placeholder:"Nachname"})]})]}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"E-Mail"}),(0,we.jsx)("input",{type:"email",value:w.email,onChange:e=>N({...w,email:e.target.value}),placeholder:"email@beispiel.de"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Telefon"}),(0,we.jsx)("input",{type:"tel",value:w.telefon,onChange:e=>N({...w,telefon:e.target.value}),placeholder:"+49 123 456789"})]})]}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Prim\xe4re Rolle"}),(0,we.jsx)("select",{value:w.primaer_rolle,onChange:e=>N({...w,primaer_rolle:e.target.value}),children:So.map((e=>(0,we.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value)))})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Qualifikation"}),(0,we.jsx)("select",{value:w.qualifikation,onChange:e=>N({...w,qualifikation:e.target.value}),children:_o.map((e=>(0,we.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value)))})]})]}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Lizenz-Nr."}),(0,we.jsx)("input",{type:"text",value:w.lizenz_nummer,onChange:e=>N({...w,lizenz_nummer:e.target.value}),placeholder:"z.B. DTU-12345"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Verband"}),(0,we.jsx)("input",{type:"text",value:w.verband,onChange:e=>N({...w,verband:e.target.value}),placeholder:"z.B. DTU, WTF"})]})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Erfahrung (Jahre)"}),(0,we.jsx)("input",{type:"number",min:"0",max:"50",value:w.erfahrung_jahre,onChange:e=>N({...w,erfahrung_jahre:parseInt(e.target.value)||0})})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Notizen"}),(0,we.jsx)("textarea",{value:w.notizen,onChange:e=>N({...w,notizen:e.target.value}),placeholder:"Besondere Hinweise, Einschr\xe4nkungen...",rows:3})]})]}),(0,we.jsxs)("div",{className:"modal-footer",children:[(0,we.jsx)("button",{className:"btn-cancel",onClick:()=>h(!1),children:"Abbrechen"}),(0,we.jsx)("button",{className:"btn-save",onClick:async()=>{g(!0);try{const e=localStorage.getItem("token"),t=m?`/api/personal/${m.id}`:"/api/personal",n=m?"PUT":"POST",r=await fetch(t,{method:n,headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(w)}),a=await r.json();a.success?(await _(),h(!1),T()):alert(a.message||"Fehler beim Speichern")}catch(Zo){console.error("Fehler beim Speichern:",Zo),alert("Fehler beim Speichern")}finally{g(!1)}},disabled:f||!w.vorname||!w.nachname,children:f?"Speichern...":m?"Aktualisieren":"Hinzuf\xfcgen"})]})]})})]})};const To=function(e){var t,n;let{selectedTurnier:r}=e;const[a,i]=(0,s.useState)([]),[l,o]=(0,s.useState)([]),[c,d]=(0,s.useState)(!0),[u,h]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[f,g]=(0,s.useState)(!1),[x,v]=(0,s.useState)(null),[b,j]=(0,s.useState)("overview"),[y,k]=(0,s.useState)(null),[w,N]=(0,s.useState)("all"),[S,_]=(0,s.useState)(!1),[C,z]=(0,s.useState)(!1),[T,A]=(0,s.useState)({title:"",duration:15,description:""}),[E,D]=(0,s.useState)(!1),[B,R]=(0,s.useState)(!1),[F,L]=(0,s.useState)(null),[P,O]=(0,s.useState)(!1),[I,$]=(0,s.useState)(!1),[W,M]=(0,s.useState)([]),[K,U]=(0,s.useState)({name:"",schreiber:"",zeitnehmer:"",hauptkampfrichter:"",kampfrichterAnzahl:3,mattengroesse:"8x8",position:"",farbe:"#ef4444",disziplinen:[],equipment:{timer:!0,anzeigetafel:!0,matten:!0,firstAidKit:!0},notizen:""}),[V,q]=(0,s.useState)({hauptkampfrichter:"",kampfrichterAnzahl:3,schreiber:"",zeitnehmer:"",mattengroesse:"8x8",position:"",farbe:"#ef4444",disziplinen:["Formen","Pointfighting","Kickboxen"],equipment:{timer:!0,anzeigetafel:!0,matten:!0,firstAidKit:!0},notizen:""}),[G,H]=(0,s.useState)({rings:0,startTime:"09:00",pauseBetweenCategories:5,disciplines:{Formen:{durationPerPerson:3,breakAfter:1},Selbstverteidigung:{durationPerPerson:4,breakAfter:1},Kickboxen:{roundDuration:2,rounds:2,breakBetweenRounds:1,breakAfter:2},Freefight:{roundDuration:2,rounds:2,breakBetweenRounds:1,breakAfter:2},Pointfighting:{roundDuration:2,rounds:2,breakBetweenRounds:1,breakAfter:2},Bruchtest:{durationPerPerson:5,breakAfter:1},Grappling:{roundDuration:3,rounds:1,breakBetweenRounds:0,breakAfter:2},Kumite:{roundDuration:2,rounds:2,breakBetweenRounds:1,breakAfter:2},Default:{durationPerMatch:5,breakAfter:2}}}),[J,Z]=(0,s.useState)(!1),Y=(null===r||void 0===r?void 0:r.turnier_id)||(null===r||void 0===r?void 0:r.id),Q=(0,s.useCallback)((async()=>{if(Y)try{const e=localStorage.getItem("authToken")||localStorage.getItem("token"),t=await fetch(`/api/schedule/zeitplan-einstellungen/${Y}`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json();e.success&&e.data&&(H({rings:void 0!==e.data.rings?e.data.rings:0,startTime:e.data.start_time||"09:00",pauseBetweenCategories:e.data.pause_between_categories||5,disciplines:e.data.disciplines||G.disciplines}),Z(!0))}}catch(e){console.error("Fehler beim Laden der Einstellungen:",e)}}),[Y]),X=()=>{$(!0)},ee=(0,s.useCallback)((()=>{const e=G.rings+1,t={name:`Tatami ${e}`,schreiber:V.schreiber||"",zeitnehmer:V.zeitnehmer||"",hauptkampfrichter:V.hauptkampfrichter||"",kampfrichterAnzahl:V.kampfrichterAnzahl,mattengroesse:V.mattengroesse,position:V.position||"",farbe:V.farbe||["#ef4444","#f59e0b","#22c55e","#3b82f6","#8b5cf6","#ec4899"][e%6],disziplinen:[...V.disziplinen],equipment:{...V.equipment},notizen:V.notizen||"",ringNumber:e,createdAt:(new Date).toISOString()};M([...W,t]),H({...G,rings:e}),$(!1);const n=localStorage.getItem("authToken")||localStorage.getItem("token");fetch(`/api/schedule/zeitplan-einstellungen/${Y}`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({rings:e,start_time:G.startTime,pause_between_categories:G.pauseBetweenCategories,disciplines:G.disciplines,default_tatami:V,tatami_configs:[...W,t]})}).catch((e=>console.error("Fehler beim Speichern:",e)))}),[Y,G,V,W]),te=()=>{const e=G.rings+1;U({name:`Tatami ${e}`,schreiber:"",zeitnehmer:"",hauptkampfrichter:"",kampfrichterAnzahl:V.kampfrichterAnzahl,mattengroesse:V.mattengroesse,position:"",farbe:["#ef4444","#f59e0b","#22c55e","#3b82f6","#8b5cf6","#ec4899"][e%6],disziplinen:[...V.disziplinen],equipment:{...V.equipment},notizen:""}),$(!1),O(!0)},ne=(0,s.useCallback)((()=>{const e=G.rings+1,t={...K,ringNumber:e,createdAt:(new Date).toISOString()};M([...W,t]),H({...G,rings:e}),O(!1);const n=localStorage.getItem("authToken")||localStorage.getItem("token");fetch(`/api/schedule/zeitplan-einstellungen/${Y}`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({rings:e,start_time:G.startTime,pause_between_categories:G.pauseBetweenCategories,disciplines:G.disciplines,default_tatami:V,tatami_configs:[...W,t]})}).catch((e=>console.error("Fehler beim Speichern:",e)))}),[Y,G,K,W,V]),re=(0,s.useCallback)((async()=>{if(Y)try{d(!0);const e=localStorage.getItem("authToken")||localStorage.getItem("token"),t=await fetch(`/api/anmeldungen/admin/all?turnierId=${Y}`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json(),n=e.success?e.data:Array.isArray(e)?e:[];i(n)}try{const t=await fetch(`/api/schedule/kategorie-zeitplan/${Y}`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json();e.success&&e.data&&e.data.length>0&&o(e.data)}}catch(Yo){console.log("Kein bestehender Zeitplan")}}catch(e){console.error("Fehler beim Laden:",e)}finally{d(!1)}}),[Y]);(0,s.useEffect)((()=>{re(),Q()}),[re,Q]);const ae=e=>{if(!e)return"Default";const t=e.toUpperCase();if(t.startsWith("BBF-")||t.startsWith("UBF-")||t.startsWith("BWP-")||t.startsWith("UWP-"))return"Formen";if(t.startsWith("SD-")||t.toLowerCase().includes("selbst"))return"Selbstverteidigung";if(t.startsWith("BPF-")||t.startsWith("UPF-")||t.toLowerCase().includes("point"))return"Pointfighting";if(t.startsWith("BCF-")||t.startsWith("UCF-")||t.startsWith("K1-")||t.toLowerCase().includes("kick"))return"Kickboxen";if(t.startsWith("BB-")||t.toLowerCase().includes("bruch"))return"Bruchtest";if(t.startsWith("BG-")||t.startsWith("UG-"))return"Grappling";if(t.startsWith("BK-")||t.startsWith("UK-"))return"Kumite";const n=e.toLowerCase();return n.includes("form")||n.includes("hyong")||n.includes("tul")?"Formen":n.includes("free")||n.includes("ff")?"Freefight":"Default"},ie=(e,t)=>{const n=ae(e),r=G.disciplines[n]||G.disciplines.Default;if("Formen"===n||"Selbstverteidigung"===n||"Bruchtest"===n)return t*(r.durationPerPerson+r.breakAfter);if(["Kickboxen","Freefight","Pointfighting","Kumite","Grappling"].includes(n)){return Math.max(1,t-1)*(r.roundDuration*r.rounds+r.breakBetweenRounds*(r.rounds-1)+r.breakAfter)}return Math.ceil(t/2)*(r.durationPerMatch+r.breakAfter)},se=()=>{const e={};return a.forEach((t=>{const n=t.division_code||"Unbekannt";e[n]||(e[n]={count:0,participants:[],discipline:ae(n)}),e[n].count++;let r=99;if(t.geburtsdatum){const e=new Date(t.geburtsdatum);r=(new Date).getFullYear()-e.getFullYear()}e[n].participants.push({wettkampfer_id:t.wettkampfer_id,name:`${t.vorname} ${t.nachname}`,geburtsdatum:t.geburtsdatum,age:r})})),Object.values(e).forEach((e=>{e.participants.sort(((e,t)=>e.age-t.age))})),e},le=(0,s.useCallback)((()=>{if(0===l.length)return[];const e={};l.forEach((t=>{"category"===t.type&&t.division_code&&(e[t.division_code]={ring:t.ring,start_time:t.start_time,end_time:t.end_time,start_minutes:ce(t.start_time),end_minutes:ce(t.end_time)})}));const t={};a.forEach((n=>{const r=n.wettkampfer_id||`${n.vorname}-${n.nachname}`,a=e[n.division_code];a&&(t[r]||(t[r]={name:`${n.vorname} ${n.nachname}`,verein:n.verein_name,slots:[]}),t[r].slots.push({division_code:n.division_code,...a}))}));const n=[];return Object.entries(t).forEach((e=>{let[t,r]=e;if(!(r.slots.length<2))for(let a=0;a<r.slots.length;a++)for(let e=a+1;e<r.slots.length;e++){const i=r.slots[a],s=r.slots[e];i.ring!==s.ring&&i.start_minutes<s.end_minutes&&i.end_minutes>s.start_minutes&&n.push({wettkampfer_id:t,name:r.name,verein:r.verein,conflict:{slot1:i,slot2:s,message:`${i.division_code} (Tatami ${i.ring}, ${i.start_time}-${i.end_time}) \u2194 ${s.division_code} (Tatami ${s.ring}, ${s.start_time}-${s.end_time})`}})}})),n}),[a,l]),oe=(0,s.useCallback)((e=>{const t=l.filter((t=>t.ring===e&&"pause"!==t.type&&"free_content"!==t.type)).map((e=>({division_code:e.division_code,start_time:e.start_time,end_time:e.end_time,start_minutes:ce(e.start_time),end_minutes:ce(e.end_time)})));if(0===t.length)return[];const n={};a.forEach((e=>{const r=t.find((t=>t.division_code===e.division_code));if(r){const t=e.wettkampfer_id||`${e.vorname}-${e.nachname}`;n[t]||(n[t]={name:`${e.vorname} ${e.nachname}`,verein:e.verein_name,divisions:[],slots:[]}),n[t].divisions.push(e.division_code),n[t].slots.push(r)}}));return Object.entries(n).filter((e=>{let[t,n]=e;return n.divisions.length>1})).map((e=>{let[t,n]=e;const r=(e=>{for(let t=0;t<e.length;t++)for(let n=t+1;n<e.length;n++){const r=e[t],a=e[n];if(r.start_minutes<a.end_minutes&&r.end_minutes>a.start_minutes)return{hasConflict:!0,conflictSlots:[r.division_code,a.division_code],message:`${r.division_code} (${r.start_time}-${r.end_time}) \xfcberschneidet sich mit ${a.division_code} (${a.start_time}-${a.end_time})`}}return{hasConflict:!1}})(n.slots);return{wettkampfer_id:t,name:n.name,verein:n.verein,divisions:n.divisions,slots:n.slots,...r}}))}),[a,l]),ce=e=>{if(!e)return 0;const[t,n]=e.split(":").map(Number);return 60*t+n},de=e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},ue=e=>{const t=Math.floor(e/60),n=e%60;return t>0?`${t}h ${n}m`:`${n}m`},he=()=>{const e=se(),t=new Set(l.map((e=>e.division_code)));return Object.keys(e).filter((e=>!t.has(e)))},me=(e,t)=>{const n=se()[e];if(!n)return;const r=n.discipline,a=ie(e,n.count),i=l.filter((e=>e.ring===t));let s=G.startTime;if(i.length>0){const e=i.sort(((e,t)=>ce(t.end_time)-ce(e.end_time)))[0];s=de(ce(e.end_time)+G.pauseBetweenCategories)}const c={id:Date.now()+Math.random(),type:"category",division_code:e,discipline:r,ring:t,start_time:s,end_time:de(ce(s)+a),duration:a,participant_count:n.count,estimated_matches:"Formen"===r?n.count:Math.max(1,n.count-1),status:"pending",participants:n.participants};o([...l,c])},pe=()=>{h(!0);const e=se(),t=Object.keys(e).length;let n=G.rings;if(0===n){const e=Math.max(1,Math.min(6,Math.ceil(t/12)));if(!window.confirm(`Keine Tatamis vorhanden. Sollen ${e} Tatami(s) automatisch erstellt werden?`))return void h(!1);{n=e,H({...G,rings:n});const t=[];for(let e=1;e<=n;e++)t.push({name:`Tatami ${e}`,ringNumber:e,kampfrichterAnzahl:V.kampfrichterAnzahl,mattengroesse:V.mattengroesse,disziplinen:V.disziplinen,equipment:V.equipment,farbe:["#ef4444","#f59e0b","#22c55e","#3b82f6","#8b5cf6","#ec4899"][e%6],createdAt:(new Date).toISOString()});M(t);const r=localStorage.getItem("authToken")||localStorage.getItem("token");fetch(`/api/schedule/zeitplan-einstellungen/${Y}`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({rings:n,start_time:G.startTime,pause_between_categories:G.pauseBetweenCategories,disciplines:G.disciplines,default_tatami:V,tatami_configs:t})}).catch((e=>console.error("Fehler:",e)))}}const r=[],a={};Object.entries(e).forEach((e=>{let[t,n]=e;n.participants.forEach((e=>{const n=e.wettkampfer_id||e.name;a[n]||(a[n]=[]),a[n].push(t)}))}));const i=new Set(Object.entries(a).filter((e=>{let[t,n]=e;return n.length>1})).map((e=>{let[t]=e;return t}))),s=Object.entries(e).sort(((e,t)=>{const n={Formen:1,Bruchtest:2,Selbstverteidigung:3,Pointfighting:4,Kumite:5,Kickboxen:6,Grappling:7,Freefight:8,Default:9},r=n[e[1].discipline]||9,a=n[t[1].discipline]||9;if(r!==a)return r-a;return(e[1].participants.length>0?e[1].participants.reduce(((e,t)=>e+t.age),0)/e[1].participants.length:99)-(t[1].participants.length>0?t[1].participants.reduce(((e,t)=>e+t.age),0)/t[1].participants.length:99)})),l={};for(let o=1;o<=n;o++)l[o]=ce(G.startTime);const c={},d=(e,t,n,r)=>{let a=l[e];const s=[];if(n.participants.forEach((e=>{const t=e.wettkampfer_id||e.name;if(i.has(t)&&c[t])for(const n of c[t])s.push({start:n.startTime,end:n.endTime+20})})),0===s.length)return a;s.sort(((e,t)=>e.start-t.start));let o=100;for(;o>0;){o--;const e=a+r;let t=!1;for(const n of s)if(a<n.end&&e>n.start){a=n.end,t=!0;break}if(!t)break}return a};s.forEach((e=>{let[t,a]=e;const s=ie(t,a.count),o=a.discipline;let u=1,h=1/0;for(let r=1;r<=n;r++){const e=d(r,0,a,s);e<h&&(h=e,u=r)}const m=h+s;r.push({id:Date.now()+Math.random(),type:"category",division_code:t,discipline:o,ring:u,start_time:de(h),end_time:de(m),duration:s,participant_count:a.count,estimated_matches:"Formen"===o?a.count:Math.max(1,a.count-1),status:"pending",participants:a.participants}),l[u]=m+G.pauseBetweenCategories,a.participants.forEach((e=>{const n=e.wettkampfer_id||e.name;i.has(n)&&(c[n]||(c[n]=[]),c[n].push({division:t,startTime:h,endTime:m,ring:u}))}))})),r.sort(((e,t)=>e.ring!==t.ring?e.ring-t.ring:ce(e.start_time)-ce(t.start_time))),o(r),h(!1);const u=[];Object.entries(c).forEach((e=>{let[t,n]=e;if(n.length>1){n.sort(((e,t)=>e.startTime-t.startTime));for(let e=0;e<n.length-1;e++){const r=n[e+1].startTime-n[e].endTime;r<20&&u.push({participantId:t,gap:r,slots:[n[e],n[e+1]]})}}})),u.length>0?console.warn(`${u.length} Doppelstarter-Konflikte konnten nicht vollst\xe4ndig aufgel\xf6st werden:`,u):console.log(`Alle ${i.size} Doppelstarter wurden konfliktfrei verteilt.`)},fe=(e,t,n)=>{let r=null;for(let a=0;a<e.length;a++)e[a].ring===t&&(a<n?r=ce(e[a].end_time):null!==r&&(e[a].start_time=de(r),e[a].end_time=de(r+e[a].duration),r=ce(e[a].end_time)+G.pauseBetweenCategories))},ge=e=>{const t={};e.forEach(((e,n)=>{t[e.ring]||(t[e.ring]=[]),t[e.ring].push({originalIdx:n,slot:e})})),Object.keys(t).forEach((n=>{let r=ce(G.startTime);t[n].forEach((t=>{let{originalIdx:n,slot:a}=t;const i=a.duration||15;e[n].start_time=de(r),e[n].end_time=de(r+i),r+=i+G.pauseBetweenCategories}))}))},xe=(e,t)=>{const n=[...l],r=n.findIndex((t=>t.id===e)),a=n[r];let i=-1;if("up"===t){for(let s=r-1;s>=0;s--)if(n[s].ring===a.ring){i=s;break}}else for(let s=r+1;s<n.length;s++)if(n[s].ring===a.ring){i=s;break}-1!==i&&([n[r],n[i]]=[n[i],n[r]],ge(n),o(n))},ve=e=>{const t=l.filter((t=>t.id!==e));ge(t),o(t)},be=async()=>{try{const e=localStorage.getItem("authToken")||localStorage.getItem("token");if(!e)return void alert("Nicht eingeloggt. Bitte neu anmelden.");const t=await fetch("/api/schedule/kategorie-zeitplan",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({turnier_id:Y,zeitplan:l})});if(t.ok)alert("Zeitplan erfolgreich gespeichert!");else if(401===t.status)alert("Sitzung abgelaufen. Bitte neu anmelden.");else{const e=await t.json().catch((()=>({})));alert("Fehler beim Speichern: "+(e.message||t.statusText))}}catch(e){console.error("Fehler:",e),alert("Fehler beim Speichern: "+e.message)}},je=se(),ye=le(),ke=new Set(a.map((e=>e.wettkampfer_id||`${e.vorname}-${e.nachname}`))).size,Ne=he();if(c)return(0,we.jsx)("div",{className:"zeitplan-dashboard",children:(0,we.jsx)("div",{className:"loading-state",children:"Lade Zeitplan-Daten..."})});if("overview"===b)return(0,we.jsxs)("div",{className:"zeitplan-dashboard",children:[(0,we.jsxs)("div",{className:"zeitplan-header",children:[(0,we.jsxs)("div",{className:"header-title",children:[(0,we.jsx)("h2",{children:"Zeitplan"}),(0,we.jsx)("p",{className:"subtitle",children:null===r||void 0===r?void 0:r.name})]}),(0,we.jsxs)("div",{className:"header-stats",children:[(0,we.jsxs)("div",{className:"stat-badge",children:[(0,we.jsx)("span",{className:"stat-value",children:ke}),(0,we.jsx)("span",{className:"stat-label",children:"Teilnehmer"})]}),(0,we.jsxs)("div",{className:"stat-badge",children:[(0,we.jsx)("span",{className:"stat-value",children:Object.keys(je).length}),(0,we.jsx)("span",{className:"stat-label",children:"Kategorien"})]}),(0,we.jsxs)("div",{className:"stat-badge "+(ye.length>0?"warning":""),children:[(0,we.jsx)("span",{className:"stat-value",children:ye.length}),(0,we.jsx)("span",{className:"stat-label",children:"Doppelstarts"})]})]})]}),(0,we.jsxs)("div",{className:"zeitplan-actions",children:[(0,we.jsx)("button",{className:"btn-settings",onClick:()=>g(!f),children:"\u2699\ufe0f Einstellungen"}),(0,we.jsx)("button",{className:"btn-add-ring",onClick:X,title:"Tatami hinzuf\xfcgen",children:"\u2795 Tatami hinzuf\xfcgen"}),(0,we.jsx)("button",{className:"btn-generate",onClick:pe,disabled:u||0===a.length,children:u?"Generiere...":"\ud83d\udd04 Zeitplan generieren"}),(0,we.jsxs)("button",{className:"btn-conflicts "+(ye.length>0?"has-warning":""),onClick:()=>p(!m),children:["\u26a0\ufe0f Doppelstarts (",ye.length,")"]}),l.length>0&&(0,we.jsx)("button",{className:"btn-save",onClick:be,children:"\ud83d\udcbe Speichern"}),G.rings>0&&(0,we.jsx)("button",{className:"btn-delete-all",onClick:()=>{const e=l.length>0?`Wirklich alle ${G.rings} Tatamis UND den Zeitplan l\xf6schen?`:`Wirklich alle ${G.rings} Tatamis l\xf6schen?`;if(window.confirm(e)){o([]),M([]),H({...G,rings:0});const e=localStorage.getItem("authToken")||localStorage.getItem("token");fetch(`/api/schedule/zeitplan-einstellungen/${Y}`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({rings:0,start_time:G.startTime,pause_between_categories:G.pauseBetweenCategories,disciplines:G.disciplines,default_tatami:V,tatami_configs:[]})}).catch((e=>console.error("Fehler:",e)))}},children:"\ud83d\uddd1\ufe0f Alle Tatamis l\xf6schen"})]}),f&&(0,we.jsxs)("div",{className:"settings-panel extended",children:[(0,we.jsxs)("div",{className:"settings-header-row",children:[(0,we.jsx)("h3",{children:"Turnier- & Tatami-Einstellungen"}),(0,we.jsx)("button",{className:"close-btn",onClick:()=>g(!1),children:"\xd7"})]}),(0,we.jsxs)("div",{className:"settings-section",children:[(0,we.jsx)("h4",{children:"Zeitplan"}),(0,we.jsxs)("div",{className:"settings-grid",children:[(0,we.jsxs)("div",{className:"setting-group",children:[(0,we.jsx)("label",{children:"Beginn"}),(0,we.jsx)("input",{type:"time",value:G.startTime,onChange:e=>H({...G,startTime:e.target.value})})]}),(0,we.jsxs)("div",{className:"setting-group",children:[(0,we.jsx)("label",{children:"Pause zwischen Kategorien (Min)"}),(0,we.jsx)("input",{type:"number",min:"0",max:"30",value:G.pauseBetweenCategories,onChange:e=>H({...G,pauseBetweenCategories:parseInt(e.target.value)||5})})]})]})]}),(0,we.jsxs)("div",{className:"settings-section",children:[(0,we.jsx)("h4",{children:"Standard-Tatami-Einstellungen"}),(0,we.jsx)("p",{className:"settings-hint",children:"Diese Einstellungen werden f\xfcr neue Tatamis vorgeschlagen"}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Mattengr\xf6\xdfe"}),(0,we.jsxs)("select",{value:V.mattengroesse,onChange:e=>q({...V,mattengroesse:e.target.value}),children:[(0,we.jsx)("option",{value:"6x6",children:"6x6 m (klein)"}),(0,we.jsx)("option",{value:"8x8",children:"8x8 m (standard)"}),(0,we.jsx)("option",{value:"10x10",children:"10x10 m (gro\xdf)"}),(0,we.jsx)("option",{value:"12x12",children:"12x12 m (Wettkampf)"})]})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Standard-Farbe"}),(0,we.jsx)("input",{type:"color",value:V.farbe,onChange:e=>q({...V,farbe:e.target.value})})]})]}),(0,we.jsx)("div",{className:"form-row",children:(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Position in der Halle"}),(0,we.jsx)("input",{type:"text",value:V.position,onChange:e=>q({...V,position:e.target.value}),placeholder:"z.B. Links vorne, Mitte..."})]})}),(0,we.jsx)("h4",{style:{marginTop:"1rem"},children:"Personal"}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Hauptkampfrichter"}),(0,we.jsx)("input",{type:"text",value:V.hauptkampfrichter,onChange:e=>q({...V,hauptkampfrichter:e.target.value}),placeholder:"Name des Hauptkampfrichters"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Anzahl Kampfrichter"}),(0,we.jsxs)("select",{value:V.kampfrichterAnzahl,onChange:e=>q({...V,kampfrichterAnzahl:parseInt(e.target.value)}),children:[(0,we.jsx)("option",{value:"1",children:"1 Kampfrichter"}),(0,we.jsx)("option",{value:"2",children:"2 Kampfrichter"}),(0,we.jsx)("option",{value:"3",children:"3 Kampfrichter"}),(0,we.jsx)("option",{value:"4",children:"4 Kampfrichter"}),(0,we.jsx)("option",{value:"5",children:"5 Kampfrichter"}),(0,we.jsx)("option",{value:"7",children:"7 Kampfrichter"})]})]})]}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Schreiber / Protokollant"}),(0,we.jsx)("input",{type:"text",value:V.schreiber,onChange:e=>q({...V,schreiber:e.target.value}),placeholder:"Name des Schreibers"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Zeitnehmer"}),(0,we.jsx)("input",{type:"text",value:V.zeitnehmer,onChange:e=>q({...V,zeitnehmer:e.target.value}),placeholder:"Name des Zeitnehmers"})]})]}),(0,we.jsxs)("div",{className:"setting-group full-width",children:[(0,we.jsx)("label",{children:"Erlaubte Disziplinen"}),(0,we.jsx)("div",{className:"checkbox-grid compact",children:["Formen","Bruchtest","Selbstverteidigung","Pointfighting","Kickboxen","Kumite","Grappling","Freefight"].map((e=>(0,we.jsxs)("label",{className:"checkbox-item",children:[(0,we.jsx)("input",{type:"checkbox",checked:V.disziplinen.includes(e),onChange:t=>{t.target.checked?q({...V,disziplinen:[...V.disziplinen,e]}):q({...V,disziplinen:V.disziplinen.filter((t=>t!==e))})}}),(0,we.jsx)("span",{children:e})]},e)))})]}),(0,we.jsxs)("div",{className:"setting-group full-width",children:[(0,we.jsx)("label",{children:"Ausstattung"}),(0,we.jsxs)("div",{className:"checkbox-grid compact",children:[(0,we.jsxs)("label",{className:"checkbox-item",children:[(0,we.jsx)("input",{type:"checkbox",checked:V.equipment.matten,onChange:e=>q({...V,equipment:{...V.equipment,matten:e.target.checked}})}),(0,we.jsx)("span",{children:"Matten"})]}),(0,we.jsxs)("label",{className:"checkbox-item",children:[(0,we.jsx)("input",{type:"checkbox",checked:V.equipment.timer,onChange:e=>q({...V,equipment:{...V.equipment,timer:e.target.checked}})}),(0,we.jsx)("span",{children:"Timer"})]}),(0,we.jsxs)("label",{className:"checkbox-item",children:[(0,we.jsx)("input",{type:"checkbox",checked:V.equipment.anzeigetafel,onChange:e=>q({...V,equipment:{...V.equipment,anzeigetafel:e.target.checked}})}),(0,we.jsx)("span",{children:"Anzeigetafel"})]}),(0,we.jsxs)("label",{className:"checkbox-item",children:[(0,we.jsx)("input",{type:"checkbox",checked:V.equipment.firstAidKit,onChange:e=>q({...V,equipment:{...V.equipment,firstAidKit:e.target.checked}})}),(0,we.jsx)("span",{children:"Erste-Hilfe"})]})]})]}),(0,we.jsxs)("div",{className:"setting-group full-width",children:[(0,we.jsx)("label",{children:"Notizen"}),(0,we.jsx)("textarea",{value:V.notizen,onChange:e=>q({...V,notizen:e.target.value}),rows:"2",placeholder:"Zus\xe4tzliche Informationen, Besonderheiten...",style:{width:"100%",padding:"0.5rem",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"6px",color:"#fff",fontSize:"0.85rem"}})]})]}),(0,we.jsx)("div",{className:"settings-actions",children:(0,we.jsx)("button",{className:"btn-primary",onClick:()=>{const e=localStorage.getItem("authToken")||localStorage.getItem("token");fetch(`/api/schedule/zeitplan-einstellungen/${Y}`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({rings:G.rings,start_time:G.startTime,pause_between_categories:G.pauseBetweenCategories,disciplines:G.disciplines,default_tatami:V})}).then((()=>{g(!1)})).catch((e=>console.error("Fehler:",e)))},children:"Einstellungen speichern"})})]}),m&&(0,we.jsxs)("div",{className:"conflicts-panel",children:[(0,we.jsxs)("div",{className:"conflicts-header",children:[(0,we.jsx)("h3",{children:"\u26a0\ufe0f Doppelstarts (Zeitkonflikte)"}),(0,we.jsx)("button",{className:"close-btn",onClick:()=>p(!1),children:"\xd7"})]}),(0,we.jsx)("div",{className:"double-starters-list",children:0===ye.length?(0,we.jsx)("p",{className:"no-conflicts",children:"\u2713 Keine Zeitkonflikte - alle Wettk\xe4mpfer k\xf6nnen ihre Kategorien nacheinander absolvieren"}):ye.map(((e,t)=>(0,we.jsxs)("div",{className:"double-starter-item has-conflict",children:[(0,we.jsxs)("div",{className:"starter-info",children:[(0,we.jsx)("span",{className:"name",children:e.name}),(0,we.jsx)("span",{className:"verein",children:e.verein})]}),(0,we.jsxs)("div",{className:"conflict-details",children:[(0,we.jsxs)("span",{className:"division-tag conflict",children:[e.conflict.slot1.division_code,(0,we.jsxs)("span",{className:"slot-time",children:["Tatami ",e.conflict.slot1.ring,": ",e.conflict.slot1.start_time,"-",e.conflict.slot1.end_time]})]}),(0,we.jsx)("span",{className:"conflict-arrow",children:"\u26a1"}),(0,we.jsxs)("span",{className:"division-tag conflict",children:[e.conflict.slot2.division_code,(0,we.jsxs)("span",{className:"slot-time",children:["Tatami ",e.conflict.slot2.ring,": ",e.conflict.slot2.start_time,"-",e.conflict.slot2.end_time]})]})]})]},t)))})]}),B&&(0,we.jsxs)("div",{className:"unassigned-panel",children:[(0,we.jsxs)("div",{className:"unassigned-panel-header",children:[(0,we.jsxs)("h3",{children:["Nicht zugeordnete Kategorien (",he().length,")"]}),(0,we.jsx)("button",{className:"close-btn",onClick:()=>R(!1),children:"\xd7"})]}),(0,we.jsx)("p",{className:"panel-hint",children:"Ziehe Kategorien auf einen Tatami oder w\xe4hle einen Ring im Dropdown"}),(0,we.jsx)("div",{className:"unassigned-divisions-list",children:0===he().length?(0,we.jsx)("p",{className:"all-assigned",children:"Alle Kategorien sind zugeordnet!"}):he().map((e=>{const t=se()[e];return(0,we.jsxs)("div",{className:"unassigned-division-item",draggable:!0,onDragStart:()=>L(e),onDragEnd:()=>L(null),children:[(0,we.jsxs)("div",{className:"division-info",children:[(0,we.jsx)("span",{className:"division-code",children:e}),(0,we.jsxs)("span",{className:"division-meta",children:[(null===t||void 0===t?void 0:t.count)||0," Teilnehmer \u2022 ",(null===t||void 0===t?void 0:t.discipline)||"Unbekannt"]})]}),(0,we.jsxs)("select",{className:"ring-assign-select",value:"",onChange:t=>{t.target.value&&me(e,parseInt(t.target.value))},children:[(0,we.jsx)("option",{value:"",children:"\u2192 Zuweisen..."}),Array.from({length:G.rings},((e,t)=>(0,we.jsxs)("option",{value:t+1,children:["Tatami ",t+1]},t+1)))]})]},e)}))})]}),(0,we.jsx)("div",{className:"tatami-overview",children:(0,we.jsxs)("div",{className:"tatami-grid",children:[Array.from({length:G.rings},((e,t)=>{const n=t+1,r=(e=>{const t=l.filter((t=>t.ring===e&&"pause"!==t.type)),n=t.filter((e=>"completed"===e.status)),r=t.filter((e=>"completed"!==e.status));let a=G.startTime,i=G.startTime,s=0;if(t.length>0){var o,c;const e=[...t].sort(((e,t)=>ce(e.start_time)-ce(t.start_time)));a=(null===(o=e[0])||void 0===o?void 0:o.start_time)||G.startTime,i=(null===(c=e[e.length-1])||void 0===c?void 0:c.end_time)||G.startTime,s=ce(i)-ce(a)}const d=t.find((e=>"in_progress"===e.status)),u=r[0];return{total:t.length,completed:n.length,remaining:r.length,startTime:a,endTime:i,duration:s,currentSlot:d,nextSlot:u,slots:t}})(n),a=r.total>0&&r.completed===r.total,i=r.total>0;return(0,we.jsxs)("div",{className:`tatami-card ${a?"complete":""} ${i?"active":"empty"} ${F?"drop-target":""}`,onClick:()=>!F&&(e=>{k(e),j("detail")})(n),onDragOver:e=>{e.preventDefault(),e.currentTarget.classList.add("drag-over")},onDragLeave:e=>{e.currentTarget.classList.remove("drag-over")},onDrop:e=>{e.currentTarget.classList.remove("drag-over"),F&&(me(F,n),L(null))},children:[(0,we.jsxs)("div",{className:"tatami-header",children:[(0,we.jsxs)("h3",{children:["Tatami ",n]}),(0,we.jsxs)("div",{className:"tatami-header-actions",children:[a&&(0,we.jsx)("div",{className:"status-icon complete",children:"\u2713"}),!a&&i&&(0,we.jsx)("div",{className:"status-icon in-progress",children:"\u25cf"}),(0,we.jsx)("button",{className:"btn-delete-tatami",onClick:e=>{e.stopPropagation(),e.preventDefault();const t=l.filter((e=>e.ring===n&&"pause"!==e.type)).length,r=t>0?`Tatami ${n} mit ${t} Kategorie(n) wirklich l\xf6schen?`:`Tatami ${n} wirklich l\xf6schen?`;if(window.confirm(r)){const e=l.filter((e=>e.ring!==n));e.forEach((e=>{e.ring>n&&e.ring--})),o(e);const t=W.filter((e=>e.ringNumber!==n));t.forEach((e=>{e.ringNumber>n&&e.ringNumber--})),M(t);const r=G.rings-1;H({...G,rings:r});const a=localStorage.getItem("authToken")||localStorage.getItem("token");fetch(`/api/schedule/zeitplan-einstellungen/${Y}`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({rings:r,start_time:G.startTime,pause_between_categories:G.pauseBetweenCategories,disciplines:G.disciplines,default_tatami:V,tatami_configs:t})}).catch((e=>console.error("Fehler beim Speichern:",e)))}},title:"Tatami l\xf6schen",children:"\xd7"})]})]}),i?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("div",{className:"tatami-stats",children:[(0,we.jsxs)("div",{className:"stat-row",children:[(0,we.jsx)("span",{className:"stat-label-small",children:"Abgeschlossen:"}),(0,we.jsxs)("span",{className:"stat-value-small highlight",children:[r.completed,"D, ",r.completed,"K"]})]}),(0,we.jsxs)("div",{className:"stat-row",children:[(0,we.jsx)("span",{className:"stat-label-small",children:"Verbleibend:"}),(0,we.jsxs)("span",{className:"stat-value-small",children:[r.remaining,"D, ",r.remaining,"K"]})]})]}),(0,we.jsxs)("div",{className:"tatami-time",children:[(0,we.jsxs)("span",{className:"time-range",children:[r.startTime," \u2014 ",r.endTime]}),(0,we.jsxs)("span",{className:"duration",children:["(",ue(r.duration),")"]})]}),(0,we.jsx)("div",{className:"tatami-current",children:r.nextSlot?(0,we.jsx)("span",{className:"current-division",children:r.nextSlot.division_code}):(0,we.jsx)("span",{className:"current-division completed",children:"Alle abgeschlossen"})})]}):(0,we.jsx)("div",{className:"tatami-empty",children:(0,we.jsx)("span",{children:"Keine Kategorien zugewiesen"})})]},n)})),(0,we.jsxs)("div",{className:"tatami-card unassigned "+(Ne.length>0?"has-items clickable":""),onClick:()=>Ne.length>0&&R(!0),children:[(0,we.jsx)("div",{className:"tatami-header",children:(0,we.jsx)("h3",{children:"Nicht zugewiesen"})}),(0,we.jsxs)("div",{className:"unassigned-count",children:[(0,we.jsx)("span",{className:"count-value",children:Ne.length}),(0,we.jsx)("span",{className:"count-label",children:"Divisionen"})]}),Ne.length>0&&(0,we.jsxs)("div",{className:"unassigned-list",children:[Ne.slice(0,3).map(((e,t)=>(0,we.jsx)("span",{className:"unassigned-item",children:e},t))),Ne.length>3&&(0,we.jsxs)("span",{className:"more-items",children:["+",Ne.length-3," weitere"]})]}),Ne.length>0&&(0,we.jsx)("p",{className:"hint-text",children:"Klicken zum Zuordnen"})]})]})}),I&&(0,we.jsx)("div",{className:"modal-overlay",children:(0,we.jsxs)("div",{className:"modal-content question-modal",children:[(0,we.jsxs)("div",{className:"modal-header",children:[(0,we.jsx)("h3",{children:"Tatami hinzuf\xfcgen"}),(0,we.jsx)("button",{className:"close-btn",onClick:()=>$(!1),children:"\xd7"})]}),(0,we.jsxs)("div",{className:"modal-body",children:[(0,we.jsx)("p",{className:"question-text",children:"M\xf6chten Sie die Standardeinstellungen f\xfcr das neue Tatami \xfcbernehmen?"}),(0,we.jsxs)("div",{className:"default-preview",children:[(0,we.jsxs)("div",{className:"preview-item",children:[(0,we.jsx)("strong",{children:"Kampfrichter:"})," ",V.kampfrichterAnzahl]}),(0,we.jsxs)("div",{className:"preview-item",children:[(0,we.jsx)("strong",{children:"Mattengr\xf6\xdfe:"})," ",V.mattengroesse]}),(0,we.jsxs)("div",{className:"preview-item",children:[(0,we.jsx)("strong",{children:"Disziplinen:"})," ",V.disziplinen.join(", ")||"Alle"]})]})]}),(0,we.jsxs)("div",{className:"modal-actions question-actions",children:[(0,we.jsx)("button",{className:"btn-cancel",onClick:()=>$(!1),children:"Abbrechen"}),(0,we.jsx)("button",{className:"btn-secondary",onClick:te,children:"Nein, anpassen"}),(0,we.jsx)("button",{className:"btn-primary",onClick:ee,children:"Ja, \xfcbernehmen"})]})]})}),P&&(0,we.jsx)("div",{className:"modal-overlay",children:(0,we.jsxs)("div",{className:"modal-content tatami-modal",children:[(0,we.jsxs)("div",{className:"modal-header",children:[(0,we.jsx)("h3",{children:"Neues Tatami anlegen"}),(0,we.jsx)("button",{className:"close-btn",onClick:()=>O(!1),children:"\xd7"})]}),(0,we.jsxs)("div",{className:"modal-body tatami-form",children:[(0,we.jsxs)("div",{className:"form-section",children:[(0,we.jsx)("h4",{children:"Grunddaten"}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Name / Bezeichnung"}),(0,we.jsx)("input",{type:"text",value:K.name,onChange:e=>U({...K,name:e.target.value}),placeholder:"z.B. Tatami 1, Ring A, Hauptmatte..."})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Farbe"}),(0,we.jsx)("input",{type:"color",value:K.farbe,onChange:e=>U({...K,farbe:e.target.value})})]})]}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Mattengr\xf6\xdfe"}),(0,we.jsxs)("select",{value:K.mattengroesse,onChange:e=>U({...K,mattengroesse:e.target.value}),children:[(0,we.jsx)("option",{value:"6x6",children:"6x6 m (klein)"}),(0,we.jsx)("option",{value:"8x8",children:"8x8 m (standard)"}),(0,we.jsx)("option",{value:"10x10",children:"10x10 m (gro\xdf)"}),(0,we.jsx)("option",{value:"12x12",children:"12x12 m (Wettkampf)"}),(0,we.jsx)("option",{value:"custom",children:"Benutzerdefiniert"})]})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Position in der Halle"}),(0,we.jsx)("input",{type:"text",value:K.position,onChange:e=>U({...K,position:e.target.value}),placeholder:"z.B. Links vorne, Mitte, ..."})]})]})]}),(0,we.jsxs)("div",{className:"form-section",children:[(0,we.jsx)("h4",{children:"Personal"}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Hauptkampfrichter"}),(0,we.jsx)("input",{type:"text",value:K.hauptkampfrichter,onChange:e=>U({...K,hauptkampfrichter:e.target.value}),placeholder:"Name des Hauptkampfrichters"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Anzahl Kampfrichter"}),(0,we.jsxs)("select",{value:K.kampfrichterAnzahl,onChange:e=>U({...K,kampfrichterAnzahl:parseInt(e.target.value)}),children:[(0,we.jsx)("option",{value:"1",children:"1 Kampfrichter"}),(0,we.jsx)("option",{value:"2",children:"2 Kampfrichter"}),(0,we.jsx)("option",{value:"3",children:"3 Kampfrichter"}),(0,we.jsx)("option",{value:"4",children:"4 Kampfrichter"}),(0,we.jsx)("option",{value:"5",children:"5 Kampfrichter"}),(0,we.jsx)("option",{value:"7",children:"7 Kampfrichter"})]})]})]}),(0,we.jsxs)("div",{className:"form-row",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Schreiber / Protokollant"}),(0,we.jsx)("input",{type:"text",value:K.schreiber,onChange:e=>U({...K,schreiber:e.target.value}),placeholder:"Name des Schreibers"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Zeitnehmer"}),(0,we.jsx)("input",{type:"text",value:K.zeitnehmer,onChange:e=>U({...K,zeitnehmer:e.target.value}),placeholder:"Name des Zeitnehmers"})]})]})]}),(0,we.jsxs)("div",{className:"form-section",children:[(0,we.jsx)("h4",{children:"Erlaubte Disziplinen"}),(0,we.jsx)("p",{className:"form-hint",children:"Welche Disziplinen sollen auf diesem Tatami stattfinden?"}),(0,we.jsx)("div",{className:"checkbox-grid",children:["Formen","Bruchtest","Selbstverteidigung","Pointfighting","Kickboxen","Kumite","Grappling","Freefight"].map((e=>(0,we.jsxs)("label",{className:"checkbox-item",children:[(0,we.jsx)("input",{type:"checkbox",checked:K.disziplinen.includes(e),onChange:t=>{t.target.checked?U({...K,disziplinen:[...K.disziplinen,e]}):U({...K,disziplinen:K.disziplinen.filter((t=>t!==e))})}}),(0,we.jsx)("span",{children:e})]},e)))})]}),(0,we.jsxs)("div",{className:"form-section",children:[(0,we.jsx)("h4",{children:"Ausstattung"}),(0,we.jsxs)("div",{className:"checkbox-grid",children:[(0,we.jsxs)("label",{className:"checkbox-item",children:[(0,we.jsx)("input",{type:"checkbox",checked:K.equipment.matten,onChange:e=>U({...K,equipment:{...K.equipment,matten:e.target.checked}})}),(0,we.jsx)("span",{children:"Matten vorhanden"})]}),(0,we.jsxs)("label",{className:"checkbox-item",children:[(0,we.jsx)("input",{type:"checkbox",checked:K.equipment.timer,onChange:e=>U({...K,equipment:{...K.equipment,timer:e.target.checked}})}),(0,we.jsx)("span",{children:"Timer / Stoppuhr"})]}),(0,we.jsxs)("label",{className:"checkbox-item",children:[(0,we.jsx)("input",{type:"checkbox",checked:K.equipment.anzeigetafel,onChange:e=>U({...K,equipment:{...K.equipment,anzeigetafel:e.target.checked}})}),(0,we.jsx)("span",{children:"Anzeigetafel / Scoreboard"})]}),(0,we.jsxs)("label",{className:"checkbox-item",children:[(0,we.jsx)("input",{type:"checkbox",checked:K.equipment.firstAidKit,onChange:e=>U({...K,equipment:{...K.equipment,firstAidKit:e.target.checked}})}),(0,we.jsx)("span",{children:"Erste-Hilfe-Set"})]})]})]}),(0,we.jsxs)("div",{className:"form-section",children:[(0,we.jsx)("h4",{children:"Notizen"}),(0,we.jsx)("textarea",{value:K.notizen,onChange:e=>U({...K,notizen:e.target.value}),rows:"3",placeholder:"Zus\xe4tzliche Informationen, Besonderheiten..."})]})]}),(0,we.jsxs)("div",{className:"modal-actions",children:[(0,we.jsx)("button",{className:"btn-cancel",onClick:()=>O(!1),children:"Abbrechen"}),(0,we.jsx)("button",{className:"btn-primary",onClick:ne,children:"Tatami anlegen"})]})]})})]});const Se=l.filter((e=>e.ring===y)).sort(((e,t)=>ce(e.start_time)-ce(t.start_time)));return(0,we.jsxs)("div",{className:"zeitplan-dashboard",children:[(0,we.jsxs)("div",{className:"zeitplan-header",children:[(0,we.jsxs)("div",{className:"header-title",children:[(0,we.jsx)("button",{className:"btn-back",onClick:()=>{k(null),j("overview")},children:"\u2190 Zur\xfcck"}),(0,we.jsxs)("h2",{children:["Tatami ",y]}),(0,we.jsx)("p",{className:"subtitle",children:null===r||void 0===r?void 0:r.name})]}),(0,we.jsxs)("div",{className:"header-stats",children:[(0,we.jsxs)("div",{className:"stat-badge",children:[(0,we.jsx)("span",{className:"stat-value",children:Se.filter((e=>"pause"!==e.type)).length}),(0,we.jsx)("span",{className:"stat-label",children:"Kategorien"})]}),(0,we.jsxs)("div",{className:"stat-badge time",children:[(0,we.jsx)("span",{className:"stat-value",children:(null===(t=Se[0])||void 0===t?void 0:t.start_time)||G.startTime}),(0,we.jsx)("span",{className:"stat-label",children:"Beginn"})]}),(0,we.jsxs)("div",{className:"stat-badge time",children:[(0,we.jsx)("span",{className:"stat-value",children:(null===(n=Se[Se.length-1])||void 0===n?void 0:n.end_time)||G.startTime}),(0,we.jsx)("span",{className:"stat-label",children:"Ende"})]})]})]}),(0,we.jsxs)("div",{className:"zeitplan-actions",children:[(0,we.jsx)("button",{className:"btn-scoreboard",onClick:()=>{const e=`/dashboard/brackets?turnierId=${Y}&ring=${y}`;window.open(e,`Scoreboard_Ring_${y}`,"width=1400,height=900,menubar=no,toolbar=no")},children:"\ud83d\udcfa Scoreboard"}),(0,we.jsxs)("div",{className:"filter-buttons",children:[(0,we.jsx)("button",{className:"btn-filter "+("all"===w?"active":""),onClick:()=>N("all"),children:"Alle"}),(0,we.jsx)("button",{className:"btn-filter "+("pending"===w?"active":""),onClick:()=>N("pending"),children:"Offen"}),(0,we.jsx)("button",{className:"btn-filter "+("completed"===w?"active":""),onClick:()=>N("completed"),children:"Abgeschlossen"})]}),(0,we.jsx)("button",{className:"btn-pause",onClick:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;const t=l.filter((e=>e.ring===y)).sort(((e,t)=>ce(e.start_time)-ce(t.start_time))),n=t[t.length-1],r=ce(n?n.end_time:G.startTime),a={id:Date.now()+Math.random(),type:"pause",ring:y,start_time:de(r),end_time:de(r+e),duration:e,label:"Pause"},i=[...l,a];ge(i),o(i)}(15),children:"\u2615 Pause einf\xfcgen"}),(0,we.jsx)("button",{className:"btn-free-content",onClick:()=>z(!0),children:"\ud83d\udcdd Freier Inhalt"}),(0,we.jsxs)("button",{className:"btn-double-starters "+(E?"active":""),onClick:()=>D(!E),children:["\ud83d\udc65 Doppelstarter (",oe(y).length,")"]}),(0,we.jsx)("button",{className:"btn-drag-mode "+(S?"active":""),onClick:()=>_(!S),children:S?"\u2713 Drag aktiv":"\u2195\ufe0f Verschieben"}),(0,we.jsx)("button",{className:"btn-save",onClick:be,children:"\ud83d\udcbe Speichern"}),(0,we.jsx)("button",{className:"btn-delete-all",onClick:()=>{if(window.confirm("Wirklich ALLE Eintr\xe4ge dieses Tatamis l\xf6schen?")){const e=l.filter((e=>e.ring!==y));o(e)}},children:"\ud83d\uddd1\ufe0f Alle l\xf6schen"})]}),C&&(0,we.jsx)("div",{className:"modal-overlay",children:(0,we.jsxs)("div",{className:"modal-content free-content-modal",children:[(0,we.jsxs)("div",{className:"modal-header",children:[(0,we.jsx)("h4",{children:"Freien Inhalt hinzuf\xfcgen"}),(0,we.jsx)("button",{onClick:()=>z(!1),children:"\xd7"})]}),(0,we.jsxs)("div",{className:"modal-body",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Titel"}),(0,we.jsx)("input",{type:"text",value:T.title,onChange:e=>A({...T,title:e.target.value}),placeholder:"z.B. Siegerehrung, Vorf\xfchrung..."})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Dauer (Minuten)"}),(0,we.jsx)("input",{type:"number",min:"5",max:"120",value:T.duration,onChange:e=>A({...T,duration:parseInt(e.target.value)||15})})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Beschreibung (optional)"}),(0,we.jsx)("textarea",{value:T.description,onChange:e=>A({...T,description:e.target.value}),rows:"2"})]})]}),(0,we.jsxs)("div",{className:"modal-actions",children:[(0,we.jsx)("button",{onClick:()=>z(!1),children:"Abbrechen"}),(0,we.jsx)("button",{className:"btn-primary",onClick:()=>{if(!T.title)return void alert("Bitte einen Titel eingeben");const e=l.filter((e=>e.ring===y)).sort(((e,t)=>ce(e.start_time)-ce(t.start_time))),t=e[e.length-1],n=ce(t?t.end_time:G.startTime),r={id:Date.now()+Math.random(),type:"free_content",ring:y,start_time:de(n),end_time:de(n+T.duration),duration:T.duration,label:T.title,description:T.description,status:"pending"},a=[...l,r];ge(a),o(a),z(!1),A({title:"",duration:15,description:""})},children:"Hinzuf\xfcgen"})]})]})}),E&&(()=>{const e=oe(y),t=e.filter((e=>e.hasConflict)).length;return(0,we.jsxs)("div",{className:"conflicts-panel ring-double-starters",children:[(0,we.jsxs)("div",{className:"conflicts-header",children:[(0,we.jsxs)("h3",{children:["Doppelstarter auf Tatami ",y,t>0&&(0,we.jsxs)("span",{className:"conflict-badge",children:["\u26a0\ufe0f ",t," Zeitkonflikt",t>1?"e":""]})]}),(0,we.jsx)("button",{className:"close-btn",onClick:()=>D(!1),children:"\xd7"})]}),(0,we.jsx)("div",{className:"double-starters-list",children:0===e.length?(0,we.jsx)("p",{className:"no-conflicts",children:"Keine Doppelstarter auf diesem Tatami"}):e.map(((e,t)=>(0,we.jsxs)("div",{className:"double-starter-item "+(e.hasConflict?"has-conflict":""),children:[(0,we.jsxs)("div",{className:"starter-info",children:[(0,we.jsx)("span",{className:"name",children:e.name}),(0,we.jsx)("span",{className:"verein",children:e.verein})]}),(0,we.jsx)("div",{className:"divisions",children:e.slots.map(((t,n)=>{var r;return(0,we.jsxs)("span",{className:"division-tag "+(e.hasConflict&&null!==(r=e.conflictSlots)&&void 0!==r&&r.includes(t.division_code)?"conflict":""),children:[t.division_code,(0,we.jsxs)("span",{className:"slot-time",children:["(",t.start_time,"-",t.end_time,")"]})]},n)}))}),e.hasConflict&&(0,we.jsxs)("div",{className:"conflict-warning",children:["\u26a0\ufe0f ",e.message]})]},t)))})]})})(),(0,we.jsx)("div",{className:"ring-detail-view",children:(0,we.jsx)("div",{className:"ring-slots-list-detail",children:0===Se.filter((e=>"all"===w||("pending"===w?"completed"!==e.status:"completed"!==w||"completed"===e.status))).length?(0,we.jsx)("div",{className:"ring-empty-detail",children:(0,we.jsx)("p",{children:"Keine Kategorien auf diesem Tatami"})}):Se.filter((e=>"all"===w||("pending"===w?"completed"!==e.status:"completed"!==w||"completed"===e.status))).map(((e,t)=>{var n;return(0,we.jsx)("div",{className:`ring-slot-card-detail ${"pause"===e.type?"pause-slot":""} ${"free_content"===e.type?"free-content-slot":""} ${"completed"===e.status?"completed-slot":""} ${S?"drag-enabled":""}`,draggable:S&&"pause"!==e.type,onDragStart:()=>S&&v(e),onDragEnd:()=>v(null),onDragOver:e=>S&&e.preventDefault(),onDrop:()=>{if(S&&x&&x.id!==e.id){const t=[...l],n=t.findIndex((e=>e.id===x.id)),r=t.findIndex((t=>t.id===e.id));[t[n],t[r]]=[t[r],t[n]],ge(t),o(t)}},children:"pause"===e.type?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("div",{className:"pause-content",children:[(0,we.jsx)("span",{className:"pause-icon",children:"\u2615"}),(0,we.jsx)("span",{className:"pause-label",children:"Pause"}),(0,we.jsxs)("span",{className:"pause-time",children:[e.duration," Min"]})]}),(0,we.jsx)("button",{className:"delete-pause",onClick:()=>ve(e.id),title:"Pause entfernen",children:"\xd7"})]}):"free_content"===e.type?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("div",{className:"free-content-display",children:[(0,we.jsx)("span",{className:"free-content-icon",children:"\ud83d\udcdd"}),(0,we.jsxs)("div",{className:"free-content-info",children:[(0,we.jsx)("span",{className:"free-content-title",children:e.label}),e.description&&(0,we.jsx)("span",{className:"free-content-desc",children:e.description})]}),(0,we.jsxs)("span",{className:"free-content-time",children:[e.start_time," - ",e.end_time," (",e.duration," Min)"]})]}),(0,we.jsx)("button",{className:"delete-pause",onClick:()=>ve(e.id),title:"Entfernen",children:"\xd7"})]}):(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("div",{className:"slot-time-block-detail",children:[(0,we.jsx)("span",{className:"start-time",children:e.start_time}),(0,we.jsx)("span",{className:"time-dash",children:"\u2014"}),(0,we.jsx)("span",{className:"end-time",children:e.end_time})]}),(0,we.jsxs)("div",{className:"slot-main-detail",children:[(0,we.jsx)("span",{className:"slot-division",children:e.division_code}),(0,we.jsx)("span",{className:`slot-discipline ${null===(n=e.discipline)||void 0===n?void 0:n.toLowerCase()}`,children:e.discipline}),"completed"===e.status&&(0,we.jsx)("span",{className:"status-completed",children:"\u2713"})]}),(0,we.jsxs)("div",{className:"slot-info-detail",children:[(0,we.jsxs)("span",{children:[e.participant_count," Teilnehmer"]}),(0,we.jsxs)("span",{children:[e.duration," Min"]}),(0,we.jsxs)("span",{children:[e.estimated_matches," ","Formen"===e.discipline?"Starts":"K\xe4mpfe"]})]}),(0,we.jsxs)("div",{className:"slot-actions-detail",children:[(0,we.jsx)("button",{className:"action-btn",onClick:()=>xe(e.id,"up"),title:"Nach oben",children:"\u2191"}),(0,we.jsx)("button",{className:"action-btn",onClick:()=>xe(e.id,"down"),title:"Nach unten",children:"\u2193"}),(0,we.jsx)("button",{className:"action-btn pause",onClick:()=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15;const r=[...l],a=r.find(((n,r)=>r===e&&n.ring===t));if(a){const i=ce(a.end_time);r.splice(e+1,0,{id:Date.now()+Math.random(),type:"pause",ring:t,start_time:de(i),end_time:de(i+n),duration:n,label:"Pause"}),fe(r,t,e+2)}o(r)}(l.findIndex((t=>t.id===e.id)),y),title:"Pause einf\xfcgen",children:"\u2615"}),(0,we.jsx)("select",{className:"ring-select",value:e.ring,onChange:t=>((e,t)=>{const n=l.map((n=>n.id===e?{...n,ring:t}:n));ge(n),o(n)})(e.id,parseInt(t.target.value)),title:"Tatami wechseln",children:Array.from({length:G.rings},((e,t)=>(0,we.jsxs)("option",{value:t+1,children:["Tatami ",t+1]},t+1)))}),(0,we.jsx)("button",{className:"btn-delete-slot",onClick:()=>ve(e.id),title:"Eintrag l\xf6schen",children:"L\xf6schen"})]})]})},e.id)}))})})]})};function Ao(e){let{user:t}=e;return(0,we.jsxs)("div",{className:"admin-panel",children:[(0,we.jsx)("h2",{children:"\u2699\ufe0f Administration"}),(0,we.jsxs)("div",{className:"admin-sections",children:[(0,we.jsxs)("div",{className:"admin-section",children:[(0,we.jsx)("h3",{children:"\ud83d\udc65 Benutzerverwaltung"}),(0,we.jsx)("p",{children:"Vereine und Benutzer verwalten"}),(0,we.jsx)("button",{className:"admin-btn",children:"Benutzer verwalten"})]}),(0,we.jsxs)("div",{className:"admin-section",children:[(0,we.jsx)("h3",{children:"\ud83d\uddc4\ufe0f Systemkonfiguration"}),(0,we.jsx)("p",{children:"Globale Einstellungen und Parameter"}),(0,we.jsx)("button",{className:"admin-btn",children:"Einstellungen"})]}),(0,we.jsxs)("div",{className:"admin-section",children:[(0,we.jsx)("h3",{children:"\ud83d\udcca System-Monitoring"}),(0,we.jsx)("p",{children:"Server-Status und Performance-Metriken"}),(0,we.jsx)("button",{className:"admin-btn",children:"Monitoring"})]}),(0,we.jsxs)("div",{className:"admin-section",children:[(0,we.jsx)("h3",{children:"\ud83d\udd04 Datenbank-Tools"}),(0,we.jsx)("p",{children:"Backup, Export und Wartung"}),(0,we.jsx)("button",{className:"admin-btn",children:"DB-Tools"})]})]})]})}function Eo(e){let{user:t,setActiveView:n,onLogout:r,selectedTurnier:a,turniere:i,setSelectedTurnier:l,modulesExpanded:o,setModulesExpanded:c,berichteExpanded:d,setBerichteExpanded:u,openFormenWindow:h}=e;const[m,p]=(0,s.useState)("organisation"),[f,g]=(0,s.useState)("organisation"),[x,v]=(0,s.useState)({turniere:0,wettkaempfer:0,anmeldungen:0,activeStreams:0}),b=(0,s.useCallback)((async()=>{if(a)try{const e=localStorage.getItem("token");v((e=>({...e,turniere:1})));const t=await fetch(`/api/wettkaempfer?turnierId=${a.id}`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json();console.log("\ud83d\udcca Wettk\xe4mpfer Stats Response:",e),e.success&&e.data?v((t=>({...t,wettkaempfer:e.data.length}))):Array.isArray(e)?v((t=>({...t,wettkaempfer:e.length}))):v((e=>({...e,wettkaempfer:0})))}const n=await fetch(`/api/anmeldungen/stats?turnierId=${a.id}`,{headers:{Authorization:`Bearer ${e}`}});if(n.ok){const e=await n.json();v((t=>({...t,anmeldungen:e.total||0})))}const r=await fetch(`/api/streaming/analytics?turnierId=${a.id}`,{headers:{Authorization:`Bearer ${e}`}});if(r.ok){const e=await r.json();v((t=>({...t,activeStreams:e.activeStreams||0})))}}catch(e){console.error("Fehler beim Laden der Dashboard-Statistiken:",e)}else v({turniere:0,wettkaempfer:0,anmeldungen:0,activeStreams:0})}),[a]);return(0,s.useEffect)((()=>{b()}),[a,b]),(0,we.jsxs)("div",{className:"dashboard-overview",children:[i.length>0&&(0,we.jsxs)("div",{className:"turnier-stats-combined",children:[(0,we.jsxs)("div",{className:"turnier-selection-compact",children:[(0,we.jsx)("label",{htmlFor:"turnier-select",className:"turnier-label",children:"\ud83c\udfc6 Aktuelles Turnier:"}),(0,we.jsx)("select",{id:"turnier-select",value:(null===a||void 0===a?void 0:a.id)||(null===a||void 0===a?void 0:a.turnier_id)||"",onChange:e=>{const t=parseInt(e.target.value),n=i.find((e=>(e.id||e.turnier_id)===t));l(n)},className:"turnier-select",children:i.map(((e,t)=>(0,we.jsxs)("option",{value:e.id||e.turnier_id,children:[e.name," - ",new Date(e.datum).toLocaleDateString("de-DE")]},e.id||e.turnier_id||`turnier-${t}`)))})]}),(0,we.jsxs)("div",{className:"stats-grid-compact",children:[(0,we.jsxs)("div",{className:"stat-card-compact",children:[(0,we.jsx)("div",{className:"stat-icon-compact",children:"\ud83c\udfc6"}),(0,we.jsxs)("div",{className:"stat-content-compact",children:[(0,we.jsx)("h3",{children:x.turniere}),(0,we.jsx)("p",{children:"Aktive Turniere"})]})]},"stat-turniere"),(0,we.jsxs)("div",{className:"stat-card-compact",children:[(0,we.jsx)("div",{className:"stat-icon-compact",children:"\ud83e\udd4a"}),(0,we.jsxs)("div",{className:"stat-content-compact",children:[(0,we.jsx)("h3",{children:x.wettkaempfer}),(0,we.jsx)("p",{children:"Wettk\xe4mpfer"})]})]},"stat-wettkaempfer"),(0,we.jsxs)("div",{className:"stat-card-compact",children:[(0,we.jsx)("div",{className:"stat-icon-compact",children:"\ud83d\udcdd"}),(0,we.jsxs)("div",{className:"stat-content-compact",children:[(0,we.jsx)("h3",{children:x.anmeldungen}),(0,we.jsx)("p",{children:"Anmeldungen"})]})]},"stat-anmeldungen"),(0,we.jsxs)("div",{className:"stat-card-compact",children:[(0,we.jsx)("div",{className:"stat-icon-compact",children:"\ud83c\udfa5"}),(0,we.jsxs)("div",{className:"stat-content-compact",children:[(0,we.jsx)("h3",{children:x.activeStreams}),(0,we.jsx)("p",{children:"Live Streams"})]})]},"stat-streams"),(0,we.jsx)("div",{className:"stat-card-compact activity-card-compact",children:(0,we.jsxs)("div",{className:"activity-content-compact",children:[(0,we.jsx)("h3",{children:"Letzte Aktivit\xe4ten"}),(0,we.jsxs)("div",{className:"activity-list-compact",children:[(0,we.jsxs)("div",{className:"activity-item-compact",children:[(0,we.jsx)("span",{className:"activity-icon-compact",children:"\ud83c\udfc6"}),(0,we.jsx)("span",{className:"activity-text-compact",children:"Turnier erstellt"})]},"activity-turnier"),(0,we.jsxs)("div",{className:"activity-item-compact",children:[(0,we.jsx)("span",{className:"activity-icon-compact",children:"\ud83e\udd4a"}),(0,we.jsx)("span",{className:"activity-text-compact",children:"5 neue K\xe4mpfer"})]},"activity-kaempfer"),(0,we.jsxs)("div",{className:"activity-item-compact",children:[(0,we.jsx)("span",{className:"activity-icon-compact",children:"\ud83c\udfa5"}),(0,we.jsx)("span",{className:"activity-text-compact",children:"Stream beendet"})]},"activity-stream")]})]})},"stat-activities")]})]}),(0,we.jsxs)("div",{className:"dashboard-modules",children:[(0,we.jsxs)("div",{className:"turnier-einstellungen-header",onClick:()=>c(!o),children:[(0,we.jsx)("h3",{children:"Turnier Einstellungen"}),(0,we.jsx)("div",{className:"toggle-arrow "+(o?"expanded":"collapsed"),children:"\u25bc"})]}),(0,we.jsxs)("div",{className:"modules-container "+(o?"expanded":"collapsed"),children:[(0,we.jsxs)("div",{className:"dashboard-tabs",children:[(0,we.jsx)("button",{className:"dashboard-tab "+("organisation"===m?"active":""),onClick:()=>p("organisation"),children:"\ud83c\udfdb\ufe0f Organisation"}),(0,we.jsx)("button",{className:"dashboard-tab "+("wettkampf"===m?"active":""),onClick:()=>p("wettkampf"),children:"\u2694\ufe0f Wettkampf"}),(0,we.jsx)("button",{className:"dashboard-tab "+("ergebnisse"===m?"active":""),onClick:()=>p("ergebnisse"),children:"\ud83c\udfc6 Ergebnisse"})]}),"organisation"===m&&(0,we.jsxs)("div",{className:"modules-grid",children:[(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("turniere"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83c\udfc6"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Turniere"}),(0,we.jsx)("p",{children:"Turniere erstellen und verwalten"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("vereine"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83c\udfdb\ufe0f"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Vereine"}),(0,we.jsx)("p",{children:"Vereine verwalten und organisieren"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("divisionen"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83e\udd4b"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Divisionen"}),(0,we.jsx)("p",{children:"Kategorien und Disziplinen"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("turnier-einstellungen"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\u2699\ufe0f"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Turnier Einstellungen"}),(0,we.jsx)("p",{children:"Konfiguration und Verwaltung"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("staff-management"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83d\udc65"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Staff Management"}),(0,we.jsx)("p",{children:"Personal und Helfer verwalten"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("kampfflaechen"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83e\udd4b"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Kampffl\xe4chen"}),(0,we.jsx)("p",{children:"Matten und Arenen verwalten"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(null===t||void 0===t?void 0:t.isAdmin)&&(0,we.jsxs)(s.Fragment,{children:[(0,we.jsxs)("div",{className:"module-card admin",onClick:()=>n("sports"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83e\udd4b"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Multi-Sport"}),(0,we.jsx)("p",{children:"Verschiedene Sportarten verwalten"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card admin",onClick:()=>n("admin"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\u2699\ufe0f"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Administration"}),(0,we.jsx)("p",{children:"System-Einstellungen und Tools"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]})]},"admin-modules-org")]}),"wettkampf"===m&&(0,we.jsxs)("div",{className:"modules-grid",children:[(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("wettkaempfer-registrieren"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83d\udcdd"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Wettk\xe4mpfer registrieren"}),(0,we.jsx)("p",{children:"Neue K\xe4mpfer anmelden"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("wettkaempfer"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83e\udd4a"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Wettk\xe4mpfer"}),(0,we.jsx)("p",{children:"K\xe4mpfer verwalten und organisieren"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("brackets"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83c\udfc5"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Brackets"}),(0,we.jsx)("p",{children:"K.O.-Systeme und Turnierb\xe4ume"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("anmeldungen"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83d\udcdd"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Anmeldungen"}),(0,we.jsx)("p",{children:"Teilnehmer-Anmeldungen verwalten"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:h,children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83e\udd4b"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Formen & Selbstverteidigung"}),(0,we.jsx)("p",{children:"Punktebasiertes Wertungssystem"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2197"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("bruchtest"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83e\uddf1"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Bruchtest"}),(0,we.jsx)("p",{children:"Bruchtest-Wertungen mit Punktesystem"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("zeitplan"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\u23f0"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Zeitplan verwalten"}),(0,we.jsx)("p",{children:"Turnier-Ablauf planen"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("streaming"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83c\udfa5"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Live-Streaming"}),(0,we.jsx)("p",{children:"Live-\xdcbertragungen und Chat"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]})]}),"ergebnisse"===m&&(0,we.jsxs)("div",{className:"modules-grid",children:[(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("ergebnisse"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83d\udcca"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Ergebnisse eingeben"}),(0,we.jsx)("p",{children:"Wettkampf-Ergebnisse erfassen"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("urkunden"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83c\udfc5"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Urkunden drucken"}),(0,we.jsx)("p",{children:"Sieger-Urkunden erstellen"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("live-ergebnisse"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83d\udcfa"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Live-Ergebnisse"}),(0,we.jsx)("p",{children:"Echtzeit-Anzeige f\xfcr Zuschauer"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("siegerehrung"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83c\udfc6"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Siegerehrung"}),(0,we.jsx)("p",{children:"Preise und Ehrungen verwalten"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("platzierung"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83e\udd47"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Platzierung finden"}),(0,we.jsx)("p",{children:"Ranglisten und Tabellen"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("analytics"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83d\udcc8"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Statistiken"}),(0,we.jsx)("p",{children:"Berichte und Analytics"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]})]})]}),(0,we.jsxs)("div",{className:"berichte-header",onClick:()=>u(!d),children:[(0,we.jsx)("h3",{children:"Berichte"}),(0,we.jsx)("div",{className:"toggle-arrow "+(d?"expanded":"collapsed"),children:"\u25bc"})]}),(0,we.jsxs)("div",{className:"berichte-container "+(d?"expanded":"collapsed"),children:[(0,we.jsxs)("div",{className:"dashboard-tabs",children:[(0,we.jsx)("button",{className:"dashboard-tab "+("organisation"===f?"active":""),onClick:()=>g("organisation"),children:"\ud83c\udfdb\ufe0f Organisation"}),(0,we.jsx)("button",{className:"dashboard-tab "+("wettkampf"===f?"active":""),onClick:()=>g("wettkampf"),children:"\u2694\ufe0f Wettkampf"}),(0,we.jsx)("button",{className:"dashboard-tab "+("ergebnisse"===f?"active":""),onClick:()=>g("ergebnisse"),children:"\ud83c\udfc6 Ergebnisse"})]}),"organisation"===f&&(0,we.jsxs)("div",{className:"modules-grid",children:[(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("bericht-mitgliedschaft"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83c\udd94"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Bericht Mitgliedschaft"}),(0,we.jsx)("p",{children:"Vereins-Mitglieder"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("bericht-offizielle"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83d\udc54"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Bericht Offizielle"}),(0,we.jsx)("p",{children:"Schiedsrichter und Kampfrichter"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("event-schule-bericht"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83c\udfeb"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Event Schule Bericht"}),(0,we.jsx)("p",{children:"Schul-Veranstaltungen"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("staff-checkin-bericht"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83d\udc4d"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Staff Check-in Bericht"}),(0,we.jsx)("p",{children:"Personal Anwesenheit"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("staff-aktivitaetenbericht"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83d\udc65"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Staff Aktivit\xe4tenbericht"}),(0,we.jsx)("p",{children:"Personal-Aktivit\xe4ten"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("geo-report"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83d\udccd"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Geo Report"}),(0,we.jsx)("p",{children:"Geografische Verteilung"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("rings-berichte"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83c\udfaf"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Rings Berichte"}),(0,we.jsx)("p",{children:"Kampfbereiche"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("accreditation-cards"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83c\udd94"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Accreditation Cards"}),(0,we.jsx)("p",{children:"Ausweise drucken"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("print-envelopes"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\u2709\ufe0f"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Print Envelopes"}),(0,we.jsx)("p",{children:"Briefumschl\xe4ge drucken"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("limits-report"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83d\udeab"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Limits Report"}),(0,we.jsx)("p",{children:"Grenzen und Limits"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]})]}),"wettkampf"===f&&(0,we.jsxs)("div",{className:"modules-grid",children:[(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("wettbewerber-divisionen"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83d\udc65"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Wettbewerber nach Divisionen"}),(0,we.jsx)("p",{children:"K\xe4mpfer nach Kategorien"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("bericht-wettkaempfer"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83d\udc64"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Bericht Wettk\xe4mpfer"}),(0,we.jsx)("p",{children:"Teilnehmer-\xdcbersicht"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("hinzugefuegte-wettkaempfer"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\u2795"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"hinzugef\xfcgte Wettk\xe4mpfer"}),(0,we.jsx)("p",{children:"Neue Teilnehmer"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("teilnehmerbericht"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83d\udcca"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Teilnehmerbericht"}),(0,we.jsx)("p",{children:"Teilnehmer-Statistiken"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("restrictions-bericht"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\u26a0\ufe0f"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Restrictions Bericht"}),(0,we.jsx)("p",{children:"Einschr\xe4nkungen"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("medizinisches-formular-bericht"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83c\udfe5"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Medizinisches Formular Bericht"}),(0,we.jsx)("p",{children:"Gesundheitsdaten"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("medizinische-notizen-bericht"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83d\udcac"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Medizinische Notizen Bericht"}),(0,we.jsx)("p",{children:"Gesundheitsnotizen"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]})]}),"ergebnisse"===f&&(0,we.jsxs)("div",{className:"modules-grid",children:[(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("finanzbericht"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83d\udcb0"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Finanzbericht"}),(0,we.jsx)("p",{children:"Einnahmen und Ausgaben"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("bericht-ergebnisse"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83c\udfc6"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Bericht Ergebnisse"}),(0,we.jsx)("p",{children:"Turnier-Ergebnisse"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("medaillenbericht"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83e\udd47"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Medaillenbericht"}),(0,we.jsx)("p",{children:"Sieger und Platzierungen"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("divisions-preisgeldbericht"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83c\udf81"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Divisions Preisgeldbericht"}),(0,we.jsx)("p",{children:"Preisgelder nach Divisionen"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("merchandise-bericht"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83d\udecd\ufe0f"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Merchandise Bericht"}),(0,we.jsx)("p",{children:"Verk\xe4ufe und Best\xe4nde"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("tournament-performance"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\u23f1\ufe0f"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Tournament Performance"}),(0,we.jsx)("p",{children:"Turnier-Leistung"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card",onClick:()=>n("bericht-teilzahlungen"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\ud83d\udcc5"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Bericht Teilzahlungen"}),(0,we.jsx)("p",{children:"Ratenzahlungen"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u2192"})]}),(0,we.jsxs)("div",{className:"module-card special-blue",onClick:()=>n("startgelder-id-cards"),children:[(0,we.jsx)("div",{className:"module-icon",children:"\u2b07\ufe0f"}),(0,we.jsxs)("div",{className:"module-content",children:[(0,we.jsx)("h4",{children:"Startgelder / Id-Cards"}),(0,we.jsx)("p",{children:"Eintrittsgelder und Ausweise"})]}),(0,we.jsx)("div",{className:"module-arrow",children:"\u25b2"})]})]})]})]})]})}const Do=function(){const e=ne(),t=ee(),[n,r]=(0,s.useState)(t.pathname.replace("/dashboard","").replace("/","")||"overview"),[a,i]=(0,s.useState)(null),[l,o]=(0,s.useState)(!0),[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(null),[m,p]=(0,s.useState)([]),[f,g]=(0,s.useState)(!0),[x,v]=(0,s.useState)(!0),b=(0,s.useCallback)((t=>{r(t);e("overview"===t?"/dashboard":`/dashboard/${t}`)}),[e]);(0,s.useEffect)((()=>{const e=t.pathname.replace("/dashboard","").replace("/","")||"overview";e!==n&&r(e)}),[t.pathname,n]);const j=(0,s.useCallback)((()=>{localStorage.clear(),i(null),e("/login")}),[e]),y=(0,s.useCallback)((()=>{const e=(null===u||void 0===u?void 0:u.turnier_id)||(null===u||void 0===u?void 0:u.id);if(!e)return void alert("Bitte w\xe4hlen Sie zuerst ein Turnier aus.");const t=`/formen-schreiber?turnierId=${e}`;window.open(t,"FormenSchreiber","width=1600,height=900,menubar=no,toolbar=no,location=no,status=no")}),[u]),k=(0,s.useCallback)((()=>{try{const t=localStorage.getItem("adminData"),n=localStorage.getItem("clubData"),r=localStorage.getItem("token");if(!r||""===r.trim())return console.log("\ud83d\udd11 Invalid or missing token - clearing localStorage"),void j();const a=3===r.split(".").length,s=r.startsWith("admin-auth-token")||r.startsWith("user-auth-token");if(!a&&!s)return console.log("\ud83d\udd11 Invalid token format - clearing localStorage"),void j();if(t){const e=JSON.parse(t);i({...e.user,isAdmin:!0})}else{if(!n)return void e("/login");{const e=JSON.parse(n);i({...e.user,isAdmin:!1})}}o(!1)}catch(t){console.error("Auth-Fehler:",t),j()}}),[e,j]);(0,s.useEffect)((()=>{k(),w()}),[k,e]);const w=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/turniere",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json();e.success&&e.data?(p(e.data),e.data.length>0&&h(e.data[0])):Array.isArray(e)&&(p(e),e.length>0&&h(e[0]))}}catch(e){console.error("Fehler beim Laden der Turniere:",e)}};return(0,s.useEffect)((()=>{const e=e=>{e.target.closest(".user-dropdown")||d(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)}),[]),l?(0,we.jsxs)("div",{className:"dashboard-loading",children:[(0,we.jsx)("div",{className:"loading-spinner",children:"\u23f3"}),(0,we.jsx)("p",{children:"Dashboard wird geladen..."})]}):(0,we.jsxs)("div",{className:"main-dashboard",children:[(0,we.jsx)("div",{className:"unified-dashboard-header",children:(0,we.jsxs)("div",{className:"header-content",children:[(0,we.jsx)("div",{className:"header-brand",children:(0,we.jsx)("img",{src:"/logo.png",alt:"Tournament Software Logo",className:"header-logo"})}),(0,we.jsx)("div",{className:"header-center",children:(0,we.jsxs)("div",{className:"welcome-message",children:[(0,we.jsxs)("h2",{children:["Willkommen zur\xfcck, ",null===a||void 0===a?void 0:a.name,"! \ud83d\udc4b"]}),(0,we.jsx)("p",{className:"welcome-text",children:null!==a&&void 0!==a&&a.isAdmin?"Sie haben Vollzugriff auf alle Systeme und Funktionen.":"Verwalten Sie Ihre Turniere und Wettk\xe4mpfer."})]})}),(0,we.jsx)("div",{className:"header-actions",children:(0,we.jsx)("button",{className:"dashboard-btn",onClick:()=>b("overview"),children:"\ud83c\udfe0 Dashboard"})}),(0,we.jsx)("div",{className:"header-user",children:(0,we.jsxs)("div",{className:"user-dropdown",onClick:()=>d(!c),children:[(0,we.jsxs)("div",{className:"user-info",children:[(0,we.jsx)("span",{className:"user-name",children:"TDA Administrator"}),(0,we.jsx)("span",{className:"user-role",children:"Verein"}),(0,we.jsx)("span",{className:"dropdown-arrow",children:"\u25bc"})]}),c&&(0,we.jsxs)("div",{className:"dropdown-menu",children:[(0,we.jsxs)("div",{className:"dropdown-section",children:[(0,we.jsx)("div",{className:"dropdown-section-title",children:"Navigation"}),(0,we.jsx)("div",{className:"dropdown-item",onClick:()=>{e("/dashboard"),d(!1)},children:(0,we.jsx)("span",{children:"\ud83c\udfe0 \xdcbersicht"})}),(0,we.jsx)("div",{className:"dropdown-item",onClick:()=>{e("/dashboard/wettkaempfer"),d(!1)},children:(0,we.jsx)("span",{children:"\ud83e\udd4a Wettk\xe4mpfer"})}),(0,we.jsx)("div",{className:"dropdown-item",onClick:()=>{e("/dashboard/turniere"),d(!1)},children:(0,we.jsx)("span",{children:"\ud83c\udfc6 Turniere"})}),(0,we.jsx)("div",{className:"dropdown-item",onClick:()=>{e("/dashboard/vereine"),d(!1)},children:(0,we.jsx)("span",{children:"\ud83c\udfdb\ufe0f Vereine"})}),(0,we.jsx)("div",{className:"dropdown-item",onClick:()=>{e("/dashboard/brackets"),d(!1)},children:(0,we.jsx)("span",{children:"\ud83c\udfc5 Brackets"})}),(0,we.jsx)("div",{className:"dropdown-item",onClick:()=>{y(),d(!1)},children:(0,we.jsx)("span",{children:"\ud83e\udd4b Formen & SV \u2197"})}),(0,we.jsx)("div",{className:"dropdown-item",onClick:()=>{e("/dashboard/anmeldungen"),d(!1)},children:(0,we.jsx)("span",{children:"\ud83d\udcdd Anmeldungen"})}),(0,we.jsx)("div",{className:"dropdown-item",onClick:()=>{e("/dashboard/streaming"),d(!1)},children:(0,we.jsx)("span",{children:"\ud83c\udfa5 Live-Streaming"})}),(0,we.jsx)("div",{className:"dropdown-item",onClick:()=>{e("/dashboard/analytics"),d(!1)},children:(0,we.jsx)("span",{children:"\ud83d\udcc8 Statistiken"})}),(null===a||void 0===a?void 0:a.isAdmin)&&(0,we.jsxs)(s.Fragment,{children:[(0,we.jsx)("div",{className:"dropdown-item",onClick:()=>{e("/dashboard/sports"),d(!1)},children:(0,we.jsx)("span",{children:"\ud83e\udd4b Multi-Sport"})}),(0,we.jsx)("div",{className:"dropdown-item",onClick:()=>{e("/dashboard/admin"),d(!1)},children:(0,we.jsx)("span",{children:"\u2699\ufe0f Administration"})})]},"admin-dropdown")]}),(0,we.jsx)("div",{className:"dropdown-divider"}),(0,we.jsxs)("div",{className:"dropdown-section",children:[(0,we.jsx)("div",{className:"dropdown-section-title",children:"Benutzer"}),(0,we.jsx)("div",{className:"dropdown-item",children:(0,we.jsx)("span",{children:"\u2699\ufe0f Einstellungen"})}),(0,we.jsx)("div",{className:"dropdown-item",children:(0,we.jsx)("span",{children:"\ud83d\udc64 Profil"})}),(0,we.jsx)("div",{className:"dropdown-item logout",onClick:j,children:(0,we.jsx)("span",{children:"\ud83d\udeaa Abmelden"})})]})]})]})})]})}),(0,we.jsxs)("div",{className:"dashboard-content",children:["overview"===n&&(0,we.jsx)(Eo,{user:a,setActiveView:b,onLogout:j,selectedTurnier:u,turniere:m,setSelectedTurnier:h,modulesExpanded:f,setModulesExpanded:g,berichteExpanded:x,setBerichteExpanded:v,openFormenWindow:y}),"wettkaempfer-registrieren"===n&&(0,we.jsx)("div",{className:"dashboard-module",children:(0,we.jsx)(ro,{})}),"wettkaempfer"===n&&(0,we.jsx)("div",{className:"dashboard-module",children:(0,we.jsx)(yl,{selectedTurnier:u})}),"turniere"===n&&(0,we.jsx)("div",{className:"dashboard-module",children:(0,we.jsx)(Dl,{selectedTurnier:u})}),n.startsWith("turnier-bearbeiten")&&(0,we.jsx)("div",{className:"dashboard-module full-width",children:(0,we.jsx)(xo,{})}),"brackets"===n&&(0,we.jsx)("div",{className:"dashboard-module",children:(0,we.jsx)(El,{selectedTurnier:u})}),"formen"===n&&(0,we.jsx)("div",{className:"dashboard-module",children:(0,we.jsx)(Hl,{turnierId:(null===u||void 0===u?void 0:u.turnier_id)||(null===u||void 0===u?void 0:u.id)})}),"anmeldungen"===n&&(0,we.jsx)("div",{className:"dashboard-module",children:(0,we.jsx)(Fl,{selectedTurnier:u})}),"streaming"===n&&(0,we.jsx)("div",{className:"dashboard-module",children:(0,we.jsx)(Rl,{selectedTurnier:u})}),"analytics"===n&&(0,we.jsx)("div",{className:"dashboard-module",children:(0,we.jsx)(Ll,{selectedTurnier:u})}),"divisionen"===n&&(0,we.jsx)("div",{className:"dashboard-module",children:(0,we.jsx)(Il,{selectedTurnier:u})}),("vereine"===n||n.startsWith("vereine/"))&&(0,we.jsx)("div",{className:"dashboard-module",children:(()=>{if("/dashboard/vereine/neu"===t.pathname||"vereine/neu"===n)return(0,we.jsx)(go,{});if(n.startsWith("vereine/")){const e=n.split("/")[1];return(0,we.jsx)(fo,{vereinId:e})}return(0,we.jsx)(ao,{})})()}),"bruchtest"===n&&(0,we.jsx)("div",{className:"dashboard-module full-width",children:(0,we.jsx)(Zl,{turnierId:null===u||void 0===u?void 0:u.turnier_id})}),"zeitplan"===n&&(0,we.jsx)("div",{className:"dashboard-module full-width",children:(0,we.jsx)(To,{selectedTurnier:u})}),"ergebnisse"===n&&(0,we.jsx)("div",{className:"dashboard-module",children:(0,we.jsxs)("div",{className:"coming-soon",children:[(0,we.jsx)("h2",{children:"\ud83d\udcca Ergebnisse eingeben"}),(0,we.jsx)("p",{children:"Dieses Modul wird in K\xfcrze verf\xfcgbar sein."}),(0,we.jsxs)("div",{className:"feature-preview",children:[(0,we.jsx)("h3",{children:"Geplante Funktionen:"}),(0,we.jsxs)("ul",{children:[(0,we.jsx)("li",{children:"Kampfergebnisse erfassen"}),(0,we.jsx)("li",{children:"Punkte und Bewertungen"}),(0,we.jsx)("li",{children:"Platzierungen berechnen"}),(0,we.jsx)("li",{children:"Ergebnis-Validierung"})]})]})]})}),"urkunden"===n&&(0,we.jsx)("div",{className:"dashboard-module",children:(0,we.jsxs)("div",{className:"coming-soon",children:[(0,we.jsx)("h2",{children:"\ud83c\udfc5 Urkunden drucken"}),(0,we.jsx)("p",{children:"Dieses Modul wird in K\xfcrze verf\xfcgbar sein."}),(0,we.jsxs)("div",{className:"feature-preview",children:[(0,we.jsx)("h3",{children:"Geplante Funktionen:"}),(0,we.jsxs)("ul",{children:[(0,we.jsx)("li",{children:"Sieger-Urkunden generieren"}),(0,we.jsx)("li",{children:"Platzierungs-Urkunden"}),(0,we.jsx)("li",{children:"Teilnahme-Zertifikate"}),(0,we.jsx)("li",{children:"PDF-Export und Druck"})]})]})]})}),"live-ergebnisse"===n&&(0,we.jsx)("div",{className:"dashboard-module",children:(0,we.jsxs)("div",{className:"coming-soon",children:[(0,we.jsx)("h2",{children:"\ud83d\udcfa Live-Ergebnisse"}),(0,we.jsx)("p",{children:"Dieses Modul wird in K\xfcrze verf\xfcgbar sein."}),(0,we.jsxs)("div",{className:"feature-preview",children:[(0,we.jsx)("h3",{children:"Geplante Funktionen:"}),(0,we.jsxs)("ul",{children:[(0,we.jsx)("li",{children:"Echtzeit-Ergebnisanzeige"}),(0,we.jsx)("li",{children:"Live-Scoreboard"}),(0,we.jsx)("li",{children:"Zuschauer-Interface"}),(0,we.jsx)("li",{children:"Mobile Optimierung"})]})]})]})}),"turnier-einstellungen"===n&&(0,we.jsx)(jo,{}),"staff-management"===n&&(0,we.jsx)("div",{className:"dashboard-module full-width",children:(0,we.jsx)(zo,{turnierId:null===u||void 0===u?void 0:u.turnier_id})}),"staff-management-old"===n&&(0,we.jsx)("div",{className:"dashboard-module",children:(0,we.jsxs)("div",{className:"coming-soon",children:[(0,we.jsx)("h2",{children:"\ud83d\udc65 Staff Management"}),(0,we.jsx)("p",{children:"Dieses Modul wird in K\xfcrze verf\xfcgbar sein."}),(0,we.jsxs)("div",{className:"feature-preview",children:[(0,we.jsx)("h3",{children:"Geplante Funktionen:"}),(0,we.jsxs)("ul",{children:[(0,we.jsx)("li",{children:"Personal und Helfer verwalten"}),(0,we.jsx)("li",{children:"Schichtpl\xe4ne erstellen"}),(0,we.jsx)("li",{children:"Berechtigungen zuweisen"}),(0,we.jsx)("li",{children:"Kontaktinformationen verwalten"})]})]})]})}),"siegerehrung"===n&&(0,we.jsx)("div",{className:"dashboard-module",children:(0,we.jsxs)("div",{className:"coming-soon",children:[(0,we.jsx)("h2",{children:"\ud83c\udfc6 Siegerehrung"}),(0,we.jsx)("p",{children:"Dieses Modul wird in K\xfcrze verf\xfcgbar sein."}),(0,we.jsxs)("div",{className:"feature-preview",children:[(0,we.jsx)("h3",{children:"Geplante Funktionen:"}),(0,we.jsxs)("ul",{children:[(0,we.jsx)("li",{children:"Preise und Medaillen verwalten"}),(0,we.jsx)("li",{children:"Siegerehrungs-Planung"}),(0,we.jsx)("li",{children:"Preisverleihung organisieren"}),(0,we.jsx)("li",{children:"Ehrungen dokumentieren"})]})]})]})}),"kampfflaechen"===n&&(0,we.jsx)("div",{className:"dashboard-module full-width",children:(0,we.jsx)(No,{turnierId:null===u||void 0===u?void 0:u.turnier_id})}),"platzierung"===n&&(0,we.jsx)("div",{className:"dashboard-module",children:(0,we.jsxs)("div",{className:"coming-soon",children:[(0,we.jsx)("h2",{children:"\ud83e\udd47 Platzierung finden"}),(0,we.jsx)("p",{children:"Dieses Modul wird in K\xfcrze verf\xfcgbar sein."}),(0,we.jsxs)("div",{className:"feature-preview",children:[(0,we.jsx)("h3",{children:"Geplante Funktionen:"}),(0,we.jsxs)("ul",{children:[(0,we.jsx)("li",{children:"Ranglisten und Tabellen"}),(0,we.jsx)("li",{children:"Platzierungen berechnen"}),(0,we.jsx)("li",{children:"Ergebnis-\xdcbersichten"}),(0,we.jsx)("li",{children:"Statistiken und Analysen"})]})]})]})}),"sports"===n&&(null===a||void 0===a?void 0:a.isAdmin)&&(0,we.jsx)("div",{className:"dashboard-module",children:(0,we.jsx)(Ei,{})}),"admin"===n&&(null===a||void 0===a?void 0:a.isAdmin)&&(0,we.jsx)("div",{className:"dashboard-module",children:(0,we.jsx)(Ao,{user:a})})]})]})};const Bo=function(e){let{onLogin:t}=e;const n=ne(),[r,a]=(0,s.useState)({email:"",passwort:""}),[i,l]=(0,s.useState)(""),[o,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)([]),[h,m]=(0,s.useState)(!0),[p,f]=(0,s.useState)(null);(0,s.useEffect)((()=>{g()}),[]);const g=async()=>{try{const e=await fetch("/api/turniere/public");if(e.ok){const t=await e.json();t.success&&t.data?u(Array.isArray(t.data)?t.data:[]):Array.isArray(t)&&u(t)}m(!1)}catch(Zo){console.error("Fehler beim Abrufen der Turniere:",Zo),m(!1)}},x=e=>{a({...r,[e.target.name]:e.target.value})};return(0,we.jsxs)("div",{className:"login-page-new",children:[(0,we.jsx)("nav",{className:"login-nav",children:(0,we.jsxs)("div",{className:"login-nav-content",children:[(0,we.jsxs)("div",{className:"nav-logo",children:[(0,we.jsx)("img",{src:"/logo.png",alt:"TDA"}),(0,we.jsx)("span",{children:"TDA Tournament Center"})]}),(0,we.jsxs)("div",{className:"nav-links",children:[(0,we.jsx)("a",{href:"https://events.tda-intl.org",children:"Home"}),(0,we.jsx)("a",{href:"https://tda-intl.org",children:"TDA Systems"}),(0,we.jsx)("a",{href:"https://tda-intl.org/kontakt",children:"Kontakt"})]})]})}),(0,we.jsx)("div",{className:"login-main",children:(0,we.jsxs)("div",{className:"login-container-new",children:[(0,we.jsxs)("div",{className:"tournaments-section-login",children:[(0,we.jsxs)("div",{className:"section-header",children:[(0,we.jsx)("h1",{children:"Kommende Turniere"}),(0,we.jsx)("p",{children:"W\xe4hlen Sie ein Turnier aus und melden Sie sich an"})]}),h?(0,we.jsxs)("div",{className:"loading-state",children:[(0,we.jsx)("div",{className:"spinner"}),(0,we.jsx)("p",{children:"Lade Turniere..."})]}):0===d.length?(0,we.jsx)("div",{className:"empty-state",children:(0,we.jsx)("p",{children:"Aktuell sind keine Turniere verf\xfcgbar."})}):(0,we.jsx)("div",{className:"tournaments-grid-login",children:d.map((e=>(0,we.jsxs)("div",{className:"tournament-card-login "+((null===p||void 0===p?void 0:p.id)===e.id?"selected":""),onClick:()=>(e=>{f(e),l("")})(e),children:[(0,we.jsxs)("div",{className:"tournament-header",children:[(0,we.jsx)("h3",{children:e.name}),(null===p||void 0===p?void 0:p.id)===e.id&&(0,we.jsx)("span",{className:"selected-badge",children:"Ausgew\xe4hlt"})]}),(0,we.jsxs)("div",{className:"tournament-details",children:[(0,we.jsxs)("div",{className:"detail-item",children:[(0,we.jsx)("span",{className:"detail-icon",children:"\ud83d\udcc5"}),(0,we.jsx)("span",{children:new Date(e.datum).toLocaleDateString("de-DE",{weekday:"short",year:"numeric",month:"long",day:"numeric"})})]}),(0,we.jsxs)("div",{className:"detail-item",children:[(0,we.jsx)("span",{className:"detail-icon",children:"\ud83d\udccd"}),(0,we.jsx)("span",{children:e.ort||"Ort wird bekannt gegeben"})]}),e.anmeldeschluss&&(0,we.jsxs)("div",{className:"detail-item",children:[(0,we.jsx)("span",{className:"detail-icon",children:"\u23f0"}),(0,we.jsxs)("span",{children:["Anmeldeschluss: ",new Date(e.anmeldeschluss).toLocaleDateString("de-DE")]})]})]})]},e.id)))})]}),(0,we.jsx)("div",{className:"login-section-new",children:(0,we.jsxs)("div",{className:"login-box-styled",children:[(0,we.jsxs)("div",{className:"login-header",children:[(0,we.jsx)("div",{className:"login-logo-small",children:(0,we.jsx)("img",{src:"/logo.png",alt:"Tournament Software"})}),(0,we.jsx)("h2",{children:"Login"}),(0,we.jsx)("p",{children:"Willkommen zur\xfcck"})]}),p&&(0,we.jsxs)("div",{className:"selected-tournament-info",children:[(0,we.jsx)("span",{className:"info-label",children:"Ausgew\xe4hltes Turnier:"}),(0,we.jsx)("span",{className:"info-value",children:p.name})]}),i&&(0,we.jsx)("div",{className:"login-message "+(i.includes("erfolgreich")?"success":i.includes("w\xe4hlen")?"info":"error"),children:i}),(0,we.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0),l("");try{console.log("\ud83c\udfe2 Login f\xfcr:",r.email);const e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),c=await e.json();if(console.log("\ud83d\udce1 Login Response:",c),e.ok&&c.success){var a,i,s,o,d,u,h;const e={success:!0,token:c.token,refreshToken:c.refreshToken||null,user:{vereins_id:(null===(a=c.user)||void 0===a?void 0:a.vereins_id)||c.id,name:(null===(i=c.user)||void 0===i?void 0:i.name)||c.name,email:(null===(s=c.user)||void 0===s?void 0:s.email)||r.email,benutzername:(null===(o=c.user)||void 0===o?void 0:o.benutzername)||c.benutzername,role:(null===(d=c.user)||void 0===d?void 0:d.role)||"verein",ort:(null===(u=c.user)||void 0===u?void 0:u.ort)||c.ort,ansprechpartner:(null===(h=c.user)||void 0===h?void 0:h.ansprechpartner)||c.ansprechpartner}};localStorage.setItem("token",c.token),localStorage.setItem("authToken",c.token),"admin"===e.user.role?(localStorage.setItem("adminData",JSON.stringify(e)),localStorage.removeItem("clubData"),localStorage.removeItem("clubId"),console.log("\u2705 Admin-Login erfolgreich!"),t?t(e):n("/dashboard")):(localStorage.setItem("clubData",JSON.stringify(e)),localStorage.setItem("clubId",e.user.vereins_id.toString()),localStorage.removeItem("adminData"),console.log("\u2705 Vereins-Login erfolgreich!"),p?n(`/registration?turnierId=${p.id}`):l("Bitte w\xe4hlen Sie zuerst ein Turnier aus."))}else l(c.error||c.message||"Login fehlgeschlagen."),console.error("\u274c Login fehlgeschlagen:",c)}catch(m){l(m.message),console.error("\u274c Login-Fehler:",m)}finally{c(!1)}},className:"login-form",children:[(0,we.jsxs)("div",{className:"input-group",children:[(0,we.jsx)("label",{children:"Email oder Benutzername"}),(0,we.jsx)("input",{type:"text",name:"email",value:r.email,onChange:x,placeholder:"ihre@email.de",required:!0,disabled:o})]}),(0,we.jsxs)("div",{className:"input-group",children:[(0,we.jsx)("label",{children:"Passwort"}),(0,we.jsx)("input",{type:"password",name:"passwort",value:r.passwort,onChange:x,placeholder:"Ihr Passwort",required:!0,disabled:o})]}),(0,we.jsxs)("button",{type:"submit",className:"login-button",disabled:o,children:[o&&(0,we.jsx)("span",{className:"login-spinner"}),o?"Anmeldung l\xe4uft...":"Einloggen"]})]}),(0,we.jsxs)("div",{className:"login-footer",children:[(0,we.jsx)("p",{children:"Noch kein Konto?"}),(0,we.jsx)("button",{onClick:()=>n("/register"),className:"register-link",children:"Verein registrieren"})]}),(0,we.jsxs)("div",{className:"login-help",children:[(0,we.jsx)("p",{children:(0,we.jsx)("strong",{children:"Hinweis:"})}),(0,we.jsxs)("p",{children:["\u2022 Als ",(0,we.jsx)("strong",{children:"Verein"}),": W\xe4hlen Sie ein Turnier aus und melden Sie sich an."]}),(0,we.jsxs)("p",{children:["\u2022 Als ",(0,we.jsx)("strong",{children:"Administrator"}),": Direkter Zugang zum Dashboard."]})]})]})})]})})]})};function Ro(){var e;const[t,n]=(0,s.useState)(1),[r,a]=(0,s.useState)(""),[i,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)({name:"",ansprechpartner:"",strasse:"",hausnummer:"",plz:"",ort:"",email:"",benutzername:"",passwort:"",homepage:"",telefon:"",logo:""}),[d,u]=(0,s.useState)(!1),[h,m]=(0,s.useState)({api_url:"http://localhost:3006/api",api_token:""}),[p,f]=(0,s.useState)(null),[g,x]=(0,s.useState)([]),[v,b]=(0,s.useState)([]),[j,y]=(0,s.useState)("single"),[k,w]=(0,s.useState)(null),N=e=>{c({...o,[e.target.name]:e.target.value})};return(0,we.jsx)("div",{className:"club-registration-page",children:(0,we.jsxs)("div",{className:"registration-container",children:[(0,we.jsxs)("div",{className:"registration-header",children:[(0,we.jsx)("h1",{children:"Vereinsregistrierung"}),(0,we.jsx)("p",{children:"Registrieren Sie Ihren Verein f\xfcr die TDA Tournament Software"})]}),(0,we.jsxs)("div",{className:"step-indicator",children:[(0,we.jsxs)("div",{className:`step ${t>=1?"active":""} ${t>1?"completed":""}`,children:[(0,we.jsx)("div",{className:"step-number",children:"1"}),(0,we.jsx)("div",{className:"step-label",children:"Vereinsdaten"})]}),(0,we.jsx)("div",{className:"step-line"}),(0,we.jsxs)("div",{className:`step ${t>=2?"active":""} ${t>2?"completed":""}`,children:[(0,we.jsx)("div",{className:"step-number",children:"2"}),(0,we.jsx)("div",{className:"step-label",children:"Dojosoftware"})]}),(0,we.jsx)("div",{className:"step-line"}),(0,we.jsxs)("div",{className:"step "+(t>=3?"active":""),children:[(0,we.jsx)("div",{className:"step-number",children:"3"}),(0,we.jsx)("div",{className:"step-label",children:"Best\xe4tigung"})]})]}),r&&(0,we.jsx)("div",{className:"message "+(r.includes("\u2705")?"success":r.includes("\u274c")?"error":"info"),children:r}),1===t&&(0,we.jsxs)("div",{className:"form-step",children:[(0,we.jsx)("h2",{children:"Schritt 1: Vereinsdaten"}),(0,we.jsxs)("div",{className:"form-grid",children:[(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Vereinsname *"}),(0,we.jsx)("input",{name:"name",value:o.name,onChange:N,placeholder:"z.B. TDA Taekwondo Berlin",required:!0})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Ansprechpartner"}),(0,we.jsx)("input",{name:"ansprechpartner",value:o.ansprechpartner,onChange:N,placeholder:"z.B. Max Mustermann"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Email *"}),(0,we.jsx)("input",{type:"email",name:"email",value:o.email,onChange:N,placeholder:"verein@example.com",required:!0}),(0,we.jsx)("small",{style:{color:"#999",display:"block",marginTop:"0.3rem"},children:"Kann auch f\xfcr Login verwendet werden"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Telefon *"}),(0,we.jsx)("input",{type:"tel",name:"telefon",value:o.telefon,onChange:N,placeholder:"+49 123 456789",required:!0})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Stra\xdfe"}),(0,we.jsx)("input",{name:"strasse",value:o.strasse,onChange:N,placeholder:"Hauptstra\xdfe"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Hausnummer"}),(0,we.jsx)("input",{name:"hausnummer",value:o.hausnummer,onChange:N,placeholder:"123"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"PLZ"}),(0,we.jsx)("input",{name:"plz",value:o.plz,onChange:N,placeholder:"12345"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Ort"}),(0,we.jsx)("input",{name:"ort",value:o.ort,onChange:N,placeholder:"Berlin"})]}),(0,we.jsx)("div",{className:"form-group",style:{gridColumn:"span 2"},children:(0,we.jsxs)("div",{style:{background:"rgba(255, 107, 53, 0.1)",border:"2px solid #ff6b35",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:[(0,we.jsx)("h4",{style:{margin:"0 0 0.5rem 0",color:"#ff6b35"},children:"\ud83d\udd10 Login-Zugangsdaten f\xfcr TDA Tournament Software"}),(0,we.jsx)("p",{style:{margin:0,fontSize:"0.9rem",lineHeight:"1.5"},children:'Mit diesen Daten melden Sie sich sp\xe4ter in der TDA Tournament Software an. Der Benutzername "admin" ist reserviert und kann nicht verwendet werden.'})]})}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Benutzername * (f\xfcr Login)"}),(0,we.jsx)("input",{name:"benutzername",value:o.benutzername,onChange:N,placeholder:"z.B. ihr-verein",required:!0}),(0,we.jsx)("small",{style:{color:"#999",display:"block",marginTop:"0.3rem"},children:"Damit melden Sie sich in der TDA Software an"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Passwort * (f\xfcr Login)"}),(0,we.jsx)("input",{type:"password",name:"passwort",value:o.passwort,onChange:N,placeholder:"Mindestens 6 Zeichen",required:!0}),(0,we.jsx)("small",{style:{color:"#999",display:"block",marginTop:"0.3rem"},children:"Sicher aufbewahren!"})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Homepage"}),(0,we.jsx)("input",{name:"homepage",value:o.homepage,onChange:N,placeholder:"https://..."})]}),(0,we.jsxs)("div",{className:"form-group",children:[(0,we.jsx)("label",{children:"Logo URL"}),(0,we.jsx)("input",{name:"logo",value:o.logo,onChange:N,placeholder:"https://... (optional)"})]})]}),(0,we.jsx)("div",{className:"form-actions",children:(0,we.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>{const e=["name","email","benutzername","passwort","telefon"];for(let t of e)if(!o[t]||!o[t].trim())return void a(`\u274c Bitte f\xfcllen Sie das Feld "${t}" aus!`);"admin"!==o.benutzername.toLowerCase()?o.passwort.length<6?a("\u274c Das Passwort muss mindestens 6 Zeichen lang sein!"):(a(""),n(2)):a('\u274c Der Benutzername "admin" ist reserviert. Bitte w\xe4hlen Sie einen anderen.')},children:"Weiter \u2192"})})]}),2===t&&(0,we.jsxs)("div",{className:"form-step",children:[(0,we.jsx)("h2",{children:"Schritt 2: Dojosoftware Integration (Optional)"}),(0,we.jsxs)("div",{className:"dojo-integration-section",children:[(0,we.jsx)("div",{className:"checkbox-group",children:(0,we.jsxs)("label",{className:"checkbox-label",children:[(0,we.jsx)("input",{type:"checkbox",checked:d,onChange:e=>u(e.target.checked)}),(0,we.jsx)("span",{children:"Ich nutze bereits die TDA Kampfsport Software (Dojosoftware)"})]})}),d&&(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("div",{className:"dojo-config-box",children:[(0,we.jsx)("h3",{children:"\ud83d\udd17 API-Zugangsdaten Dojosoftware"}),(0,we.jsx)("div",{style:{background:"rgba(59, 130, 246, 0.1)",border:"2px solid #3b82f6",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem"},children:(0,we.jsxs)("p",{style:{margin:0,lineHeight:"1.6",fontSize:"0.9rem"},children:[(0,we.jsx)("strong",{style:{color:"#3b82f6"},children:"\u2139\ufe0f Wo finde ich die Zugangsdaten?"}),(0,we.jsx)("br",{}),"1. \xd6ffnen Sie Ihre Dojosoftware",(0,we.jsx)("br",{}),"2. Gehen Sie zu ",(0,we.jsx)("strong",{children:"Dojoverwaltung"})," \u2192 Dojo bearbeiten",(0,we.jsx)("br",{}),"3. W\xe4hlen Sie den Tab ",(0,we.jsx)("strong",{children:'"API-Zugang" (\ud83d\udd17)'}),(0,we.jsx)("br",{}),"4. Generieren Sie einen API-Token (falls noch nicht vorhanden)",(0,we.jsx)("br",{}),"5. Kopieren Sie API-URL und Token hierher"]})}),(0,we.jsxs)("div",{className:"form-group",style:{marginBottom:"1rem"},children:[(0,we.jsx)("label",{children:"\ud83c\udf10 API-URL"}),(0,we.jsx)("input",{value:h.api_url,onChange:e=>m({...h,api_url:e.target.value}),placeholder:"http://localhost:3006/api"}),(0,we.jsx)("small",{style:{color:"#999",display:"block",marginTop:"0.5rem"},children:"Die API-URL Ihrer Dojosoftware (z.B. http://localhost:3006/api)"})]}),(0,we.jsxs)("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[(0,we.jsx)("label",{children:"\ud83d\udd11 API-Token"}),(0,we.jsx)("input",{type:"text",value:h.api_token,onChange:e=>m({...h,api_token:e.target.value}),placeholder:"Ihr eindeutiger API-Token (UUID Format)",style:{fontFamily:"monospace",fontSize:"0.9rem"}}),(0,we.jsx)("small",{style:{color:"#999",display:"block",marginTop:"0.5rem"},children:"Der eindeutige API-Token aus der Dojoverwaltung"})]}),(0,we.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:async()=>{if(h.api_url&&h.api_token){l(!0),a("\ud83d\udd04 Verbinde mit Dojosoftware...");try{var e;const t=await fetch("/api/dojo-sync/check-connection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dojo_api_url:h.api_url,api_token:h.api_token})}),n=await t.json();if(!t.ok||!n.success)throw new Error(n.message||"Verbindung fehlgeschlagen");f(n.token),x(n.dojos||[]),a(`\u2705 Verbunden! ${(null===(e=n.dojos)||void 0===e?void 0:e.length)||0} Dojos gefunden.`)}catch(t){console.error("Connection Error:",t),a("\u274c Verbindung fehlgeschlagen: "+t.message),f(null),x([])}finally{l(!1)}}else a("\u274c Bitte API-URL und API-Token eingeben!")},disabled:i,children:i?"\ud83d\udd04 Verbinde...":"\ud83d\udd0c Verbindung testen"})]}),p&&g.length>0&&(0,we.jsxs)("div",{className:"dojo-selection-box",children:[(0,we.jsx)("h3",{children:"Welche Dojos m\xf6chten Sie \xfcbertragen?"}),(0,we.jsx)("div",{className:"dojos-list",children:g.map((e=>(0,we.jsx)("div",{className:"dojo-item",children:(0,we.jsxs)("label",{className:"checkbox-label",children:[(0,we.jsx)("input",{type:"checkbox",checked:v.includes(e.dojo_id),onChange:()=>{return t=e.dojo_id,void b((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t}}),(0,we.jsxs)("span",{children:[(0,we.jsx)("strong",{children:e.name}),(0,we.jsxs)("small",{children:[e.mitglieder_count," Mitglieder"]})]})]})},e.dojo_id)))}),v.length>1&&(0,we.jsxs)("div",{className:"merge-mode-section",children:[(0,we.jsx)("h4",{children:"Wie m\xf6chten Sie die Dojos organisieren?"}),(0,we.jsxs)("div",{className:"radio-group",children:[(0,we.jsxs)("label",{className:"radio-label",children:[(0,we.jsx)("input",{type:"radio",value:"single",checked:"single"===j,onChange:e=>y(e.target.value)}),(0,we.jsxs)("span",{children:[(0,we.jsx)("strong",{children:"Ein gemeinsames Konto"}),(0,we.jsx)("small",{children:"Alle Wettk\xe4mpfer unter einem Verein"})]})]}),(0,we.jsxs)("label",{className:"radio-label",children:[(0,we.jsx)("input",{type:"radio",value:"multiple",checked:"multiple"===j,onChange:e=>y(e.target.value)}),(0,we.jsxs)("span",{children:[(0,we.jsx)("strong",{children:"Separate Konten"}),(0,we.jsx)("small",{children:"Jedes Dojo als eigener Verein (aktuell nicht unterst\xfctzt)"})]})]})]}),"single"===j&&(0,we.jsxs)("div",{className:"dojo-name-selection",style:{marginTop:"1.5rem"},children:[(0,we.jsx)("h4",{children:"Welcher Dojo-Name soll als Vereinsname verwendet werden?"}),(0,we.jsxs)("div",{className:"radio-group",children:[g.filter((e=>v.includes(e.dojo_id))).map((e=>(0,we.jsxs)("label",{className:"radio-label",children:[(0,we.jsx)("input",{type:"radio",name:"selected_dojo_name",value:e.name,checked:o.name===e.name,onChange:()=>c({...o,name:e.name})}),(0,we.jsxs)("span",{children:[(0,we.jsx)("strong",{children:e.name}),(0,we.jsxs)("small",{children:[e.mitglieder_count," Mitglieder"]})]})]},e.dojo_id))),(0,we.jsxs)("label",{className:"radio-label",children:[(0,we.jsx)("input",{type:"radio",name:"selected_dojo_name",value:"custom",checked:!g.some((e=>v.includes(e.dojo_id)&&e.name===o.name)),onChange:()=>{}}),(0,we.jsxs)("span",{children:[(0,we.jsx)("strong",{children:"Eigener Name"}),(0,we.jsx)("small",{children:"In Schritt 1 eingeben"})]})]})]})]})]}),(0,we.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:async()=>{if(0!==v.length){l(!0),a("\ud83d\udd04 Lade Vorschau...");try{const e=await fetch("/api/dojo-sync/preview-import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dojo_api_url:h.api_url,token:p,dojo_ids:v})}),t=await e.json();if(!e.ok||!t.success)throw new Error(t.message||"Vorschau laden fehlgeschlagen");w(t),a(`\u2705 Vorschau geladen: ${t.wettkaempfer_count} Wettk\xe4mpfer gefunden`)}catch(e){console.error("Preview Error:",e),a("\u274c Vorschau fehlgeschlagen: "+e.message),w(null)}finally{l(!1)}}else a("\u274c Bitte mindestens ein Dojo ausw\xe4hlen!")},disabled:i||0===v.length,children:i?"\ud83d\udd04 L\xe4dt...":"\ud83d\udc41\ufe0f Vorschau laden"}),k&&(0,we.jsxs)("div",{className:"preview-box",children:[(0,we.jsxs)("h4",{children:["Vorschau: ",k.wettkaempfer_count," Wettk\xe4mpfer"]}),(0,we.jsx)("div",{className:"preview-list",children:null===(e=k.wettkaempfer_preview)||void 0===e?void 0:e.map(((e,t)=>(0,we.jsxs)("div",{className:"preview-item",children:[(0,we.jsxs)("span",{children:[e.vorname," ",e.nachname]}),(0,we.jsxs)("small",{children:[e.gurtfarbe," \u2022 ",e.geschlecht]})]},t)))}),k.wettkaempfer_count>10&&(0,we.jsxs)("p",{className:"preview-more",children:["... und ",k.wettkaempfer_count-10," weitere"]})]})]})]})]}),(0,we.jsxs)("div",{className:"form-actions",children:[(0,we.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>n(1),children:"\u2190 Zur\xfcck"}),d?(0,we.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>{if(d){if(!p)return void a("\u274c Bitte zuerst Verbindung testen!");if(0===v.length)return void a("\u274c Bitte mindestens ein Dojo ausw\xe4hlen!")}a(""),n(3)},children:"Weiter \u2192"}):(0,we.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>{u(!1),a(""),n(3)},children:"\xdcberspringen \u2192"})]})]}),3===t&&(0,we.jsxs)("div",{className:"form-step",children:[(0,we.jsx)("h2",{children:"Schritt 3: Best\xe4tigung"}),(0,we.jsxs)("div",{className:"confirmation-box",children:[(0,we.jsx)("h3",{children:"Vereinsdaten"}),(0,we.jsxs)("div",{className:"confirmation-grid",children:[(0,we.jsxs)("div",{children:[(0,we.jsx)("strong",{children:"Name:"})," ",o.name]}),(0,we.jsxs)("div",{children:[(0,we.jsx)("strong",{children:"Email:"})," ",o.email]}),(0,we.jsxs)("div",{children:[(0,we.jsx)("strong",{children:"Telefon:"})," ",o.telefon]}),o.ansprechpartner&&(0,we.jsxs)("div",{children:[(0,we.jsx)("strong",{children:"Ansprechpartner:"})," ",o.ansprechpartner]})]}),d&&p&&(0,we.jsxs)(we.Fragment,{children:[(0,we.jsx)("h3",{style:{marginTop:"2rem"},children:"Dojosoftware Integration"}),(0,we.jsxs)("div",{className:"confirmation-grid",children:[(0,we.jsxs)("div",{children:[(0,we.jsx)("strong",{children:"Ausgew\xe4hlte Dojos:"})," ",v.length]}),(0,we.jsxs)("div",{children:[(0,we.jsx)("strong",{children:"Wettk\xe4mpfer:"})," ",(null===k||void 0===k?void 0:k.wettkaempfer_count)||0]}),(0,we.jsxs)("div",{children:[(0,we.jsx)("strong",{children:"Modus:"})," ","single"===j?"Ein Konto":"Separate Konten"]})]})]})]}),(0,we.jsxs)("div",{className:"form-actions",children:[(0,we.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>n(2),children:"\u2190 Zur\xfcck"}),(0,we.jsx)("button",{type:"button",className:"btn btn-primary btn-large",onClick:async()=>{l(!0),a("\ud83d\udd04 Registrierung wird durchgef\xfchrt...");try{if(d&&p){const e=await fetch("/api/dojo-sync/complete-registration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({verein_data:o,dojo_config:{dojo_api_url:h.api_url,token:p,dojo_ids:v,merge_mode:j,api_token:h.api_token}})}),t=await e.json();if(!e.ok||!t.success)throw new Error(t.message||"Registrierung fehlgeschlagen");a(`\u2705 Registrierung erfolgreich! ${t.imported_wettkaempfer} Wettk\xe4mpfer importiert.`),setTimeout((()=>{window.location.href="/club-login"}),2e3)}else{const e=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),t=await e.json();if(!e.ok)throw new Error(t.error||"Registrierung fehlgeschlagen");a("\u2705 Registrierung erfolgreich!"),setTimeout((()=>{window.location.href="/club-login"}),2e3)}}catch(e){console.error("Registration Error:",e),a("\u274c Registrierung fehlgeschlagen: "+e.message)}finally{l(!1)}},disabled:i,children:i?"\ud83d\udd04 Registrierung l\xe4uft...":"\u2713 Registrierung abschlie\xdfen"})]})]})]})})}const Fo=function(){const e=ne(),[t,n]=(0,s.useState)([]),[r,a]=(0,s.useState)(!0);return(0,s.useEffect)((()=>{!async function(){try{const e=await fetch("/api/turniere/public");if(e.ok){const t=await e.json();t.success&&t.data?n(Array.isArray(t.data)?t.data:[]):Array.isArray(t)&&n(t)}a(!1)}catch(Zo){console.error("Fehler beim Abrufen der Turniere:",Zo),a(!1)}}()}),[]),(0,we.jsxs)("div",{className:"landing-page",children:[(0,we.jsx)("div",{className:"landing-hero",children:(0,we.jsxs)("div",{className:"landing-content",children:[(0,we.jsx)("div",{className:"landing-left",children:(0,we.jsx)("img",{src:"/logo.png",alt:"TDA Tournament Software",className:"landing-logo"})}),(0,we.jsxs)("div",{className:"landing-right",children:[(0,we.jsxs)("div",{className:"landing-header",children:[(0,we.jsx)("p",{className:"landing-suite",children:"TOURNAMENT SOFTWARE SUITE"}),(0,we.jsxs)("h1",{className:"landing-title",children:["WILLKOMMEN IM",(0,we.jsx)("br",{}),(0,we.jsx)("span",{className:"landing-title-highlight",children:"TDA TOURNAMENT CENTER"})]})]}),(0,we.jsxs)("div",{className:"landing-cards",children:[(0,we.jsxs)("div",{className:"landing-card",onClick:()=>e("/login"),children:[(0,we.jsx)("div",{className:"card-icon",children:(0,we.jsx)("span",{children:"\ud83d\udd10"})}),(0,we.jsxs)("div",{className:"card-content",children:[(0,we.jsx)("h3",{children:"LOGIN"}),(0,we.jsx)("p",{children:"Einloggen ins System"})]}),(0,we.jsxs)("div",{className:"card-arrow",children:[(0,we.jsx)("span",{className:"arrow-text",children:"\xd6FFNEN"}),(0,we.jsx)("span",{className:"arrow-icon",children:"\u2192"})]})]}),(0,we.jsxs)("div",{className:"landing-card",onClick:()=>e("/register"),children:[(0,we.jsx)("div",{className:"card-icon",children:(0,we.jsx)("span",{children:"\ud83d\udccb"})}),(0,we.jsxs)("div",{className:"card-content",children:[(0,we.jsx)("h3",{children:"REGISTRIEREN"}),(0,we.jsx)("p",{children:"Neuen Verein registrieren"})]}),(0,we.jsxs)("div",{className:"card-arrow",children:[(0,we.jsx)("span",{className:"arrow-text",children:"\xd6FFNEN"}),(0,we.jsx)("span",{className:"arrow-icon",children:"\u2192"})]})]}),(0,we.jsxs)("div",{className:"landing-card",onClick:()=>e("/registration"),children:[(0,we.jsx)("div",{className:"card-icon",children:(0,we.jsx)("span",{children:"\ud83e\udd4b"})}),(0,we.jsxs)("div",{className:"card-content",children:[(0,we.jsx)("h3",{children:"TURNIERANMELDUNG"}),(0,we.jsx)("p",{children:"F\xfcr Turnier anmelden"})]}),(0,we.jsxs)("div",{className:"card-arrow",children:[(0,we.jsx)("span",{className:"arrow-text",children:"\xd6FFNEN"}),(0,we.jsx)("span",{className:"arrow-icon",children:"\u2192"})]})]})]})]})]})}),(0,we.jsxs)("div",{className:"landing-tournaments",children:[(0,we.jsx)("h2",{className:"tournaments-title",children:"Aktuelle Turniere"}),r?(0,we.jsx)("p",{className:"loading-text",children:"Lade Turniere..."}):t.length>0?(0,we.jsx)("div",{className:"tournaments-grid",children:t.map((e=>(0,we.jsxs)("div",{className:"tournament-card",children:[(0,we.jsx)("h3",{className:"tournament-name",children:e.name}),(0,we.jsxs)("p",{className:"tournament-date",children:["\ud83d\udcc5 ",new Date(e.datum).toLocaleDateString("de-DE")]}),(0,we.jsxs)("p",{className:"tournament-location",children:["\ud83d\udccd ",e.ort]}),(0,we.jsxs)("p",{className:"tournament-discipline",children:["\ud83e\udd4b ",e.disziplin]})]},e.turnier_id)))}):(0,we.jsx)("p",{className:"no-tournaments",children:"Aktuell keine Turniere verf\xfcgbar"})]})]})},Lo=()=>{const e=ne(),[t,n]=(0,s.useState)([]),[r,a]=(0,s.useState)(!0),[i,l]=(0,s.useState)(""),[o,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(!1),[h,m]=(0,s.useState)(null),[p,f]=(0,s.useState)(""),[g,x]=(0,s.useState)(""),[v,b]=(0,s.useState)(0);(0,s.useEffect)((()=>{(async()=>{const e=(()=>{console.log("\ud83d\udd04 Initialisiere User-Daten...");let e=null,t=null;const n=localStorage.getItem("clubData");if(n)try{const r=JSON.parse(n);console.log("\ud83c\udfe2 ClubData gefunden:",r),r.user&&(e=r.user,t=r.token,x("verein"),m(e.vereins_id),f(e.name||"Mein Verein"),console.log("\u2705 Verein-User gesetzt:",{vereins_id:e.vereins_id,name:e.name,rolle:"verein"}))}catch(i){console.error("\u274c Fehler beim Parsen der clubData:",i)}if(!e){const n=localStorage.getItem("adminData");if(n)try{const r=JSON.parse(n);console.log("\ud83d\udc51 AdminData gefunden:",r),r.user&&(e=r.user,t=r.token,x("admin"),f("Administrator"),m(null),console.log("\u2705 Admin-User gesetzt:",{rolle:"admin",name:"Administrator"}))}catch(i){console.error("\u274c Fehler beim Parsen der adminData:",i)}}return!(!e||!t)||(console.warn("\u26a0\ufe0f Keine g\xfcltigen User-Daten gefunden"),l("Bitte loggen Sie sich ein, um Anmeldungen vornehmen zu k\xf6nnen."),!1)})();if(e){const e=await(async()=>{try{const e=await fetch("/api/health",{method:"GET",timeout:5e3});return e.ok?(console.log("\u2705 Backend erreichbar"),!0):(console.warn("\u26a0\ufe0f Backend antwortet mit Fehler:",e.status),!1)}catch(i){return console.error("\u274c Backend nicht erreichbar:",i.message),l("Backend-Server nicht erreichbar. Bitte starten Sie den Server."),a(!1),!1}})();e&&j()}})()}),[v]);const j=async()=>{a(!0),l("");try{const e=localStorage.getItem("clubData"),t=localStorage.getItem("adminData");let r=null;if(e){r=JSON.parse(e).token}else if(t){r=JSON.parse(t).token}if(!r)throw new Error("Kein Authentifizierungstoken gefunden. Bitte loggen Sie sich ein.");console.log("\ud83d\udd11 Using token for API call");const a=`/api/turniere?${new URLSearchParams({zukunft:"true",anmeldeoffen:"true"})}`;console.log("\ud83c\udf10 API URL:",a);const i=await fetch(a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}});if(console.log("\ud83d\udce1 Response status:",i.status),!i.ok){if(401===i.status)throw new Error("Session abgelaufen. Bitte loggen Sie sich erneut ein.");throw new Error(`HTTP ${i.status}: Fehler beim Laden der Turniere`)}const s=await i.json();console.log("\ud83d\udcca Raw API response:",s);let l=[];s.success&&Array.isArray(s.data)?l=s.data:Array.isArray(s)?l=s:(console.warn("\u26a0\ufe0f Unexpected response format:",s),l=[]),console.log("\ud83c\udfaf Processed turniere:",l);(new Date).setHours(0,0,0,0);const o=l.filter((e=>{const t=void 0===e.isUpcoming||e.isUpcoming,n=void 0===e.canRegister||e.canRegister,r=void 0===e.registrationOpen||e.registrationOpen;return console.log(`\ud83d\udcc5 Turnier "${e.name}":`,{datum:e.datum_formatted||e.datum,anmeldeschluss:e.anmeldeschluss_formatted||e.anmeldeschluss,status:e.status,istZukunft:t,kannAnmelden:n,anmeldungOffen:r,verfuegbar:t&&n&&r}),t&&n&&r}));n(o),console.log("\u2705 Final verf\xfcgbare Turniere:",o.length),0===o.length&&l.length>0&&console.log("\u2139\ufe0f Turniere gefunden, aber keine verf\xfcgbar nach Filterung")}catch(Zo){console.error("\u274c Fehler beim Laden der Turniere:",Zo),l("Fehler beim Laden der Turniere: "+Zo.message)}finally{a(!1)}},y=e=>new Date(e).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}),k=e=>{if(!e)return null;const t=new Date,n=new Date(e)-t;return Math.ceil(n/864e5)},w=e=>{if(!e)return"normal";const t=k(e);return t<=3?"urgent":t<=7?"warning":"normal"};return r?(0,we.jsxs)("div",{className:"container",children:[(0,we.jsxs)("div",{className:"section-header",children:[(0,we.jsx)("h1",{className:"section-title",children:"Turnier-Anmeldung"}),(0,we.jsx)("p",{className:"section-subtitle",children:"Melden Sie Ihre Wettk\xe4mpfer f\xfcr verf\xfcgbare Turniere an"})]}),(0,we.jsxs)("div",{className:"flex justify-center items-center p-8",children:[(0,we.jsx)("div",{className:"spinner"}),(0,we.jsx)("p",{className:"ml-4",children:"Turniere werden geladen..."})]})]}):i?(0,we.jsxs)("div",{className:"container",children:[(0,we.jsxs)("div",{className:"section-header",children:[(0,we.jsx)("h1",{className:"section-title",children:"Turnier-Anmeldung"}),(0,we.jsx)("p",{className:"section-subtitle",children:"Melden Sie Ihre Wettk\xe4mpfer f\xfcr verf\xfcgbare Turniere an"})]}),(0,we.jsx)("div",{className:"alert alert-error",children:i}),(0,we.jsx)("button",{className:"btn btn-primary mt-4",onClick:j,children:"Erneut versuchen"})]}):(0,we.jsxs)("div",{className:"registration-page",children:[(0,we.jsxs)("div",{className:"registration-header",children:[(0,we.jsx)("h1",{children:"\ud83c\udfc6 Turnier-Anmeldung"}),(0,we.jsx)("p",{children:"Melden Sie Ihre Wettk\xe4mpfer f\xfcr verf\xfcgbare Turniere an"}),p&&(0,we.jsxs)("div",{className:"club-info",style:{marginTop:"15px",padding:"10px 20px",background:"rgba(255, 255, 255, 0.2)",borderRadius:"8px",backdropFilter:"blur(10px)"},children:[(0,we.jsx)("strong",{children:"Angemeldet als:"})," ",p," \ud83e\udd4b","admin"===g&&(0,we.jsx)("span",{children:" (Administrator)"}),(0,we.jsxs)("div",{style:{fontSize:"0.8rem",marginTop:"5px",opacity:.8},children:["Rolle: ",g||"Nicht erkannt"," | VereinsID: ",h||"Keine"]})]})]}),0===t.length?(0,we.jsx)("div",{className:"no-turniere",children:(0,we.jsxs)("div",{className:"no-turniere-content",children:[(0,we.jsx)("h3",{children:"Keine verf\xfcgbaren Turniere"}),(0,we.jsx)("p",{children:"Derzeit sind keine Turniere f\xfcr die Anmeldung verf\xfcgbar."}),(0,we.jsx)("p",{children:"Schauen Sie sp\xe4ter noch einmal vorbei."}),(0,we.jsx)("button",{className:"retry-button",onClick:j,children:"Aktualisieren"})]})}):(0,we.jsx)("div",{className:"turniere-grid",children:t.map((e=>{var t;return(0,we.jsxs)("div",{className:"turnier-registration-card",children:[(0,we.jsxs)("div",{className:"turnier-card-header",children:[(0,we.jsx)("h3",{children:e.name}),(0,we.jsxs)("span",{className:"turnier-datum",children:["\ud83d\udcc5 ",e.datum_formatted||y(e.datum)]})]}),(0,we.jsxs)("div",{className:"turnier-card-body",children:[(0,we.jsxs)("div",{className:"turnier-info",children:[(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"\ud83d\udccd Ort:"})," ",e.ort]}),(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"\ud83e\udd4b Disziplinen:"})," ",e.disziplin||"Nicht angegeben"]}),e.anmeldeschluss&&(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"\u23f0 Anmeldeschluss:"}),(0,we.jsxs)("span",{className:`deadline deadline-${w(e.anmeldeschluss)}`,children:[e.anmeldeschluss_formatted||y(e.anmeldeschluss),k(e.anmeldeschluss)&&(0,we.jsxs)("span",{style:{marginLeft:"8px",fontWeight:"bold",color:"#8B0000"},children:["(",k(e.anmeldeschluss)," Tage)"]})]})]}),e.daysUntil&&(0,we.jsxs)("p",{children:[(0,we.jsx)("strong",{children:"\u23f3 Startet in:"}),(0,we.jsxs)("span",{style:{color:e.daysUntil<=7?"#8B0000":"#28a745",fontWeight:"bold"},children:[e.daysUntil," Tagen"]})]})]}),(0,we.jsxs)("div",{className:"turnier-status",children:[(0,we.jsx)("span",{className:`status-badge ${null===(t=e.status)||void 0===t?void 0:t.toLowerCase()}`,children:e.status}),e.canRegister&&(0,we.jsx)("span",{style:{marginLeft:"10px",color:"#28a745",fontSize:"0.9rem",fontWeight:"bold"},children:"\u2705 Anmeldung m\xf6glich"})]})]}),(0,we.jsx)("div",{className:"turnier-card-footer",children:(0,we.jsx)("button",{className:"register-button",onClick:()=>(e=>{"admin"===g||"verein"===g&&h?(c(e),u(!0)):l("Bitte loggen Sie sich ein, um sich anzumelden")})(e),disabled:!e.canRegister,style:{opacity:e.canRegister?1:.6,cursor:e.canRegister?"pointer":"not-allowed"},children:e.canRegister?(0,we.jsx)(we.Fragment,{children:"\ud83c\udfc6 Jetzt anmelden"}):(0,we.jsx)(we.Fragment,{children:"\ud83d\udeab Anmeldung geschlossen"})})})]},e.turnier_id)}))}),(0,we.jsxs)("div",{className:"registration-info",children:[(0,we.jsx)("h3",{children:"\ud83d\udccb So funktioniert die Anmeldung"}),(0,we.jsxs)("div",{className:"info-grid",children:[(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("h4",{children:"1\ufe0f\u20e3 Turnier ausw\xe4hlen"}),(0,we.jsx)("p",{children:'W\xe4hlen Sie ein verf\xfcgbares Turnier aus der Liste oben und klicken Sie auf "Jetzt anmelden".'})]}),(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("h4",{children:"2\ufe0f\u20e3 Wettk\xe4mpfer ausw\xe4hlen"}),(0,we.jsx)("p",{children:"W\xe4hlen Sie die Wettk\xe4mpfer aus Ihrem Verein aus, die am Turnier teilnehmen sollen."})]}),(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("h4",{children:"3\ufe0f\u20e3 Anmeldung best\xe4tigen"}),(0,we.jsx)("p",{children:"Pr\xfcfen Sie alle Angaben und best\xe4tigen Sie die Anmeldung. Sie erhalten eine Best\xe4tigungsmail."})]}),(0,we.jsxs)("div",{className:"info-item",children:[(0,we.jsx)("h4",{children:"\ud83d\udca1 Tipp"}),(0,we.jsx)("p",{children:"Beachten Sie die Anmeldefristen! Versp\xe4tete Anmeldungen k\xf6nnen nicht ber\xfccksichtigt werden."})]})]})]}),d&&o&&(0,we.jsx)(io,{turnier:o,onClose:()=>{u(!1),c(null)},onWettkampferSelected:t=>{u(!1),b((e=>e+1)),e("/registration/bestaetigung",{state:{turnier:o,selectedWettkampfer:t,vereinId:"verein"===g?h:null===t||void 0===t?void 0:t.vereinId}})},onAnmeldungErfolgreich:t=>{var n;u(!1),c(null),console.log("\u2705 Anmeldung erfolgreich:",t),b((e=>e+1)),e("/registration/bestaetigung",{state:{turnier:o,anmeldungen:t,vereinId:"verein"===g?h:null===(n=t.verein)||void 0===n?void 0:n.vereins_id}})},vereinId:"verein"===g?h:null,userRole:g})]})},Po=()=>{const e=ee(),t=ne(),[n,r]=(0,s.useState)(!1),[a,i]=(0,s.useState)(""),[l,o]=(0,s.useState)(!1),{turnier:c,selectedWettkampfer:d,vereinId:u}=e.state||{};(0,s.useEffect)((()=>{c&&d&&u||t("/dashboard/registration")}),[c,d,u,t]);const h=e=>{const t=new Date,n=new Date(e),r=t.getFullYear()-n.getFullYear(),a=t.getMonth()-n.getMonth();return a<0||0===a&&t.getDate()<n.getDate()?r-1:r},m=e=>new Date(e).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"});return c&&d?l?(0,we.jsx)("div",{className:"anmeldung-container",children:(0,we.jsxs)("div",{className:"success-state",children:[(0,we.jsx)("div",{className:"success-icon",children:"\u2705"}),(0,we.jsx)("h2",{children:"Anmeldung erfolgreich!"}),(0,we.jsxs)("p",{children:["Ihre ",d.length,' Wettk\xe4mpfer wurden erfolgreich f\xfcr das Turnier "',c.turnier_name,'" angemeldet.']}),(0,we.jsx)("p",{children:"Sie werden automatisch zur \xdcbersicht weitergeleitet..."}),(0,we.jsx)("button",{onClick:()=>t("/dashboard/registration"),className:"continue-btn",children:"Sofort zur \xdcbersicht"})]})}):(0,we.jsx)("div",{className:"anmeldung-container",children:(0,we.jsxs)("div",{className:"anmeldung-content",children:[(0,we.jsxs)("div",{className:"page-header",children:[(0,we.jsx)("h1",{children:"Anmeldung best\xe4tigen"}),(0,we.jsx)("p",{children:"\xdcberpr\xfcfen Sie Ihre Anmeldedaten vor der finalen Best\xe4tigung"})]}),a&&(0,we.jsxs)("div",{className:"error-message",children:[(0,we.jsx)("strong",{children:"Fehler:"})," ",a]}),(0,we.jsxs)("div",{className:"anmeldung-summary",children:[(0,we.jsxs)("div",{className:"turnier-summary",children:[(0,we.jsx)("h2",{children:"\ud83c\udfc6 Turnier Information"}),(0,we.jsxs)("div",{className:"turnier-details",children:[(0,we.jsxs)("div",{className:"detail-row",children:[(0,we.jsx)("span",{className:"label",children:"Turnier:"}),(0,we.jsx)("span",{className:"value",children:c.turnier_name})]}),(0,we.jsxs)("div",{className:"detail-row",children:[(0,we.jsx)("span",{className:"label",children:"Datum:"}),(0,we.jsx)("span",{className:"value",children:m(c.datum)})]}),(0,we.jsxs)("div",{className:"detail-row",children:[(0,we.jsx)("span",{className:"label",children:"Ort:"}),(0,we.jsx)("span",{className:"value",children:c.ort})]}),(0,we.jsxs)("div",{className:"detail-row",children:[(0,we.jsx)("span",{className:"label",children:"Anmeldeschluss:"}),(0,we.jsx)("span",{className:"value",children:m(c.anmeldeschluss)})]}),c.startgebuehr&&(0,we.jsxs)("div",{className:"detail-row",children:[(0,we.jsx)("span",{className:"label",children:"Startgeb\xfchr:"}),(0,we.jsxs)("span",{className:"value",children:[c.startgebuehr,"\u20ac pro Wettk\xe4mpfer"]})]})]})]}),(0,we.jsxs)("div",{className:"wettkampfer-summary",children:[(0,we.jsxs)("h2",{children:["\ud83d\udc64 Angemeldete Wettk\xe4mpfer (",d.length,")"]}),(0,we.jsx)("div",{className:"wettkampfer-list",children:d.map(((e,t)=>(0,we.jsxs)("div",{className:"wettkampfer-summary-card",children:[(0,we.jsx)("div",{className:"wettkampfer-number",children:t+1}),(0,we.jsxs)("div",{className:"wettkampfer-main-info",children:[(0,we.jsxs)("h3",{children:[e.vorname," ",e.nachname]}),(0,we.jsxs)("div",{className:"wettkampfer-meta",children:[(0,we.jsxs)("span",{className:"age",children:[h(e.geburtsdatum)," Jahre"]}),(0,we.jsx)("span",{className:"gender",children:"M"===e.geschlecht?"M\xe4nnlich":"Weiblich"}),(0,we.jsxs)("span",{className:"weight",children:[e.gewicht," kg"]}),(0,we.jsx)("span",{className:"graduation",children:e.graduierung})]})]}),(0,we.jsx)("div",{className:"wettkampfer-status",children:(0,we.jsx)("span",{className:"status-badge ready",children:"Bereit"})})]},e.id)))})]}),c.startgebuehr&&(0,we.jsxs)("div",{className:"kosten-summary",children:[(0,we.jsx)("h2",{children:"\ud83d\udcb0 Kosten \xdcbersicht"}),(0,we.jsxs)("div",{className:"kosten-details",children:[(0,we.jsxs)("div",{className:"kosten-row",children:[(0,we.jsx)("span",{children:"Startgeb\xfchr pro Wettk\xe4mpfer:"}),(0,we.jsxs)("span",{children:[c.startgebuehr,"\u20ac"]})]}),(0,we.jsxs)("div",{className:"kosten-row",children:[(0,we.jsx)("span",{children:"Anzahl Wettk\xe4mpfer:"}),(0,we.jsx)("span",{children:d.length})]}),(0,we.jsxs)("div",{className:"kosten-row total",children:[(0,we.jsx)("span",{children:(0,we.jsx)("strong",{children:"Gesamtkosten:"})}),(0,we.jsx)("span",{children:(0,we.jsxs)("strong",{children:[(parseFloat(c.startgebuehr)*d.length).toFixed(2),"\u20ac"]})})]})]}),(0,we.jsx)("div",{className:"payment-note",children:(0,we.jsx)("p",{children:"\ud83d\udca1 Die Bezahlung erfolgt vor Ort am Turniertag"})})]}),(0,we.jsxs)("div",{className:"hinweise-section",children:[(0,we.jsx)("h2",{children:"\u2139\ufe0f Wichtige Hinweise"}),(0,we.jsxs)("ul",{className:"hinweise-list",children:[(0,we.jsx)("li",{children:"Nach der Anmeldung erhalten Sie eine Best\xe4tigung per E-Mail"}),(0,we.jsx)("li",{children:"\xc4nderungen sind bis 48 Stunden vor dem Turnier m\xf6glich"}),(0,we.jsx)("li",{children:"Bringen Sie g\xfcltige Ausweise f\xfcr alle Wettk\xe4mpfer mit"}),(0,we.jsx)("li",{children:"Die Gewichtskontrolle findet am Turniertag statt"}),(0,we.jsx)("li",{children:"Bei Fragen wenden Sie sich an info@tda-intl.com"})]})]})]}),(0,we.jsxs)("div",{className:"anmeldung-actions",children:[(0,we.jsx)("button",{onClick:()=>t(-1),className:"back-btn",disabled:n,children:"\u2190 Zur\xfcck"}),(0,we.jsx)("button",{onClick:async()=>{r(!0),i("");try{const e=localStorage.getItem("authToken"),n=d.map((e=>e.id)),r=await fetch("/api/anmeldungen",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({turnier_id:c.id,wettkampfer_ids:n,anmeldender_verein_id:u})});if(!r.ok){const e=await r.json();throw new Error(e.error||"Fehler bei der Anmeldung")}const a=await r.json();console.log("Anmeldung erfolgreich:",a),o(!0),setTimeout((()=>{t("/dashboard/registration")}),3e3)}catch(Zo){console.error("Fehler bei der Anmeldung:",Zo),i(Zo.message)}finally{r(!1)}},className:"confirm-btn",disabled:n,children:n?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsx)("div",{className:"button-spinner"}),"Anmeldung wird verarbeitet..."]}):(0,we.jsxs)(we.Fragment,{children:["\u2705 Verbindlich anmelden (",d.length," Wettk\xe4mpfer)"]})})]})]})}):(0,we.jsx)("div",{className:"anmeldung-container",children:(0,we.jsxs)("div",{className:"error-state",children:[(0,we.jsx)("h2",{children:"Fehler"}),(0,we.jsx)("p",{children:"Keine Anmeldedaten gefunden. Bitte starten Sie den Anmeldeprozess neu."}),(0,we.jsx)("button",{onClick:()=>t("/dashboard/registration"),className:"back-btn",children:"Zur\xfcck zur \xdcbersicht"})]})})},Oo={position:"fixed",top:"20px",right:"20px",zIndex:1e3,display:"flex",flexDirection:"column",gap:"10px",maxWidth:"300px"},Io=e=>({padding:"12px",borderRadius:"8px",backgroundColor:"score"===e?"#28a745":"fight-event"===e?"#007bff":"error"===e?"#dc3545":"#17a2b8",color:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",cursor:"pointer",fontSize:"14px",animation:"slideIn 0.3s ease-out"}),$o={display:"flex",flexDirection:"column",gap:"4px"},Wo={fontSize:"11px",opacity:.8},Mo={position:"fixed",top:"10px",left:"10px",display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",backgroundColor:"rgba(0,0,0,0.8)",color:"white",borderRadius:"20px",fontSize:"12px",fontWeight:"bold",zIndex:999},Ko=e=>({width:"8px",height:"8px",borderRadius:"50%",backgroundColor:e?"#28a745":"#dc3545",animation:e?"pulse 2s infinite":"none"}),Uo={fontSize:"11px",letterSpacing:"1px"};(()=>{if("undefined"!==typeof document){const e=document.createElement("style");e.textContent="\n      @keyframes slideIn {\n        from {\n          transform: translateX(100%);\n          opacity: 0;\n        }\n        to {\n          transform: translateX(0);\n          opacity: 1;\n        }\n      }\n      \n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    ",document.head.appendChild(e)}})();const Vo=e=>function(t){const[n,r]=(0,s.useState)(null),[a,i]=(0,s.useState)(!1),[l,o]=(0,s.useState)({}),[c,d]=(0,s.useState)([]);(0,s.useEffect)((()=>{const e=localStorage.getItem("token"),t=el(window.location.origin,{transports:["websocket","polling"]});return t.emit("authenticate",{token:e,userType:"spectator"}),t.on("connect",(()=>{i(!0),console.log("\ud83d\udd17 Live-Updates verbunden")})),t.on("disconnect",(()=>{i(!1),console.log("\ud83d\udc94 Live-Updates getrennt")})),t.on("live-update",(e=>{console.log("\ud83d\udce1 Live-Update empfangen:",e);const{type:t,kampfId:n,data:r}=e;o((e=>({...e,[n]:{...e[n],...r,lastUpdate:(new Date).toISOString()}}))),u({type:t,kampfId:n,message:h(t,r),timestamp:(new Date).toISOString()})})),t.on("fight-update",(e=>{console.log("\ud83e\udd4a Kampf-Update:",e),o((t=>({...t,[e.kampfId]:{...t[e.kampfId],...e,lastUpdate:(new Date).toISOString()}})))})),t.on("score-update",(e=>{console.log("\ud83c\udfaf Score-Update:",e),o((t=>({...t,[e.kampfId]:{...t[e.kampfId],kaempfer1Points:e.kaempfer1Points,kaempfer2Points:e.kaempfer2Points,lastScoreUpdate:e.lastUpdate,lastUpdate:(new Date).toISOString()}})))})),t.on("fight-event",(e=>{console.log("\ud83d\udce2 Kampf-Event:",e),o((t=>{var n;return{...t,[e.kampfId]:{...t[e.kampfId],lastEvent:e,status:null===(n=e.eventData)||void 0===n?void 0:n.status,lastUpdate:(new Date).toISOString()}}})),u({type:"fight-event",kampfId:e.kampfId,message:`Kampf ${e.kampfId}: ${m(e.eventType)}`,timestamp:e.timestamp})})),t.on("timer-update",(e=>{o((t=>({...t,[e.kampfId]:{...t[e.kampfId],timer:e,lastUpdate:(new Date).toISOString()}})))})),r(t),()=>{t.disconnect()}}),[]);const u=e=>{const t={...e,id:Date.now()};d((e=>[t,...e.slice(0,9)])),setTimeout((()=>{d((e=>e.filter((e=>e.id!==t.id))))}),5e3)},h=(e,t)=>{switch(e){case"score":return`Score: ${t.kaempfer1Points||0}:${t.kaempfer2Points||0}`;case"event":return`Event: ${m(t.eventType)}`;case"kampf_finished":return`Kampf beendet: ${t.kaempfer1Points||0}:${t.kaempfer2Points||0}`;default:return`Update: ${e}`}},m=e=>({start:"Kampf gestartet",pause:"Kampf pausiert",resume:"Kampf fortgesetzt",end:"Kampf beendet",warning:"Verwarnung",disqualification:"Disqualifikation",time_up:"Zeit abgelaufen"}[e]||e),p=e=>{d((t=>t.filter((t=>t.id!==e))))},f={...t,isLiveConnected:a,liveData:l,notifications:c,joinFightRoom:e=>{n&&a&&(n.emit("join-fight",{kampfId:e}),console.log(`\ud83c\udfdf\ufe0f Kampf-Room ${e} beigetreten`))},leaveFightRoom:e=>{n&&a&&(n.leave(`fight_${e}`),console.log(`\ud83d\udeaa Kampf-Room ${e} verlassen`))},getLiveDataForFight:e=>l[e]||{},removeNotification:p,liveSocket:n};return(0,we.jsxs)("div",{style:{position:"relative"},children:[c.length>0&&(0,we.jsx)("div",{style:Oo,children:c.slice(0,3).map((e=>(0,we.jsx)("div",{style:Io(e.type),onClick:()=>p(e.id),children:(0,we.jsxs)("div",{style:$o,children:[(0,we.jsxs)("strong",{children:["Kampf ",e.kampfId]}),(0,we.jsx)("div",{children:e.message}),(0,we.jsx)("div",{style:Wo,children:new Date(e.timestamp).toLocaleTimeString()})]})},e.id)))}),(0,we.jsxs)("div",{style:Mo,children:[(0,we.jsx)("div",{style:Ko(a)}),(0,we.jsx)("span",{style:Uo,children:a?"LIVE":"OFFLINE"})]}),(0,we.jsx)(e,{...f})]})},qo=e=>{let{kampf:t,isFinale:n,liveData:r,joinFightRoom:a,isLiveConnected:i}=e;const s=r[t.id]||{},l=Object.keys(s).length>0,o=void 0!==s.kaempfer1Points?s.kaempfer1Points:t.punkte_kaempfer1||0,c=void 0!==s.kaempfer2Points?s.kaempfer2Points:t.punkte_kaempfer2||0,d=s.status||t.status||"pending";return(0,we.jsxs)("div",{className:`kampf-card ${(e=>{switch(e){case"finished":return"kampf-finished";case"running":return"kampf-running";case"ready":return"kampf-ready";default:return"kampf-pending"}})(d)} ${n?"finale-kampf":""} ${l?"live-active":""}`,onClick:()=>{i&&a&&(a(t.id),console.log(`\ud83c\udfdf\ufe0f Live-Updates f\xfcr Kampf ${t.id} aktiviert`))},style:{cursor:i?"pointer":"default"},children:[(0,we.jsxs)("div",{className:"kampf-header",children:[(0,we.jsxs)("span",{className:"kampf-nummer",children:["#",t.kampf_nummer]}),(0,we.jsxs)("span",{className:"kampf-status",children:[(e=>{switch(e){case"finished":return"\u2705";case"running":return"\ud83e\udd4a";case"ready":return"\u23f1\ufe0f";default:return"\u23f3"}})(d)," ",d.toUpperCase(),l&&(0,we.jsx)("span",{className:"live-indicator",children:"\ud83d\udd34 LIVE"})]})]}),(0,we.jsxs)("div",{className:"kampf-fighters",children:[(0,we.jsx)("div",{className:"fighter fighter-1 "+(t.gewinner_id===t.kaempfer1_id?"winner":t.gewinner_id?"loser":""),children:t.kaempfer1_vorname&&t.kaempfer1_nachname?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("div",{className:"fighter-name",children:[t.kaempfer1_vorname," ",t.kaempfer1_nachname]}),(0,we.jsx)("div",{className:"fighter-verein",children:t.kaempfer1_verein}),("finished"===d||"running"===d||l)&&(0,we.jsxs)("div",{className:"fighter-points "+(l?"live-points":""),children:[o," Punkte",l&&(0,we.jsx)("span",{className:"live-pulse",children:"\u25cf"})]})]}):(0,we.jsx)("div",{className:"fighter-placeholder",children:"Wartend..."})}),(0,we.jsx)("div",{className:"vs-divider",children:"VS"}),(0,we.jsx)("div",{className:"fighter fighter-2 "+(t.gewinner_id===t.kaempfer2_id?"winner":t.gewinner_id?"loser":""),children:t.kaempfer2_vorname&&t.kaempfer2_nachname?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("div",{className:"fighter-name",children:[t.kaempfer2_vorname," ",t.kaempfer2_nachname]}),(0,we.jsx)("div",{className:"fighter-verein",children:t.kaempfer2_verein}),("finished"===d||"running"===d||l)&&(0,we.jsxs)("div",{className:"fighter-points "+(l?"live-points":""),children:[c," Punkte",l&&(0,we.jsx)("span",{className:"live-pulse",children:"\u25cf"})]})]}):(0,we.jsx)("div",{className:"fighter-placeholder",children:"Wartend..."})})]}),"finished"===t.status&&(0,we.jsxs)("div",{className:"kampf-result",children:[(0,we.jsxs)("div",{className:"winner-highlight",children:["\ud83c\udfc6 Sieger: ",t.gewinner_vorname," ",t.gewinner_nachname]}),t.kampfzeit_minuten>0&&(0,we.jsxs)("div",{className:"kampf-time",children:["Kampfzeit: ",t.kampfzeit_minuten,":",t.kampfzeit_sekunden.toString().padStart(2,"0")]})]}),t.geplante_zeit&&(0,we.jsxs)("div",{className:"kampf-schedule",children:["\ud83d\udcc5 ",new Date(t.geplante_zeit).toLocaleString("de-DE")]}),t.matte_nummer&&(0,we.jsxs)("div",{className:"kampf-matte",children:["\ud83e\udd4b Matte ",t.matte_nummer]})]})},Go=e=>{let{teilnehmer:t}=e;return(0,we.jsxs)("div",{className:`participant-card ${(e=>{switch(e){case"winner":return"participant-winner";case"eliminated":return"participant-eliminated";default:return"participant-active"}})(t.status)}`,children:[(0,we.jsxs)("div",{className:"participant-header",children:[t.seed_position&&(0,we.jsxs)("span",{className:"seed-position",children:["#",t.seed_position]}),(0,we.jsx)("span",{className:"participant-status",children:(e=>{switch(e){case"winner":return"\ud83c\udfc6";case"eliminated":return"\u274c";default:return"\ud83e\udd4a"}})(t.status)})]}),(0,we.jsxs)("div",{className:"participant-info",children:[(0,we.jsxs)("div",{className:"participant-name",children:[t.vorname," ",t.nachname]}),(0,we.jsxs)("div",{className:"participant-details",children:[(0,we.jsx)("span",{className:"participant-verein",children:t.verein_name}),(0,we.jsxs)("span",{className:"participant-weight",children:[t.gewicht,"kg"]})]}),(0,we.jsxs)("div",{className:"participant-level",children:[t.gurtfarbe," \u2022 ",t.skill_level]})]}),t.platzierung&&(0,we.jsxs)("div",{className:"participant-ranking",children:["\ud83e\udd47 Platz ",t.platzierung]}),t.ausgeschieden_in_runde&&(0,we.jsxs)("div",{className:"participant-elimination",children:["Ausgeschieden in Runde ",t.ausgeschieden_in_runde]})]})};Vo((e=>{var t;let{bracketData:n,isLiveConnected:r,liveData:a,joinFightRoom:i,getLiveDataForFight:l}=e;const[o,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(0);(0,s.useEffect)((()=>{if(n&&n.kaempfe){const e=[...n.kaempfe].sort(((e,t)=>e.runde!==t.runde?e.runde-t.runde:e.kampf_nummer-t.kampf_nummer));c(e);const t=Math.max(...e.map((e=>e.runde)));u(t)}}),[n]);const h=e=>o.filter((t=>t.runde===e)),m=e=>e===d?"Finale":e===d-1?"Halbfinale":e===d-2?"Viertelfinale":e===d-3?"Achtelfinale":`Runde ${e}`;return n&&n.bracket?0===o.length?(0,we.jsxs)("div",{className:"bracket-empty",children:[(0,we.jsx)("h3",{children:"\ud83e\udd4a Noch keine K\xe4mpfe generiert"}),(0,we.jsx)("p",{children:"Das Bracket wurde erstellt, aber die K\xe4mpfe sind noch nicht generiert."}),(0,we.jsx)("button",{className:"btn btn-primary",children:"K\xe4mpfe generieren"})]}):(0,we.jsxs)("div",{className:"bracket-visualization",children:[(0,we.jsxs)("div",{className:"bracket-header",children:[(0,we.jsx)("h2",{children:n.bracket.bracket_name}),(0,we.jsxs)("div",{className:"bracket-info",children:[(0,we.jsx)("span",{className:"bracket-type",children:n.bracket.bracket_type.toUpperCase()}),(0,we.jsxs)("span",{className:"participant-count",children:[(null===(t=n.teilnehmer)||void 0===t?void 0:t.length)||0," / ",n.bracket.max_participants," Teilnehmer"]}),(0,we.jsx)("span",{className:`bracket-status status-${n.bracket.status}`,children:n.bracket.status.toUpperCase()})]})]}),(0,we.jsx)("div",{className:"bracket-tree",children:Array.from({length:d},((e,t)=>t+1)).map((e=>(0,we.jsxs)("div",{className:`bracket-round round-${e}`,children:[(0,we.jsxs)("div",{className:"round-header",children:[(0,we.jsx)("h3",{children:m(e)}),(0,we.jsxs)("span",{className:"round-number",children:["Runde ",e]})]}),(0,we.jsx)("div",{className:"round-kaempfe",children:h(e).map((t=>(0,we.jsx)(qo,{kampf:t,isFinale:e===d,liveData:a||{},joinFightRoom:i,isLiveConnected:r},t.kampf_id)))})]},e)))}),n.teilnehmer&&n.teilnehmer.length>0&&(0,we.jsxs)("div",{className:"bracket-participants",children:[(0,we.jsx)("h3",{children:"Teilnehmer"}),(0,we.jsx)("div",{className:"participants-grid",children:n.teilnehmer.map((e=>(0,we.jsx)(Go,{teilnehmer:e},e.wettkaempfer_id)))})]})]}):(0,we.jsxs)("div",{className:"bracket-loading",children:[(0,we.jsx)("div",{className:"loading-spinner"}),(0,we.jsx)("p",{children:"Bracket wird geladen..."})]})}));const Ho=function(){const[e,t]=(0,s.useState)(!1),[n,r]=(0,s.useState)(!1),[a,i]=(0,s.useState)(null),[l,o]=(0,s.useState)(!1),c=ne();ye(),(0,s.useEffect)((()=>{const e=localStorage.getItem("token")||localStorage.getItem("authToken"),n=localStorage.getItem("clubData");if(e&&n)try{var a,s;const l=JSON.parse(n);t(!0);const o="admin"===(null===(a=l.user)||void 0===a?void 0:a.role)||"info@tda-intl.com"===l.email||"info@tda-intl.com"===(null===(s=l.user)||void 0===s?void 0:s.email);r(o),i(l),l.token&&e!==l.token&&(console.log("\ud83d\udd27 Synchronisiere JWT-Token..."),localStorage.setItem("token",l.token),localStorage.setItem("authToken",l.token)),console.log("\u2705 Benutzer automatisch eingeloggt:",o?"Admin":"Verein")}catch(l){console.error("\u274c Fehler beim Laden der gespeicherten Daten:",l),d()}}),[]);const d=()=>{console.log("\ud83d\udeaa Logout..."),localStorage.removeItem("token"),localStorage.removeItem("authToken"),localStorage.removeItem("clubData"),localStorage.removeItem("clubId"),localStorage.removeItem("vereins_id"),t(!1),r(!1),i(null),c("/",{replace:!0}),console.log("\u2705 Logout erfolgreich")};return(0,s.useEffect)((()=>{0}),[e,n]),(0,we.jsxs)("div",{children:[(0,we.jsxs)(be,{children:[(0,we.jsx)(xe,{path:"/",element:e?(0,we.jsx)(ge,{to:"/dashboard",replace:!0}):(0,we.jsx)(Fo,{})}),(0,we.jsx)(xe,{path:"/login",element:(0,we.jsx)(Bo,{onLogin:e=>{var n,a;console.log("\ud83d\udd11 Login-Daten erhalten:",e);const s="admin"===(null===(n=e.user)||void 0===n?void 0:n.role)||"info@tda-intl.com"===e.email||"info@tda-intl.com"===(null===(a=e.user)||void 0===a?void 0:a.email),l=e.token;if(l)localStorage.setItem("token",l),localStorage.setItem("authToken",l),console.log("\u2705 JWT-Token gespeichert:",l.substring(0,30)+"...");else{console.error("\u274c Kein Token in Login-Response gefunden!",e);const t=s?"admin-auth-token":"user-auth-token";localStorage.setItem("token",t),localStorage.setItem("authToken",t),console.warn("\u26a0\ufe0f Verwende Fallback-Token:",t)}localStorage.setItem("clubData",JSON.stringify(e)),t(!0),r(s),i(e),console.log("\u2705 Login erfolgreich:",s?"Admin":"Verein"),c("/dashboard",{replace:!0})}})}),(0,we.jsx)(xe,{path:"/register",element:(0,we.jsx)(Ro,{})}),(0,we.jsx)(xe,{path:"/registration",element:(0,we.jsx)(Lo,{})}),(0,we.jsx)(xe,{path:"/registration/bestaetigung",element:e?(0,we.jsx)(Po,{}):(0,we.jsx)(ge,{to:"/login",replace:!0})}),(0,we.jsx)(xe,{path:"/dashboard/*",element:(0,we.jsx)(Do,{})}),(0,we.jsx)(xe,{path:"/formen-schreiber",element:(0,we.jsx)(Gl,{})}),e&&!n&&(0,we.jsxs)(we.Fragment,{children:[(0,we.jsx)(xe,{path:"/profil",element:(0,we.jsx)(xl,{})}),(0,we.jsx)(xe,{path:"/turniere",element:(0,we.jsx)(fl,{})})]}),(0,we.jsx)(xe,{path:"*",element:(0,we.jsx)(ge,{to:"/",replace:!0})})]}),e&&l&&(0,we.jsx)(De,{isOpen:l,onClose:()=>o(!1),clubData:a,onUpdate:e=>{localStorage.setItem("clubData",JSON.stringify(e)),i(e),o(!1),console.log("\u2705 Club-Daten aktualisiert")}}),!1]})},Jo=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:a,getLCP:i,getTTFB:s}=t;n(e),r(e),a(e),i(e),s(e)}))};o.createRoot(document.getElementById("root")).render((0,we.jsx)(Ml,{children:(0,we.jsx)(Ho,{})})),Jo()})();
//# sourceMappingURL=main.efde66d4.js.map